<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/images/manifest.json">
  <meta name="msapplication-config" content="/images/browserconfig.xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jx2lee.github.io","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"hide","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"Z4A3UF1R2X","apiKey":"dee49d5f8367c0f900b64906cfe42f19","indexName":"my_blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Docker Image에 대해 알아보자">
<meta property="og:type" content="article">
<meta property="og:title" content="[Cloud] Docker Image">
<meta property="og:url" content="https://jx2lee.github.io/2019/09/23/cloud-docker_image/index.html">
<meta property="og:site_name" content="jx2lee 블로그">
<meta property="og:description" content="Docker Image에 대해 알아보자">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-09-22T15:00:00.000Z">
<meta property="article:modified_time" content="2020-03-30T15:06:23.519Z">
<meta property="article:author" content="Jaejun Lee">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jx2lee.github.io/2019/09/23/cloud-docker_image/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>[Cloud] Docker Image | jx2lee 블로그</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

  <!-- Google AdSense start -->
  <script data-ad-client="ca-pub-2024744229492552" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <!-- Google AdSense end -->
  <meta name="google-site-verification" content="mt-wza5WUtvq1j8P-WsZN7mrSgXgOawPOdnhsjdlUGg" />
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">jx2lee 블로그</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">focusing@</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://jx2lee.github.io/2019/09/23/cloud-docker_image/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jaejun Lee">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jx2lee 블로그">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          [Cloud] Docker Image
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2019-09-23 00:00:00" itemprop="dateCreated datePublished" datetime="2019-09-23T00:00:00+09:00">2019-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-03-31 00:06:23" itemprop="dateModified" datetime="2020-03-31T00:06:23+09:00">2020-03-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cloud/" itemprop="url" rel="index"><span itemprop="name">Cloud</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/09/23/cloud-docker_image/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/09/23/cloud-docker_image/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Docker Image에 대해 알아보자</p>
<a id="more"></a>

<h1 id="Docker-Image"><a href="#Docker-Image" class="headerlink" title="Docker Image"></a>Docker Image</h1><ul>
<li><p>모든 <code>Docker Container</code>는 <code>Image</code>에 기반하고</p>
<p><code>Image</code>는 <strong>Docker로 배포하고 실행하기 위한 모든 것의 기반을 제공</strong></p>
</li>
</ul>
<p><code>Image 특징</code></p>
<ul>
<li>Container를 실행하려면 docker Image가 필요한데, 이는 <code>공개된 것을 다운로드</code> 하거나 <code>직접 이미지를 생성</code> </li>
<li>모든 docker Image는 하나 이상의 파일 시스템 계층으로 이루어짐<ul>
<li>파일 시스템 계층은 이미지 생성을 위해 적용되는 개별 빌드 단계마다 <code>1:1 직접 매핑</code></li>
</ul>
</li>
<li>이미지 관리를 위해 docker는 <code>스토리지 백엔드(Stroage backend)</code>에 크게 의존<ul>
<li>이미지를 구성하는 파일 시스템 계층을 만들고 관리하기 위해 리눅스 파일 시스템과 통신하는 역할</li>
<li>AUFS, BTRFS, 디바이스-매퍼, 오버레이 등<ul>
<li>빠른 이미지 관리를 위해 <code>CoW(Copy-on-Write)</code> 시스템 제공</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h1><p><code>Dockerfile</code>은 이미지 생성에 필요한 모든 단계를 기술한 파일로, 보통 App의 소스 코드 저장의 root 디렉토리에 포함된다.  구조 설명을 위해 <em>Node.js 기반 애플리케이션을 위한 컨테이너</em>를 만드는 예제의 Dockerfile를 살펴본다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">FROM node:11.11.0</span><br><span class="line"></span><br><span class="line">LABEL <span class="string">"maintainer"</span>=<span class="string">"anna@example.com"</span></span><br><span class="line">LABEL <span class="string">"rating"</span>=<span class="string">"Five Stars"</span> <span class="string">"class"</span>=<span class="string">"First Class"</span></span><br><span class="line"></span><br><span class="line">USER root</span><br><span class="line"></span><br><span class="line">ENV AP /data/app</span><br><span class="line">ENV SCPATH /etc/supervisor/conf.d</span><br><span class="line"></span><br><span class="line">RUN apt-get -y update</span><br><span class="line"></span><br><span class="line"><span class="comment"># The daemons</span></span><br><span class="line">RUN apt-get -y install supervisor</span><br><span class="line">RUN mkdir -p /var/<span class="built_in">log</span>/supervisor</span><br><span class="line"></span><br><span class="line"><span class="comment"># Supervisor Configuration</span></span><br><span class="line">ADD ./supervisord/conf.d/* <span class="variable">$SCPATH</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Application Code</span></span><br><span class="line">ADD *.js* <span class="variable">$AP</span>/</span><br><span class="line"></span><br><span class="line">WORKDIR <span class="variable">$AP</span></span><br><span class="line"></span><br><span class="line">RUN npm install</span><br><span class="line"></span><br><span class="line">CMD [<span class="string">"supervisord"</span>, <span class="string">"-n"</span>]</span><br></pre></td></tr></table></figure>

<p>파일 각 라인은 도커에 의해 저장되는 새 이미지 계층을 만든다. 이렇게 설계한 것은 새로운 이미지를 빌드 할 때 <code>변경된 계층만</code>을 새로 빌드하기 위함이다. 각 라인을 차례대로 훑어본다.</p>
<p><strong>FROM node:11.11.0</strong></p>
<p>이 부분은  <code>특정 노드 버젼 (node.11.11.0)</code>으로 고정한 우분투 리눅스 이미지를 제공한다는 뜻이다. 이처럼 도커 허브를 통해 노드를 위한 공식 이미지를 받을 수 있고, <code>일반적인 리눅스 이미지</code>에서도 빌드 가능하다.</p>
<p><strong>LABEL “maintainer”=”<a href="mailto:anna@example.com">anna@example.com</a>“ (LABEL “rating”=”Five Stars” “class”=”First Class”)</strong></p>
<p><code>Image</code>나 <code>Container</code>에 <code>라벨 (Label)</code>을 적용하는 기능이다. <code>key-value</code>형태로 메타데이터에 추가할 수 있고, 이미지 빌드 후 <code>docker inspect</code> 명령어로 확인이 가능하다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker inspect <span class="built_in">test</span>/docker-node-hello</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"Id"</span>: <span class="string">"sha256:fd425ed5d292360c4b20bb193c402e4fb939b73e07a7f7b6f600e31c9d3a63f8"</span>,</span><br><span class="line">			...</span><br><span class="line">			...</span><br><span class="line">            <span class="string">"Image"</span>: <span class="string">"sha256:40ce3ed86b2ce0c74ba5d6de3ec99fca6982ef43355956502bf7adb62b973d05"</span>,</span><br><span class="line">            <span class="string">"Volumes"</span>: null,</span><br><span class="line">            <span class="string">"WorkingDir"</span>: <span class="string">"/data/app"</span>,</span><br><span class="line">            <span class="string">"Entrypoint"</span>: null,</span><br><span class="line">            <span class="string">"OnBuild"</span>: [],</span><br><span class="line">            <span class="string">"Labels"</span>: &#123;</span><br><span class="line">                <span class="string">"class"</span>: <span class="string">"First Class"</span>,</span><br><span class="line">                <span class="string">"maintainer"</span>: <span class="string">"anna@example.com"</span>,</span><br><span class="line">                <span class="string">"rating"</span>: <span class="string">"Five Stars"</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br></pre></td></tr></table></figure>

<p><strong>USER root</strong></p>
<p>기본적으로<code>docker Container 내 모든 프로세스를 root</code>로 실행하지만, 때에 따라 USER 명령어로 <code>특정 사용자</code>로 지정할 수 있다.</p>
<blockquote>
<p> <em>(Container가 호스트 커널 위에서 동작하므로 잠재적 보안 위협이 있을 수 있다. root 보단 특정 사용자 계정으로 실행해야 한다고 권고한다.)</em></p>
</blockquote>
<p>** ENV AP(SCPATH) /data/app( /etc/supervisor/conf.d) **</p>
<p>shell 환경 변수 설정 단계</p>
<p><strong>RUN ~</strong></p>
<p><code>파일/디렉터리 구조를 만들고</code> <code>요구되는 소프트웨어를 설치</code>하기 위한 단계로, 위 ENV 단계에서 설정한 환경변수로 간략하게 작성할 수 있다.</p>
<p>RUN apt-get -y update</p>
<p>RUN apt-get -y install supervisor<br>RUN mkdir -p /var/log/supervisor</p>
<blockquote>
<p> <em>(yum/apt-get update의 경우 빌드 시간이 오래걸릴 수 있다. 이렇게 Dockerfile내 명시하는 것이 아닌 업데이트가 적용된 기본 리눅스 이미지 위에 빌드할 수 있도록 하는 것이 좋다고 권장한다</em>)</p>
</blockquote>
<p><strong>ADD ./supervisord/conf.d/* $SCPATH/ (ADD <em>.js</em> $AP/)</strong></p>
<p><code>로컬 파일 시스템의 파일</code>을 <code>Image로 카피</code>하는 단계이다. <code>코드</code>나 필요한 <code>보조 파일</code>들을 카피하는데 주로 쓰인다.</p>
<p><strong>WORKDIR $AP</strong></p>
<p>작업 디렉토리를 변경하는 단계이다. 이처럼 빌드 시 변경되는 사항의 경우, <code>Dockerfile 작성 시 최대한 뒤쪽으로 작성하기를 권장한다.</code>왜냐면 이미지를 새로 빌드하면 처음으로 바뀐 부분부터 새로 빌드되기 때문이다.</p>
<p><strong>CMD [“supervisord”, “-n”]</strong></p>
<p>Container 안에서 실행하고자 하는 프로세스를 띄우는 명령어를 작성하는 단계이다. 커뮤니티 내에서 많은 논란이 있었지만 <code>컨테이너 내 하나의 프로세스만 실행</code>하는 것이 가장 좋다고 말한다. <code>컨테이너는 단일 기능만을 제공한다</code>는 철학(?)에 기초한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 conf.d]$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">8affdbc03b3e        example/docker-node-hello:lastest   <span class="string">"supervisord -n"</span>    22 hours ago        Up 26 minutes       0.0.0.0:8080-&gt;8080/tcp   romantic_haibt</span><br></pre></td></tr></table></figure>

<h1 id="Image-Build"><a href="#Image-Build" class="headerlink" title="Image Build"></a>Image Build</h1><blockquote>
<p> 위 Dockerfile을 기반으로 한 이미지를 빌드해보고자 한다. git을 이용해 예제 애플리케이션 저장소를 복제해온다.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ git <span class="built_in">clone</span> https://github.com/spkane/docker-node-hello.git</span><br><span class="line">Cloning into <span class="string">'docker-node-hello'</span>...</span><br><span class="line">remote: Enumerating objects: 47, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 47 (delta 0), reused 0 (delta 0), pack-reused 47</span><br><span class="line">Unpacking objects: 100% (47/47), <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">[kuber@node2 ~]$ <span class="built_in">cd</span> docker-node-hello/</span><br><span class="line">[kuber@node2 docker-node-hello]$</span><br></pre></td></tr></table></figure>

<p>git 디렉토리를 제외한 파일들을 살펴보면 다음과 같다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ tree -a -I .git</span><br><span class="line">.</span><br><span class="line">├── Dockerfile</span><br><span class="line">├── .dockerignore</span><br><span class="line">├── .gitignore</span><br><span class="line">├── index.js</span><br><span class="line">├── Makefile</span><br><span class="line">├── package.json</span><br><span class="line">├── README.md</span><br><span class="line">├── supervisord</span><br><span class="line">│   └── conf.d</span><br><span class="line">│       ├── node.conf</span><br><span class="line">│       └── supervisord.conf</span><br><span class="line">└── Vagrantfile</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em><code>.dockerignore</code> : docker Image 빌드 시 도커 호스트에 업로드하고 싶지 않은 파일이나 디렉토리를 지정하는 파일</em></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ cat .dockerignore </span><br><span class="line">.git</span><br></pre></td></tr></table></figure>

<ul>
<li><code>package.json</code> : Node.js 애플리케이션 정의 및 의존성 나열 파일</li>
<li><code>index.js</code> : 애플리케이션 메인 소스 코드</li>
<li><code>supervisord</code> : 애플리케이션 시작 및 모니터링이 가능한 supervisord을 위한 설정 파일이 포함된 폴더</li>
</ul>
<p>그럼 이제 Image를 빌드해보도록 한다. 명령어에 쓰이는 자세한 옵션들은 <a href="http://bit.ly/1THKRk0" target="_blank" rel="noopener">공식문서</a>를 참고하면 된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker build -t example/docker-node-hello:lastest .</span><br><span class="line">Sending build context to Docker daemon 15.87 kB</span><br><span class="line">Step 1/14 : FROM node:11.11.0</span><br><span class="line">Trying to pull repository docker.io/library/node ... </span><br><span class="line">11.11.0: Pulling from docker.io/library/node</span><br><span class="line">22dbe790f715: Pull complete </span><br><span class="line">0250231711a0: Pull complete </span><br><span class="line">6fba9447437b: Pull complete </span><br><span class="line">c2b4d327b352: Pull complete </span><br><span class="line">270e1baa5299: Pull complete </span><br><span class="line">08ba2f9dd763: Pull complete </span><br><span class="line">edf54285ab13: Pull complete </span><br><span class="line">4d751c169397: Pull complete </span><br><span class="line">Digest: sha256:065610e9b9567dfecf10f45677f4d372a864a74a67a7b2089f5f513606e28ede</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> docker.io/node:11.11.0</span><br><span class="line"> ---&gt; 9ff38e3a6d9d</span><br><span class="line">Step 2/14 : LABEL <span class="string">"maintainer"</span> <span class="string">"anna@example.com"</span></span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> d0c3d1590e1f</span><br><span class="line"> ---&gt; b4855e6ce77c</span><br><span class="line">Removing intermediate container d0c3d1590e1f</span><br><span class="line">Step 3/14 : LABEL <span class="string">"rating"</span> <span class="string">"Five Stars"</span> <span class="string">"class"</span> <span class="string">"First Class"</span></span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 04a73c43a44a</span><br><span class="line"> ---&gt; 2ebbef69d1b3</span><br><span class="line">Removing intermediate container 04a73c43a44a</span><br><span class="line">Step 4/14 : USER root</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 5de276a155e2</span><br><span class="line"> ---&gt; 8ad740a32fdd</span><br><span class="line">Removing intermediate container 5de276a155e2</span><br><span class="line">Step 5/14 : ENV AP /data/app</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> aa77a9763782</span><br><span class="line"> ---&gt; 45925bd0fb66</span><br><span class="line">Removing intermediate container aa77a9763782</span><br><span class="line">Step 6/14 : ENV SCPATH /etc/supervisor/conf.d</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 931030d51457</span><br><span class="line"> ---&gt; a2975676fd6d</span><br><span class="line">Removing intermediate container 931030d51457</span><br><span class="line">Step 7/14 : RUN apt-get -y update</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> ecc80b77c428</span><br><span class="line"></span><br><span class="line">Ign:1 http://deb.debian.org/debian stretch InRelease</span><br><span class="line">Get:2 http://deb.debian.org/debian stretch-updates InRelease [91.0 kB]</span><br><span class="line">Get:3 http://deb.debian.org/debian stretch Release [118 kB]</span><br><span class="line">Get:4 http://security.debian.org/debian-security stretch/updates InRelease [94.3 kB]</span><br><span class="line">Get:5 http://deb.debian.org/debian stretch-updates/main amd64 Packages [27.4 kB]</span><br><span class="line">Get:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [506 kB]</span><br><span class="line">Get:7 http://deb.debian.org/debian stretch Release.gpg [2365 B]</span><br><span class="line">Get:8 http://deb.debian.org/debian stretch/main amd64 Packages [7086 kB]</span><br><span class="line">Fetched 7925 kB <span class="keyword">in</span> 3s (2531 kB/s)</span><br><span class="line">Reading package lists...</span><br><span class="line"> ---&gt; 37d8e3e4a4b4</span><br><span class="line">Removing intermediate container ecc80b77c428</span><br><span class="line">Step 8/14 : RUN apt-get -y install supervisor</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 74da13fa61de</span><br><span class="line"></span><br><span class="line">Reading package lists...</span><br><span class="line">Building dependency tree...</span><br><span class="line">Reading state information...</span><br><span class="line">The following additional packages will be installed:</span><br><span class="line">  python-meld3 python-pkg-resources</span><br><span class="line">Suggested packages:</span><br><span class="line">  python-setuptools supervisor-doc</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  python-meld3 python-pkg-resources supervisor</span><br><span class="line">0 upgraded, 3 newly installed, 0 to remove and 57 not upgraded.</span><br><span class="line">Need to get 483 kB of archives.</span><br><span class="line">After this operation, 2157 kB of additional disk space will be used.</span><br><span class="line">Get:1 http://deb.debian.org/debian stretch/main amd64 python-pkg-resources all 33.1.1-1 [166 kB]</span><br><span class="line">Get:2 http://deb.debian.org/debian stretch/main amd64 python-meld3 all 1.0.2-2 [37.3 kB]</span><br><span class="line">Get:3 http://deb.debian.org/debian stretch/main amd64 supervisor all 3.3.1-1+deb9u1 [280 kB]</span><br><span class="line">debconf: delaying package configuration, since apt-utils is not installed</span><br><span class="line">Fetched 483 kB <span class="keyword">in</span> 0s (488 kB/s)</span><br><span class="line">Selecting previously unselected package python-pkg-resources.</span><br><span class="line">(Reading database ... 29978 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../python-pkg-resources_33.1.1-1_all.deb ...</span><br><span class="line">Unpacking python-pkg-resources (33.1.1-1) ...</span><br><span class="line">Selecting previously unselected package python-meld3.</span><br><span class="line">Preparing to unpack .../python-meld3_1.0.2-2_all.deb ...</span><br><span class="line">Unpacking python-meld3 (1.0.2-2) ...</span><br><span class="line">Selecting previously unselected package supervisor.</span><br><span class="line">Preparing to unpack .../supervisor_3.3.1-1+deb9u1_all.deb ...</span><br><span class="line">Unpacking supervisor (3.3.1-1+deb9u1) ...</span><br><span class="line">Setting up python-meld3 (1.0.2-2) ...</span><br><span class="line">Setting up python-pkg-resources (33.1.1-1) ...</span><br><span class="line">Setting up supervisor (3.3.1-1+deb9u1) ...</span><br><span class="line">invoke-rc.d: could not determine current runlevel</span><br><span class="line">invoke-rc.d: policy-rc.d denied execution of start.</span><br><span class="line"> ---&gt; d66e13271f30</span><br><span class="line">Removing intermediate container 74da13fa61de</span><br><span class="line">Step 9/14 : RUN mkdir -p /var/<span class="built_in">log</span>/supervisor</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> f85e1c0267de</span><br><span class="line"></span><br><span class="line"> ---&gt; 9979f514ad99</span><br><span class="line">Removing intermediate container f85e1c0267de</span><br><span class="line">Step 10/14 : ADD ./supervisord/conf.d/* <span class="variable">$SCPATH</span>/</span><br><span class="line"> ---&gt; 6db6cac86654</span><br><span class="line">Removing intermediate container d565d65027c7</span><br><span class="line">Step 11/14 : ADD *.js* <span class="variable">$AP</span>/</span><br><span class="line"> ---&gt; 3a8554a9e86d</span><br><span class="line">Removing intermediate container f60af33566be</span><br><span class="line">Step 12/14 : WORKDIR <span class="variable">$AP</span></span><br><span class="line"> ---&gt; 7437cca985ff</span><br><span class="line">Removing intermediate container 6b1e8ae1aec2</span><br><span class="line">Step 13/14 : RUN npm install</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> e1038f1c1b6a</span><br><span class="line"></span><br><span class="line">npm WARN deprecated connect@2.7.9: connect 2.x series is deprecated</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">added 18 packages from 15 contributors and audited 34 packages <span class="keyword">in</span> 3.641s</span><br><span class="line">found 16 vulnerabilities (5 low, 5 moderate, 6 high)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` <span class="keyword">for</span> details</span><br><span class="line"> ---&gt; 40ce3ed86b2c</span><br><span class="line">Removing intermediate container e1038f1c1b6a</span><br><span class="line">Step 14/14 : CMD supervisord -n</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> dd4b1488e1a7</span><br><span class="line"> ---&gt; fd425ed5d292</span><br><span class="line">Removing intermediate container dd4b1488e1a7</span><br><span class="line">Successfully built fd425ed5d292</span><br></pre></td></tr></table></figure>

<h1 id="Run-Image"><a href="#Run-Image" class="headerlink" title="Run Image"></a>Run Image</h1><p>Image 빌드가 성공하면 아래와 같이 Image를 실행해본다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker run -d -p 8080:8080 example/docker-node-hello:lastest </span><br><span class="line">8affdbc03b3ec66745ef5cb9e90f5d1f71b46c93932b706317b744fbb7212371</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> Web browser,</span><br><span class="line">Hello World. Wish you were here.</span><br></pre></td></tr></table></figure>

<p>위 명령은 아래와 같다.</p>
<ul>
<li><code>example/docker-node-hello:lastest 태그를 가진 이미지</code>로부터</li>
<li><code>백그라운드에 실행 컨테이너</code>로 만들고 (-d)</li>
<li><code>8080 port 를 docker 호스트의 8080 port에 매핑</code> (-p 8080:8080)</li>
</ul>
<p>그럼 실제 웹이 잘 띄워졌는지 확인하기 위해 docker server의 ip를 확인하고 접속해본다. (로컬=서버이므로 해당 아이피:8080 으로 접속하면 보인다)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World. Wish you were here.</span><br></pre></td></tr></table></figure>

<h2 id="환경-변수"><a href="#환경-변수" class="headerlink" title="환경 변수"></a>환경 변수</h2><p><code>index.js</code>를 살펴보자. $WHO 는 Hello의 대상이 되는 앱이 사용하는 변수임을 확인할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Constants</span><br><span class="line">var DEFAULT_PORT = 8080;</span><br><span class="line">var DEFAULT_WHO = <span class="string">"World"</span>;</span><br><span class="line">var PORT = process.env.PORT || DEFAULT_PORT;</span><br><span class="line">var WHO = process.env.WHO || DEFAULT_WHO;</span><br><span class="line"></span><br><span class="line">// App</span><br><span class="line">var app = express();</span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="keyword">function</span> (req, res) &#123;</span><br><span class="line">  res.send(<span class="string">'Hello '</span> + WHO + <span class="string">'. Wish you were here.\n'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>그럼 Container를 띄울 때 환경변수를 넘겨 Hello 대상을 변경해보도록 한다. 우선 띄워져 있는 Container를 확인한 후 중지한다. 중지하는 방법은 CONTAINER ID와 NAMES를 이용하는 두 가지 방법이 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED              STATUS              PORTS                    NAMES</span><br><span class="line">8affdbc03b3e        example/docker-node-hello:lastest   <span class="string">"supervisord -n"</span>    About a minute ago   Up About a minute   0.0.0.0:8080-&gt;8080/tcp   romantic_haibt</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker stop 8affdbc03b3e(or docker stop romantic_haibt)</span><br><span class="line">8affdbc03b3e</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker run -d -p 8080:8080 example/docker-node-hello:lastest </span><br><span class="line">a412191bdcdb7b55e687b44dedc0707164fff784c0e1c64f1ce11a22afe64b2a</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker stop priceless_lovelace</span><br><span class="line">priceless_lovelace</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure>

<p>run 명령어에 -e 를 추가하여 재시작한다. (WHO : Jaejun Lee)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker run -d -p 8080:8080 -e WHO=<span class="string">"Jaejun Lee"</span> example/docker-node-hello:lastest </span><br><span class="line">389f5be3ee7c2020ecacbd032a5ffa048339d0bdee66666e6dedc8e74e992e78</span><br></pre></td></tr></table></figure>

<p>web으로 접속하여 확인해본다.</p>
<p><code>Hello World. Wish you were here.</code></p>
<h1 id="Image-저장"><a href="#Image-저장" class="headerlink" title="Image 저장"></a>Image 저장</h1><p>Image도 만들었겠다, 배포를 원하는 docker 호스트에서 쉽게 접근할 수 있는 곳에다가 저장해야 한다. 이곳을 Image 빌드와 Image 실행 사이의 <code>명백한 핸드오프 포인트(hand-off point)</code>라고 한다.</p>
<p>보통 Image를 Server에서 직접 빌드하고 실행하지 않는다. 대개 Image 저장소에서 Image를 끌어와 하나 이상의 Docker Server에 실행할 수 있게끔 배포한다. 손쉽게 이미지를 끌어오기 위해 Image를 저장하는 몇 가지 방법에 대해 살펴보자</p>
<p><strong>공개 registry</strong></p>
<p><code>공개 Image들을 저장하기 위한 Image registry</code>를 제공한다(<a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a>). Linux 배포판, WordPress등 다양한 Image가 존재한다.</p>
<p><strong>비공개 registry</strong></p>
<p>Image를 인터넷을 통해 공개하지 않고 <code>내부적으로 Docker Image를 관리하는 방법</code>도 존재한다.</p>
<p><strong>registry 인증</strong></p>
<p>Container Image를 저장하는 registry와의 통신은 필수적이다. 저장하는 과정에서 권한을 요구하는데, Docker는 자동화를 위해 Image 다운 요청을 받는 경우 사용자를 대신해 로그인 정보를 저장하고 이를 사용한다. default registry는 앞에서 언급한 공개 Image가 저장되어 있는 registry 이다.</p>
<p><strong>Docker Hub 계정 생성 후 로그인</strong></p>
<p><a href="https://hub.docker.com/" target="_blank" rel="noopener">https://hub.docker.com/</a>에 접속하여 가입한 후 로그인을 해보도록 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker login</span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don<span class="string">'t have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line"><span class="string">Username: jaejunlee  </span></span><br><span class="line"><span class="string">Password: </span></span><br><span class="line"><span class="string">Login Succeeded</span></span><br></pre></td></tr></table></figure>

<p>로그인이 성공되면, <code>~/.docker/confing.json</code>라는 파일이 생성되는데, 나의 로그인 정보를 캐시하기 위함이다. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ cat ~/.docker/config.json </span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"auths"</span>: &#123;</span><br><span class="line">		<span class="string">"https://index.docker.io/v1/"</span>: &#123;</span><br><span class="line">			<span class="string">"auth"</span>: <span class="string">"amFlanVubGVlOndvd25zbGQ5NDg5"</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>이러한 정보를 담고 있는 파일은 <code>registry에 접근하고자 할 때 Docker는 이를 참고해 연결을 시도</code>한다. 사용을 다 한 이후에 만약 로그아웃을 하게된다면, <code>파일이 비어있음</code>을 확인할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker <span class="built_in">logout</span></span><br><span class="line">Removing login credentials <span class="keyword">for</span> https://index.docker.io/v1/</span><br><span class="line">[kuber@node2 ~]$ cat ~/.docker/config.json </span><br><span class="line">&#123;</span><br><span class="line">	<span class="string">"auths"</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="registry에-Image-저장"><a href="#registry에-Image-저장" class="headerlink" title="registry에 Image 저장"></a>registry에 Image 저장</h1><p>앞서 Image build 시 우리는 <code>docker build -t example/docker-node-hello:lastest .</code>명령어를 사용했다. 이는 공개 registry 의 example/docker-node-hello 이미지를 빌드한 것인데, 만약 로컬에서 생성한 이미지의 경우 아무 이름이나<em>(보통 사용자/그룹 이용)</em> 사용 가능하다.</p>
<p><code>tag</code>명령어를 통해 이미지의 태그를 변경할 수 있다.</p>
<blockquote>
<p>이미지 태그명은 docker 사용자 아이디로 설정하여야 추후에 push/pull이 가능하다</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker tag <span class="built_in">test</span>/docker-node-hello:latest jaejunlee/docker-node-hello:latest</span><br><span class="line">[kuber@node2 ~]$ docker images</span><br><span class="line">REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">example/docker-node-hello   lastest             fd425ed5d292        2 days ago          928 MB</span><br><span class="line">jaejunlee/docker-node-hello    latest              fd425ed5d292        2 days ago          928 MB</span><br><span class="line"><span class="built_in">test</span>/docker-node-hello      latest              fd425ed5d292        2 days ago          928 MB</span><br><span class="line">docker.io/centos            latest              67fa590cfc1c        5 weeks ago         202 MB</span><br><span class="line">docker.io/node              11.11.0             9ff38e3a6d9d        6 months ago        904 MB</span><br></pre></td></tr></table></figure>

<p>이번엔 그럼 tag를 바꾼 이미지를 push <em>(공개 registry)</em> 해보도록 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker push jaejunlee/docker-node-hello-test:latest</span><br><span class="line">The push refers to a repository [docker.io/jaejunlee/docker-node-hello-test]</span><br><span class="line">a233ae287464: Pushed </span><br><span class="line">8f9ee22c1347: Pushed </span><br><span class="line">ce283841f218: Pushed </span><br><span class="line">f8fc35d38ecc: Pushed </span><br><span class="line">cb7a837507c0: Pushed </span><br><span class="line">4ebe27287e94: Pushed </span><br><span class="line">abdde7643382: Pushed </span><br><span class="line">909542b1bce2: Pushed </span><br><span class="line">7de462056991: Pushed </span><br><span class="line">3443d6cf0f1f: Pushed </span><br><span class="line">f3a38968d075: Pushed </span><br><span class="line">a327787b3c73: Pushed </span><br><span class="line">5bb0785f2eee: Pushed </span><br><span class="line">latest: digest: sha256:98a38e1a53a9473ab1b083099d29d70d9a05d5f924533b378e70555b1f1714a3 size: 3055</span><br></pre></td></tr></table></figure>

<p><code>Docker Hub</code>에 접속하여 제대로 <code>push</code> 되었는지 확인해보도록 한다.</p>
<p><em>(<a href="https://cloud.docker.com/u/jaejunlee/repository/docker/jaejunlee/docker-node-hello-test" target="_blank" rel="noopener">https://cloud.docker.com/u/jaejunlee/repository/docker/jaejunlee/docker-node-hello-test</a>)</em></p>
<hr>
<p>2019.09.23 made by <em>jaejun.lee</em></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Docker/" rel="tag"># Docker</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/09/19/python-better_way_20/" rel="prev" title="[Python] 동적 인수 지정 시 None과 docstring 활용">
      <i class="fa fa-chevron-left"></i> [Python] 동적 인수 지정 시 None과 docstring 활용
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/09/23/cloud-install_docker/" rel="next" title="[Cloud] Install Docker">
      [Cloud] Install Docker <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Docker-Image"><span class="nav-number">1.</span> <span class="nav-text">Docker Image</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Dockerfile"><span class="nav-number">2.</span> <span class="nav-text">Dockerfile</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Image-Build"><span class="nav-number">3.</span> <span class="nav-text">Image Build</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Run-Image"><span class="nav-number">4.</span> <span class="nav-text">Run Image</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#환경-변수"><span class="nav-number">4.1.</span> <span class="nav-text">환경 변수</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Image-저장"><span class="nav-number">5.</span> <span class="nav-text">Image 저장</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#registry에-Image-저장"><span class="nav-number">6.</span> <span class="nav-text">registry에 Image 저장</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jaejun Lee</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">73</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/jaejuning" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jaejuning" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:jaejun.lee.1991@gmail.com" title="E-Mail → mailto:jaejun.lee.1991@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jaejun Lee</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://jjlee.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://jx2lee.github.io/2019/09/23/cloud-docker_image/";
    this.page.identifier = "2019/09/23/cloud-docker_image/";
    this.page.title = "[Cloud] Docker Image";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://jjlee.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
