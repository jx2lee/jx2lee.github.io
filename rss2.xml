<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>go hard</title>
    <link>https://jx2lee.github.io/</link>
    
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Sat, 15 May 2021 14:30:56 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>[Kafka] ëª¨ë“  broker ë‹¤ìš´ ì‹œ ë³µêµ¬ ì‹œë‚˜ë¦¬ì˜¤</title>
      <link>https://jx2lee.github.io/kafka-restore_broker/</link>
      <guid>https://jx2lee.github.io/kafka-restore_broker/</guid>
      <pubDate>Fri, 14 May 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; Kafka ëŠ” partition replication ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ í•˜ë‚˜ì˜ broker ê°€ ë‹¤ìš´ë˜ë„ topic ì„ ìœ ì§€í•  ìˆ˜ ìˆëŠ”ë° ìµœì•…ì˜ ìƒí™©ì¸ ì „ broker ê°€ ë‹¤ìš´ë˜ì—ˆì„ ë•Œ ë³µêµ¬ ì „ëµì´ ë¬´ì—‡ì¸ì§€ í™•ì¸í•œë‹¤ ğŸ˜Œ &lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> Kafka ëŠ” partition replication ê¸°ëŠ¥ì„ ì œê³µí•˜ì—¬ í•˜ë‚˜ì˜ broker ê°€ ë‹¤ìš´ë˜ë„ topic ì„ ìœ ì§€í•  ìˆ˜ ìˆëŠ”ë° ìµœì•…ì˜ ìƒí™©ì¸ ì „ broker ê°€ ë‹¤ìš´ë˜ì—ˆì„ ë•Œ ë³µêµ¬ ì „ëµì´ ë¬´ì—‡ì¸ì§€ í™•ì¸í•œë‹¤ ğŸ˜Œ </center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ê·¸sëŸ´ ì¼ì€ ì—…ê² ì§€ë§Œ ëŒ€ë¹„í•´ì•¼ì§€</a><ul><li><a href="#subject02">ë§ˆì§€ë§‰ìœ¼ë¡œ ì¥ì• ê°€ ë‚œ ë¦¬ë”ê°€ ì‚´ì•„ë‚˜ê¸¸ ê¸°ë‹¤ë¦°ë‹¤</a></li><li><a href="#subject02">ì¥ì•  ìƒê´€ì—†ì´ ë¨¼ì € ë³µêµ¬ëœ ë¦¬ë” ë˜ëŠ” íŒ”ë¡œì›Œ(ë¸Œë¡œì»¤) ê°€ ìë™ìœ¼ë¡œ ë¦¬ë”ê°€ ëœë‹¤</a></li></ul></li><li><a href="#subject03">ê·¸ëŸ¼ ë¬´ìŠ¨ ì „ëµì´ ì¢‹ì„ê¹Œìš”?</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="ê·¸ëŸ´-ì¼ì€-ì—…ê² ì§€ë§Œ-ëŒ€ë¹„í•´ì•¼ì§€"><a href="#ê·¸ëŸ´-ì¼ì€-ì—…ê² ì§€ë§Œ-ëŒ€ë¹„í•´ì•¼ì§€" class="headerlink" title=" ê·¸ëŸ´ ì¼ì€ ì—…ê² ì§€ë§Œ ëŒ€ë¹„í•´ì•¼ì§€"></a><a name="subject01"></a> ê·¸ëŸ´ ì¼ì€ ì—…ê² ì§€ë§Œ ëŒ€ë¹„í•´ì•¼ì§€</h1><p>ì¬ìˆ˜ê°€ ì—†ë‹¤ë©´ ëª¨ë“  broker ì¥ì• ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. (ë”±íˆ ë“¤ ìˆ˜ ìˆëŠ” ì–˜ê°€ ì—†ì§€ë§Œ..) ì´ëŸ´ ë•Œ kafka ì—ì„œ ì œê³µí•˜ëŠ” ë³µêµ¬ ì „ëµì´ ë¬´ì—‡ì¸ ì§€ ì‚´í´ë³¸ë‹¤.</p><p>í¬ê²Œ ë³µêµ¬ ì „ëµì€ 2ê°€ì§€ë¡œ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>ë§ˆì§€ë§‰ìœ¼ë¡œ ì¥ì• ê°€ ë‚œ ë¦¬ë”(ë¸Œë¡œì»¤)ê°€ ì‚´ì•„ë‚˜ê¸¸ ê¸°ë‹¤ë¦°ë‹¤.</li><li>ì¥ì•  ìƒê´€ì—†ì´ ë¨¼ì € ë³µêµ¬ëœ ë¦¬ë” ë˜ëŠ” íŒ”ë¡œì›Œ(ë¸Œë¡œì»¤) ê°€ ìë™ìœ¼ë¡œ ë¦¬ë”ê°€ ëœë‹¤.</li></ul><p>ê° ì „ëµì€ ì¥ë‹¨ì ì´ ì¡´ì¬í•œë‹¤.</p><h2 id="ë§ˆì§€ë§‰ìœ¼ë¡œ-ì¥ì• ê°€-ë‚œ-ë¦¬ë”ê°€-ì‚´ì•„ë‚˜ê¸¸-ê¸°ë‹¤ë¦°ë‹¤"><a href="#ë§ˆì§€ë§‰ìœ¼ë¡œ-ì¥ì• ê°€-ë‚œ-ë¦¬ë”ê°€-ì‚´ì•„ë‚˜ê¸¸-ê¸°ë‹¤ë¦°ë‹¤" class="headerlink" title=" ë§ˆì§€ë§‰ìœ¼ë¡œ ì¥ì• ê°€ ë‚œ ë¦¬ë”ê°€ ì‚´ì•„ë‚˜ê¸¸ ê¸°ë‹¤ë¦°ë‹¤"></a><a name="subject02"></a> ë§ˆì§€ë§‰ìœ¼ë¡œ ì¥ì• ê°€ ë‚œ ë¦¬ë”ê°€ ì‚´ì•„ë‚˜ê¸¸ ê¸°ë‹¤ë¦°ë‹¤</h2><ul><li>3ê°œ broker ë¡œ ì˜ˆë¥¼ ë“¤ë•Œ, broker01 â†’ broker02 â†’ broker03 ìˆœìœ¼ë¡œ ì¥ì• ê°€ ë‚«ë‹¤ê³  ê°€ì •í•˜ì</li><li>ê·¸ëŸ¼ ê°€ì¥ ìµœê·¼ ì¥ì• ê°€ ë‚œ broker03 ì˜ íŒŒí‹°ì…˜ì´ ì†ì‹¤ì´ ê°€ì¥ ì ë‹¤.</li><li>ì´ë ‡ê²Œ ë©”ì‹œì§€ ì†ì‹¤ì´ ê°€ì¥ ì ì€ broker ê°€ ê¸°ë™ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì „ëµ</li><li>ì¥ì : ë©”ì„¸ì§€ ì†ì‹¤ì´ ì ë‹¤</li><li>ë‹¨ì : ì¥ì• ì‹œê°„ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆë‹¤.(ë§Œì•½ broker03 ì˜ í•´ê²°ì´ ëŠ¦ì–´ì§€ë©´ ê²°êµ­ í•´ë‹¹ í† í”½ì€ ì •ìƒí™”ë˜ê¸°ê¹Œì§€ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤.)</li></ul><h2 id="ì¥ì• -ìƒê´€ì—†ì´-ë¨¼ì €-ë³µêµ¬ëœ-ë¦¬ë”-ë˜ëŠ”-íŒ”ë¡œì›Œ-ë¸Œë¡œì»¤-ê°€-ìë™ìœ¼ë¡œ-ë¦¬ë”ê°€-ëœë‹¤"><a href="#ì¥ì• -ìƒê´€ì—†ì´-ë¨¼ì €-ë³µêµ¬ëœ-ë¦¬ë”-ë˜ëŠ”-íŒ”ë¡œì›Œ-ë¸Œë¡œì»¤-ê°€-ìë™ìœ¼ë¡œ-ë¦¬ë”ê°€-ëœë‹¤" class="headerlink" title=" ì¥ì•  ìƒê´€ì—†ì´ ë¨¼ì € ë³µêµ¬ëœ ë¦¬ë” ë˜ëŠ” íŒ”ë¡œì›Œ(ë¸Œë¡œì»¤) ê°€ ìë™ìœ¼ë¡œ ë¦¬ë”ê°€ ëœë‹¤."></a><a name="subject03"></a> ì¥ì•  ìƒê´€ì—†ì´ ë¨¼ì € ë³µêµ¬ëœ ë¦¬ë” ë˜ëŠ” íŒ”ë¡œì›Œ(ë¸Œë¡œì»¤) ê°€ ìë™ìœ¼ë¡œ ë¦¬ë”ê°€ ëœë‹¤.</h2><ul><li>ìµœê·¼ì´ê±´ ë‚˜ì¤‘ì´ê±´ ë¨¼ì € ì‚´ì•„ë‚˜ëŠ” ë¸Œë¡œì»¤ì˜ íŒŒí‹°ì…˜ì´(ë¦¬ë” or íŒ”ë¡œì›Œ) ìë™ìœ¼ë¡œ ë¦¬ë”ë¡œ ìŠ¹ê²©í•˜ëŠ” ì „ëµ</li><li>ì¥ì : ì¥ì• ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆë‹¤.</li><li>ë‹¨ì : ë©”ì„¸ì§€ ì†ì‹¤ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.<ul><li>ë§Œì•½ ëª¨ë“  ë¸Œë¡œì»¤ê°€ ë™ì‹œ ë‹¤ìš´ì´ ëœ ê²ƒì´ ì•„ë‹ˆë¼ë©´</li><li>ë¨¼ì € ë‹¤ìš´ëœ ë¸Œë¡œì»¤ê°€ ëª¨ë“  ë¸Œë¡œì»¤ ì¥ì•  ì´í›„ ë³µêµ¬ê°€ ë˜ë©´ ë¦¬ë”ë¡œ ìŠ¹ê²©ë˜ì–´ ë‚˜ë¨¸ì§€ ë³µêµ¬ë˜ëŠ” íŒ”ë¡œì›Œë“¤ê³¼ ì‹±í¬ ì‘ì—…ì„ ì§„í–‰í•˜ê³ </li><li>ì´ëŠ” ê°€ì¥ ìµœê·¼ì— ì¥ì•  ë‚œ ë¸Œë¡œì»¤ì˜ ë¦¬ë” íŒŒí‹°ì…˜ì˜ ë©”ì„¸ì§€ë„ ë™ê¸°í™” ë˜ê¸° ë•Œë¬¸ì—</li><li>ë©”ì„¸ì§€ ì†ì‹¤ì´ ë°œìƒí•œë‹¤.</li></ul></li></ul><h1 id="ê·¸ëŸ¼-ë¬´ìŠ¨-ì „ëµì´-ì¢‹ì„ê¹Œìš”"><a href="#ê·¸ëŸ¼-ë¬´ìŠ¨-ì „ëµì´-ì¢‹ì„ê¹Œìš”" class="headerlink" title=" ê·¸ëŸ¼ ë¬´ìŠ¨ ì „ëµì´ ì¢‹ì„ê¹Œìš”?"></a><a name="subject04"></a> ê·¸ëŸ¼ ë¬´ìŠ¨ ì „ëµì´ ì¢‹ì„ê¹Œìš”?</h1><p>ì •ë‹µì€ ì—†ë‹¤. ë‹¨, kafka 0.11.0.0 ì´í•˜ ë²„ì „ì—ì„œëŠ” ë‘ ë²ˆì§¸ ì „ëµì„ default ë¡œ ê°€ì ¸ê°€ì§€ë§Œ ì´í›„ ë²„ì ¼ì—ì„œëŠ” ì²« ë²ˆì§¸ ì „ëµì„ default ë¥¼ ê°€ì ¸ê°„ë‹¤. ë¬¼ë¡ , í•´ë‹¹ ì „ëµì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#server.properties</span></span><br><span class="line">unclean.leader.election.enable=&#123;true_or_false&#125;</span><br></pre></td></tr></table></figure><ul><li>false: ì²« ë²ˆì§¸ ì „ëµ</li><li>true: ë‘ ë²ˆì¬ ì „ëµ</li></ul><p>í˜„ì¬ ë‚´ê°€ ë§¡ê³  ìˆëŠ” ë°ì´í„°í”Œë«í¼ì˜ ê²½ìš° ì „ëµì€ <code>false</code> ì´ë‹¤. ë¡œê·¸ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì˜ì—­ì—ì„œ ë©”ì„¸ì§€ ì†ì‹¤ì„ ìµœì†Œí™” í•˜ëŠ”ê²Œ ëª©í‘œì´ê³  ìµœëŒ€í•œ kafka(0.10.2) ì—ì„œ ê¶Œì¥í•˜ëŠ” ì˜µì…˜(<code>default=false</code>)ì„ ë”°ë¼ê°„ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. Kafka ì˜ ê³ ê°€ìš©ì„± &amp; ì†ì‹¤ ìµœì†Œí™”ë¥¼ ìœ„í•´ ì²« ë²ˆì§¸ ì „ëµìœ¼ë¡œ ê°€ì ¸ê°€ëŠ” ê²Œ ë§ë‹¤ê³  ë³¸ë‹¤. (ë¬¼ë¡ , ì €ì¥í•˜ì§€ ì•Šê³  í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•Šì€ ë°ì´í„°ë¼ë©´ ë‘ ë²ˆì§¸ ì „ëµì„ ê°€ì ¸ê°€ë©´ ë  ê²ƒ ê°™ê³  <code>ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ë‹¤</code> ê°€ ì •ë‹µì¸ ê²ƒ ê°™ë‹¤.)</p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li>ì¹´í”„ì¹´, ë°ì´í„°í”Œë«í¼ì˜ ìµœê°•ì</li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/kafka-restore_broker/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Kafka] Zookeeper Cluster ì„¸íŒ…</title>
      <link>https://jx2lee.github.io/kafka-set_zookeeper_cluster/</link>
      <guid>https://jx2lee.github.io/kafka-set_zookeeper_cluster/</guid>
      <pubDate>Mon, 10 May 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; NHN Cloud ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ìš©í•´ zookeeper í´ëŸ¬ìŠ¤í„°(3-node)ë¥¼ êµ¬ì¶•í•œë‹¤ ğŸ’ &lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> NHN Cloud ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ìš©í•´ zookeeper í´ëŸ¬ìŠ¤í„°(3-node)ë¥¼ êµ¬ì¶•í•œë‹¤ ğŸ’ </center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">íŒ¨í‚¤ì§€ ì„¤ì • ë° binary ì„¤ì •</a></li><li><a href="#subject02">Zookeeper service ì‹¤í–‰</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="íŒ¨í‚¤ì§€-ì„¤ì •-ë°-binary-ì„¤ì •"><a href="#íŒ¨í‚¤ì§€-ì„¤ì •-ë°-binary-ì„¤ì •" class="headerlink" title=" íŒ¨í‚¤ì§€ ì„¤ì • ë° binary ì„¤ì •"></a><a name="subject01"></a> íŒ¨í‚¤ì§€ ì„¤ì • ë° binary ì„¤ì •</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y java-1.8.0-openjdk</span><br><span class="line">$ wget https://archive.apache.org/dist/zookeeper/zookeeper-3.4.10/zookeeper-3.4.10.tar.gz</span><br></pre></td></tr></table></figure><ul><li><p>symbolic link</p><ul><li><p>ê³„ì •ì˜ default home ì— ìƒì„±</p></li><li><p><code>ln -s /app/zookeeper-3.4.10 zookeeper</code></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[centos@zookeeper-1 apps]$ ll</span><br><span class="line">í•©ê³„ 0</span><br><span class="line">lrwxrwxrwx 1 centos centos 21  5ì›”  7 14:52 zookeeper -&gt; /app/zookeeper-3.4.10</span><br></pre></td></tr></table></figure></li></ul></li><li><p>data ê²½ë¡œ ì§€ì •</p><ul><li><p>/data</p></li><li><p><code>myid</code> íŒŒì¼ì„ ìƒì„±í•´ ê° id ë²ˆí˜¸ë¥¼ ì‘ì„±</p></li><li><p>í•´ë‹¹ ì„œë²„ë¥¼ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ì–´ 2ê°œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ê³„íšì´ê¸° ë•Œë¬¸ì— ë‚˜ëŠ” ìš°ì„  1ê¹Œì§€ë§Œ ìƒì„±í•˜ì˜€ë‹¤.(<em>1ë²ˆ ì¸ìŠ¤í„´ìŠ¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•  ì˜ˆì •</em>) 3ê°œì˜ ì„œë²„ë¥¼ ë™ì‹œì— ì§„í–‰í•˜ëŠ” ë¶„ë“¤ì€ ê° ì„œë²„ì— ë§ê²Œ myid íŒŒì¼ì„ 1,2,3 ìˆœìœ¼ë¡œ ì‘ì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[centos@zookeeper-1 data]$ <span class="built_in">pwd</span></span><br><span class="line">/data</span><br><span class="line">[centos@zookeeper-1 data]$ cat myid</span><br><span class="line">1</span><br></pre></td></tr></table></figure></li></ul></li><li><p>zoo.cfg ì„¤ì •</p><ul><li><p>binary ë¡œ ì„¤ì¹˜í•œ ê²½ìš° <code>conf/zoo_sample.cfg</code> ë¥¼ ìˆ˜ì •í•œë‹¤.</p></li><li><p><code>vi conf/zoo.cfg</code></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[centos@zookeeper-1 zookeeper]$ cat conf/zoo.cfg</span><br><span class="line"><span class="comment"># The number of milliseconds of each tick</span></span><br><span class="line"><span class="comment"># ê¸°ë³¸ ì¸¡ì • ì‹œê°„</span></span><br><span class="line">tickTime=2000</span><br><span class="line"><span class="comment"># The number of ticks that the initial</span></span><br><span class="line"><span class="comment"># synchronization phase can take</span></span><br><span class="line"><span class="comment"># íŒ”ë¡œì›Œê°€ ë¦¬ë”ì™€ ì´ˆê¸°ì— ì—°ê²°í•˜ëŠ” ì‹œê°„ì— ëŒ€í•œ íƒ€ì„ì•„ì›ƒ ì‹œê°„</span></span><br><span class="line">initLimit=10</span><br><span class="line"><span class="comment"># The number of ticks that can pass between</span></span><br><span class="line"><span class="comment"># sending a request and getting an acknowledgement</span></span><br><span class="line"><span class="comment"># íŒ”ë¡œì›Œê°€ ë¦¬ë”ì™€ ë™ê¸°í™” í•˜ëŠ” ì‹œê°„ì— ëŒ€í•œ íƒ€ì„ ì•„ì›ƒ í‹°ì¼“ ìˆ˜(ì£¼í‚¤í¼ ë°ì´í„°ê°€ í¬ë©´ ë” ëŠ˜ë ¤ì•¼í•¨)</span></span><br><span class="line">syncLimit=5</span><br><span class="line"><span class="comment"># the directory where the snapshot is stored.</span></span><br><span class="line"><span class="comment"># do not use /tmp for storage, /tmp here is just</span></span><br><span class="line"><span class="comment"># example sakes.</span></span><br><span class="line"><span class="comment"># íŠ¸ëœì­ì…˜ ë¡œê·¸ì™€ ìŠ¤ëƒ…ìƒ·ì´ ì €ì¥ë˜ëŠ” ê²½ë¡œ</span></span><br><span class="line">dataDir=/data</span><br><span class="line"><span class="comment"># the port at which the clients will connect</span></span><br><span class="line"><span class="comment"># TCP port</span></span><br><span class="line">clientPort=2181</span><br><span class="line"><span class="comment"># ì£¼í‚¤í¼ ì•™ìƒë¸” êµ¬ì„±ì„ ìœ„í•œ ì„œë²„ ì„¤ì •, ê° ë„˜ë²„ëŠ” myid ê°’ê³¼ ì¼ì¹˜</span></span><br><span class="line">server.1=zookeeper-1:2888:3888</span><br><span class="line">server.2=zookeeper-2:2888:3888</span><br><span class="line">server.3=zookeeper-3:2888:3888</span><br></pre></td></tr></table></figure></li></ul></li><li><p>systemd ë“±ë¡</p><ul><li><p>binary ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆì§€ë§Œ systemd ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ service ë“±ë¡</p></li><li><p><code>sudo vi /etc/systemd/system/zookeeper-server.service</code></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=zookeeper-server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">User=root</span><br><span class="line">Group=root</span><br><span class="line">SyslogIdentifier=zookeeper-server</span><br><span class="line">WorkingDirectory=/home/centos/apps/zookeeper</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=0s</span><br><span class="line">ExecStart=/home/centos/apps/zookeeper/bin/zkServer.sh start</span><br><span class="line">ExecStop=/home/centos/apps/zookeeper/bin/zkServer.sh stop</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="Zookeeper-service-ì‹¤í–‰"><a href="#Zookeeper-service-ì‹¤í–‰" class="headerlink" title=" Zookeeper service ì‹¤í–‰"></a><a name="subject02"></a> Zookeeper service ì‹¤í–‰</h1><p>ê° ì„œë²„(3ëŒ€)ì—ì„œ zookeeper ì„œë¹„ìŠ¤ë¥¼ systemd ë¡œ ì‹¤í–‰í•œë‹¤. ì•„ë˜ì™€ ê°™ì´ 3ê°œ ì„œë¹„ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í–ˆì„ ë•Œ ì´ˆë¡ë¶ˆì´ë©´ ì„±ê³µì´ë‹¤.</p><p><img src="/image/kafka-set_zookeeper_cluster-1.png" alt="/image/kafka-set_zookeeper_cluster-1.png"></p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li>ì¹´í”„ì¹´, ë°ì´í„°í”Œë«í¼ì˜ ìµœê°•ì</li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/kafka-set_zookeeper_cluster/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Kafka] Topic &amp; Partition</title>
      <link>https://jx2lee.github.io/kafka-topic_and_partition/</link>
      <guid>https://jx2lee.github.io/kafka-topic_and_partition/</guid>
      <pubDate>Mon, 10 May 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; Kafka ë°ì´í„° ëª¨ë¸ì˜ í•µì‹¬ ìš”ì†Œì¸ topic ê³¼ partition ì— ëŒ€í•´ ì‚´í´ë³´ì ã€½ &lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> Kafka ë°ì´í„° ëª¨ë¸ì˜ í•µì‹¬ ìš”ì†Œì¸ topic ê³¼ partition ì— ëŒ€í•´ ì‚´í´ë³´ì ã€½ </center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">Topic</a></li><li><a href="#subject02">Partition</a><ul><li><a href="#subject03">ê·¸ëŸ¼ Partition ì€ ë¬´ì‘ì • ëŠ˜ë¦¬ëŠ” ê²Œ ì¢‹ì„ê¹Œìš”?</a></li><li><a href="#subject03">Topic ì˜ ì ì ˆí•œ Partition ìˆ˜ëŠ”..</a></li></ul></li><li><a href="#reference">Reference</a></li></ol><ul><li>Topic: ë©”ì„¸ì§€ë¥¼ consumer ê°€ ë‚˜ëˆ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ ë…¼ë¦¬ì  ë‹¨ìœ„ë¡œ ë¬¶ì€ ê°œë…</li><li>Partition: Topic ì„ êµ¬ì„±í•˜ëŠ” ë°ì ì €ì¥ì†Œë¡œ ìˆ˜í‰ í™•ì¥ì´ ê°€ëŠ¥í•œ ë‹¨ìœ„</li></ul><h1 id="Topic"><a href="#Topic" class="headerlink" title=" Topic"></a><a name="subject01"></a> Topic</h1><ul><li>ê¸°ë³¸ì ìœ¼ë¡œ Topic ì— ë©”ì„¸ì§€ë¥¼ ì €ì¥</li><li>mail ì‹œìŠ¤í…œê³¼ í•¨ê»˜ ìƒê°í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.<ul><li>ë©”ì¼ì„ ë³´ë‚´ë ¤ë©´ ë©”ì¼ ìˆ˜ì‹ ì, ì¦‰ ì´ë©”ì¼ ì£¼ì†Œê°€ í•„ìš”í•˜ë‹¤.</li><li>ì´ë©”ì¼ ì£¼ì†Œ ì—†ì´ ë©”ì¼ì„ ë°œì†¡í•  ìˆ˜ ìˆëŠ”ê°€? â†’ ì—†ë‹¤!</li><li>ì´ë©”ì¼ ì£¼ì†Œ == Kafka Topic ì´ë¼ê³  ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° ì‰½ë‹¤.</li></ul></li><li>ë©”ì„¸ì§€ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ë‹¨ìœ„ë¡œ Topic ì„ ì‚¬ìš©</li><li>Topic ëª…ì— prefix ë¥¼ í†µí•´ ë©”ì„¸ì§€ íŠ¹ì„±ì— ë”°ë¼ ë¶„ë¥˜ ê°€ëŠ¥í•¨</li></ul><h1 id="Partition"><a href="#Partition" class="headerlink" title=" Partition"></a><a name="subject02"></a> Partition</h1><ul><li>Topic ì„ ë¶„í• í•œ ê²ƒ</li><li>ì™œ ë¶„í• ì„ í•´ì•¼ í•˜ë‚˜?<ul><li>ë©”ì‹œì§• í ì‹œìŠ¤í…œì˜ ì œì•½ì¡°ê±´ì€ <code>ìˆœì„œê°€ ë³´ì¥ëœë‹¤.</code></li><li>1ê°œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ëŠ”ë° 1ì´ˆê°€ ê±¸ë¦°ë‹¤ë©´, 4ê°œ ë©”ì„¸ì§€ë¥¼ íŒŒí‹°ì…˜ 1ê°œë¡œ ìœ ì§€í•˜ë©° ì „ì†¡í•˜ë©´ ì´ 4ì´ˆê°€ ê±¸ë¦¼ (<code>ìˆœì„œ ë³´ì¥</code>)</li><li>ë”°ë¼ì„œ íš¨ìœ¨ì ì¸ ë©”ì„¸ì§€ ì „ì†¡ì„ ìœ„í•´ topic ì˜ partition ì„ 4ê°œë¡œ êµ¬ì„±í•˜ë©´ ë³‘ë ¬ ì²˜ë¦¬ë¡œ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆìŒ</li><li>ex. ë©”ì„¸ì§€ 1 â†’ partition 1, ë©”ì„¸ì§€ 2 â†’ partition 2 â€¦ ë©”ì„¸ì§€ 4 â†’ partition 4</li></ul></li></ul><h2 id="ê·¸ëŸ¼-Partition-ì€-ë¬´ì‘ì •-ëŠ˜ë¦¬ëŠ”-ê²Œ-ì¢‹ì„ê¹Œìš”"><a href="#ê·¸ëŸ¼-Partition-ì€-ë¬´ì‘ì •-ëŠ˜ë¦¬ëŠ”-ê²Œ-ì¢‹ì„ê¹Œìš”" class="headerlink" title=" ê·¸ëŸ¼ Partition ì€ ë¬´ì‘ì • ëŠ˜ë¦¬ëŠ” ê²Œ ì¢‹ì„ê¹Œìš”?"></a><a name="subject03"></a> ê·¸ëŸ¼ Partition ì€ ë¬´ì‘ì • ëŠ˜ë¦¬ëŠ” ê²Œ ì¢‹ì„ê¹Œìš”?</h2><p>ë¼ëŠ” ì§ˆë¬¸ì´ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤. ë¬´ì‘ì • ëŠ˜ë¦¬ëŠ” ê±°ëŠ” ë‹¨ì–´ë¶€í„° ê±°ìŠ¬ë¦°ë‹¤. ì¦‰, ë¬´ì¡°ê±´ partition ì„ ëŠ˜ë¦°ë‹¤ê³  ë§ŒëŠ¥ì€ ì•„ë‹ˆë‹¤. partition ì´ ëŠ˜ì–´ë‚˜ë©´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>File Handler (ë¦¬ì†ŒìŠ¤ ë‚­ë¹„)<ul><li>ê° partition ì€ broker ì˜ ë””ë ‰í† ë¦¬ì™€ ë§¤í•‘, ì €ì¥ë˜ëŠ” ë°ì´í„° ë§ˆë‹¤ 2ê°œì˜ íŒŒì¼ (index data + ì‹¤ì œ ë°ì´í„°)ì´ ì¡´ì¬</li><li>ëª¨ë“  ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ë“¤ì— ëŒ€í•´ file handler ì˜¤í”ˆ</li><li><strong>ê²°êµ­ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë¡œ ì´ì–´ì§€ê²Œ ë  ìˆ˜ ìˆë‹¤</strong></li></ul></li><li>ì¥ì•  ë³µêµ¬ ì‹œê°„ ì¦ê°€<ul><li>kafka ëŠ” ê°€ìš©ì„± í™•ë³´ë¥¼ ìœ„í•´ replication ì§€ì›</li><li>ê° partition ë§ˆë‹¤ replication ì´ ë™ì‘í•˜ì—¬ leader ì™€ follower ë¡œ êµ¬ë¶„</li><li>replication ì€ topic ì„ ë³µì œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ <code>partition ì„ ë³µì œí•˜ëŠ” ê²ƒ</code></li><li>ì¥ì•  ë³µêµ¬ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.<ul><li>broker ë‹¤ìš´ â†’ í•´ë‹¹ broker ì˜ leader partition ì´ìš© ë¶ˆê°€ëŠ¥ â†’ follower ì¤‘ leader ë¡œ ì„ ì¶œ â†’ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ìƒˆë¡­ê²Œ leader ê°€ ì²˜ë¦¬</li><li>ì¥ì•  ì²˜ë¦¬ëŠ” controller ë¡œ ì§€ì •ëœ broker ê°€ ì§„í–‰</li><li>controller ëŠ” kafka í´ëŸ¬ìŠ¤í„° ì¤‘ í•˜ë‚˜ë§Œ ì¡´ì¬í•˜ë©° ë§Œì•½ í•´ë‹¹ controller ê°€ ë‹¤ìš´ë˜ë©´ ë‚˜ë¨¸ì§€ broker ì¤‘ í•˜ë‚˜ê°€ controller ì—­í• ì„ ëŒ€ì‹  ìˆ˜í–‰í•œë‹¤.</li><li><em>ë§Œì•½ broker ì— 1000ê°œ partition ê³¼ 2ê°œ replication ì´ ë‹¤ìš´ë˜ë©´ í•´ë‹¹ broker ì˜ 1000ê°œ partition ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. partition leader ë¥¼ ë‹¤ë¥¸ broker ë¡œ ì´ë™í•´ì•¼ í•˜ëŠ”ë°, ê° partition ë³„ leader ì„ ì¶œ ì‹œê°„ì´ 2ms ì´ë¼ë©´ ì´ 5ì´ˆê°€ ì†Œìš”ë˜ë©° ì¥ì• ì‹œê°„ì€ 5ì´ˆ ì´ìƒì´ ë  ìˆ˜ ìˆë‹¤.</em></li><li><em>ë§Œì•½ í•´ë‹¹ broker ê°€ controller ë¼ë©´..? ìµœì•…ì´ë‹¤. ìë™ìœ¼ë¡œ fail over ë¥¼ ì‹œì‘í•˜ì§€ë§Œ ì´ˆê¸°í™” í•˜ëŠ” ë™ì•ˆ zookeeper ì—ì„œ ëª¨ë“  partition ì˜ ë°ì´í„°ë¥¼ ì½ì–´ì•¼ í•œë‹¤. 10,000 ê°œ partition ì´ ì¡´ì¬í•˜ë©´ 20ì´ˆ ì´ìƒ ì¥ì•  ìƒí™©ì´ ë°œìƒí•œë‹¤.</em></li></ul></li></ul></li></ul><blockquote><p><em>replication ì— ëŒ€í•´ í•™ìŠµí•˜ë ¤ë©´ ë‹¤ìŒ url ì„ ì¶”ì²œí•œë‹¤. (<a href="https://www.popit.kr/kafka-%EC%9A%B4%EC%98%81%EC%9E%90%EA%B0%80-%EB%A7%90%ED%95%98%EB%8A%94-topic-replication/">https://www.popit.kr/kafka-ìš´ì˜ìê°€-ë§í•˜ëŠ”-topic-replication/</a>)</em></p></blockquote><p>ì´ì²˜ëŸ¼ partition ì´ ë§ë‹¤ê³  ë§ŒëŠ¥ì€ ì•„ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ ìµœì ì˜ partition ìˆ˜ëŠ” ì–´ë–»ê²Œ ì„¤ì •í•´ì•¼ í• ê¹Œ?</p><h2 id="Topic-ì˜-ì ì ˆí•œ-Partition-ìˆ˜ëŠ”"><a href="#Topic-ì˜-ì ì ˆí•œ-Partition-ìˆ˜ëŠ”" class="headerlink" title=" Topic ì˜ ì ì ˆí•œ Partition ìˆ˜ëŠ”.."></a><a name="subject04"></a> Topic ì˜ ì ì ˆí•œ Partition ìˆ˜ëŠ”..</h2><ul><li><code>ì›í•˜ëŠ” ëª©í‘œ ì²˜ë¦¬ëŸ‰ì˜ ê¸°ì¤€ì„ ì¡ëŠ”ë‹¤.</code></li><li>ë‹¤ìŒ ì˜ˆë¥¼ í™•ì¸í•´ë³¸ë‹¤.<ul><li>4ê°œì˜ producer ê°€ ì´ˆë‹¹ 10ê°œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚¸ë‹¤ë©´</li><li><strong>ì´ˆë‹¹ 40ê°œ ë©”ì„¸ì§€ë¥¼ ì²˜ë¦¬í•´ì•¼í•œë‹¤.</strong></li><li>partition 1ê°œë‹¹ ì´ˆë‹¹ 10ê°œë¥¼ ì²˜ë¦¬í•œë‹¤ê³  í•˜ë©´ partition ìˆ˜ë¥¼ 4ê°œë¡œ ëŠ˜ë ¤ ëª©í‘œ ì²˜ë¦¬ëŸ‰ì„ ë‹¬ì„±í•  ìˆ˜ ìˆë„ë¡ partition ìˆ˜ë¥¼ ì¡°ì •í•œë‹¤.</li><li>producer ë§ê³  consumer ì˜ ìƒí™©ë„ ê³ ë ¤í•´ì•¼ í•œë‹¤.</li><li>8ê°œ consumer ê°€ ì´ˆë‹¹ 5ê°œ ë©”ì„¸ì§€ë¥¼ ì†Œë¹„í•œë‹¤ë©´ partition ìˆ˜ë¥¼ consumer ìˆ˜ì— ë§ê²Œ 8ê°œë¡œ ì„¤ì •í•´ì•¼í•œë‹¤. (<code>producer ì˜ ìƒí™©ë§Œ ê³ ë ¤í•˜ì§€ ì•Šê³  partition ì„ ìµœëŒ€ë¡œ ë§ì¶œ ìˆ˜ ìˆëŠ” ê°¯ìˆ˜ë¡œ ë§ì¶˜ë‹¤</code>)</li></ul></li><li>partition ì¦ê°€ëŠ” ì•„ë¬´ë•Œë‚˜ ë³€ê²½ ê°€ëŠ¥í•˜ì§€ë§Œ ì¶•ì†ŒëŠ” ì‚­ì œ ë§ê³ ëŠ” ë°©ë²•ì´ ì—†ê¸° ë•Œë¬¸ì— ì´ˆê¸° ì„¤ê³„ê°€ êµ‰ì¥íˆ ì¤‘ìš”í•˜ë‹¤.<ul><li><strong>ì¶•ì†Œë¥¼ ì›í•˜ë©´ topic ì„ ì‚­ì œí•˜ê³  ì¬ ìƒì„±í•´ì•¼í•œë‹¤.</strong></li></ul></li><li>1ê°œ broker ë‹¹ ìµœëŒ€ partition ìˆ˜ëŠ” 2000 ê°œë¡œ ê¶Œì¥í•˜ê³  ìˆë‹¤.</li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li>ì¹´í”„ì¹´, ë°ì´í„°í”Œë«í¼ì˜ ìµœê°•ì</li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/kafka-topic_and_partition/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Kafka] Kafka ë””ìì¸ íŠ¹ì§•</title>
      <link>https://jx2lee.github.io/kafka-kafka_design_pattern/</link>
      <guid>https://jx2lee.github.io/kafka-kafka_design_pattern/</guid>
      <pubDate>Sun, 09 May 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; Kafka ë””ìì¸ íŠ¹ì§•ì„ ì‚´í´ë³¸ë‹¤. ğŸ–¼ &lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> Kafka ë””ìì¸ íŠ¹ì§•ì„ ì‚´í´ë³¸ë‹¤. ğŸ–¼ </center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ë¶„ì‚° ì‹œìŠ¤í…œ</a></li><li><a href="#subject02">í˜ì´ì§€ ìºì‹œ</a></li><li><a href="#subject03">ë°°ì¹˜ ì „ì†¡ ì²˜ë¦¬</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="ë¶„ì‚°-ì‹œìŠ¤í…œ"><a href="#ë¶„ì‚°-ì‹œìŠ¤í…œ" class="headerlink" title=" ë¶„ì‚° ì‹œìŠ¤í…œ"></a><a name="subject01"></a> ë¶„ì‚° ì‹œìŠ¤í…œ</h1><ul><li>ë¶„ì‚° ì‹œìŠ¤í…œ ì •ì˜: ë„¤íŠ¸ì›Œí¬ë¡œ ì´ë£¨ì–´ì§„ ì»´í“¨í„°ë“¤ì˜ ê·¸ë£¹<ul><li>ì‹œìŠ¤í…œ ì „ì²´ê°€ ê³µí†µì˜ ëª©í‘œ</li><li>ë‹¨ì¼ ì‹œìŠ¤í…œ ë³´ë‹¤ ë” ë§ì€ ì„±ëŠ¥ì„ ë‚¼ ìˆ˜ ìˆìŒ</li><li>ì„œë²„ ì¥ì•  ì‹œ ë‹¤ë¥¸ ì„œë²„ê°€ ì¼ì„ ëŒ€ì‹  ì²˜ë¦¬</li><li>ì‹œìŠ¤í…œ í™•ì¥ ìš©ì´ (ì¶•ì†Œë„ ê°€ëŠ¥)</li></ul></li><li>Kafka broker ìˆ˜ ì¸¡ì •ì€ í•´ë‹¹ ì‹œìŠ¤í…œì„ ì˜ íŒŒì•…í•˜ì—¬ ìœ ë™ì ìœ¼ë¡œ ëŠ˜ë ¤ì•¼ í•¨</li><li>ë§í¬ë“œì¸ì€ ì‚¬ìš©ëŸ‰ì´ ê°€ì¥ ë†’ì€ í´ëŸ¬ìŠ¤í„°ì˜ ê²½ìš° 60ê°œ broker ë¥¼ ìš´ì˜í•œë‹¤ê³  í•¨ (apache kafka ê³µì‹ Document)</li></ul><h1 id="í˜ì´ì§€-ìºì‹œ"><a href="#í˜ì´ì§€-ìºì‹œ" class="headerlink" title=" í˜ì´ì§€ ìºì‹œ"></a><a name="subject02"></a> í˜ì´ì§€ ìºì‹œ</h1><p>Kafka ëŠ” ë©”ì„¸ì§€ ì²˜ë¦¬ëŸ‰ì„ ë†’ì´ê¸° ìœ„í•´ í˜ì´ì§€ ìºì‹±ì„ ì´ìš©í•˜ì˜€ë‹¤.</p><ul><li>OS ê´€ì ì—ì„œ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚¬ìš©í•˜ê³  ë‚¨ì€ ì”ì—¬ ë©”ëª¨ë¦¬ ë¶€ë¶„ì„ í˜ì´ì§€ ìºì‹œë¡œ ìœ ì§€í•´ OS ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚´</li><li>ë¹ ë¥¸ ì•¡ì„¸ìŠ¤ë¥¼ ìœ„í•´ kafka ëŠ” <code>í˜ì´ì§€ ìºì‹œ</code> ë¥¼ ì´ìš©í•˜ë„ë¡ ì„¤ê³„<ul><li>í˜ì´ì§€ ìºì‹œì— ëŒ€í•œ ë‚´ìš©ì€ ìœ„í‚¤í”¼ë””ì•„ ì°¸ê³ </li></ul></li><li>kafka broker ì˜ ë””ìŠ¤í¬ë¥¼ SATA ë¡œ ì‚¬ìš©í•´ë„ ë¬´ë°©í•˜ë‹¤ê³  í•œë‹¤ (ê³µì‹ Document)</li><li>JVM Heap ì—¬ìœ ë¥¼ ìœ„í•´ kafka broker ëŠ” 5GB í™ ë©”ëª¨ë¦¬ë©´ ì¶©ë¶„í•˜ë‹¤ê³  í•œë‹¤.<ul><li>ì—¬ìœ  ë©”ëª¨ë¦¬ëŠ” í˜ì´ì§€ ìºì‹œë¡œ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•œë‹¤.</li><li>ì¶”ê°€ë¡œ kafka broker ë‚´ ë‹¤ë¥¸ java application ì„ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.</li></ul></li></ul><p><img src="/image/kafka-kafka_design_pattern-1.png" alt="https://needjarvis.tistory.com/602"></p><blockquote><p>í˜ì´ì§€ ìºì‹œë¥¼ ê²€ìƒ‰í•˜ë˜ ì¤‘ ë²„í¼ìºì‹œì™€ í•¨ê»˜ ì„¤ëª…í•œ ë¶€ë¶„ì´ ë”± ì™€ë‹¿ì•˜ë‹¤. ë²„í¼ ìºì‹œëŠ” íŒŒì¼ ì‹œìŠ¤í…œì˜ ë©”íƒ€ ë°ì´í„° ê´€ë ¨ ë¸”ë¡ë“¤ì„ ì €ì¥í•œ ìºì‹œì´ë©°, í˜ì´ì§€ ìºì‹œëŠ” íŒŒì¼ì˜ ë‚´ìš©ì„ ì €ì¥í•˜ê³  ìˆëŠ” ìºì‹œì´ë‹¤. (<a href="https://brunch.co.kr/@alden/25"><em>https://brunch.co.kr/@alden/25</em></a>)</p></blockquote><h1 id="ë°°ì¹˜-ì „ì†¡-ì²˜ë¦¬"><a href="#ë°°ì¹˜-ì „ì†¡-ì²˜ë¦¬" class="headerlink" title=" ë°°ì¹˜ ì „ì†¡ ì²˜ë¦¬"></a><a name="subject03"></a> ë°°ì¹˜ ì „ì†¡ ì²˜ë¦¬</h1><p>Kafka ëŠ” ë©”ì‹œì§€ë¥¼ 1ê°œ ë§ˆë‹¤ ì „ì†¡í•  ê²½ìš° ë°œìƒí•˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„í—¤ë“œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ <strong>ì‘ì€ ë©”ì„¸ì§€ë“¤ì„ ë¬¶ì–´ í•œ ë²ˆì— ì „ì†¡</strong>í•˜ëŠ” <code>ë°°ì¹˜ ì „ì†¡ ì²˜ë¦¬</code> ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.</p><p><img src="/image/kafka-kafka_design_pattern-2.png" alt="/image/kafka-kafka_design_pattern-2.png"> </p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li>ì¹´í”„ì¹´, ë°ì´í„° í”Œë«í¼ì˜ ìµœê°•ì</li><li><a href="https://needjarvis.tistory.com/602">https://needjarvis.tistory.com/602</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/kafka-kafka_design_pattern/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[ElasticSearch] Shard ì™€ Segment</title>
      <link>https://jx2lee.github.io/es-shard_segment/</link>
      <guid>https://jx2lee.github.io/es-shard_segment/</guid>
      <pubDate>Wed, 05 May 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;shard ëŠ” elasticsearch ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ê°œë…ìœ¼ë¡œ ë¨¸ë¦¿ì†ì— ì €ì¥í•˜ê¸° ìœ„í•´ ê¸°ë¡ì„ ë‚¨ê¸´ë‹¤. ğŸ’¾&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center>shard ëŠ” elasticsearch ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ê°œë…ìœ¼ë¡œ ë¨¸ë¦¿ì†ì— ì €ì¥í•˜ê¸° ìœ„í•´ ê¸°ë¡ì„ ë‚¨ê¸´ë‹¤. ğŸ’¾</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ì •ì˜</a><ul><li><a href="#subject02">Shard</a></li><li><a href="#subject03">Segment</a></li></ul></li><li><a href="#subject04">ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ë°©ì‹</a></li><li><a href="#subject05">documnet ê°€ upadte ë˜ëŠ” ê³¼ì •</a><ul><li><a href="#subject06">ê·¸ëŸ¼ ê³„ì†í•´ì„œ segment ë¥¼ ìƒì„±í• í…ë°..?</a></li></ul></li><li><a href="#reference">Reference</a></li></ol><h1 id="ì •ì˜"><a href="#ì •ì˜" class="headerlink" title=" ì •ì˜"></a><a name="subject01"></a> ì •ì˜</h1><p><img align="left" src="/image/es-shard_segment-1.png"><br><br><br><br><br><br></p><h2 id="Shard"><a href="#Shard" class="headerlink" title=" Shard"></a><a name="subject02"></a> Shard</h2><ul><li>index ì— ì €ì¥ë˜ëŠ” ë…¼ë¦¬ì ì¸ ê³µê°„</li><li>í•˜ë‚˜ì˜ Index ëŠ” ë‹¤ìˆ˜ì˜ shard ë¥¼ ê°€ì§€ê³  ìˆìŒ</li><li>shard ëŠ” 1ê°œ ì´ìƒì˜ segment ë¡œ êµ¬ì„±<ul><li>shard ë§ˆë‹¤ segment ìˆ˜ëŠ” ìƒì´í•  ìˆ˜ ìˆìŒ</li></ul></li></ul><h2 id="Segment"><a href="#Segment" class="headerlink" title=" Segment"></a><a name="subject03"></a> Segment</h2><ul><li>shard ì˜ ë°ì´í„°ë“¤ì´ ê°€ì§€ê³  ìˆëŠ” ë¬¼ë¦¬ì ì¸ íŒŒì¼</li><li>ë¶ˆë³€(immutable)</li></ul><h1 id="ë°ì´í„°ê°€-ì €ì¥ë˜ëŠ”-ë°©ì‹"><a href="#ë°ì´í„°ê°€-ì €ì¥ë˜ëŠ”-ë°©ì‹" class="headerlink" title=" ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ë°©ì‹"></a><a name="subject04"></a> ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ë°©ì‹</h1><p><img src="/image/es-shard_segment-2.png" alt="shard"></p><ul><li>index ë¥¼ shard ë¡œ ë‚˜ëˆ„ê³  ë°ì´í„° ë…¸ë“œì— shard ë¥¼ í• ë‹¹</li><li>ê° shard ì— ë¬¸ì„œë¥¼ ì €ì¥</li><li>shard: primary shard &amp; replica shard<ul><li>primary shard: ì›ë³¸ ë¬¸ì„œ</li><li>replica shard: ì›ë³¸ ë¬¸ì„œê°€ ìœ ì‹¤ë˜ì§€ ì•Šê¸° ìœ„í•´ ë³µì‚¬í•œ ë¬¸ì„œ</li><li>replica shard ë¥¼ í†µí•´ ë°ì´í„° ì•ˆì •ì„± ë³´ì¥</li><li>primary shard ëŠ” ìµœì´ˆ index ìƒì„± ì‹œ ê°œìˆ˜ë¥¼ ê²°ì •í•˜ëŠ”ë° ì´ëŠ” ì„¤ì • ì´í›„ ë³€ê²½ì´ ë¶ˆê°€í•˜ë‹¤. ë”°ë¼ì„œ ì‹ ì¤‘í•˜ê²Œ ê²°ì •í•´ì•¼í•¨</li></ul></li><li>í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ë¬¸ì„œëŠ” shard ë“¤ì— ë¶„ì‚° ì €ì¥ë˜ê³  ì‹¤ì œëŠ” segment ë¼ëŠ” ì‹¤ì œ ë¬¼ë¦¬ì  íŒŒì¼ì— ì €ì¥</li><li>ìƒ‰ì¸(indexing)ëœ ë¬¸ì„œëŠ” ë¨¼ì € memory buffer cache ì— ì €ì¥<ul><li>ì´í›„ refresh ë¥¼ í†µí•´ ë””ìŠ¤í¬ì— segment ë‹¨ìœ„ë¡œ ë¬¸ì„œê°€ ì €ì¥ë˜ê³  ì´ë•Œë¶€í„° ê²€ìƒ‰ì´ ê°€ëŠ¥í•˜ë‹¤.</li></ul></li></ul><h1 id="documnet-ê°€-upadte-ë˜ëŠ”-ê³¼ì •"><a href="#documnet-ê°€-upadte-ë˜ëŠ”-ê³¼ì •" class="headerlink" title=" documnet ê°€ upadte ë˜ëŠ” ê³¼ì •"></a><a name="subject05"></a> documnet ê°€ upadte ë˜ëŠ” ê³¼ì •</h1><ol><li>document ì—…ë°ì´íŠ¸ë¥¼ ì‹œë„í•˜ë©´ elasticsearch ëŠ” ìƒˆë¡œìš´ segment ì— ì—…ë°ì´íŠ¸ ëœ document ë¥¼ ì €ì¥</li><li>ê¸°ì¡´ ë°ì´í„°ëŠ” ì“°ì´ì§€ ì•Šê²Œ ë¶ˆìš© ì²˜ë¦¬ (ë°”ë¡œ ì‚­ì œëŠ” í•˜ì§€ ì•ŠìŒ)</li><li>ì´í›„ ë°ì´í„° ì¡°íšŒ ì‹œ update ëœ document ë¥¼ ê²€ìƒ‰í•˜ì—¬ ê¸°ì¡´ ë¶ˆìš©ì²˜ë¦¬ëœ document ëŠ” ê²€ìƒ‰ë˜ì§€ ì•ŠìŒ</li></ol><h2 id="ê·¸ëŸ¼-ê³„ì†í•´ì„œ-segment-ë¥¼-ìƒì„±í• í…ë°"><a href="#ê·¸ëŸ¼-ê³„ì†í•´ì„œ-segment-ë¥¼-ìƒì„±í• í…ë°" class="headerlink" title=" ê·¸ëŸ¼ ê³„ì†í•´ì„œ segment ë¥¼ ìƒì„±í• í…ë°..?"></a><a name="subject06"></a> ê·¸ëŸ¼ ê³„ì†í•´ì„œ segment ë¥¼ ìƒì„±í• í…ë°..?</h2><p>ì´ì™€ ê°™ì´ ìƒê°í•  ìˆ˜ ìˆë‹¤. ì—…ë°ì´íŠ¸ í˜¹ì€ ì‚­ì œ ì‹œ ë¶ˆìš©ì²˜ë¦¬ë§Œ ì§„í–‰ë˜ë©´ ê¸°ì¡´ ìƒì„±ëœ segment ë“¤ì´ ìŒ“ì—¬ ì‹œìŠ¤í…œì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ elasticsearch ëŠ” background ì—ì„œ segment merge ì‘ì—…ì„ ì§„í–‰í•œë‹¤.</p><ol><li>ID 1,2,3 document ìƒ‰ì¸</li><li>ID 3ì¸ document ë¥¼ ì‚­ì œí•˜ë©´ í•´ë‹¹ ë¬¸ì„œê°€ ì‚­ì œë˜ì—ˆë‹¤ëŠ” flag ë¥¼ ê¸°ë¡í•˜ê³  ë¶ˆìš© ì²˜ë¦¬</li><li>ID 4ì¸ document ìƒ‰ì¸</li><li>ìƒ‰ì¸ì´ ëœë‹¤ê³  merge ì‘ì—…ì´ ì¼ì–´ë‚˜ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ ì˜ˆì œë¥¼ ì‰½ê²Œ ì„¤ëª…í•˜ê¸° ìœ„í•´ ìƒ‰ì¸ ì‘ì—…ì„ ì¶”ê°€í•˜ì˜€ë‹¤. ë°±ê·¸ë¼ìš´ë“œì—ì„œ merge ì‘ì—…ì´ ì§„í–‰ë  ë•Œ ID 3ì¸ ë¬¸ì„œëŠ” ì‚­ì œ flag ê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¬¸ì„œëŠ” ì œì™¸í•˜ê³  1,2 ë¬¸ì„œë§Œ í•˜ë‚˜ì˜ segment ë¡œ ë³‘í•©í•œë‹¤.</li></ol><p>ì´ëŸ¬í•œ segment merge ì‘ì—…ì€ í•˜ë‚˜ì˜ í° segment ë¡œ í•©ì¹˜ëŠ” ì‘ì—…ì´ ë¬´ìˆ˜íˆ ë§ì´ ë°œìƒí•œë‹¤. ë˜í•œ, merge ì‹œ ì‚­ì œ flag ê°€ ì¡´ì¬í•˜ëŠ” ë°ì´í„°ëŠ” ì‹¤ì œë¡œ ë””ìŠ¤í¬ì—ì„œ ì‚­ì œí•œë‹¤. segment ë³‘í•©ì„ í†µí•´ ê²€ìƒ‰ ì‹œ íŒŒì¼ ê°œìˆ˜ê°€ ì¤„ì–´ë“¤ê¸° ë•Œë¬¸ì— ì ì€ ë¹„ìš©ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì‘ë‹µí•  ìˆ˜ ìˆë‹¤.</p><blockquote><p><em>ê·¸ë ‡ë‹¤ë©´ í•´ë‹¹ segment í¬ê¸°ê°€ ì»¤ì§€ê²Œ ë˜ë©´ íŒŒì¼ ê°œìˆ˜ê°€ ì ì§€ë§Œ ì‘ë‹µí•  ë•Œ ê·¸ë§Œí¼ ë¹„ìš©ì´ ë” ë“¤ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ? ì´ ë¶€ë¶„ì€ ì„œì¹˜ í˜¹ì€ ì €ìì—ê²Œ ë¬¼ì–´ë´ì•¼ê² ë‹¤.</em></p></blockquote><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li>ê¸°ì´ˆë¶€í„° ë°°ìš°ëŠ” ElasticSearch ë…¸í•˜ìš°</li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/es-shard_segment/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Kafka] kafka ì„¤ì¹˜ ë° ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸</title>
      <link>https://jx2lee.github.io/kafka-install_and_simple_test/</link>
      <guid>https://jx2lee.github.io/kafka-install_and_simple_test/</guid>
      <pubDate>Wed, 05 May 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;ìš´ì˜ì¤‘ì¸ í”Œë«í¼ì— ì‚¬ìš©í•˜ëŠ” Kafka ë¥¼ ì„¤ì¹˜í•˜ê³  í…ŒìŠ¤íŠ¸ í•œ ê¸°ë¡ì„ ë‚¨ê¸´ë‹¤.ğŸ”‘&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center>ìš´ì˜ì¤‘ì¸ í”Œë«í¼ì— ì‚¬ìš©í•˜ëŠ” Kafka ë¥¼ ì„¤ì¹˜í•˜ê³  í…ŒìŠ¤íŠ¸ í•œ ê¸°ë¡ì„ ë‚¨ê¸´ë‹¤.ğŸ”‘</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ìš©ì–´ ì •ë¦¬</a></li><li><a href="#subject02">Download Binary</a></li><li><a href="#subject03">Zookeeper?</a><ul><li><a href="#subject04">Run Zookeeper</a></li></ul></li><li><a href="#subject05">Run Kafka Broker</a><ul><li><a href="#subject06">ë‹¨ì¼ ë…¸ë“œ ë‹¤ì¤‘ ë¸Œë¡œì»¤ í´ëŸ¬ìŠ¤í„° êµ¬ë™</a></li></ul></li><li><a href="#subject07">Create Topic</a><ul><li><a href="#subject08">Topic ë¦¬ìŠ¤íŠ¸ í™•ì¸</a></li><li><a href="#subject09">Topic ì„¤ì • í™•ì¸</a></li></ul></li><li><a href="#subject10">Producer &amp; Consumer í…ŒìŠ¤íŠ¸</a><ul><li><a href="#subject11">Start Producer</a></li><li><a href="#subject12">Start Consumer</a></li></ul></li><li><a href="#subject13">Consumer lag í™•ì¸</a><ul><li><a href="#subject14">Run console Producer &amp; Consumer</a></li><li><a href="#subject15">Consumer list í™•ì¸</a></li><li><a href="#subject16">Lag í™•ì¸ (ì£¼ê¸°: 1ì´ˆ)</a></li></ul></li><li><a href="#subject17">Log</a></li><li><a href="#reference">Reference</a></li></ol><ul><li>version: 1.1.0</li><li>One broker Cluster</li></ul><h1 id="ìš©ì–´-ì •ë¦¬"><a href="#ìš©ì–´-ì •ë¦¬" class="headerlink" title=" ìš©ì–´ ì •ë¦¬"></a><a name="subject01"></a> ìš©ì–´ ì •ë¦¬</h1><ul><li><strong>Kafka</strong>: ì•„íŒŒì¹˜ í”„ë¡œì íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„. kafka cluster ë¼ê³ ë„ ë¶€ë¦„</li><li><strong>Broker</strong>: ì¹´í”„ì¹´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ì„œë²„ í˜¹ì€ ë…¸ë“œ</li><li><strong>Topic</strong>: producer ì™€ consumer ë“¤ì´ ë³´ë‚¸ ìì‹ ë“¤ì˜ ë©”ì„¸ì§€ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ë„¤ì„. topic ì´ë¼ëŠ” ê°œë…ì„ í†µí•´ ë‹¤ìˆ˜ì˜ producer ì™€ consumer ë“¤ì´ ë³´ë‚¸ ë©”ì„¸ì§€ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©</li><li><strong>Partition</strong>: ë³‘ë ¬ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ê²Œ ë©”ì„¸ì§€ë¥¼ ë‚˜ëˆˆ ë‹¨ìœ„ (ë§ì€ ì–‘ì˜ ë©”ì„¸ì§€ ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” partition ì¦ê°€)</li><li><strong>Produdcer &amp; Consumer</strong>: ë‹¨ì–´ ê·¸ ìì²´ë¡œ ë©”ì„¸ì§€ë¥¼ ìƒì‚°í•˜ì—¬ broker ì˜ topic ìœ¼ë¡œ ë³´ë‚´ëŠ” ì„œë²„ ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ &amp; broker ì˜ topic ìœ¼ë¡œ ì €ì¥ëœ ë©”ì„¸ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì„œë²„ ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜</li></ul><h1 id="Download-Binary"><a href="#Download-Binary" class="headerlink" title=" Download Binary"></a><a name="subject02"></a> Download Binary</h1><p><code>wget https://archive.apache.org/dist/kafka/1.1.0/kafka_2.11-1.1.0.tgz</code></p><h2 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title=" Zookeeper?"></a><a name="subject03"></a> Zookeeper?</h2><p>Zookeeper ì— ëŒ€í•œ ê°„ëµí•œ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>ë¶„ì‚° application ì„ ìœ„í•œ coordination system</li><li>kafka broker ì™€ consumer ê°„ ì¸í„°í˜ì´ìŠ¤ ì—­í• </li><li>file system ê³¼ ìœ ì‚¬í•œ í˜•íƒœì˜ ê³„ì¸µí™”ëœ ê³µìœ  namespace data ë“±ë¡ì„ í†µí•œ ë¶„ì‚° í”„ë¡œì„¸ìŠ¤ ì¡°ìœ¨</li><li>file system ê³¼ì˜ ì°¨ì´ì <ul><li>znode(zookeeper component) ì œí•œëœ ë°ì´í„°ë§Œ ì €ì¥</li><li>ìƒíƒœ ì •ë³´, ì„¤ì • ì •ë³´, ìœ„ì¹˜ ì •ë³´ ë“± kafka producer &lt;-&gt; consumer ê°„ ì¡°ìœ¨ì— í•„ìš”í•œ ë°ì´í„°ë§Œ ì €ì¥</li></ul></li></ul><h2 id="Run-Zookeeper"><a href="#Run-Zookeeper" class="headerlink" title=" Run Zookeeper"></a><a name="subject04"></a> Run Zookeeper</h2><p><code>bin/zookeeper-server-start.sh -daemon config/zookeeper.properties</code></p><ul><li>-daemon ì˜µì…˜ì„ í†µí•´ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰</li></ul><h1 id="Run-Kafka-Broker"><a href="#Run-Kafka-Broker" class="headerlink" title=" Run Kafka Broker"></a><a name="subject05"></a> Run Kafka Broker</h1><p><code>config/server.properties</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############################# Server Basics #############################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The id of the broker. This must be set to a unique integer for each broker.</span></span><br><span class="line">broker.id=0</span><br><span class="line"></span><br><span class="line"><span class="comment">############################# Socket Server Settings #############################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The address the socket server listens on. It will get the value returned from</span></span><br><span class="line"><span class="comment"># java.net.InetAddress.getCanonicalHostName() if not configured.</span></span><br><span class="line"><span class="comment">#   FORMAT:</span></span><br><span class="line"><span class="comment">#     listeners = listener_name://host_name:port</span></span><br><span class="line"><span class="comment">#   EXAMPLE:</span></span><br><span class="line"><span class="comment">#     listeners = PLAINTEXT://your.host.name:9092</span></span><br><span class="line">listeners=PLAINTEXT://:9092</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hostname and port the broker will advertise to producers and consumers. If not set,</span></span><br><span class="line"><span class="comment"># it uses the value for &quot;listeners&quot; if configured.  Otherwise, it will use the value</span></span><br><span class="line"><span class="comment"># returned from java.net.InetAddress.getCanonicalHostName().</span></span><br><span class="line">advertised.listeners=PLAINTEXT://&#123;ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” Ip&#125;:9092</span><br></pre></td></tr></table></figure><p><code>bin/kafka-server-start.sh -daemon config/server.properties</code></p><ul><li>daemon ì˜µì…˜ì„ í†µí•´ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰</li></ul><h2 id="ë‹¨ì¼-ë…¸ë“œ-ë‹¤ì¤‘-ë¸Œë¡œì»¤-í´ëŸ¬ìŠ¤í„°-êµ¬ë™"><a href="#ë‹¨ì¼-ë…¸ë“œ-ë‹¤ì¤‘-ë¸Œë¡œì»¤-í´ëŸ¬ìŠ¤í„°-êµ¬ë™" class="headerlink" title=" ë‹¨ì¼ ë…¸ë“œ ë‹¤ì¤‘ ë¸Œë¡œì»¤ í´ëŸ¬ìŠ¤í„° êµ¬ë™"></a><a name="subject06"></a> ë‹¨ì¼ ë…¸ë“œ ë‹¤ì¤‘ ë¸Œë¡œì»¤ í´ëŸ¬ìŠ¤í„° êµ¬ë™</h2><ul><li>zookeeper ê¸°ë™ì€ ë‹¨ì¼ ë…¸ë“œ ë‹¨ì¼ ë¸Œë¡œì»¤ í´ëŸ¬ìŠ¤í„°ì™€ ë™ì¼</li><li>kafka server ê¸°ë™ ì‹œ <a href="http://server.properties"><code>server.properties</code></a><ul><li>í•˜ê¸° 3ê°œ value ë¥¼ ë‹¤ë¥´ê²Œ ì„¤ì •í•˜ì—¬ í•´ë‹¹ config ë¥¼ ì½ì–´ë“¤ì—¬ ê¸°ë™<ul><li>brokerid</li><li>listeners<ul><li>ex<em>) listeners=PLAINTEXT://:9092(or 9093 or 9094)</em></li></ul></li><li>log.dir</li></ul></li></ul></li><li>ì´í›„ ì½˜ì†”ë¡œ pub/sub í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì‹œ producer ì— broker-list ì¸ìëŠ” ìœ„ kafka server properties.listeners.port ë¥¼ í™•ì¸í•˜ì—¬ ë‚˜ì—´<ul><li><em>ex) bin/kafka-console-producer.sh â€“broker-list localhost:9092,localhost:9093 â€“topic 20210324-night</em></li></ul></li></ul><h1 id="Create-Topic"><a href="#Create-Topic" class="headerlink" title=" Create Topic"></a><a name="subject07"></a> Create Topic</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode kafka_2.11-1.1.0]$ bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic kafka-test</span><br><span class="line">Created topic <span class="string">&quot;kafka-test&quot;</span>.</span><br></pre></td></tr></table></figure><h2 id="Topic-ë¦¬ìŠ¤íŠ¸-í™•ì¸"><a href="#Topic-ë¦¬ìŠ¤íŠ¸-í™•ì¸" class="headerlink" title=" Topic ë¦¬ìŠ¤íŠ¸ í™•ì¸"></a><a name="subject08"></a> Topic ë¦¬ìŠ¤íŠ¸ í™•ì¸</h2><p><code>kafka-topics.sh --list --zookeeper &#123;ip:port&#125;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode kafka_2.11-1.1.0]$ bin/kafka-topics.sh --list --zookeeper localhost:2181</span><br><span class="line">kafka-test</span><br></pre></td></tr></table></figure><h2 id="Topic-ì„¤ì •-í™•ì¸"><a href="#Topic-ì„¤ì •-í™•ì¸" class="headerlink" title=" Topic ì„¤ì • í™•ì¸"></a><a name="subject09"></a> Topic ì„¤ì • í™•ì¸</h2><p><code>kafka-topics.sh --describe &#123;topic_name&#125; --zookeeper &#123;ip:port&#125;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode kafka_2.11-1.1.0]$ bin/kafka-topics.sh --describe kafka-test --zookeeper localhost:2181</span><br><span class="line">Topic:kafka-testPartitionCount:1ReplicationFactor:1Configs:</span><br><span class="line">Topic: kafka-testPartition: 0Leader: 0Replicas: 0Isr: 0</span><br></pre></td></tr></table></figure><h1 id="Producer-amp-Consumer-í…ŒìŠ¤íŠ¸"><a href="#Producer-amp-Consumer-í…ŒìŠ¤íŠ¸" class="headerlink" title=" Producer &amp; Consumer í…ŒìŠ¤íŠ¸"></a><a name="subject10"></a> Producer &amp; Consumer í…ŒìŠ¤íŠ¸</h1><h2 id="Start-Producer"><a href="#Start-Producer" class="headerlink" title=" Start Producer"></a><a name="subject11"></a> Start Producer</h2><p><code>kafka-console-producer.sh --topic &#123;topic_name&#125; --broker-list &#123;broker_ip:broker_port&#125;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode kafka_2.11-1.1.0]$ bin/kafka-console-producer.sh --topic kafka-test --broker-list localhost:9092</span><br><span class="line">&gt;ls</span><br></pre></td></tr></table></figure><h2 id="Start-Consumer"><a href="#Start-Consumer" class="headerlink" title=" Start Consumer"></a><a name="subject12"></a> Start Consumer</h2><p><code>kafka-console-consumer.sh --topic &#123;topic_name&#125; --zookeeper &#123;zk_ip:zk_port&#125;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode kafka_2.11-1.1.0]$ bin/kafka-console-consumer.sh --topic kafka-test --zookeeper localhost:2181</span><br><span class="line">ls</span><br></pre></td></tr></table></figure><ul><li>Consumer ì½˜ì†”ì°½ì—ì„œ ls í…ìŠ¤íŠ¸ ìˆ˜ì‹  í™•ì¸</li></ul><h1 id="Consumer-lag-í™•ì¸"><a href="#Consumer-lag-í™•ì¸" class="headerlink" title=" Consumer lag í™•ì¸"></a><a name="subject13"></a> Consumer lag í™•ì¸</h1><p>ì»¨ìŠˆë¨¸ê°€ ì½ì–´ë“¤ì–´ì•¼ í•  ë°ì´í„°(producer ê°€ ë³´ë‚¸ ë°ì´í„° - consumer ê°€ ë°›ì€ ë°ì´í„°) ì–‘ì„ ë‚˜íƒ€ë‚´ëŠ” lag ì„ ì»¤ë§¨ë“œë¡œ í™•ì¸í•œë‹¤.</p><h1 id="Run-console-Producer-amp-Consumer"><a href="#Run-console-Producer-amp-Consumer" class="headerlink" title=" Run console Producer &amp; Consumer"></a><a name="subject14"></a> Run console Producer &amp; Consumer</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#producer</span></span><br><span class="line">[centos@singlenode bin]$ ./kafka-console-producer.sh --topic kafka-test --broker-list localhost:9092</span><br><span class="line"><span class="comment">#consumer</span></span><br><span class="line">[centos@singlenode kafka_2.11-1.1.0]$ bin/kafka-console-consumer.sh --topic kafka-test --bootstrap-server localhost:9092</span><br></pre></td></tr></table></figure><h2 id="Consumer-list-í™•ì¸"><a href="#Consumer-list-í™•ì¸" class="headerlink" title=" Consumer list í™•ì¸"></a><a name="subject15"></a> Consumer list í™•ì¸</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode kafka_2.11-1.1.0]$ bin/kafka-consumer-groups.sh --list --bootstrap-server localhost:9092</span><br><span class="line">Note: This will not show information about old Zookeeper-based consumers.</span><br><span class="line">console-consumer-62348</span><br></pre></td></tr></table></figure><h2 id="Lag-í™•ì¸-ì£¼ê¸°-1ì´ˆ"><a href="#Lag-í™•ì¸-ì£¼ê¸°-1ì´ˆ" class="headerlink" title=" Lag í™•ì¸ (ì£¼ê¸°: 1ì´ˆ)"></a><a name="subject16"></a> Lag í™•ì¸ (ì£¼ê¸°: 1ì´ˆ)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Every 1.0s: bin/kafka-consumer-groups.sh --describe --bootstrap-server localhost:9092 --group console-consumer-62348                                                                                                                                                                                  Mon Mar 22 16:08:42 2021</span><br><span class="line"></span><br><span class="line">Note: This will not show information about old Zookeeper-based consumers.</span><br><span class="line"></span><br><span class="line">TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             CONSUMER-ID                                     HOST            CLIENT-ID</span><br><span class="line">kafka-test0          210             210             0               consumer-1-bea6ae07-f72f-4496-b3fc-e429a0f4679d /192.168.0.4    consumer-1</span><br><span class="line"><span class="comment"># í˜„ì¬ Lag ì´ ì—†ëŠ”ë°, producer ì—ì„œ ë§ì€ ë©”ì„¸ì§€ë¥¼ ìƒì„±í•´ì„œ enter ë¥¼ ì¹˜ë©´ LAG ê°’ì´ ìƒìŠ¹í•˜ëŠ” ì‹œì ì´ ì¡´ì¬í•¨</span></span><br><span class="line"></span><br><span class="line">Every 1.0s: bin/kafka-consumer-groups.sh --describe --bootstrap-server localhost:9092 --group console-consumer-62348                                                                                                                                                                                  Mon Mar 22 16:09:48 2021</span><br><span class="line"></span><br><span class="line">Note: This will not show information about old Zookeeper-based consumers.</span><br><span class="line"></span><br><span class="line">TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             CONSUMER-ID                                     HOST            CLIENT-ID</span><br><span class="line">kafka-test0          222             242             20              consumer-1-bea6ae07-f72f-4496-b3fc-e429a0f4679d /192.168.0.4    consumer-1</span><br><span class="line"><span class="comment"># ì´í›„ produceer ê°€ ìƒì„±í•œ ë©”ì„¸ì§€ë¥¼ consumer ê°€ ê°€ì ¸ì˜¤ë©´ì„œ LAG ì´ 0ì´ ë˜ëŠ” ì‹œì (ìƒìƒëœ ëª¨ë“  ë©”ì„¸ì§€ sub ì™„ë£Œ) ì´ ì¡´ì¬</span></span><br><span class="line">Every 1.0s: bin/kafka-consumer-groups.sh --describe --bootstrap-server localhost:9092 --group console-consumer-62348                                                                                                                                                                                  Mon Mar 22 16:09:48 2021</span><br><span class="line"></span><br><span class="line">Note: This will not show information about old Zookeeper-based consumers.</span><br><span class="line"></span><br><span class="line">TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             CONSUMER-ID                                     HOST            CLIENT-ID</span><br><span class="line">kafka-test0          222             242              0              consumer-1-bea6ae07-f72f-4496-b3fc-e429a0f4679d /192.168.0.4    consumer-1</span><br></pre></td></tr></table></figure><h1 id="Log"><a href="#Log" class="headerlink" title=" Log"></a><a name="subject17"></a> Log</h1><ul><li><p><code>logs/controller.log</code></p><ul><li><p>Kafka í´ëŸ¬ìŠ¤í„°ì˜ ë…¸ë“œë“¤ ì¤‘ì—ì„œ í•˜ë‚˜ê°€ controller ë¡œ ì‘ë™í•˜ëŠ”ë° controller node ì—ì„œ ë°œìƒí•œ ë¡œê·¸</p><ul><li><p>kafka ë…¸ë“œì˜ êµ¬ë™ê³¼ ì¢…ë£Œ ê´€ë ¨ëœ ë¡œê·¸</p></li><li><p>controller ê°€ ê°ê°ì˜ ë…¸ë“œì˜ broker ì™€ í†µì‹ í•˜ëŠ” ë¡œê·¸</p></li><li><p>ì–´ë–¤ ë…¸ë“œê°€ controller ê°€ ë ì§€ ê²°ì •í•˜ëŠ” ë¡œê·¸</p><ul><li>ì˜ˆì‹œ : [2019-08-05 13:20:27,944] DEBUG [Controller id=1] Broker 3 has been elected as the controller, so stopping the election process. (kafka.controller.KafkaController)</li></ul></li></ul></li><li><p>Topic ìƒì„±ì— ëŒ€í•œ ë¡œê·¸</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[2021-03-22 16:38:36,346] INFO [Controller id=0] New topics: [Set(kafka-test-04)], deleted topics: [Set()], new partition replica assignment [Map(kafka-test-04-0 -&gt; Vector(0))] (kafka.controller.KafkaController)</span><br><span class="line">[2021-03-22 16:38:36,346] INFO [Controller id=0] New partition creation callback <span class="keyword">for</span> kafka-test-04-0 (kafka.controller.KafkaController)</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>logs/server.log</code></p><ul><li>ë…¸ë“œ(ì£¼ë¡œ broker)ì—ì„œ ë°œìƒí•œ ë¡œê·¸</li><li>Topic ë“¤ì˜ ê° Partition ì— ëŒ€í•œ leader election ì— ëŒ€í•œ ë¡œê·¸</li></ul></li><li><p><code>logs/zookeeper.out</code> : zookeeper ì„œë²„ì— ëŒ€í•œ ë¡œê·¸</p></li><li><p><code>logs/state-change.log</code> : Topic ë“¤ì˜ ê°ê°ì˜ Partition ë“¤ì— ëŒ€í•œ ìƒíƒœ ë³€í™” ê´€ë ¨ ë¡œê·¸</p></li><li><p><code>logs/kafka-authorizer.log</code> : ê¶Œí•œì´ ë¶€ì—¬ë˜ëŠ” ëª¨ë“  request ì™€ ê´€ë ¨ user name ì„ ê¸°ë¡í•œ ë¡œê·¸</p></li><li><p><code>logs/log-cleaner.log</code> : kafka.log.LogCleaner í´ë˜ìŠ¤ê°€ ë‚¨ê¸°ëŠ” ë¡œê·¸ë¡œ ë³´ì´ëŠ”ë°, ë©”ì‹œì§€ ì••ì¶•ê³¼ kafka ê°€ ìƒìƒí•œ ë¡œê·¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ë¡œê·¸</p></li><li><p><code>logs/kafka-request.log</code> : kafka.server.KafkaApis í´ë˜ìŠ¤ê°€ ë‚¨ê¸°ëŠ” ë¡œê·¸ë¡œ ë³´ì´ëŠ”ë°, kafka ë¡œ ë“¤ì–´ì˜¨ ìš”ì²­ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‚¨ê¸°ëŠ” ë¡œê·¸</p></li><li><p><code>logs/kafkaServer.out</code> : kafka.server.KafkaServer í´ë˜ìŠ¤ê°€ ë‚¨ê¸°ëŠ” ë¡œê·¸ë¡œ ë³´ì´ëŠ”ë°, kafka ë¸Œë¡œì»¤ë¥¼ ì‹¤í–‰í•  ë•Œ ê´€ë ¨ config ë° ìƒíƒœì— ëŒ€í•œ ì •ë³´ê°€ ë‚¨ëŠ”ë‹¤. ì •í™•íˆ ì–´ë–¤ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ”ì§€ëŠ” í™•ì¸ì´ í•„ìš”í•˜ë‹¤.</p></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://velog.io/@hanblueblue/Kafka-%EC%84%A4%EC%B9%98%EC%8B%A4%ED%96%89-%EB%B0%8F-%ED%85%8C%EC%8A%A4%ED%8A%B8">https://velog.io/@hanblueblue/Kafka-ì„¤ì¹˜ì‹¤í–‰-ë°-í…ŒìŠ¤íŠ¸</a></li><li><a href="https://devidea.tistory.com/55">https://devidea.tistory.com/55</a></li><li><a href="https://community.cloudera.com/t5/Support-Questions/What-is-the-use-of-zookeeper-out/td-p/218537">https://community.cloudera.com/t5/Support-Questions/What-is-the-use-of-zookeeper-out/td-p/218537</a></li><li><a href="https://godway1225.wordpress.com/2019/08/29/kafka-%EB%A1%9C%EA%B7%B8-%EC%A2%85%EB%A5%98-%EB%B0%8F-%EB%A1%9C%EA%B7%B8-%EC%83%98%ED%94%8C%EC%97%90-%EB%8C%80%ED%95%9C-%EC%84%A4%EB%AA%85/">https://godway1225.wordpress.com/2019/08/29/kafka-ë¡œê·¸-ì¢…ë¥˜-ë°-ë¡œê·¸-ìƒ˜í”Œì—-ëŒ€í•œ-ì„¤ëª…/</a></li><li><a href="https://docs.confluent.io/platform/current/kafka/authorization.html">https://docs.confluent.io/platform/current/kafka/authorization.html</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/kafka-install_and_simple_test/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Network] ngrok?</title>
      <link>https://jx2lee.github.io/network-introduction_to_ngrok/</link>
      <guid>https://jx2lee.github.io/network-introduction_to_ngrok/</guid>
      <pubDate>Fri, 30 Apr 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;tunnel program ì¸ ngrok ì„ ê°„ë‹¨íˆ ì‚´í´ë³´ì ğŸ”¨&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center>tunnel program ì¸ ngrok ì„ ê°„ë‹¨íˆ ì‚´í´ë³´ì ğŸ”¨</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ngork?</a></li><li><a href="#subject02">How to use</a><ul><li><a href="#subject03">Download binary</a></li><li><a href="#subject04">http ì„œë²„ë¥¼ ì™¸ë¶€ì— ì—°ê²°í•˜ê³ ì í•  ë•Œ (port: 8080)</a></li></ul></li><li><a href="#reference">Reference</a></li></ol><h1 id="ngrok"><a href="#ngrok" class="headerlink" title=" ngrok?"></a><a name="subject01"></a> ngrok?</h1><ul><li>Secure Tunnerls to localhost</li><li>ì™¸ë¶€ì—ì„œ ë¡œì»¬ì— ì ‘ì† ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” tunnel program</li></ul><p><img src="/image/network-introduction_to_ngrok-1.png" alt="ngrok"></p><h1 id="How-to-use"><a href="#How-to-use" class="headerlink" title=" How to use"></a><a name="subject02"></a> How to use</h1><h2 id="Download-binary"><a href="#Download-binary" class="headerlink" title=" Download binary"></a><a name="subject03"></a> Download binary</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; wget https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-darwin-amd64.zip</span><br><span class="line">&gt; mv ngrok /usr/<span class="built_in">local</span>/bin</span><br></pre></td></tr></table></figure><h2 id="http-ì„œë²„ë¥¼-ì™¸ë¶€ì—-ì—°ê²°í•˜ê³ ì-í• -ë•Œ-port-8080"><a href="#http-ì„œë²„ë¥¼-ì™¸ë¶€ì—-ì—°ê²°í•˜ê³ ì-í• -ë•Œ-port-8080" class="headerlink" title=" http ì„œë²„ë¥¼ ì™¸ë¶€ì— ì—°ê²°í•˜ê³ ì í•  ë•Œ (port: 8080)"></a><a name="subject04"></a> http ì„œë²„ë¥¼ ì™¸ë¶€ì— ì—°ê²°í•˜ê³ ì í•  ë•Œ (port: 8080)</h2><ul><li>spring web server í…ŒìŠ¤íŠ¸</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; ngrok http 8080</span><br><span class="line">ngrok by @inconshreveable                                                                                                                                       (Ctrl+C to quit)</span><br><span class="line"></span><br><span class="line">Session Status                online</span><br><span class="line">Session Expires               1 hour, 58 minutes</span><br><span class="line">Version                       2.3.38</span><br><span class="line">Region                        United States (us)</span><br><span class="line">Web Interface                 http://127.0.0.1:4040</span><br><span class="line">Forwarding                    http://7791735535f7.ngrok.io -&gt; http://localhost:8080</span><br><span class="line">Forwarding                    https://7791735535f7.ngrok.io -&gt; http://localhost:8080</span><br><span class="line"></span><br><span class="line">Connections                   ttl     opn     rt1     rt5     p50     p90</span><br><span class="line">                              2       2       0.01    0.01    0.00    0.00</span><br><span class="line"></span><br><span class="line">HTTP Requests</span><br><span class="line">-------------</span><br></pre></td></tr></table></figure><ul><li>Forwarding ìœ¼ë¡œ í¬ì›Œë”© ëœ ì£¼ì†Œë¡œ ì›¹ë¸Œë¼ìš°ì € ì ‘ì†</li></ul><p><img src="/image/network-introduction_to_ngrok-2.png" alt="ì›¹ë¸Œë¼ìš°ì € í™•ì¸"></p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://ngrok.com/">https://ngrok.com/</a></li><li><a href="https://subicura.com/2017/11/22/mac-os-development-environment-setup.html">https://subicura.com/2017/11/22/mac-os-development-environment-setup.html</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/network-introduction_to_ngrok/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[ElasticSearch] í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ ì—¬ëŸ¬ ES node ì‹¤í–‰</title>
      <link>https://jx2lee.github.io/es-run_cluster_in_node/</link>
      <guid>https://jx2lee.github.io/es-run_cluster_in_node/</guid>
      <pubDate>Mon, 15 Mar 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Elasticsearchì˜ ë…¸ë“œë“¤ì€ í´ë¼ì´ì–¸íŠ¸ì™€ì˜ í†µì‹ ì„ ìœ„í•œ http í¬íŠ¸(9200-9299), ë…¸ë“œ ê°„ì˜ ë°ì´í„° êµí™˜ì„ ìœ„í•œ tcp í¬íŠ¸ (9300-9399) ì´ 2 ì¢…ë¥˜ì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ì‚¬ìš©í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ 1ê°œì˜ ë¬¼ë¦¬ ì„œë²„ë§ˆë‹¤ í•˜ë‚˜ì˜ ë…¸ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ 2ê°œ elasticsearch ë…¸ë“œë¥¼ ì‹¤í–‰í•´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Elasticsearchì˜ ë…¸ë“œë“¤ì€ í´ë¼ì´ì–¸íŠ¸ì™€ì˜ í†µì‹ ì„ ìœ„í•œ http í¬íŠ¸(9200-9299), ë…¸ë“œ ê°„ì˜ ë°ì´í„° êµí™˜ì„ ìœ„í•œ tcp í¬íŠ¸ (9300-9399) ì´ 2 ì¢…ë¥˜ì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ ì‚¬ìš©í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œ 1ê°œì˜ ë¬¼ë¦¬ ì„œë²„ë§ˆë‹¤ í•˜ë‚˜ì˜ ë…¸ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê³  ìˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ í•˜ë‚˜ì˜ ì„œë²„ì—ì„œ 2ê°œ elasticsearch ë…¸ë“œë¥¼ ì‹¤í–‰í•´ë³¸ë‹¤.</p><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">config/elasticsearch.yml</a></li><li><a href="#subject02">Run node-1</a></li><li><a href="#subject03">Run node-2</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="config-elasticsearch-yml"><a href="#config-elasticsearch-yml" class="headerlink" title=" config/elasticsearch.yml"></a><a name="subject01"></a> config/elasticsearch.yml</h1><p>config íŒŒì¼ì— <code>node.max_local_storage_nodes</code> ê°’ì„ es node ìˆ˜ë¡œ ì„¤ì •í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#elasticsearch.yml</span></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">node.max_local_storage_nodes: 3</span><br></pre></td></tr></table></figure><blockquote><blockquote><p>node.max_local_storage_nodes<br>ë°ì´í„° ê²½ë¡œëŠ” ë‹¤ë¥¸ í´ëŸ¬ìŠ¤í„°ì˜ node í˜¹ì€ ì—¬ëŸ¬ nodeì—ì„œ ê³µìœ  í•  ìˆ˜ ìˆë‹¤. <strong>ê·¸ëŸ¬ë‚˜ ë™ì¼í•œ ë°ì´í„° ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ì—¬ í•˜ë‚˜ì˜ Elasticsearch node ë§Œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</strong> ì´ ì„¤ì •ì€ 7.xì—ì„œ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë©° ë²„ì „ 8.0ì—ì„œ ì‚¬ìš© ë¶ˆê°€í•˜ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ElasticsearchëŠ” ë‘˜ ì´ìƒì˜ nodeê°€ ë™ì¼í•œ ë°ì´í„° ê²½ë¡œë¥¼ ê³µìœ í•˜ì§€ ëª»í•˜ë„ë¡ êµ¬ì„±ëœë‹¤. ë‘˜ ì´ìƒì˜ ë…¸ë“œë¥¼ í—ˆìš©í•˜ë ¤ë©´ (ì˜ˆ : ê°œë°œ ë¨¸ì‹ ì—ì„œ) node.max_local_storage_nodes ë¥¼ 1ë³´ë‹¤ í° ì •ìˆ˜ë¡œ ì„¤ì •í•œë‹¤. ë™ì¼í•œ ë°ì´í„° ë””ë ‰í† ë¦¬ì—ì„œ ë‹¤ë¥¸ ë…¸ë“œ ìœ í˜• (ì˜ˆ : ë§ˆìŠ¤í„°, ë°ì´í„°)ì„ ì‹¤í–‰í•˜ë©´, ì´ë¡œ ì¸í•´ ì˜ˆê¸°ì¹˜ ì•Šì€ ë°ì´í„° ì†ì‹¤ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p></blockquote></blockquote><h1 id="Run-node-1"><a href="#Run-node-1" class="headerlink" title=" Run node-1"></a><a name="subject02"></a> Run node-1</h1><p><code>es-cluster-1</code> í´ëŸ¬ìŠ¤í„°ì— <code>node-1</code> ë…¸ë“œë¥¼ êµ¬ë™í•œë‹¤.</p><ul><li><code>bin/elasticsearch -Ecluster.name=es-cluster-1 -Enode.name=node-1</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode elasticsearch-7.10.2]$ bin/elasticsearch -Ecluster.name=es-cluster-1 -Enode.name=node-1</span><br><span class="line">[2021-03-04T17:27:20,414][INFO ][o.e.n.Node               ] [node-1] version[7.10.2], pid[16662], build[default/tar/747e1cc71def077253878a59143c1f785afa92b9/2021-01-13T00:42:12.435326Z], OS[Linux/3.10.0-862.14.4.el7.x86_64/amd64], JVM[Red Hat, Inc./OpenJDK 64-Bit Server VM/1.8.0_275/25.275-b01]</span><br><span class="line">[2021-03-04T17:27:20,416][INFO ][o.e.n.Node               ] [node-1] JVM home [/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-0.el7_9.x86_64/jre], using bundled JDK [<span class="literal">false</span>]</span><br><span class="line">[2021-03-04T17:27:20,416][INFO ][o.e.n.Node               ] [node-1] JVM arguments [-Xshare:auto, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=<span class="literal">true</span>, -Dfile.encoding=UTF-8, -Djna.nosys=<span class="literal">true</span>, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=<span class="literal">true</span>, -Dio.netty.noKeySetOptimization=<span class="literal">true</span>, -Dio.netty.recycler.maxCapacityPerThread=0, -Dio.netty.allocator.numDirectArenas=0, -Dlog4j.shutdownHookEnabled=<span class="literal">false</span>, -Dlog4j2.disable.jmx=<span class="literal">true</span>, -Djava.locale.providers=SPI,JRE, -Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Djava.io.tmpdir=/tmp/elasticsearch-3044858611283555949, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -XX:MaxDirectMemorySize=536870912, -Des.path.home=/app/elasticsearch-7.10.2, -Des.path.conf=/app/elasticsearch-7.10.2/config, -Des.distribution.flavor=default, -Des.distribution.type=tar, -Des.bundled_jdk=<span class="literal">true</span>]</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">[2021-03-04T17:27:23,567][INFO ][o.e.p.PluginsService     ] [node-1] loaded module [x-pack-watcher]</span><br><span class="line">[2021-03-04T17:27:23,567][INFO ][o.e.p.PluginsService     ] [node-1] no plugins loaded</span><br><span class="line">[2021-03-04T17:27:23,627][INFO ][o.e.e.NodeEnvironment    ] [node-1] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [93.7gb], net total_space [99.9gb], types [rootfs]</span><br><span class="line">[2021-03-04T17:27:23,627][INFO ][o.e.e.NodeEnvironment    ] [node-1] heap size [990.7mb], compressed ordinary object pointers [<span class="literal">true</span>]</span><br><span class="line">[2021-03-04T17:27:23,763][INFO ][o.e.n.Node               ] [node-1] node name [node-1], node ID [nHPEGErISlGQO-7OiBVLbw], cluster name [es-cluster-1], roles [transform, master, remote_cluster_client, data, ml, data_content, data_hot, data_warm, data_cold, ingest]</span><br><span class="line">[2021-03-04T17:27:27,914][INFO ][o.e.x.m.p.l.CppLogMessageHandler] [node-1] [controller/16827] [Main.cc@114] controller (64 bit): Version 7.10.2 (Build 40a3af639d4698) Copyright (c) 2021 Elasticsearch BV</span><br><span class="line">[2021-03-04T17:27:28,769][INFO ][o.e.x.s.a.s.FileRolesStore] [node-1] parsed [0] roles from file [/app/elasticsearch-7.10.2/config/roles.yml]</span><br><span class="line">[2021-03-04T17:27:30,276][INFO ][o.e.t.NettyAllocator     ] [node-1] creating NettyAllocator with the following configs: [name=unpooled, suggested_max_allocation_size=1mb, factors=&#123;es.unsafe.use_unpooled_allocator=null, g1gc_enabled=<span class="literal">false</span>, g1gc_region_size=0b, heap_size=990.7mb&#125;]</span><br><span class="line">[2021-03-04T17:27:30,387][INFO ][o.e.d.DiscoveryModule    ] [node-1] using discovery <span class="built_in">type</span> [zen] and seed hosts providers [settings]</span><br><span class="line">[2021-03-04T17:27:31,102][WARN ][o.e.g.DanglingIndicesState] [node-1] gateway.auto_import_dangling_indices is disabled, dangling indices will not be automatically detected or imported and must be managed manually</span><br><span class="line">[2021-03-04T17:27:31,660][INFO ][o.e.n.Node               ] [node-1] initialized</span><br><span class="line">[2021-03-04T17:27:31,661][INFO ][o.e.n.Node               ] [node-1] starting ...</span><br><span class="line">[2021-03-04T17:27:31,820][INFO ][o.e.t.TransportService   ] [node-1] publish_address &#123;127.0.0.1:9300&#125;, bound_addresses &#123;[::1]:9300&#125;, &#123;127.0.0.1:9300&#125;</span><br><span class="line">[2021-03-04T17:27:32,210][WARN ][o.e.b.BootstrapChecks    ] [node-1] the default discovery settings are unsuitable <span class="keyword">for</span> production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</span><br><span class="line">[2021-03-04T17:27:32,212][INFO ][o.e.c.c.Coordinator      ] [node-1] cluster UUID [DmY4hGLYRra7H50T-RSoqw]</span><br><span class="line">[2021-03-04T17:27:32,225][INFO ][o.e.c.c.ClusterBootstrapService] [node-1] no discovery configuration found, will perform best-effort cluster bootstrapping after [3s] unless existing master is discovered</span><br><span class="line">[2021-03-04T17:27:32,385][INFO ][o.e.c.s.MasterService    ] [node-1] elected-as-master ([1] nodes joined)[&#123;node-1&#125;&#123;nHPEGErISlGQO-7OiBVLbw&#125;&#123;9xoo0XVVSMu0LphMhu9QNw&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>, ml.max_open_jobs=20&#125; elect leader, _BECOME_MASTER_TASK_, _FINISH_ELECTION_], term: 16, version: 243, delta: master node changed &#123;previous [], current [&#123;node-1&#125;&#123;nHPEGErISlGQO-7OiBVLbw&#125;&#123;9xoo0XVVSMu0LphMhu9QNw&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>, ml.max_open_jobs=20&#125;]&#125;</span><br><span class="line">[2021-03-04T17:27:32,462][INFO ][o.e.c.s.ClusterApplierService] [node-1] master node changed &#123;previous [], current [&#123;node-1&#125;&#123;nHPEGErISlGQO-7OiBVLbw&#125;&#123;9xoo0XVVSMu0LphMhu9QNw&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>, ml.max_open_jobs=20&#125;]&#125;, term: 16, version: 243, reason: Publication&#123;term=16, version=243&#125;</span><br><span class="line">[2021-03-04T17:27:32,512][INFO ][o.e.h.AbstractHttpServerTransport] [node-1] publish_address &#123;127.0.0.1:9200&#125;, bound_addresses &#123;[::1]:9200&#125;, &#123;127.0.0.1:9200&#125;</span><br><span class="line">[2021-03-04T17:27:32,513][INFO ][o.e.n.Node               ] [node-1] started</span><br><span class="line">[2021-03-04T17:27:32,867][INFO ][o.e.l.LicenseService     ] [node-1] license [25e67c23-b75a-4b40-a9ee-78e3ddab64c3] mode [basic] - valid</span><br><span class="line">[2021-03-04T17:27:32,869][INFO ][o.e.x.s.s.SecurityStatusChangeListener] [node-1] Active license is now [BASIC]; Security is disabled</span><br><span class="line">[2021-03-04T17:27:32,874][INFO ][o.e.g.GatewayService     ] [node-1] recovered [8] indices into cluster_state</span><br><span class="line">[2021-03-04T17:27:33,816][INFO ][o.e.c.r.a.AllocationService] [node-1] Cluster health status changed from [RED] to [YELLOW] (reason: [shards started [[ilm-history-3-000001][0], [basketball][0], [.kibana-event-log-7.10.2-000001][0]]]).</span><br></pre></td></tr></table></figure><h1 id="Run-node-2"><a href="#Run-node-2" class="headerlink" title=" Run node-2"></a><a name="subject03"></a> Run node-2</h1><p>ê°™ì€ ì„œë²„ì—ì„œ<code>es-cluster-1</code> í´ëŸ¬ìŠ¤í„°ì˜ <code>node-1</code> ë…¸ë“œë¥¼ êµ¬ë™í•œë‹¤.</p><ul><li><code>bin/elasticsearch -Ecluster.name=es-cluster-1 -Enode.name=node-2</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode elasticsearch-7.10.2]$ bin/elasticsearch -Ecluster.name=es-cluster-1 -Enode.name=node-2</span><br><span class="line">[2021-03-04T17:29:35,358][INFO ][o.e.n.Node               ] [node-2] version[7.10.2], pid[16990], build[default/tar/747e1cc71def077253878a59143c1f785afa92b9/2021-01-13T00:42:12.435326Z], OS[Linux/3.10.0-862.14.4.el7.x86_64/amd64], JVM[Red Hat, Inc./OpenJDK 64-Bit Server VM/1.8.0_275/25.275-b01]</span><br><span class="line">[2021-03-04T17:29:35,359][INFO ][o.e.n.Node               ] [node-2] JVM home [/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-0.el7_9.x86_64/jre], using bundled JDK [<span class="literal">false</span>]</span><br><span class="line">[2021-03-04T17:29:35,360][INFO ][o.e.n.Node               ] [node-2] JVM arguments [-Xshare:auto, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=<span class="literal">true</span>, -Dfile.encoding=UTF-8, -Djna.nosys=<span class="literal">true</span>, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=<span class="literal">true</span>, -Dio.netty.noKeySetOptimization=<span class="literal">true</span>, -Dio.netty.recycler.maxCapacityPerThread=0, -Dio.netty.allocator.numDirectArenas=0, -Dlog4j.shutdownHookEnabled=<span class="literal">false</span>, -Dlog4j2.disable.jmx=<span class="literal">true</span>, -Djava.locale.providers=SPI,JRE, -Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Djava.io.tmpdir=/tmp/elasticsearch-4970032312008421325, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -XX:MaxDirectMemorySize=536870912, -Des.path.home=/app/elasticsearch-7.10.2, -Des.path.conf=/app/elasticsearch-7.10.2/config, -Des.distribution.flavor=default, -Des.distribution.type=tar, -Des.bundled_jdk=<span class="literal">true</span>]</span><br><span class="line">[2021-03-04T17:29:38,449][INFO ][o.e.p.PluginsService     ] [node-2] loaded module [aggs-matrix-stats]</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">[2021-03-04T17:29:38,460][INFO ][o.e.p.PluginsService     ] [node-2] no plugins loaded</span><br><span class="line">[2021-03-04T17:29:38,522][INFO ][o.e.e.NodeEnvironment    ] [node-2] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [93.7gb], net total_space [99.9gb], types [rootfs]</span><br><span class="line">[2021-03-04T17:29:38,522][INFO ][o.e.e.NodeEnvironment    ] [node-2] heap size [990.7mb], compressed ordinary object pointers [<span class="literal">true</span>]</span><br><span class="line">[2021-03-04T17:29:38,655][INFO ][o.e.n.Node               ] [node-2] node name [node-2], node ID [Xye_inmsQf2pVylm4m65hA], cluster name [es-cluster-1], roles [transform, master, remote_cluster_client, data, ml, data_content, data_hot, data_warm, data_cold, ingest]</span><br><span class="line">[2021-03-04T17:29:42,816][INFO ][o.e.x.m.p.l.CppLogMessageHandler] [node-2] [controller/17156] [Main.cc@114] controller (64 bit): Version 7.10.2 (Build 40a3af639d4698) Copyright (c) 2021 Elasticsearch BV</span><br><span class="line">[2021-03-04T17:29:43,668][INFO ][o.e.x.s.a.s.FileRolesStore] [node-2] parsed [0] roles from file [/app/elasticsearch-7.10.2/config/roles.yml]</span><br><span class="line">[2021-03-04T17:29:45,109][INFO ][o.e.t.NettyAllocator     ] [node-2] creating NettyAllocator with the following configs: [name=unpooled, suggested_max_allocation_size=1mb, factors=&#123;es.unsafe.use_unpooled_allocator=null, g1gc_enabled=<span class="literal">false</span>, g1gc_region_size=0b, heap_size=990.7mb&#125;]</span><br><span class="line">[2021-03-04T17:29:45,203][INFO ][o.e.d.DiscoveryModule    ] [node-2] using discovery <span class="built_in">type</span> [zen] and seed hosts providers [settings]</span><br><span class="line">[2021-03-04T17:29:45,906][WARN ][o.e.g.DanglingIndicesState] [node-2] gateway.auto_import_dangling_indices is disabled, dangling indices will not be automatically detected or imported and must be managed manually</span><br><span class="line">[2021-03-04T17:29:46,453][INFO ][o.e.n.Node               ] [node-2] initialized</span><br><span class="line">[2021-03-04T17:29:46,454][INFO ][o.e.n.Node               ] [node-2] starting ...</span><br><span class="line">[2021-03-04T17:29:46,608][INFO ][o.e.t.TransportService   ] [node-2] publish_address &#123;127.0.0.1:9301&#125;, bound_addresses &#123;[::1]:9301&#125;, &#123;127.0.0.1:9301&#125;</span><br><span class="line">[2021-03-04T17:29:46,970][WARN ][o.e.b.BootstrapChecks    ] [node-2] the default discovery settings are unsuitable <span class="keyword">for</span> production use; at least one of [discovery.seed_hosts, discovery.seed_providers, cluster.initial_master_nodes] must be configured</span><br><span class="line">[2021-03-04T17:29:46,972][INFO ][o.e.c.c.Coordinator      ] [node-2] cluster UUID [DmY4hGLYRra7H50T-RSoqw]</span><br><span class="line">[2021-03-04T17:29:46,984][INFO ][o.e.c.c.ClusterBootstrapService] [node-2] no discovery configuration found, will perform best-effort cluster bootstrapping after [3s] unless existing master is discovered</span><br><span class="line">[2021-03-04T17:29:47,415][INFO ][o.e.c.s.ClusterApplierService] [node-2] master node changed &#123;previous [], current [&#123;node-1&#125;&#123;nHPEGErISlGQO-7OiBVLbw&#125;&#123;9xoo0XVVSMu0LphMhu9QNw&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, ml.max_open_jobs=20, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>&#125;]&#125;, added &#123;&#123;node-1&#125;&#123;nHPEGErISlGQO-7OiBVLbw&#125;&#123;9xoo0XVVSMu0LphMhu9QNw&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, ml.max_open_jobs=20, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>&#125;&#125;, term: 16, version: 257, reason: ApplyCommitRequest&#123;term=16, version=257, sourceNode=&#123;node-1&#125;&#123;nHPEGErISlGQO-7OiBVLbw&#125;&#123;9xoo0XVVSMu0LphMhu9QNw&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, ml.max_open_jobs=20, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>&#125;&#125;</span><br><span class="line">[2021-03-04T17:29:47,642][INFO ][o.e.x.s.a.TokenService   ] [node-2] refresh keys</span><br><span class="line">[2021-03-04T17:29:47,972][INFO ][o.e.x.s.a.TokenService   ] [node-2] refreshed keys</span><br><span class="line">[2021-03-04T17:29:48,013][INFO ][o.e.l.LicenseService     ] [node-2] license [25e67c23-b75a-4b40-a9ee-78e3ddab64c3] mode [basic] - valid</span><br><span class="line">[2021-03-04T17:29:48,016][INFO ][o.e.x.s.s.SecurityStatusChangeListener] [node-2] Active license is now [BASIC]; Security is disabled</span><br><span class="line">[2021-03-04T17:29:48,048][INFO ][o.e.h.AbstractHttpServerTransport] [node-2] publish_address &#123;127.0.0.1:9201&#125;, bound_addresses &#123;[::1]:9201&#125;, &#123;127.0.0.1:9201&#125;</span><br><span class="line">[2021-03-04T17:29:48,049][INFO ][o.e.n.Node               ] [node-2] started</span><br></pre></td></tr></table></figure><ul><li><p>ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ Cluster UUID(<em>DmY4hGLYRra7H50T-RSoqw</em>) ê°€ ê°™ìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p></li><li><p>í´ëŸ¬ìŠ¤í„°ì— ì¡°ì¸í•˜ë©´ ê¸°ì¡´ ì‹¤í–‰í•œ node-1 ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ node ê°€ ì¡°ì¸ë˜ì—ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[2021-03-04T17:29:47,317][INFO ][o.e.c.r.a.AllocationService] [node-1] updating number_of_replicas to [1] <span class="keyword">for</span> indices [.apm-agent-configuration, .kibana_task_manager_1, ilm-history-3-000001, .kibana_1, .apm-custom-link, .kibana-event-log-7.10.2-000001]</span><br><span class="line">[2021-03-04T17:29:47,319][INFO ][o.e.c.s.MasterService    ] [node-1] node-join[&#123;node-2&#125;&#123;Xye_inmsQf2pVylm4m65hA&#125;&#123;fACpCFV-Q56QZk6anPgfEg&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9301&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, ml.max_open_jobs=20, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>&#125; join existing leader], term: 16, version: 257, delta: added &#123;&#123;node-2&#125;&#123;Xye_inmsQf2pVylm4m65hA&#125;&#123;fACpCFV-Q56QZk6anPgfEg&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9301&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, ml.max_open_jobs=20, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>&#125;&#125;</span><br><span class="line">[2021-03-04T17:29:48,022][INFO ][o.e.c.s.ClusterApplierService] [node-1] added &#123;&#123;node-2&#125;&#123;Xye_inmsQf2pVylm4m65hA&#125;&#123;fACpCFV-Q56QZk6anPgfEg&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9301&#125;&#123;cdhilmrstw&#125;&#123;ml.machine_memory=3973890048, ml.max_open_jobs=20, xpack.installed=<span class="literal">true</span>, transform.node=<span class="literal">true</span>&#125;&#125;, term: 16, version: 257, reason: Publication&#123;term=16, version=257&#125;</span><br><span class="line">[2021-03-04T17:29:50,120][INFO ][o.e.c.r.a.AllocationService] [node-1] Cluster health status changed from [YELLOW] to [GREEN] (reason: [shards started [[ilm-history-3-000001][0]]]).</span><br></pre></td></tr></table></figure></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="http://kangmyounghun.blogspot.com/2019/08/nodemaxlocalstoragenodes.html">http://kangmyounghun.blogspot.com/2019/08/nodemaxlocalstoragenodes.html</a></li><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#max-local-storage-nodes">https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html#max-local-storage-nodes</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/es-run_cluster_in_node/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Linux] switch root ì‹œ cannot open session: ëª¨ë“ˆì„ ì•Œ ìˆ˜ ì—†ìŒ Error</title>
      <link>https://jx2lee.github.io/linux-switch_root_error/</link>
      <guid>https://jx2lee.github.io/linux-switch_root_error/</guid>
      <pubDate>Mon, 15 Mar 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© ì¤‘ switch root ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ì´ë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë¤„ë³¸ë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center>ì¸ìŠ¤í„´ìŠ¤ ì‚¬ìš© ì¤‘ switch root ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ì´ë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë¤„ë³¸ë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">check Log</a></li><li><a href="#subject02">ì›ì¸</a></li><li><a href="#subject03">Solution</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="check-Log"><a href="#check-Log" class="headerlink" title=" check Log"></a><a name="subject01"></a> check Log</h1><ul><li>path: /var/log/messsages<ul><li>CentOS 7</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Mar  9 20:51:52 singlenode sshd[13968]: pam_unix(sshd:session): session opened <span class="keyword">for</span> user centos by (uid=0)</span><br><span class="line">Mar  9 20:51:53 singlenode su: PAM unable to dlopen(/usr/lib64/security/pam_lists.so): /usr/lib64/security/pam_lists.so: ë™ì  ì˜¤ë¸Œì íŠ¸ íŒŒì¼ì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ê·¸ëŸ° íŒŒì¼ì´ë‚˜ ë””ë ‰í„°ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</span><br><span class="line">Mar  9 20:51:53 singlenode su: PAM adding faulty module: /usr/lib64/security/pam_lists.so</span><br><span class="line">Mar  9 20:51:54 singlenode su: pam_unix(su:session): session opened <span class="keyword">for</span> user root by centos(uid=1000)</span><br></pre></td></tr></table></figure><h1 id="ì›ì¸"><a href="#ì›ì¸" class="headerlink" title=" ì›ì¸"></a><a name="subject02"></a> ì›ì¸</h1><ul><li><p>Log ìƒì—ì„œ <code>/usr/lib64/security/pam_lists.so</code> íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•œë‹¤.</p></li><li><p>pam_lists.so ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” íŒŒì¼ì„ ì°¾ì•„ë³´ë˜ ì¤‘</p><ul><li><p>/etc/pam.d/su íŒŒì¼ì„ í™•ì¸ (ë§¨ ë§ˆì§€ë§‰ ë¼ì¸)</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#%PAM-1.0</span></span><br><span class="line">auth            sufficient      pam_rootok.so</span><br><span class="line"><span class="comment"># Uncomment the following line to implicitly trust users in the &quot;wheel&quot; group.</span></span><br><span class="line"><span class="comment">#auth           sufficient      pam_wheel.so trust use_uid</span></span><br><span class="line"><span class="comment"># Uncomment the following line to require a user to be in the &quot;wheel&quot; group.</span></span><br><span class="line"><span class="comment">#auth           required        pam_wheel.so use_uid</span></span><br><span class="line">auth            substack        system-auth</span><br><span class="line">auth            include         postlogin</span><br><span class="line">account         sufficient      pam_succeed_if.so uid = 0 use_uid quiet</span><br><span class="line">account         include         system-auth</span><br><span class="line">password        include         system-auth</span><br><span class="line">session         include         system-auth</span><br><span class="line">session         include         postlogin</span><br><span class="line">session         optional        pam_xauth.so</span><br><span class="line">session         required        pam_lists.so</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="Solution"><a href="#Solution" class="headerlink" title=" Solution"></a><a name="subject03"></a> Solution</h1><ul><li><p>/etc/pam.d/su íŒŒì¼ ë§ˆì§€ë§‰ ë¼ì¸ pam_lists.so â†’ pam_limits.so ë¡œ ë³€ê²½</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session         required        pam_limits.so</span><br></pre></td></tr></table></figure></li><li><p>ì´í›„ root ë¡œ ìŠ¤ìœ„ì¹˜ í•´ë³´ì</p><ul><li><p>su root</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[centos@singlenode pam.d]$ su root</span><br><span class="line">ì•”í˜¸:</span><br><span class="line">[root@singlenode pam.d]<span class="comment"># Success!</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://m.blog.naver.com/PostView.nhn?blogId=ddakawar&logNo=60191982338&proxyReferer=https:%2F%2Fwww.google.com%2F">https://m.blog.naver.com/PostView.nhn?blogId=ddakawar&amp;logNo=60191982338&amp;proxyReferer=https:%2F%2Fwww.google.com%2F</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/linux-switch_root_error/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Network] HAProxy ê°„ë‹¨íˆ ì‚´í´ë³´ê¸°</title>
      <link>https://jx2lee.github.io/network-introduction_to_haproxy/</link>
      <guid>https://jx2lee.github.io/network-introduction_to_haproxy/</guid>
      <pubDate>Mon, 15 Mar 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;&lt;span class=&quot;github-emoji&quot; alias=&quot;fire&quot; style=&quot;&quot; fallback-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/1f525.png?v8&quot;&gt;&amp;#x1f525;&lt;/span&gt;&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center><span class="github-emoji" alias="fire" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f525.png?v8">&#x1f525;</span></center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ì •ì˜</a></li><li><a href="#subject02">ê¸°ëŠ¥ ë° íŠ¹ì§•</a></li><li><a href="#subject03">ë™ì‘ ë°©ì‹</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="ì •ì˜"><a href="#ì •ì˜" class="headerlink" title=" ì •ì˜"></a><a name="subject01"></a> ì •ì˜</h1><p>HAProxyëŠ” ê¸°ì¡´ì˜ í•˜ë“œì›¨ì–´ ìŠ¤ìœ„ì¹˜ë¥¼ ëŒ€ì²´í•˜ëŠ” <strong>ì†Œí”„íŠ¸ì›¨ì–´ ë¡œë“œ ë°¸ëŸ°ì„œ</strong></p><p><img src="/image/haproxy-def.png" alt="ê·¸ë¦¼1"></p><h1 id="ê¸°ëŠ¥-ë°-íŠ¹ì§•"><a href="#ê¸°ëŠ¥-ë°-íŠ¹ì§•" class="headerlink" title=" ê¸°ëŠ¥ ë° íŠ¹ì§•"></a><a name="subject02"></a> ê¸°ëŠ¥ ë° íŠ¹ì§•</h1><ul><li>ë„¤íŠ¸ì›Œí¬ ìŠ¤ìœ„ì¹˜ì—ì„œ ì œê³µí•˜ëŠ” L4, L7 ê¸°ëŠ¥ ë° ë¡œë“œ ë°¸ëŸ°ì„œ ê¸°ëŠ¥ ì œê³µ</li><li>ì„¤ì¹˜ê°€ ì‰½ê³  ë˜í•œ í™˜ê²½ ì„¤ì •ë„ ì–´ë µì§€ ì•Šìœ¼ë¯€ë¡œ ì„œë¹„ìŠ¤ ì´ì¤‘í™”ë¥¼ ë¹ ë¥´ê²Œ êµ¬ì„±ì´ ê°€ëŠ¥</li></ul><blockquote><p><code>ë¡œë“œ ë°¸ëŸ°ì‹±</code>?<br>ë¶€í•˜ ë¶„ì‚°ì„ ìœ„í•´ì„œ ê°€ìƒ(virtual) IPë¥¼ í†µí•´ ì—¬ëŸ¬ ì„œë²„ì— ì ‘ì†í•˜ë„ë¡ ë¶„ë°°í•˜ëŠ” ê¸°ëŠ¥</p></blockquote><h1 id="ë™ì‘-ë°©ì‹"><a href="#ë™ì‘-ë°©ì‹" class="headerlink" title=" ë™ì‘ ë°©ì‹"></a><a name="subject03"></a> ë™ì‘ ë°©ì‹</h1><ul><li>HAProxyëŠ” ê¸°ë³¸ì ìœ¼ë¡œ reverse proxy í˜•íƒœë¡œ ë™ì‘<ul><li>ìš°ë¦¬ê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©í•˜ëŠ” proxyëŠ” í´ë¼ì´ì–¸íŠ¸ ì•ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ, forward proxyë¼ ì¼ì»«ìŒ</li><li>reverse proxyì˜ ì—­í• ì„ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´, ì‹¤ì œ ì„œë²„ ìš”ì²­ì— ëŒ€í•´ì„œ ì„œë²„ ì• ë‹¨ì— ì¡´ì¬í•˜ë©´ì„œ, ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ëŒ€ì‹  ë°›ì•„ì„œ ì„œë²„ì— ì „ë‹¬í•˜ê³  ìš”ì²­í•œ ê³³ì— ê·¸ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì „ë‹¬í•˜ëŠ” ê²ƒì´ë‹¤.</li></ul></li></ul><p><strong>ë™ì‘ ë°©ì‹ì€ í•˜ê¸° í”„ë¡œì„¸ìŠ¤ë¥¼ ê°€ì§</strong></p><ol><li>ìµœì´ˆ ì ‘ê·¼ ì‹œ ì„œë²„ì— ìš”ì²­ ì „ë‹¬</li><li>ì‘ë‹µ ì‹œ ì¿ í‚¤(cookie)ì— ì„œë²„ ì •ë³´ ì¶”ê°€ í›„ ë°˜í™˜</li><li>ì¬ìš”ì²­ ì‹œ proxyì—ì„œ ì¿ í‚¤ ì •ë³´ í™•ì¸ &gt; ìµœì´ˆ ìš”ì²­ ì„œë²„ë¡œ ì „ë‹¬</li><li>ë‹¤ì‹œ ì ‘ê·¼ ì‹œ ì¿ í‚¤ ì¶”ê°€ ì—†ì´ ì „ë‹¬ &gt; í´ë¼ì´ì–¸íŠ¸ì— ì¿ í‚¤ ì •ë³´ê°€ ê³„ì† ì¡´ì¬í•¨(ì¿ í‚¤ ì¬ì‚¬ìš©)</li></ol><p><img src="/image/haproxy-process.png" alt="ê·¸ë¦¼2"></p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://d2.naver.com/helloworld/284659">https://d2.naver.com/helloworld/284659</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/network-introduction_to_haproxy/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Network] REST API ê°„ë‹¨íˆ ì‚´í´ë³´ê¸°</title>
      <link>https://jx2lee.github.io/network-introduction_to_restapi/</link>
      <guid>https://jx2lee.github.io/network-introduction_to_restapi/</guid>
      <pubDate>Mon, 15 Mar 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;&lt;span class=&quot;github-emoji&quot; alias=&quot;fire&quot; style=&quot;&quot; fallback-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/1f525.png?v8&quot;&gt;&amp;#x1f525;&lt;/span&gt;&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center><span class="github-emoji" alias="fire" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f525.png?v8">&#x1f525;</span></center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">REST?</a></li><li><a href="#subject02">êµ¬ì„±ìš”ì†Œ</a></li><li><a href="#subject03">REST API?</a></li><li><a href="#subject03">RESTful?</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="REST"><a href="#REST" class="headerlink" title=" REST?"></a><a name="subject01"></a> REST?</h1><h2 id="Representational-State-Transfer"><a href="#Representational-State-Transfer" class="headerlink" title="Representational State Transfer"></a>Representational State Transfer</h2><ul><li>ìì›ì˜ ì´ë¦„(í‘œí˜„)ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ í•´ë‹¹ ìì›ì˜ ìƒíƒœ(ì •ë³´)ë¥¼ ì£¼ê³  ë°›ëŠ” ëª¨ë“  ê²ƒ</li><li>resouce ì˜ representation ì— ì˜í•œ state ì „ë‹¬!<ul><li>resource: SWê°€ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒ (ex. ë¬¸ì„œ, ê·¸ë¦¼, ë°ì´í„° ë“±ë“±)</li><li>representation: resource ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•œ ì´ë¦„ (ex. í•™ìƒ ì •ë³´ê°€ resource ì¸ ê²½ìš° <em>student</em> ê°€ representation)</li></ul></li><li>Web + HTTP í”„ë¡œí† ì½œ í™œìš©</li><li>Client &lt;-&gt; Server í†µì‹  ë°©ë²• ì¤‘ í•˜ë‚˜</li></ul><h2 id="HTTP-URI-Uniform-Resource-Identifier-ë¥¼-í†µí•´-Resourceë¥¼-ëª…ì‹œ-HTTP-Method-POST-GET-PUT-DELETE-ë¥¼-í†µí•´-í•´ë‹¹-resourceì—-ëŒ€í•œ-CRUD-Operationì„-ì ìš©í•˜ëŠ”-ê²ƒ"><a href="#HTTP-URI-Uniform-Resource-Identifier-ë¥¼-í†µí•´-Resourceë¥¼-ëª…ì‹œ-HTTP-Method-POST-GET-PUT-DELETE-ë¥¼-í†µí•´-í•´ë‹¹-resourceì—-ëŒ€í•œ-CRUD-Operationì„-ì ìš©í•˜ëŠ”-ê²ƒ" class="headerlink" title="HTTP URI(Uniform Resource Identifier)ë¥¼ í†µí•´ Resourceë¥¼ ëª…ì‹œ, HTTP Method(POST, GET, PUT, DELETE)ë¥¼ í†µí•´ í•´ë‹¹ resourceì— ëŒ€í•œ CRUD Operationì„ ì ìš©í•˜ëŠ” ê²ƒ"></a>HTTP URI(Uniform Resource Identifier)ë¥¼ í†µí•´ Resourceë¥¼ ëª…ì‹œ, HTTP Method(POST, GET, PUT, DELETE)ë¥¼ í†µí•´ í•´ë‹¹ resourceì— ëŒ€í•œ CRUD Operationì„ ì ìš©í•˜ëŠ” ê²ƒ</h2><h2 id="êµ¬ì„±ìš”ì†Œ"><a href="#êµ¬ì„±ìš”ì†Œ" class="headerlink" title=" êµ¬ì„±ìš”ì†Œ"></a><a name="subject02"></a> êµ¬ì„±ìš”ì†Œ</h2><ul><li>Resource: URI<ul><li>ëª¨ë“  ìì›ì— ëŒ€í•œ ID ëŠ” ê³ ìœ  (in server)</li><li>URIë¥¼ ì´ìš©í•´ server ì— resource ìƒíƒœ(ì •ë³´) ë¥¼ ìš”ì²­</li></ul></li><li>Verb: HTTP Method<ul><li>GET/PUT/POST/DELETE</li></ul></li><li>Representation<ul><li>ìš”ì²­ì— ì ì ˆí•œ ì‘ë‹µ</li><li>resource ì¢…ë¥˜: JSON/XML/TEXT/RSS<ul><li>ì´ì¤‘ JSON ê³¼ XMLì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ìŒ (ì£¼)</li></ul></li></ul></li></ul><h1 id="REST-API"><a href="#REST-API" class="headerlink" title=" REST API?"></a><a name="subject03"></a> REST API?</h1><h2 id="REST-ê¸°ë°˜ìœ¼ë¡œ-ì„œë¹„ìŠ¤-APIë¥¼-êµ¬í˜„í•œ-ê²ƒ"><a href="#REST-ê¸°ë°˜ìœ¼ë¡œ-ì„œë¹„ìŠ¤-APIë¥¼-êµ¬í˜„í•œ-ê²ƒ" class="headerlink" title="REST ê¸°ë°˜ìœ¼ë¡œ ì„œë¹„ìŠ¤ APIë¥¼ êµ¬í˜„í•œ ê²ƒ"></a>REST ê¸°ë°˜ìœ¼ë¡œ ì„œë¹„ìŠ¤ APIë¥¼ êµ¬í˜„í•œ ê²ƒ</h2><ul><li><code>API:</code>ë°ì´í„°ì™€ ê¸°ëŠ¥ì˜ ì§‘í•©ì„ ì œê³µí•˜ì—¬ ì»´í“¨í„° í”„ë¡œê·¸ë¨ê°„ ìƒí˜¸ì‘ìš©ì„ ì´‰ì§„í•˜ë©°, ì„œë¡œ ì •ë³´ë¥¼ êµí™˜ê°€ëŠ¥ í•˜ë„ë¡ í•˜ëŠ” ê²ƒ</li></ul><p><img src="https://api.zestard.com/wp-content/uploads/2015/12/What-is-Rest-API-02-1.jpg" alt="https://api.zestard.com/wp-content/uploads/2015/12/What-is-Rest-API-02-1.jpg"></p><h1 id="RESTful"><a href="#RESTful" class="headerlink" title=" RESTful?"></a><a name="subject04"></a> RESTful?</h1><h2 id="REST-ì›ë¦¬ë¥¼-ì˜-ë”°ë¥´ë©´-RESTful-í•˜ë‹¤"><a href="#REST-ì›ë¦¬ë¥¼-ì˜-ë”°ë¥´ë©´-RESTful-í•˜ë‹¤" class="headerlink" title="REST ì›ë¦¬ë¥¼ ì˜ ë”°ë¥´ë©´ RESTful í•˜ë‹¤"></a>REST ì›ë¦¬ë¥¼ ì˜ ë”°ë¥´ë©´ RESTful í•˜ë‹¤</h2><h2 id="RESTfulì€-ì¼ë°˜ì ìœ¼ë¡œ-RESTë¼ëŠ”-ì•„í‚¤í…ì²˜ë¥¼-êµ¬í˜„í•˜ëŠ”-ì›¹-ì„œë¹„ìŠ¤ë¥¼-ë‚˜íƒ€ë‚´ê¸°-ìœ„í•´-ì‚¬ìš©ë˜ëŠ”-ìš©ì–´"><a href="#RESTfulì€-ì¼ë°˜ì ìœ¼ë¡œ-RESTë¼ëŠ”-ì•„í‚¤í…ì²˜ë¥¼-êµ¬í˜„í•˜ëŠ”-ì›¹-ì„œë¹„ìŠ¤ë¥¼-ë‚˜íƒ€ë‚´ê¸°-ìœ„í•´-ì‚¬ìš©ë˜ëŠ”-ìš©ì–´" class="headerlink" title="RESTfulì€ ì¼ë°˜ì ìœ¼ë¡œ RESTë¼ëŠ” ì•„í‚¤í…ì²˜ë¥¼ êµ¬í˜„í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ìš©ì–´"></a>RESTfulì€ ì¼ë°˜ì ìœ¼ë¡œ RESTë¼ëŠ” ì•„í‚¤í…ì²˜ë¥¼ êµ¬í˜„í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ìš©ì–´</h2><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://gmlwjd9405.github.io/2018/09/21/rest-and-restful.html">https://gmlwjd9405.github.io/2018/09/21/rest-and-restful.html</a></li><li><a href="https://www.zestard.com/blog/rest-api-benefits/">https://www.zestard.com/blog/rest-api-benefits/</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/network-introduction_to_restapi/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Kubernetes] Pod ì‚­ì œ ì´ë²¤íŠ¸ ë§ˆìŠ¬ëŸ¬ë³´ê¸°</title>
      <link>https://jx2lee.github.io/cloud-events_at_pod_deletion/</link>
      <guid>https://jx2lee.github.io/cloud-events_at_pod_deletion/</guid>
      <pubDate>Wed, 17 Feb 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; Kubernetes ì˜ Pod ê°€ ì‚­ì œë˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤. &lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> Kubernetes ì˜ Pod ê°€ ì‚­ì œë˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤. </center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">Overview</a></li><li><a href="#subject02">Events</a><ul><li><a href="#subject03">A event</a></li><li><a href="#subject04">B event</a></li></ul></li><li><a href="#subject05">Parallel events</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="Overview"><a href="#Overview" class="headerlink" title=" Overview"></a><a name="subject01"></a> Overview</h1><p>Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ êµ¬ì„± ìš”ì†ŒëŠ” ì—¬ëŸ¬ ì‹œìŠ¤í…œì—ì„œ ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ë¡œ ì‹¤í–‰ëœë‹¤. í•˜ë‚˜ì˜ í° monolithic í”„ë¡œì„¸ìŠ¤ì˜ ì¼ë¶€ê°€ ì•„ë‹ˆë‹¤. ëª¨ë“  êµ¬ì„± ìš”ì†Œê°€ í´ëŸ¬ìŠ¤í„° ìƒíƒœì™€ ê´€ë ¨í•˜ì—¬ ë™ì¼í•œ í˜ì´ì§€ì— ìˆëŠ” ë°ëŠ” ì‹œê°„ì´ ê±¸ë¦°ë‹¤. Pod ê°€ ì‚­ì œ ë  ë•Œ í´ëŸ¬ìŠ¤í„° ì „ì²´ì—ì„œ ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ ì‚´í´ë³¸ë‹¤.</p><h1 id="Events"><a href="#Events" class="headerlink" title=" Events"></a><a name="subject02"></a> Events</h1><p>pod ì‚­ì œ ìš”ì²­ì´ API ì„œë²„ì— ìˆ˜ì‹ ë˜ë©´, ë¨¼ì € etcd ì—ì„œ ìƒíƒœë¥¼ ìˆ˜ì • í•œ ë‹¤ìŒ ì‚­ì œë¥¼ ì•Œë¦°ë‹¤ (ì´ëŸ¬í•œ noti ë¥¼ ì•Œë¦¬ëŠ” ìš”ì†Œë“¤ì€ Kubelet ë° Endpoints Controller - <em>kube-controller-manager</em> ê°€ ìˆë‹¤.) <strong>ë³‘ë ¬</strong>ë¡œ ë°œìƒí•˜ëŠ” ë‘ ê°€ì§€ ì´ë²¤íŠ¸(<code>A</code> ì™€ <code>B</code>ë¡œ í‘œì‹œ)ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><p><img src="/image/events-when-pod-is-deleted.png" alt="events-when-pod-is-deleted.png"></p><h2 id="A-event"><a href="#A-event" class="headerlink" title=" A event"></a><a name="subject03"></a> A event</h2><p>etcd ì—ì„œ ìƒíƒœ ìˆ˜ì • í›„ API server ë¥¼ í†µí•´ Kubelet ì—ê²Œ í¬ë“œë¥¼ ì¢…ë£Œí•´ì•¼í•œë‹¤ëŠ” ì•Œë¦¼ì„ ì „ì†¡í•˜ë©´ ì¢…ë£Œ ì‹œí€€ìŠ¤ë¥¼ ì‹œì‘í•œë‹¤. (ì‚¬ì „ ì¤‘ì§€ í›„í¬ ì‹¤í–‰-<em>pre-stop-hook</em>, SIGTERM ì „ì†¡, ì ì‹œ í›„ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ì§€ ì•Šì€ ê²½ìš° ê°•ì œ ì¢…ë£Œ). ì•±ì´ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ìˆ˜ì‹ ì„ ì¦‰ì‹œ ì¤‘ë‹¨í•˜ì—¬ SIGTERMì— ì‘ë‹µí•˜ëŠ” ê²½ìš°, ì—°ê²°ì„ ì‹œë„í•˜ëŠ” ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ëŠ” ì—°ê²° ê±°ë¶€ ì˜¤ë¥˜ë¥¼ ìˆ˜ì‹ í•œë‹¤. API ì„œë²„ì—ì„œ Kubeletìœ¼ë¡œì˜ ì§ì ‘ ê²½ë¡œë¡œ ì¸í•´ í¬ë“œê°€ ì‚­ì œ ëœ ì‹œê°„ë¶€í„°ì´ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì€ ë¹„êµì  ì§§ë‹¤.</p><ul><li><code>A1</code>: API server ê°€ í•´ë‹¹ Pod ê°€ ê¸°ë™ë˜ëŠ” Node ì˜ Kubelet ì—ê²Œ ì¢…ë£Œ ìš”ì²­</li><li><code>A2</code>: Kubelet ì´ ì¢…ë£Œ ì‹œí€€ìŠ¤ ì‹œì‘<ul><li>A2-(1): pre-stop-hook</li><li>A2-(2): SIGTERM ì „ì†¡</li><li>A2-(3): ì¢…ë£Œë˜ì§€ ì•Šì€ ê²½ìš° ê°•ì œë¡œ ì¢…ë£Œ ìˆ˜í–‰</li></ul></li></ul><h2 id="B-event"><a href="#B-event" class="headerlink" title=" B event"></a><a name="subject04"></a> B event</h2><p>podë¡œ ì´ì–´ì§€ëŠ” ì´ë²¤íŠ¸ëŠ” iptables ê·œì¹™ì„ ì œê±°í•œë‹¤(<code>B4</code>). Endpoints ì»¨íŠ¸ë¡¤ëŸ¬ (Kubernetes Control Planeì˜ Controller Manager)ëŠ” ì‚­ì œ ì•Œë¦¼(<code>B1</code>)ì„ ë°›ìœ¼ë©´ í¬ë“œê°€ ì†í•œ ëª¨ë“  ì„œë¹„ìŠ¤ì˜ endpoint ë¥¼ ì œê±°í•œë‹¤(<code>B2</code>). API ì„œë²„ëŠ” REST ìš”ì²­ì„ ì „ì†¡í•˜ì—¬ Endpoints API ê°ì²´ë¥¼ ìˆ˜ì •í•œë‹¤.</p><p>ê·¸ëŸ° ë‹¤ìŒ API ì„œë²„ëŠ” Endpoints ê°œì²´ë¥¼ ë³´ê³ ìˆëŠ” ëª¨ë“  nodeì˜ kube-proxy ì—ê²Œ ì•Œë¦°ë‹¤(<code>B3</code>). ê° kube-proxy ëŠ” í•´ë‹¹ ë…¸ë“œì˜ iptables ê·œì¹™ì„ ì—…ë°ì´íŠ¸ í•˜ë¯€ë¡œ ì•±ì— ìƒˆë¡œìš´ ì—°ê²°ì´ ì¢…ë£Œ Pod ë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ iptables ê·œì¹™ì„ ì œê±°í•´ë„ ê¸°ì¡´ ì—°ê²°ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤. ë‹¤ë¥¸ Pod ì— ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸ëŠ” ê¸°ì¡´ ì—°ê²°ì„ í†µí•´ Pod ì— ì¶”ê°€ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤. (ì‚­ì œë˜ì§€ ì•ŠëŠ” ë‹¤ë¥¸ Pod ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì´ì•¼ê¸°)</p><ul><li><code>B1</code>: API server ëŠ” controller manager ì—ê²Œ ì‚­ì œ ì•Œë¦¼ì„ ì „ë‹¬</li><li><code>B2</code>: controller manager ëŠ” ì‚­ì œë  pod ê°€ ì†í•œ ëª¨ë“  ì„œë¹„ìŠ¤ì˜ endpoints ì‚­ì œ</li><li><code>B3</code>: endpoint ê°ì²´ ìˆ˜ì •ì„ ìœ„í•´ API server ëŠ” ê° node ì˜ kube-proxy ì—ê²Œ ìˆ˜ì •ì„ ìš”ì²­</li><li><code>B4</code>: ì‚­ì œë  Pod ê°€ ì†í•œ node ì˜ kube-proxy ê°€ ì‚­ì œë  Pod ê´€ë ¨ iptables ë¥¼ ì‚­ì œ</li></ul><h1 id="Parallel-events"><a href="#Parallel-events" class="headerlink" title=" Parallel events"></a><a name="subject05"></a> Parallel events</h1><p>ì´ ë‘ ê°€ì§€ ì´ë²¤íŠ¸(<code>A</code>, <code>B</code>)ëŠ” ëª¨ë‘ ë³‘ë ¬ë¡œ ìˆ˜í–‰í•œë‹¤. Pod ì—ì„œ ì•±ì„ ì¢…ë£Œí•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì€ iptables ê·œì¹™ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì‹œê°„ë³´ë‹¤ ì§§ì€ë°, ì´ëŠ” iptables ê·œì¹™ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì²´ì¸ì´ ê¸¸ê¸° ë•Œë¬¸ì´ë‹¤.</p><ul><li>API ì„œë²„ì— ìƒˆ ìš”ì²­ì„ ë³´ë‚´ê³  Endpoints ì»¨íŠ¸ë¡¤ëŸ¬ì— ë„ë‹¬ í•œ ë‹¤ìŒ, API ì„œë²„ê°€ ë˜ ì´ë¥¼ ì•Œë ¤ì•¼ í•œë‹¤<ul><li>API server ë¥¼ ì—¬ëŸ¬ ë²ˆ ê±°ì³ê°€ì•¼ í•¨</li></ul></li><li>ëª¨ë“  ë…¸ë“œì—ì„œ iptables ê·œì¹™ì´ ì—…ë°ì´íŠ¸ ë˜ê¸° ì „ SIGTERM ì‹ í˜¸ê°€ ì „ì†¡ ë  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤</li></ul><p><img src="/image/timeline-events.png" alt="timeline-events.png"></p><blockquote><p><strong>ìœ„ ê·¸ë¦¼ë§Œ ìƒê°í•˜ë©´ Pod deletion í”„ë¡œì„¸ìŠ¤ëŠ” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</strong></p></blockquote><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://freecontent.manning.com/handling-client-requests-properly-with-kubernetes/">https://freecontent.manning.com/handling-client-requests-properly-with-kubernetes/</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-events_at_pod_deletion/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Hadoop Client í™˜ê²½ êµ¬ì„± ì‹œ ë°œìƒí•œ ì—ëŸ¬ ì •ë¦¬</title>
      <link>https://jx2lee.github.io/hadoop-troubleshoot_hadoop_client/</link>
      <guid>https://jx2lee.github.io/hadoop-troubleshoot_hadoop_client/</guid>
      <pubDate>Sat, 09 Jan 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;Hadoop Client í™˜ê²½ ì„¸íŒ… ì¤‘ ë°œìƒí•œ ë¬¸ì œë¥¼ ê³µìœ í•œë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center>Hadoop Client í™˜ê²½ ì„¸íŒ… ì¤‘ ë°œìƒí•œ ë¬¸ì œë¥¼ ê³µìœ í•œë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject02">hadoop client ì—ì„œ hdfs dfs ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ connection-pending remote ì—ëŸ¬ ë°œìƒ</a><ul><li><a href="#subject03">Log</a></li><li><a href="#subject04">Cause</a></li><li><a href="#subject05">Resolve</a></li></ul></li><li><a href="#subject06">hdfs dfs ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ Unable to load native-hadoop library for your platform ì—ëŸ¬</a><ul><li><a href="#subject07">Log</a></li><li><a href="#subject08">Cause</a></li><li><a href="#subject09">Resolve</a></li></ul></li></ol><h1 id="hadoop-client-ì—ì„œ-hdfs-dfs-ëª…ë ¹ì–´-ìˆ˜í–‰-ì‹œ-connection-pending-remote-ì—ëŸ¬-ë°œìƒ"><a href="#hadoop-client-ì—ì„œ-hdfs-dfs-ëª…ë ¹ì–´-ìˆ˜í–‰-ì‹œ-connection-pending-remote-ì—ëŸ¬-ë°œìƒ" class="headerlink" title=" hadoop client ì—ì„œ hdfs dfs ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ connection-pending remote ì—ëŸ¬ ë°œìƒ"></a><a name="subject02"></a> hadoop client ì—ì„œ hdfs dfs ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ connection-pending remote ì—ëŸ¬ ë°œìƒ</h1><h2 id="Log"><a href="#Log" class="headerlink" title=" Log"></a><a name="subject03"></a> Log</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">21/01/08 17:58:35 WARN impl.BlockReaderFactory: I/O error constructing remote block reader.</span><br><span class="line">org.apache.hadoop.net.ConnectTimeoutException: 60000 millis timeout <span class="keyword">while</span> waiting <span class="keyword">for</span> channel to be ready <span class="keyword">for</span> connect. ch : java.nio.channels.SocketChannel[connection-pending remote=/192.168.0.11:50010]</span><br><span class="line">at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:535)</span><br><span class="line">at org.apache.hadoop.hdfs.DFSClient.newConnectedPeer(DFSClient.java:2902)</span><br><span class="line">at org.apache.hadoop.hdfs.client.impl.BlockReaderFactory.nextTcpPeer(BlockReaderFactory.java:825)</span><br><span class="line">at org.apache.hadoop.hdfs.client.impl.BlockReaderFactory.getRemoteBlockReaderFromTcp(BlockReaderFactory.java:750)</span><br><span class="line">at org.apache.hadoop.hdfs.client.impl.BlockReaderFactory.build(BlockReaderFactory.java:387)</span><br><span class="line">at org.apache.hadoop.hdfs.DFSInputStream.getBlockReader(DFSInputStream.java:734)</span><br><span class="line">at org.apache.hadoop.hdfs.DFSInputStream.blockSeekTo(DFSInputStream.java:681)</span><br><span class="line">at org.apache.hadoop.hdfs.DFSInputStream.readWithStrategy(DFSInputStream.java:971)</span><br><span class="line">at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:1029)</span><br><span class="line">at java.io.DataInputStream.read(DataInputStream.java:100)</span><br><span class="line">at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:93)</span><br><span class="line">at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:67)</span><br><span class="line">at org.apache.hadoop.io.IOUtils.copyBytes(IOUtils.java:128)</span><br><span class="line">at org.apache.hadoop.fs.shell.Display<span class="variable">$Cat</span>.printToStdout(Display.java:107)</span><br><span class="line">at org.apache.hadoop.fs.shell.Display<span class="variable">$Cat</span>.processPath(Display.java:102)</span><br><span class="line">at org.apache.hadoop.fs.shell.Command.processPaths(Command.java:327)</span><br><span class="line">at org.apache.hadoop.fs.shell.Command.processPathArgument(Command.java:299)</span><br><span class="line">at org.apache.hadoop.fs.shell.Command.processArgument(Command.java:281)</span><br><span class="line">at org.apache.hadoop.fs.shell.Command.processArguments(Command.java:265)</span><br><span class="line">at org.apache.hadoop.fs.shell.FsCommand.processRawArguments(FsCommand.java:119)</span><br><span class="line">at org.apache.hadoop.fs.shell.Command.run(Command.java:175)</span><br><span class="line">at org.apache.hadoop.fs.FsShell.run(FsShell.java:317)</span><br><span class="line">at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76)</span><br><span class="line">at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:90)</span><br><span class="line">at org.apache.hadoop.fs.FsShell.main(FsShell.java:380)</span><br></pre></td></tr></table></figure><h2 id="Cause"><a href="#Cause" class="headerlink" title=" Cause"></a><a name="subject04"></a> Cause</h2><ul><li>Wrong configuration <code>hdfs-site.xml</code></li><li>Not included <code>Namenode hostname</code> in <code>/etc/hosts</code></li></ul><h2 id="Resolve"><a href="#Resolve" class="headerlink" title=" Resolve"></a><a name="subject05"></a> Resolve</h2><ul><li><p>Edit <code>hdfs-site.xml</code></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;property&gt;</span><br><span class="line">&lt;name&gt;dfs.client.use.datanode.hostname&lt;/name&gt;</span><br><span class="line">&lt;value&gt;<span class="literal">true</span>&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><ul><li>set <strong>dfs.client.use.datanode.hostname</strong> to <strong>true</strong></li></ul></li><li><p>Edit <code>/etc/hosts</code></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">133.186.241.218 hadoop-test.novalocal</span><br></pre></td></tr></table></figure><ul><li>Add <strong>IP hostname</strong></li></ul></li></ul><h1 id="hdfs-dfs-ëª…ë ¹ì–´-ìˆ˜í–‰-ì‹œ-Unable-to-load-native-hadoop-library-for-your-platform-ì—ëŸ¬"><a href="#hdfs-dfs-ëª…ë ¹ì–´-ìˆ˜í–‰-ì‹œ-Unable-to-load-native-hadoop-library-for-your-platform-ì—ëŸ¬" class="headerlink" title=" hdfs dfs ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ Unable to load native-hadoop library for your platform ì—ëŸ¬"></a><a name="subject06"></a> hdfs dfs ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ Unable to load native-hadoop library for your platform ì—ëŸ¬</h1><h2 id="Log-1"><a href="#Log-1" class="headerlink" title=" Log"></a><a name="subject07"></a> Log</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">21/01/08 12:44:55 WARN util.NativeCodeLoader: Unable to load native-hadoop library <span class="keyword">for</span> your platform... using builtin-java classes <span class="built_in">where</span> applicable</span><br></pre></td></tr></table></figure><h2 id="Cause-1"><a href="#Cause-1" class="headerlink" title=" Cause"></a><a name="subject08"></a> Cause</h2><ul><li>Not existed <code>HADOOP_OPTS</code> variable</li></ul><h2 id="Resolve-1"><a href="#Resolve-1" class="headerlink" title=" Resolve"></a><a name="subject09"></a> Resolve</h2><ul><li><p>Add below line in <code>.bashrc</code> or <code>.zshrc</code></p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#.bashrc, or .zshrc</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_OPTS=<span class="string">&quot;<span class="variable">$HADOOP_OPTS</span> -Djava.library.path=<span class="variable">$HADOOP_HOME</span>/lib/native&quot;</span></span><br></pre></td></tr></table></figure></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-troubleshoot_hadoop_client/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] Python í™˜ê²½ êµ¬ì¶• with pyenv</title>
      <link>https://jx2lee.github.io/python-pyenv/</link>
      <guid>https://jx2lee.github.io/python-pyenv/</guid>
      <pubDate>Sat, 09 Jan 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;MacOS ì—ì„œ pyenv ë¥¼ ì´ìš©í•´ Python ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•œë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center>MacOS ì—ì„œ pyenv ë¥¼ ì´ìš©í•´ Python ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•œë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">Install brew</a></li><li><a href="#subject02">Install pyenv</a></li><li><a href="#subject03">Set env</a><ul><li><a href="#subject04">export PATH</a></li><li><a href="#subject05">ê°€ ì„¤ì¹˜ íŒ¨í‚¤ì§€ (ê¶Œì¥)</a></li></ul></li><li><a href="#subject06">Install Python)</a><ul><li><a href="#subject07">global python ì„¤ì • í›„ ê°€ìƒí™˜ê²½ ì„¸íŒ… (with virtualenvwrapper))</a></li><li><a href="#subject08">Set config)</a><blockquote><p><a href="#reference">Reference</a></p></blockquote></li></ul></li></ol><h1 id="Install-brew"><a href="#Install-brew" class="headerlink" title=" Install brew"></a><a name="subject01"></a> Install brew</h1><p><code>$ ruby -e &quot;$(curl -fsSL [https://raw.githubusercontent.com/Homebrew/install/master/install](https://raw.githubusercontent.com/Homebrew/install/master/install))&quot;</code></p><blockquote><p><em>ì´ë¯¸ ì¡´ì¬í•˜ë©´ homebrew ì„¤ì¹˜ëŠ” ìƒëµí•œë‹¤.</em></p></blockquote><h1 id="Install-pyenv"><a href="#Install-pyenv" class="headerlink" title=" Install pyenv"></a><a name="subject02"></a> Install pyenv</h1><p><code>$ brew install pyenv</code></p><h1 id="Set-env"><a href="#Set-env" class="headerlink" title=" Set env"></a><a name="subject03"></a> Set env</h1><h2 id="export-PATH"><a href="#export-PATH" class="headerlink" title=" export PATH"></a><a name="subject04"></a> export PATH</h2><p><code>$ echo &#39;eval &quot;$(pyenv init -)&quot;&#39; &gt;&gt; ~/.zshrc</code></p><ul><li><p>PATH í™˜ê²½ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ pyenvë¥¼ ì‹œì‘í•˜ê³  í™˜ê²½ì— ë‚˜íƒ€ë‚˜ëŠ” ì²« ë²ˆì§¸ ë²„ì „ê³¼ ë‹¬ë¦¬ ì‹¤í–‰í•  Python ë²„ì „ì„ ì‚½ì…í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.</p><ul><li><p>í™˜ê²½ë³€ìˆ˜ ì„¸íŒ…ì„ ì•ˆí•˜ê³  ì§„í–‰ì„ í•´ë³´ë‹ˆ, ë‚˜ì¤‘ì— virtualenvwrapper íŒ¨í‚¤ì§€ ì‚¬ìš© ì‹œ virtual path not found error ë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ê¼­ ì¶”ê°€í•˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; mkvirtualenv t</span><br><span class="line">ERROR: virtualenvwrapper could not find virtualenv <span class="keyword">in</span> your path</span><br><span class="line"><span class="comment"># after set eval command..</span></span><br><span class="line">â¯ mkvirtualenv t</span><br><span class="line">created virtual environment CPython3.7.9.final.0-64 <span class="keyword">in</span> 220ms</span><br><span class="line">  creator CPython3Posix(dest=/Users/nhn/workspace/programming/python/.virtualenvs/t, clear=False, no_vcs_ignore=False, global=False)</span><br><span class="line">  seeder FromAppData(download=False, pip=bundle, setuptools=bundle, wheel=bundle, via=copy, app_data_dir=/Users/nhn/Library/Application Support/virtualenv)</span><br><span class="line">    added seed packages: pip==20.3.1, setuptools==51.0.0, wheel==0.36.1</span><br><span class="line">  activators BashActivator,CShellActivator,FishActivator,PowerShellActivator,PythonActivator,XonshActivator</span><br><span class="line">virtualenvwrapper.user_scripts creating /Users/nhn/workspace/programming/python/.virtualenvs/t/bin/predeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /Users/nhn/workspace/programming/python/.virtualenvs/t/bin/postdeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /Users/nhn/workspace/programming/python/.virtualenvs/t/bin/preactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /Users/nhn/workspace/programming/python/.virtualenvs/t/bin/postactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /Users/nhn/workspace/programming/python/.virtualenvs/t/bin/get_env_details</span><br></pre></td></tr></table></figure></li></ul></li><li><p>bash í™˜ê²½ì¼ ê²½ìš° <code>.bashrc</code> ì— ì‚½ì…í•˜ë„ë¡ í•œë‹¤.</p></li></ul><h2 id="ì¶”ê°€-ì„¤ì¹˜-íŒ¨í‚¤ì§€-ê¶Œì¥"><a href="#ì¶”ê°€-ì„¤ì¹˜-íŒ¨í‚¤ì§€-ê¶Œì¥" class="headerlink" title=" ì¶”ê°€ ì„¤ì¹˜ íŒ¨í‚¤ì§€ (ê¶Œì¥)"></a><a name="subject05"></a> ì¶”ê°€ ì„¤ì¹˜ íŒ¨í‚¤ì§€ (ê¶Œì¥)</h2><p><code>$ brew install zlib sqlite</code></p><ul><li><p>zlib ì••ì¶• ì•Œê³ ë¦¬ì¦˜ê³¼ SQLite ë°ì´í„°ë² ì´ìŠ¤ëŠ” pyenvì˜ ì¢…ì†ëœ íŒ¨í‚¤ì§€</p></li><li><p>ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ì§€ ì•Šì„ ê²½ìš° ë¹Œë“œ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ëŠ” ê²½ìš°ê°€ ë§ë‹¤ê³  í•œë‹¤. ì„¤ì¹˜ í›„ ì•„ë˜ì™€ ê°™ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì ìš©í•œë‹¤.</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ export LDFLAGS=<span class="string">&quot;-L/usr/local/opt/zlib/lib -L/usr/local/opt/sqlite/lib&quot;</span></span><br><span class="line">$ export CPPFLAGS=<span class="string">&quot;-I/usr/local/opt/zlib/include -I/usr/local/opt/sqlite/include&quot;</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="Install-Python"><a href="#Install-Python" class="headerlink" title=" Install Python"></a><a name="subject06"></a> Install Python</h1><p><code>$ pyenv install â€”list</code> ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜ ê°€ëŠ¥í•œ ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•˜ê³  ì„¤ì¹˜ë¥¼ ì§„í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; pyenv install --list | grep 3.7.</span><br><span class="line">  3.7.0</span><br><span class="line">  3.7-dev</span><br><span class="line">  3.7.1</span><br><span class="line">  3.7.2</span><br><span class="line">  3.7.3</span><br><span class="line">  3.7.4</span><br><span class="line">  3.7.5</span><br><span class="line">  3.7.6</span><br><span class="line">  3.7.7</span><br><span class="line">  3.7.8</span><br><span class="line">  3.7.9</span><br><span class="line">  miniconda-3.7.0</span><br><span class="line">  miniconda3-3.7.0</span><br><span class="line">  stackless-3.7.5</span><br><span class="line">&gt; pyenv install 3.7.9</span><br></pre></td></tr></table></figure><h2 id="global-python-ì„¤ì •-í›„-ê°€ìƒí™˜ê²½-ì„¸íŒ…-with-virtualenvwrapper"><a href="#global-python-ì„¤ì •-í›„-ê°€ìƒí™˜ê²½-ì„¸íŒ…-with-virtualenvwrapper" class="headerlink" title=" global python ì„¤ì • í›„ ê°€ìƒí™˜ê²½ ì„¸íŒ… (with virtualenvwrapper)"></a><a name="subject07"></a> global python ì„¤ì • í›„ ê°€ìƒí™˜ê²½ ì„¸íŒ… (with virtualenvwrapper)</h2><p><code>$ pyenv global 3.7.9</code></p><ul><li>python ë²„ì ¼ì„ 3.7.9 ë¡œ ì„¸íŒ…</li></ul><p><code>$ $(pyenv which python3) -m pip install virtualenvwrapper</code></p><ul><li>global python ë²„ì ¼ìœ¼ë¡œ virtualenvwrapper íŒ¨í‚¤ì§€ ì„¤ì¹˜</li></ul><h2 id="Set-config"><a href="#Set-config" class="headerlink" title=" Set config"></a><a name="subject08"></a> Set config</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;export WORKON_HOME=~/workspace/programming/python/.virtualenvs&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;mkdir -p $WORKON_HOME&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;. ~/.pyenv/versions/3.7.9/bin/virtualenvwrapper.sh&#x27;</span> &gt;&gt; ~/.zshrc</span><br><span class="line">$ <span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure><p>ì´í›„ <code>mkvirtualenv</code> ì»¤ë§¨ë“œë¥¼ í†µí•´ ê°€ìƒí™˜ê²½ì„ ìƒì„±í•˜ê³  ì‘ì—…ì„ ì§„í–‰í•˜ë©´ ëœë‹¤.</p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://opensource.com/article/19/6/python-virtual-environments-mac">https://opensource.com/article/19/6/python-virtual-environments-mac*</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/python-pyenv/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Jenkins] Jenkins ì„¤ì¹˜ on Instance</title>
      <link>https://jx2lee.github.io/jenkins-install_jenkins/</link>
      <guid>https://jx2lee.github.io/jenkins-install_jenkins/</guid>
      <pubDate>Fri, 08 Jan 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Docker ë¡œ ì  í‚¨ìŠ¤ í™˜ê²½ì„ ì„¸íŒ…í•˜ë ¤ê³  í–ˆëŠ”ë°..&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://hub.docker.com/_/jenkins&quot;&gt;https://hub.docker.com/_/jenkins&lt;/a&gt; ì„ ì‚´í´ë³´ë©´ ë” ì´ìƒ ì§€ì›ì„ ì•ˆí•˜ëŠ” ê²ƒìœ¼ë¡œ íŒŒì•…ëœë‹¤. ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ë¶€ë¶„ì„ í•¨ê»˜ í¬í•¨í•˜ê¸° ìœ„í•´ ê³¼ê°íˆ(?) docker í™˜ê²½ì„ ì ‘ê³  jenkins ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³  í™˜ê²½ì„ ì„¤ì •í•´ë³´ë„ë¡ í•œë‹¤.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Docker ë¡œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ë„ ì •ë¦¬í•˜ì˜€ë‹¤.&lt;/p&gt;
&lt;/blockquote&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Docker ë¡œ ì  í‚¨ìŠ¤ í™˜ê²½ì„ ì„¸íŒ…í•˜ë ¤ê³  í–ˆëŠ”ë°..</p><p><a href="https://hub.docker.com/_/jenkins">https://hub.docker.com/_/jenkins</a> ì„ ì‚´í´ë³´ë©´ ë” ì´ìƒ ì§€ì›ì„ ì•ˆí•˜ëŠ” ê²ƒìœ¼ë¡œ íŒŒì•…ëœë‹¤. ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ë¶€ë¶„ì„ í•¨ê»˜ í¬í•¨í•˜ê¸° ìœ„í•´ ê³¼ê°íˆ(?) docker í™˜ê²½ì„ ì ‘ê³  jenkins ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³  í™˜ê²½ì„ ì„¤ì •í•´ë³´ë„ë¡ í•œë‹¤.</p><blockquote><p>Docker ë¡œ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ë„ ì •ë¦¬í•˜ì˜€ë‹¤.</p></blockquote><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">Install Java</a></li><li><a href="#subject02">Install Maven</a><ul><li><a href="#subject03">.bashrc</a></li></ul></li><li><a href="#subject04">Install Git</a></li><li><a href="#subject05">Install Jenkins</a><ul><li><a href="#subject06">Edit sysconfig (jenkins config)</a></li></ul></li><li><a href="#subject07">on Docker..</a><blockquote><p><a href="#reference">Reference</a></p></blockquote></li></ol><h1 id="Install-Java"><a href="#Install-Java" class="headerlink" title=" Install Java"></a><a name="subject01"></a> Install Java</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ yum list java-1.8.0-openjdk-devel*</span><br><span class="line">base                                                                                | 3.6 kB  00:00:00</span><br><span class="line">epel/x86_64/metalink                                                                | 7.8 kB  00:00:00</span><br><span class="line">epel                                                                                | 4.7 kB  00:00:00</span><br><span class="line">extras                                                                              | 2.9 kB  00:00:00</span><br><span class="line">updates                                                                             | 2.9 kB  00:00:00</span><br><span class="line">(1/7): base/7/x86_64/group_gz                                                       | 153 kB  00:00:00</span><br><span class="line">(2/7): extras/7/x86_64/primary_db                                                   | 222 kB  00:00:00</span><br><span class="line">(3/7): updates/7/x86_64/primary_db                                                  | 4.7 MB  00:00:00</span><br><span class="line">(4/7): epel/x86_64/group_gz                                                         |  95 kB  00:00:00</span><br><span class="line">(5/7): base/7/x86_64/primary_db                                                     | 6.1 MB  00:00:00</span><br><span class="line">(6/7): epel/x86_64/primary_db                                                       | 6.9 MB  00:00:01</span><br><span class="line">(7/7): epel/x86_64/updateinfo                                                       | 1.0 MB  00:00:07</span><br><span class="line">Available Packages</span><br><span class="line">java-1.8.0-openjdk-devel.i686                         1:1.8.0.275.b01-0.el7_9                       updates</span><br><span class="line">java-1.8.0-openjdk-devel.x86_64                       1:1.8.0.275.b01-0.el7_9                       updates</span><br><span class="line"></span><br><span class="line">$ yum install -y java-1.8.0-openjdk-devel.x86_64</span><br></pre></td></tr></table></figure><ul><li><p>ì´í›„ JAVA í™˜ê²½ë³€ìˆ˜ ë“±ë¡ì„ ìœ„í•´ ì‹¤ì œ ì£¼ì†Œë¥¼ ì•Œì•„ë‚´ê³  ì´ë¥¼ .bashrc ì— ì¶”ê°€í•œë‹¤.</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ readlink -f /usr/bin/javac</span><br><span class="line">/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-0.el7_9.x86_64/bin/javac</span><br><span class="line"><span class="comment">#JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-0.el7_9.x86_64</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="Install-Maven"><a href="#Install-Maven" class="headerlink" title=" Install Maven"></a><a name="subject02"></a> Install Maven</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkdir -p /app &amp;&amp; sudo chmod 777 /app</span><br><span class="line">$ wget https://downloads.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz -P /app</span><br><span class="line">$ tar -xvzf apache-maven-3.6.3-bin.tar.gz</span><br></pre></td></tr></table></figure><h2 id="bashrc"><a href="#bashrc" class="headerlink" title=" .bashrc"></a><a name="subject03"></a> <code>.bashrc</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># JAVA_HOME</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-0.el7_9.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment"># MAVEN_HOME</span></span><br><span class="line"><span class="built_in">export</span> MAVEN_HOME=/app/apache-maven-3.6.3</span><br><span class="line"></span><br><span class="line"><span class="comment"># PATH</span></span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$MAVEN_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> PATH</span><br></pre></td></tr></table></figure><h1 id="Install-Git"><a href="#Install-Git" class="headerlink" title=" Install Git"></a><a name="subject04"></a> Install Git</h1><p><code>sudo yum install -y git</code></p><h1 id="Install-Jenkins"><a href="#Install-Jenkins" class="headerlink" title=" Install Jenkins"></a><a name="subject05"></a> Install Jenkins</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br><span class="line">$ sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br><span class="line">$ sudo yum install -y jenkins</span><br><span class="line">$ sudo systemctl <span class="built_in">enable</span> jenkins</span><br></pre></td></tr></table></figure><h1 id="Edit-sysconfig-jenkins-config"><a href="#Edit-sysconfig-jenkins-config" class="headerlink" title=" Edit sysconfig (jenkins config)"></a><a name="subject06"></a> Edit sysconfig (jenkins config)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cat /etc/sysconfig/jenkins</span><br><span class="line"><span class="comment">## Path:        Development/Jenkins</span></span><br><span class="line"><span class="comment">## Description: Jenkins Automation Server</span></span><br><span class="line"><span class="comment">## Type:        string</span></span><br><span class="line"><span class="comment">## Default:     &quot;/var/lib/jenkins&quot;</span></span><br><span class="line"><span class="comment">## ServiceRestart: jenkins</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Directory where Jenkins store its configuration and working</span></span><br><span class="line"><span class="comment"># files (checkouts, build reports, artifacts, ...).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">JENKINS_HOME=<span class="string">&quot;/jenkins_home&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Type:        string</span></span><br><span class="line"><span class="comment">## Default:     &quot;&quot;</span></span><br><span class="line"><span class="comment">## ServiceRestart: jenkins</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Java executable to run Jenkins</span></span><br><span class="line"><span class="comment"># When left empty, we&#x27;ll try to find the suitable Java.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">JENKINS_USER=<span class="string">&quot;jenkins&quot;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">JENKINS_PORT=<span class="string">&quot;9090&quot;</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="comment">## Type:        string</span></span><br><span class="line"><span class="comment">## Default:     &quot;&quot;</span></span><br><span class="line"><span class="comment">## ServiceRestart: jenkins</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Pass arbitrary arguments to Jenkins.</span></span><br><span class="line"><span class="comment"># Full option list: java -jar jenkins.war --help</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">JENKINS_ARGS=<span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure><ul><li>ì´í›„ ì„œë¹„ìŠ¤ë¥¼ ì‹¤í–‰<ul><li><code>sudo systemctl start jenkins</code></li></ul></li></ul><h1 id="On-Docker"><a href="#On-Docker" class="headerlink" title=" On Docker.."></a><a name="subject07"></a> On Docker..</h1><ul><li><p>Pull Jenkins Image</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull jenkins/jenkins:lts</span><br><span class="line">$ docker images</span><br><span class="line">REPOSITORY        TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">jenkins/jenkins   lts       1920bf702d7d   4 weeks ago   713MB</span><br></pre></td></tr></table></figure></li><li><p>Run Container</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8080:8080 --name jenkins_test \</span><br><span class="line">                -v /home/centos/jenkins_home:/var/jenkins_home \</span><br><span class="line">                -v /var/run/docker.sock:/var/run/docker.sock -u root jenkins/jenkins:lts</span><br></pre></td></tr></table></figure><ul><li>/home/centos/jenkins_home í˜¸ìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ container /var/jenkins_home ìœ¼ë¡œ mount</li><li>/var/run/docker.sock íŒŒì¼ì„ ë§ˆìš´íŠ¸í•˜ëŠ” ì´ìœ ëŠ” ì¼ë°˜ user ë„ í•´ë‹¹ ë””ë ‰í† ë¦¬ë¥¼ ë„˜ë‚˜ë“¤ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ê¸° ìœ„í•¨</li></ul></li><li><p>Add Outbound rule</p><ul><li>ë³¸ì¸ì€ í† ìŠ¤íŠ¸ í´ë¼ìš°ë“œë¥¼ ì‚¬ìš©ì¤‘ì´ë¯€ë¡œ ì‚¬ìš©ì¤‘ì¸ í´ë¼ìš°ë“œì˜ ë³´ì•ˆê·¸ë£¹ì— outbound rule ì¶”ê°€ (8080í¬íŠ¸)</li></ul></li><li><p>Verify initial admin password</p><ul><li>ì»¨í…Œì´ë„ˆ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ í™•ì¸í•´ë„(<em>ex. docker exec -ti {container_name} sh</em>) ë˜ì§€ë§Œ docker exec ì— cat ë§Œ ì „ë‹¬í•˜ì—¬ <code>initialAdminPassword</code> ë‚´ìš©ì„ í™•ì¸í•œë‹¤<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it jenkins_test cat /var/jenkins_home/secrets/initialAdminPassword</span><br><span class="line">75c9d1c35b674306a2ed9f114f49240f</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://blog.jiniworld.me/88">https://blog.jiniworld.me/88</a></li><li><a href="https://velog.io/@wimes/Jenkins%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4-Docker%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B9%8C%EB%93%9C%ED%95%B4%EB%B3%B4%EA%B8%B0">https://velog.io/@wimes/Jenkinsë¥¼-ì´ìš©í•´-Dockerí”„ë¡œì íŠ¸-ë¹Œë“œí•´ë³´ê¸°</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/jenkins-install_jenkins/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Node.js] NVM ì„¤ì¹˜</title>
      <link>https://jx2lee.github.io/nodejs-install_nvm/</link>
      <guid>https://jx2lee.github.io/nodejs-install_nvm/</guid>
      <pubDate>Fri, 08 Jan 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt;node.js ë²„ì „ ë§¤ë‹ˆì €ì¸ NVM ì„ ì„¤ì¹˜í•˜ê³  ì‚´í´ë³¸ë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center>node.js ë²„ì „ ë§¤ë‹ˆì €ì¸ NVM ì„ ì„¤ì¹˜í•˜ê³  ì‚´í´ë³¸ë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">NVM?</a></li><li><a href="#subject02">Install NVM</a><ol start="3"><li><a href="#subject03">.bashrc (or .zsh)</a></li></ol></li><li><a href="#subject04">Installing a specific version of Nodejs</a></li><li><a href="#subject04">Installing a specific version of Nodejs</a><blockquote><p><a href="#reference">Reference</a></p></blockquote></li></ol><h1 id="NVM"><a href="#NVM" class="headerlink" title=" NVM?"></a><a name="subject01"></a> NVM?</h1><ul><li>node js ë²„ì „ ë§¤ë‹ˆì €ë¡œ ì‹œìŠ¤í…œì— ì—¬ëŸ¬ ê°œì˜ nodejs ë¥¼ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•  ë²„ì „ì„ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ë¡ ë„ì™€ì£¼ëŠ” shell script</li><li>rvm(Ruby Version Manager) ì™€ ë¹„ìŠ·í•œ ì—­í• ì„ ìˆ˜í–‰</li></ul><h1 id="Install-NVM"><a href="#Install-NVM" class="headerlink" title=" Install NVM"></a><a name="subject02"></a> Install NVM</h1><p><code>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash</code></p><h2 id="bashrc-or-zsh"><a href="#bashrc-or-zsh" class="headerlink" title=" .bashrc (or .zsh)"></a><a name="subject03"></a> .bashrc (or .zsh)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ vi ~/.zshrc</span><br><span class="line"><span class="comment"># Nodejs</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br></pre></td></tr></table></figure><h1 id="Installing-a-specific-version-of-Nodejs"><a href="#Installing-a-specific-version-of-Nodejs" class="headerlink" title=" Installing a specific version of Nodejs"></a><a name="subject04"></a> Installing a specific version of Nodejs</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ nvm install 13.1.0</span><br><span class="line">$ nvm ls</span><br><span class="line">-&gt;      v13.1.0</span><br><span class="line">         system</span><br><span class="line">default -&gt; 13.1.0 (-&gt; v13.1.0)</span><br><span class="line">node -&gt; stable (-&gt; v13.1.0) (default)</span><br><span class="line">stable -&gt; 13.1 (-&gt; v13.1.0) (default)</span><br><span class="line">iojs -&gt; N/A (default)</span><br><span class="line">lts/* -&gt; lts/fermium (-&gt; N/A)</span><br><span class="line">lts/argon -&gt; v4.9.1 (-&gt; N/A)</span><br><span class="line">lts/boron -&gt; v6.17.1 (-&gt; N/A)</span><br><span class="line">lts/carbon -&gt; v8.17.0 (-&gt; N/A)</span><br><span class="line">lts/dubnium -&gt; v10.23.1 (-&gt; N/A)</span><br><span class="line">lts/erbium -&gt; v12.20.1 (-&gt; N/A)</span><br><span class="line">lts/fermium -&gt; v14.15.4 (-&gt; N/A)</span><br></pre></td></tr></table></figure><h1 id="Commands"><a href="#Commands" class="headerlink" title=" Commands"></a><a name="subject05"></a> Commands</h1><ul><li>search node version: <code>nvm ls-remote</code></li><li>select specific node version: <code>nvm use &#123;node-version&#125;</code></li><li>set default version:  <code>nvm alias default &#123;node-version&#125;</code></li><li>delete version: <code>nvm uninstall &#123;node-version&#125;</code></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li>lesstif.com/javascript/nvm-node-version-manager-nodejs-82214944.html</li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/nodejs-install_nvm/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Single Node Cluster ì„¤ì¹˜</title>
      <link>https://jx2lee.github.io/hadoop-install_singloenode_cluster/</link>
      <guid>https://jx2lee.github.io/hadoop-install_singloenode_cluster/</guid>
      <pubDate>Thu, 07 Jan 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;CentOS 7 í™˜ê²½ì—ì„œ Single Node Hadoop Clsuter ë¥¼ ì„¤ì¹˜í•œë‹¤.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;version&lt;ul&gt;
&lt;li&gt;java: 1.8.0&lt;/li&gt;
&lt;li&gt;hadoop: 2.10.1&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>CentOS 7 í™˜ê²½ì—ì„œ Single Node Hadoop Clsuter ë¥¼ ì„¤ì¹˜í•œë‹¤.</p><ul><li>version<ul><li>java: 1.8.0</li><li>hadoop: 2.10.1</li></ul></li></ul><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">Install Java</a></li><li><a href="#subject02">SSH setting</a></li><li><a href="#subject03">Install Hadoop</a></li><li><a href="#subject04">Configuring Hadoop</a><ul><li><a href="#subject05">$HADOOP_HOME/etc/hadoop/core-site.xml</a></li><li><a href="#subject06">$HADOOP/etc/hadoop/hdfs-site.xml</a></li><li><a href="#subject07">$HADOOP_HOME/etc/hadoop/mapred-site.xml</a></li><li><a href="#subject08">$HADOOP_HOME/etc/hadoop/yarn-site.xml</a></li></ul></li><li><a href="#subject09">Running Hadoop</a></li><li><a href="#subject10">Before starting the Cluster, we need to format the Hadoop NN in our local system</a></li><li><a href="#subject11">Start NameNode daemon and DataNode daemon</a><blockquote><p><a href="#reference">Reference</a></p></blockquote></li></ol><h1 id="Install-Java"><a href="#Install-Java" class="headerlink" title=" Install Java"></a><a name="subject01"></a> Install Java</h1><p><code>$ yum install -y java-1.8.0-openjdk</code></p><h1 id="SSH-setting"><a href="#SSH-setting" class="headerlink" title=" SSH setting"></a><a name="subject02"></a> SSH setting</h1><p><a href="http://localhost">localhost</a> ssh ì ‘ì†ì„ ìœ„í•´ ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -P <span class="string">&#x27;&#x27;</span></span><br><span class="line">$ cat <span class="variable">$HOME</span>/.ssh/id_rsa.pub  &gt;&gt; <span class="variable">$HOME</span>/.ssh/authorized_keys</span><br><span class="line">$ sudo vi /etc/ssh/sshd_config</span><br><span class="line"><span class="comment">#PasswordAuthentication yes</span></span><br><span class="line">$ sudo systemctl restart sshd</span><br><span class="line">$ ssh localhost <span class="comment">#Test</span></span><br></pre></td></tr></table></figure><h1 id="Install-Hadoop"><a href="#Install-Hadoop" class="headerlink" title=" Install Hadoop"></a><a name="subject03"></a> Install Hadoop</h1><ul><li>binary ë‹¤ìš´ë¡œë“œ ë° í™˜ê²½ë³€ìˆ˜ ì„¤ì •</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://downloads.apache.org/hadoop/common/hadoop-2.10.1/hadoop-2.10.1.tar.gz</span><br><span class="line">$ tar -xvzf hadoop-2.10.1.tar.gz</span><br><span class="line">$ vi ~/.bashrc</span><br><span class="line"><span class="comment"># Hadoop env</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/app/hadoop-2.10.1</span><br><span class="line"><span class="built_in">export</span> HADOOP_COMMON_LIB_NATIVE_DIR=<span class="variable">$HADOOP_HOME</span>/lib/native</span><br><span class="line"><span class="built_in">export</span> HADOOP_OPTS=<span class="string">&quot;-Djava.library.path=<span class="variable">$HADOOP_HOME</span>/lib&quot;</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.275.b01-0.el7_9.x86_64</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin</span><br><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><h1 id="Configuring-Hadoop"><a href="#Configuring-Hadoop" class="headerlink" title=" Configuring Hadoop"></a><a name="subject04"></a> Configuring Hadoop</h1><h3 id="HADOOP-HOME-etc-hadoop-core-site-xml"><a href="#HADOOP-HOME-etc-hadoop-core-site-xml" class="headerlink" title=" $HADOOP_HOME/etc/hadoop/core-site.xml"></a><a name="subject05"></a> <code>$HADOOP_HOME/etc/hadoop/core-site.xml</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://hadoop-test.novalocal:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>fs.defaultFS value format: <code>hdfs://&#123;hostname&#125;:&#123;port&#125;</code></li></ul><h3 id="HADOOP-etc-hadoop-hdfs-site-xml"><a href="#HADOOP-etc-hadoop-hdfs-site-xml" class="headerlink" title=" $HADOOP/etc/hadoop/hdfs-site.xml"></a><a name="subject06"></a> <code>$HADOOP/etc/hadoop/hdfs-site.xml</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/hdata/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">value</span>&gt;</span>/hdata/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ì´í›„ namenode/datanode directory ë¥¼ ìƒì„±í•œë‹¤.</li></ul><h3 id="HADOOP-HOME-etc-hadoop-mapred-site-xml"><a href="#HADOOP-HOME-etc-hadoop-mapred-site-xml" class="headerlink" title=" $HADOOP_HOME/etc/hadoop/mapred-site.xml"></a><a name="subject07"></a> <code>$HADOOP_HOME/etc/hadoop/mapred-site.xml</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>mapred.job.tracker<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>localhost:9001<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="HADOOP-HOME-etc-hadoop-yarn-site-xml"><a href="#HADOOP-HOME-etc-hadoop-yarn-site-xml" class="headerlink" title=" $HADOOP_HOME/etc/hadoop/yarn-site.xml"></a><a name="subject08"></a> <code>$HADOOP_HOME/etc/hadoop/yarn-site.xml</code></h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Running-Hadoop"><a href="#Running-Hadoop" class="headerlink" title=" Running Hadoop"></a><a name="subject09"></a> Running Hadoop</h2><h3 id="Before-starting-the-Cluster-we-need-to-format-the-Hadoop-NN-in-our-local-system"><a href="#Before-starting-the-Cluster-we-need-to-format-the-Hadoop-NN-in-our-local-system" class="headerlink" title=" Before starting the Cluster, we need to format the Hadoop NN in our local system"></a><a name="subject10"></a> Before starting the Cluster, we need to format the Hadoop NN in our local system</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$HADOOP_HOME</span>/bin/hadoop namenode -format</span><br></pre></td></tr></table></figure><ul><li><p>ì´í›„ namenode path ë¡œ ì„¤ì •í•œ í´ë”ì— ë­”ê°€ê°€ ìƒê¹€ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree</span><br><span class="line">/hdata/name/</span><br><span class="line">â””â”€â”€ current</span><br><span class="line">    â”œâ”€â”€ fsimage_0000000000000000000</span><br><span class="line">    â”œâ”€â”€ fsimage_0000000000000000000.md5</span><br><span class="line">    â”œâ”€â”€ seen_txid</span><br><span class="line">    â””â”€â”€ VERSION</span><br><span class="line"></span><br><span class="line">1 directory, 4 files</span><br></pre></td></tr></table></figure></li></ul><h3 id="Start-NameNode-daemon-and-DataNode-daemon"><a href="#Start-NameNode-daemon-and-DataNode-daemon" class="headerlink" title=" Start NameNode daemon and DataNode daemon"></a><a name="subject10"></a> Start NameNode daemon and DataNode daemon</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$HADOOP_HOME</span>/sbin/start-dfs.sh</span><br><span class="line">$ <span class="variable">$HADOOP_HOME</span>/sbin/start-yarn.sh</span><br><span class="line">$ jps</span><br><span class="line">12960 Jps</span><br><span class="line">10161 NodeManager</span><br><span class="line">12625 SecondaryNameNode</span><br><span class="line">10051 ResourceManager</span><br><span class="line">12435 DataNode</span><br><span class="line">12287 NameNode</span><br></pre></td></tr></table></figure><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://helei.pro/doc/Setup-Hadoop-2.7.3-(single-node)-on-AWS-EC2-Ubuntu-AMI.pdf">https://helei.pro/doc/Setup-Hadoop-2.7.3-(single-node)-on-AWS-EC2-Ubuntu-AMI.pdf</a></li><li><a href="https://www.tecmint.com/install-hadoop-single-node-on-centos-7/">https://www.tecmint.com/install-hadoop-single-node-on-centos-7/</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-install_singloenode_cluster/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Docker ì„¤ì¹˜ On CentOS7</title>
      <link>https://jx2lee.github.io/cloud-install_docker_on_centos/</link>
      <guid>https://jx2lee.github.io/cloud-install_docker_on_centos/</guid>
      <pubDate>Wed, 06 Jan 2021 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;CentOS 7 í™˜ê²½ì—ì„œ Docker ì„¤ì¹˜ ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;CentOS Linux release 7.5.1804 (Core)&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>CentOS 7 í™˜ê²½ì—ì„œ Docker ì„¤ì¹˜ ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><blockquote><p><em>CentOS Linux release 7.5.1804 (Core)</em></p></blockquote><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ì´ì „ ì„¤ì¹˜ëœ Docker ì‚­ì œ</a></li><li><a href="#subject02">yum-utils íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° Docker repo ì¶”ê°€</a></li><li><a href="#subject03">Docker ì„¤ì¹˜ (with yum)</a><blockquote><p><a href="#reference">Referenece</a></p></blockquote></li></ol><h1 id="ì´ì „-ì„¤ì¹˜ëœ-Docker-ì‚­ì œ"><a href="#ì´ì „-ì„¤ì¹˜ëœ-Docker-ì‚­ì œ" class="headerlink" title=" ì´ì „ ì„¤ì¹˜ëœ Docker ì‚­ì œ"></a><a name="subject01"></a> ì´ì „ ì„¤ì¹˜ëœ Docker ì‚­ì œ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br></pre></td></tr></table></figure><h1 id="yum-utils-íŒ¨í‚¤ì§€-ì„¤ì¹˜-ë°-Docker-repo-ì¶”ê°€"><a href="#yum-utils-íŒ¨í‚¤ì§€-ì„¤ì¹˜-ë°-Docker-repo-ì¶”ê°€" class="headerlink" title=" yum-utils íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° Docker repo ì¶”ê°€"></a><a name="subject02"></a> yum-utils íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° Docker repo ì¶”ê°€</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils</span><br><span class="line">$ sudo yum-config-manager \</span><br><span class="line">    --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h1 id="Docker-ì„¤ì¹˜-with-yum"><a href="#Docker-ì„¤ì¹˜-with-yum" class="headerlink" title=" Docker ì„¤ì¹˜ (with yum)"></a><a name="subject03"></a> Docker ì„¤ì¹˜ (with yum)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ yum install -y docker-ce</span><br><span class="line">$ systemctl <span class="built_in">enable</span> docker</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.</span><br><span class="line">$ systemctl status docker</span><br><span class="line">â— docker.service - Docker Application Container Engine</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/docker.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Mon 2021-01-04 13:19:54 KST; 1s ago</span><br><span class="line">     Docs: https://docs.docker.com</span><br><span class="line"> Main PID: 11889 (dockerd)</span><br><span class="line">    Tasks: 13</span><br><span class="line">   Memory: 47.3M</span><br><span class="line">   CGroup: /system.slice/docker.service</span><br><span class="line">           â””â”€11889 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br><span class="line"></span><br><span class="line">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=<span class="string">&quot;2021-01-04T13:19:54.036061899+09:00&quot;</span> leve...rpc</span><br><span class="line">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=<span class="string">&quot;2021-01-04T13:19:54.036084134+09:00&quot;</span> leve...rpc</span><br><span class="line">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=<span class="string">&quot;2021-01-04T13:19:54.036094510+09:00&quot;</span> leve...rpc</span><br><span class="line">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=<span class="string">&quot;2021-01-04T13:19:54.066676014+09:00&quot;</span> leve...t.<span class="string">&quot;</span></span><br><span class="line"><span class="string">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=&quot;</span>2021-01-04T13:19:54.197938418+09:00<span class="string">&quot; leve...ss&quot;</span></span><br><span class="line">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=<span class="string">&quot;2021-01-04T13:19:54.247887261+09:00&quot;</span> leve...e.<span class="string">&quot;</span></span><br><span class="line"><span class="string">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=&quot;</span>2021-01-04T13:19:54.275547502+09:00<span class="string">&quot; leve...0.1</span></span><br><span class="line"><span class="string">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=&quot;</span>2021-01-04T13:19:54.275733738+09:00<span class="string">&quot; leve...on&quot;</span></span><br><span class="line">Jan 04 13:19:54 test-centos.novalocal systemd[1]: Started Docker Application Container Engine.</span><br><span class="line">Jan 04 13:19:54 test-centos.novalocal dockerd[11889]: time=<span class="string">&quot;2021-01-04T13:19:54.303691925+09:00&quot;</span> leve...ck<span class="string">&quot;</span></span><br><span class="line"><span class="string">Hint: Some lines were ellipsized, use -l to show in full.</span></span><br><span class="line"><span class="string">$ docker ps</span></span><br><span class="line"><span class="string">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span></span><br></pre></td></tr></table></figure><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-install_docker_on_centos/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] ìì²´ íŠœë‹ Docker ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ ë³´ìêµ¬ìš”.</title>
      <link>https://jx2lee.github.io/cloud-docker_image_test/</link>
      <guid>https://jx2lee.github.io/cloud-docker_image_test/</guid>
      <pubDate>Tue, 27 Oct 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ê¸‰íˆ ë‚˜ì£¼ ì¶œì¥ì„ ê°ˆ ì˜ˆì •ì¸ë° ë¬´ìŠ¨ í´ë¼ìš°ë“œì—ì„œ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì¸ë° ì„œë²„ 1ê°œë¡œ êµ¬ì¶•ì„ í•´ë‹¬ë¼ëŠ” í™©ë‹¹í•œ ìš”ì²­ì´ ìˆì—ˆë‹¤. ìš°ì„  ì„¤ì¹˜ë¥¼ í•˜ê³  ë´ì•¼ í•˜ë‹ˆ.. ê° íŒŒë“œ resource ë¥¼ ìµœì €ë¡œ ì£¼ê³  í…ŒìŠ¤íŠ¸ í•˜ë˜ ë„ì¤‘ ìš°ë¦¬ ì œí’ˆ ë°”ì´ë„ˆë¦¬ì— ìˆ˜ì •ì‚¬í•­ì´ ë°œìƒí•˜ì˜€ë‹¤. ì´ìŠˆë¥¼ ì˜¬ë ¤ì„œ í•´ë„ ë˜ì§€ë§Œ ì–´ì°¨í”¼ ê²€ìˆ˜ ëª©ì ìœ¼ë¡œ ìº¡ì³ë§Œ ëœ¨ëŠ” ì„¤ì¹˜ê±´ì´ë¼ &lt;strong&gt;ë°”ì´ë„ˆë¦¬ë¥¼ ìˆ˜ì •í•˜ì—¬ ë®ì–´ ì”Œìš°ëŠ” ìì²´ íŠœë‹&lt;/strong&gt; ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ì—­ì‹œ GODì •í¬ë‹˜ ìµœê³ &lt;/p&gt;
&lt;/blockquote&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ê¸‰íˆ ë‚˜ì£¼ ì¶œì¥ì„ ê°ˆ ì˜ˆì •ì¸ë° ë¬´ìŠ¨ í´ë¼ìš°ë“œì—ì„œ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì¸ë° ì„œë²„ 1ê°œë¡œ êµ¬ì¶•ì„ í•´ë‹¬ë¼ëŠ” í™©ë‹¹í•œ ìš”ì²­ì´ ìˆì—ˆë‹¤. ìš°ì„  ì„¤ì¹˜ë¥¼ í•˜ê³  ë´ì•¼ í•˜ë‹ˆ.. ê° íŒŒë“œ resource ë¥¼ ìµœì €ë¡œ ì£¼ê³  í…ŒìŠ¤íŠ¸ í•˜ë˜ ë„ì¤‘ ìš°ë¦¬ ì œí’ˆ ë°”ì´ë„ˆë¦¬ì— ìˆ˜ì •ì‚¬í•­ì´ ë°œìƒí•˜ì˜€ë‹¤. ì´ìŠˆë¥¼ ì˜¬ë ¤ì„œ í•´ë„ ë˜ì§€ë§Œ ì–´ì°¨í”¼ ê²€ìˆ˜ ëª©ì ìœ¼ë¡œ ìº¡ì³ë§Œ ëœ¨ëŠ” ì„¤ì¹˜ê±´ì´ë¼ <strong>ë°”ì´ë„ˆë¦¬ë¥¼ ìˆ˜ì •í•˜ì—¬ ë®ì–´ ì”Œìš°ëŠ” ìì²´ íŠœë‹</strong> ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤.</p><blockquote><p>ì—­ì‹œ GODì •í¬ë‹˜ ìµœê³ </p></blockquote><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ë¬¸ì œ ë°œìƒ</a></li><li><a href="#subject02">ë°”ì´ë„ˆë¦¬ ìˆ˜ì • í›„ docker image ë””ë ‰í† ë¦¬ ìƒì„±í•˜ê¸°</a></li><li><a href="#subject03">ë¹Œë“œí•˜ì!</a></li></ol><h1 id="ë¬¸ì œ-ë°œìƒ"><a href="#ë¬¸ì œ-ë°œìƒ" class="headerlink" title=" ë¬¸ì œ ë°œìƒ"></a><a name="subject01"></a> ë¬¸ì œ ë°œìƒ</h1><p>JEUS ë¥¼ í†µí•´ ë‘ ê°œ ì„œë²„ë¥¼ ìƒì„±í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ì—ì„œ, ThreadPool min/max ê°’ì´ ì˜ëª» ì„¤ì •ë˜ì–´ ë°°í¬í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. ì´ ë•Œë¬¸ì— 3ê°œ ì¤‘ í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ê°€ ë™ì‘í•˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ê³ , ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ install script ë‚´ modify command ë¥¼ ì¶”ê°€í•˜ì—¬ min ê°’ì„ ìˆ˜ì •í•˜ì˜€ë‹¤. ê·¼ë°.. ë‹¹ì¥ ë‚´ì¼ ë‚˜ì˜¤ëŠ” ë°”ì´ë„ˆë¦¬ë¡œ ë‚˜ê°ˆ í•„ìš”ë„ ì—†ê³  ì„œë²„ ìŠ¤í™ë„ ì¶©ë¶„í•˜ì§€ ëª»í•œ ìƒí™©ì—ì„œ ì´ì „ ë²„ì ¼ìœ¼ë¡œ ë‚˜ê°€ëŠ” ê²Œ ë² ìŠ¤íŠ¸ ì¼ ê²ƒ ê°™ì•„ ìì²´ì ìœ¼ë¡œ Docker ì´ë¯¸ì§€ë¥¼ íŠœë‹í•´ë³´ê³ ì í•œë‹¤. </p><h1 id="ë°”ì´ë„ˆë¦¬-ìˆ˜ì •-í›„-docker-image-ë””ë ‰í† ë¦¬-ìƒì„±í•˜ê¸°"><a href="#ë°”ì´ë„ˆë¦¬-ìˆ˜ì •-í›„-docker-image-ë””ë ‰í† ë¦¬-ìƒì„±í•˜ê¸°" class="headerlink" title=" ë°”ì´ë„ˆë¦¬ ìˆ˜ì • í›„ docker image ë””ë ‰í† ë¦¬ ìƒì„±í•˜ê¸°"></a><a name="subject02"></a> ë°”ì´ë„ˆë¦¬ ìˆ˜ì • í›„ docker image ë””ë ‰í† ë¦¬ ìƒì„±í•˜ê¸°</h1><p>ìœ„ ë¬¸ì œ ë°œìƒì—ì„œ í•´ê²°í•œ ë°”ì´ë„ˆë¦¬ë¥¼ ë‹¤ì‹œ ë˜‘ê°™ì€ ë°”ì´ë„ˆë¦¬ë¡œ ì••ì¶•í•œ ë’¤ docker ì´ë¯¸ì§€ ë¹Œë“œë¥¼ ìœ„í•œ ê³³ì— ìœ„ì¹˜í•œë‹¤. ê·¸ë¦¬ê³  Dockerfile ë¥¼ ìƒì„±í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.</p><figure class="highlight docker"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> hyperdata8.<span class="number">3</span>_hd_v8.<span class="number">3.2</span>:<span class="number">20201016</span>_v1</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> HyperData_8.3_r874bb4-20201016030033_v8.3.2.tar.gz /deploy_src/src/hyperdata/HyperData_8.3_r874bb4-20201016030033_v8.3.2.tar.gz</span></span><br></pre></td></tr></table></figure><ul><li>ê¸°ì¡´ ì´ë¯¸ì§€ë¥¼ base ë¡œ FROM ìœ¼ë¡œ í˜¸ì¶œ</li><li>êµ‰ì¥íˆ ì‰¬ì› ë‹¤. í•´ë‹¹ ìˆ˜ì •í•œ ë°”ì´ë„ˆë¦¬ íŒŒì¼ì„ ì´ë¯¸ì§€ ë‚´ ì›ë˜ ìˆë˜ ë””ë ‰í† ë¦¬ì— ê°™ì€ ì´ë¦„ìœ¼ë¡œ ì‘ì„±ë§Œ í•˜ë©´ Docker build ì‹œ ìµœì¢… ë°”ì´ë„ˆë¦¬ëŠ” ë‚´ê°€ ìˆ˜ì •í•œ ë°”ì´ë„ˆë¦¬ë¡œ ì••ì¶•ì„ í•´ì œí•  ê²ƒì´ë‹¤. Dockerfile ì— ìˆœì„œëŠ” ë¬´ê´€í•˜ë‹¤ëŠ” ê±¸ ì˜¤ëŠ˜ ê¹¨ë‹¬ì•˜ê³  ë‚˜ì˜ ë¬´ì§€í•¨ ë˜ëŠ” ê¹¨ë‹¬ì•˜ë‹¤. Docker image build ì— ëŒ€í•´ ë” ì‚´í´ë³¼ í•„ìš”ê°€ ìˆì–´ë³´ì¸ë‹¤.</li></ul><h1 id="ë¹Œë“œí•˜ì"><a href="#ë¹Œë“œí•˜ì" class="headerlink" title=" ë¹Œë“œí•˜ì!"></a><a name="subject03"></a> ë¹Œë“œí•˜ì!</h1><p>í•´ë‹¹ ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì»¤ë§¨ë“œë¡œ ë¹Œë“œí•œë‹¤.  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t &#123;ê¸°ì¡´_ì´ë¯¸ì§€ëª…&#125;:&#123;íƒœê·¸_ë³€ê²½_ì•„ë¬´ê±°ë‚˜_í•˜ì„¸ìš”&#125; .</span><br></pre></td></tr></table></figure><ul><li>ë§ˆì§€ë§‰ ì¤„ <strong>.(ì )</strong> ì¤‘ìš”í•˜ë‹¤. ë¬¼ë¡  ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•  ìˆ˜ ìˆëŠ” ì˜µì…˜ì´ ìˆì§€ë§Œ ì£¼ì§€ ì•Šì„ ê²½ìš° <strong>ì </strong>ì„ í†µí•´ ë¹Œë“œ ë””ë ‰í† ë¦¬ë¥¼ ì¸ì‹í•œë‹¤.</li><li>íƒœê·¸ëª…ì˜ ê²½ìš° ì´ì „ íƒœê·¸ëª…ì—ì„œ ë‚˜ëŠ” ê³ ê°ì‚¬ ì˜ë¬¸ ì¤„ì„ë§Œ ë¶™ì˜€ë‹¤. <del>ì–‘ì•„ì·¨</del></li></ul><p><strong>docker images</strong> ì»¤ë§¨ë“œë¡œ ìƒì„±ì´ ì˜ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤. ë‚˜ì˜ ê²½ìš° ì´ë ‡ê²Œ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê³  í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ë‹ˆ, ë‚´ê°€ ìˆ˜ì •í•œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë°˜ì˜ë˜ì—ˆê³  ëª¨ë“ ê²Œ Dockerfile ë‘ ì¤„ë¡œ ëë‚˜ë²„ë ¸ë‹¤. ì¡°ê¸ˆì€ í—ˆë¬´í•˜ì§€ë§Œ Container ì´ë¯¸ì§€ ë¹Œë“œ ê³¼ì •ì— ëŒ€í•´ ê´€ì‹¬ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê³„ê¸°ê°€ ë˜ì—ˆë‹¤!</p><blockquote><p>ê³µë¶€í•  ê²Œ ì‚°ë”ë¯¸ë‹¤.</p></blockquote><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-docker_image_test/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] cri-o ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ ì‚¬ìš© ì‹œ docker registry ì„¸íŒ…</title>
      <link>https://jx2lee.github.io/cloud-crio_registry_setting/</link>
      <guid>https://jx2lee.github.io/cloud-crio_registry_setting/</guid>
      <pubDate>Fri, 02 Oct 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;kubernetes ë²„ì ¼ì´ ì˜¬ë¼ê°ì— ë”°ë¼ &lt;em&gt;(1.15.3 â†’ 1.17.6)&lt;/em&gt; ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ cri-o ë¡œ ë³€ê²½í•˜ì˜€ë‹¤. ì´ë¯¸ì§€ ì €ì¥ì†ŒëŠ” ê·¸ëŒ€ë¡œ docker ì‚¬ìš©í•˜ëŠ”ë° ì´ë•Œ docker registry ì™€ ì—°ë™í•˜ì—¬ image ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³¸ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Updata Note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.10.29 : config ì¶”ê°€ ìˆ˜ì •&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>kubernetes ë²„ì ¼ì´ ì˜¬ë¼ê°ì— ë”°ë¼ <em>(1.15.3 â†’ 1.17.6)</em> ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ cri-o ë¡œ ë³€ê²½í•˜ì˜€ë‹¤. ì´ë¯¸ì§€ ì €ì¥ì†ŒëŠ” ê·¸ëŒ€ë¡œ docker ì‚¬ìš©í•˜ëŠ”ë° ì´ë•Œ docker registry ì™€ ì—°ë™í•˜ì—¬ image ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³¸ë‹¤.</p><p><strong>Updata Note</strong></p><ul><li>2020.10.29 : config ì¶”ê°€ ìˆ˜ì •</li></ul><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">config ìˆ˜ì •</a></li><li><a href="#subject02">cri-o ì¬ê¸°ë™</a></li><li><a href="#subject03">í…ŒìŠ¤íŠ¸ í•´ë³´ì!</a></li></ol><h1 id="config-ìˆ˜ì •"><a href="#config-ìˆ˜ì •" class="headerlink" title=" config ìˆ˜ì •"></a><a name="subject01"></a> config ìˆ˜ì •</h1><p><strong>/etc/crio/crio.conf</strong> ë‚´ ì¤‘ê°„ì—ì„œ ë§ˆì§€ë§‰ ë¶€ë¶„ ì‚¬ì´ <em>insecure_registries</em> ì— docker registry endpoint ë¥¼ ì¶”ê°€í•œë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># List of registries to skip TLS verification for pulling images. Please</span></span><br><span class="line"><span class="comment"># consider configuring the registries via /etc/containers/registries.conf before</span></span><br><span class="line"><span class="comment"># changing them here.</span></span><br><span class="line">insecure_registries = [<span class="string">&quot;192.168.179.185:5000&quot;</span>, <span class="string">&quot;192.168.179.189:5000&quot;</span>]</span><br></pre></td></tr></table></figure><ul><li>ì²« ë²ˆì§¸ endpoint ëŠ” ê¸°ì¡´, ë’¤ì— ì¶”ê°€í•œ endpoint ê°€ ìƒˆë¡œ í…ŒìŠ¤íŠ¸í•  docker registry endpoint ì´ë‹¤.</li></ul><blockquote><p><em>ì¶”ê°€ì ìœ¼ë¡œ config ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•´ì•¼í•œë‹¤.</em></p><ul><li><strong>registries = [â€œ{registry}:{port}â€ , â€œdocker.ioâ€]</strong></li><li><strong>plugin_dirs : â€œ/opt/cni/binâ€ ì¶”ê°€</strong></li><li>ë§Œì•½ íì‡„ë§ í™˜ê²½ì¼ ê²½ìš°, <strong>pause_image ë¶€ë¶„ ì•ì— registry enpointë¥¼ ì¶”ê°€</strong>í•´ì•¼í•œë‹¤.</li></ul></blockquote><h1 id="cri-o-ì¬ê¸°ë™"><a href="#cri-o-ì¬ê¸°ë™" class="headerlink" title=" cri-o ì¬ê¸°ë™"></a><a name="subject02"></a> cri-o ì¬ê¸°ë™</h1><p>cri-o ì„œë¹„ìŠ¤ë¥¼ ì¬ê¸°ë™í•œë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl restart crio</span><br></pre></td></tr></table></figure><h1 id="í…ŒìŠ¤íŠ¸-í•´ë³´ì"><a href="#í…ŒìŠ¤íŠ¸-í•´ë³´ì" class="headerlink" title=" í…ŒìŠ¤íŠ¸ í•´ë³´ì!"></a><a name="subject03"></a> í…ŒìŠ¤íŠ¸ í•´ë³´ì!</h1><p>crictl ë¡œ ì¶”ê°€í•œ docker registry ì™€ ì—°ë™ì´ ì˜ ë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•´ë³´ì!  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ crictl pull 192.168.179.189:5000/hyperdata8.3_tb:20200717_v3</span><br><span class="line">Image is up to date <span class="keyword">for</span> 192.168.179.189:5000/hyperdata8.3_tb@sha256:85e0f94a90a26090488b929e3ef9475b2cab35ad425effdf5e79a7f2f7029a06</span><br><span class="line">$ crictl images |grep hyperdata8.3_tb</span><br><span class="line">192.168.179.189:5000/hyperdata8.3_tb                                                    20200717_v3                                                        76063ea49aadd       3.1GB</span><br></pre></td></tr></table></figure><p>ê°™ì€ ë°©ë²•ìœ¼ë¡œ push í•˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.  </p><p>ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì„ ê´€ë¦¬í•˜ëŠ” ë†ˆì´ <strong>crio</strong> ì´ê³ , crictl config ëŠ” <strong>/etc/crio/crio.conf</strong> ì´ë©° docker registry ì™€ ì—°ë™ì„ ìœ„í•´ í•´ë‹¹ config ë¥¼ ìˆ˜ì •í•˜ê³  crio service ë¥¼ ì¬ ì‹œì‘í•œë‹¤. ì´ì „ì—ëŠ” ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„, ì´ë¯¸ì§€ ê´€ë¦¬ë¥¼ ëª¨ë‘ docker ì—ì„œ ê´€ë¦¬í•˜ì—¬ í¸í•˜ê¸´ í–ˆëŠ”ë°.. cri-oì— ëŒ€í•œ ê°œë…ì„ ì •ë¦¬í•´ë³¼ í•„ìš”ê°€ ìˆë‹¤.  </p><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-crio_registry_setting/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Linux] Timezone ë³€ê²½</title>
      <link>https://jx2lee.github.io/linux-change_timezone/</link>
      <guid>https://jx2lee.github.io/linux-change_timezone/</guid>
      <pubDate>Fri, 02 Oct 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; tzdata íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  ê¸°ì¡´ UTC timezone ì„ KST ë¡œ ë³€ê²½í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> tzdata íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  ê¸°ì¡´ UTC timezone ì„ KST ë¡œ ë³€ê²½í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">íŒ¨í‚¤ì§€ ì„¤ì¹˜</a></li><li><a href="#subject02">Symbolic link ì„¤ì • ë° íŒ¨í‚¤ì§€ ì¬ì„¤ì •</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="íŒ¨í‚¤ì§€-ì„¤ì¹˜"><a href="#íŒ¨í‚¤ì§€-ì„¤ì¹˜" class="headerlink" title=" íŒ¨í‚¤ì§€ ì„¤ì¹˜"></a><a name="subject01"></a> íŒ¨í‚¤ì§€ ì„¤ì¹˜</h1><p>Ubuntu íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ì¸ apt ë¥¼ ì´ìš©í•˜ì—¬ tzdata ë¥¼ ì„¤ì¹˜í•œë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install tzdata</span><br></pre></td></tr></table></figure><h1 id="Symbolic-link-ì„¤ì •-ë°-íŒ¨í‚¤ì§€-ì¬ì„¤ì •"><a href="#Symbolic-link-ì„¤ì •-ë°-íŒ¨í‚¤ì§€-ì¬ì„¤ì •" class="headerlink" title=" Symbolic link ì„¤ì • ë° íŒ¨í‚¤ì§€ ì¬ì„¤ì •"></a><a name="subject02"></a> Symbolic link ì„¤ì • ë° íŒ¨í‚¤ì§€ ì¬ì„¤ì •</h1><p>default timezone UTC ì—ì„œ KST ë¡œ ë°”ê¾¸ê¸° ìœ„í•´ link ë¥¼ ìƒì„±í•œë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ln -sf /usr/share/zoneinfo/Asia/Seoul /etc/localtime</span><br><span class="line">$ date</span><br><span class="line">Fri Sep 18 13:19:40 KST 2020</span><br></pre></td></tr></table></figure><p>ì´í›„ ì¬ ì„¤ì •ì„ ìœ„í•´ ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ timezone ì´ KST ë¡œ ì ìš©í•˜ì˜€ëŠ”ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ dpkg-reconfigure tzdata</span><br></pre></td></tr></table></figure><p>ë!</p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://www.lesstif.com/lpt/ubuntu-linux-timezone-setting-61899162.html">https://www.lesstif.com/lpt/ubuntu-linux-timezone-setting-61899162.html</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/linux-change_timezone/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Linux] ssh ë¹„ë°€ë²ˆí˜¸ ë¬»ì§€ë§ˆ!</title>
      <link>https://jx2lee.github.io/linux-ssh_nopasswd/</link>
      <guid>https://jx2lee.github.io/linux-ssh_nopasswd/</guid>
      <pubDate>Fri, 02 Oct 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; Kubernetes ë…¸ë“œ ê´€ë¦¬ë¥¼ ìœ„í•´ ê° ë…¸ë“œë³„ ì ‘ê·¼ ì‹œ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ í¸í•˜ê²Œ ì ‘ì†í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í•˜ì˜€ë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> Kubernetes ë…¸ë“œ ê´€ë¦¬ë¥¼ ìœ„í•´ ê° ë…¸ë“œë³„ ì ‘ê·¼ ì‹œ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ í¸í•˜ê²Œ ì ‘ì†í•˜ëŠ” ë°©ë²•ì„ ì •ë¦¬í•˜ì˜€ë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">Key ìƒì„±</a></li><li><a href="#subject02">Key ë³µì‚¬</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="Key-ìƒì„±"><a href="#Key-ìƒì„±" class="headerlink" title=" Key ìƒì„±"></a><a name="subject01"></a> Key ìƒì„±</h1><p>ì´ë¯¸ A ì„œë²„ì— ssh Key ê°€ ì¡´ì¬í•œë‹¤ë©´ ì´ ë¶€ë¶„ì€ íŒ¨ìŠ¤í•´ë„ ì¢‹ë‹¤. ë§Œì•½ ì²˜ìŒ ì„¸íŒ…í•˜ëŠ”ê±°ë¼ë©´, ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ ssh Key ë¥¼ ìƒì„±í•˜ì.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="comment"># A ì„œë²„ì—ì„œ ì‹¤í–‰</span></span><br><span class="line">$ ssh-keygen</span><br></pre></td></tr></table></figure><h1 id="Key-ë³µì‚¬"><a href="#Key-ë³µì‚¬" class="headerlink" title=" Key ë³µì‚¬"></a><a name="subject02"></a> Key ë³µì‚¬</h1><p>ìƒì„±í•œ Key ë¥¼ <strong>ssh-copy-id</strong> ë¥¼ ì´ìš©í•´ B ì„œë²„ì— ë“±ë¡í•œë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-copy-id -i ~/.ssh/id_rsa.pub [user]@[ip]</span><br><span class="line">$ <span class="comment"># user/ipëŠ” ë‹¹ì—° B ì„œë²„ ì •ë³´ë¥¼ ì…ë ¥</span></span><br><span class="line">$ <span class="comment"># ìœ„ ì»¤ë§¨ë“œ ì´í›„ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¬¼ì–´ë³¼í…ë° ì˜ ì…ë ¥í•˜ì.</span></span><br></pre></td></tr></table></figure><p>ì´í›„ A ì„œë²„ <em>(host: k8s-master)</em> ì—ì„œ B ì„œë²„ <em>(host: k8s-node1)</em> ë¡œ ì›ê²©ì ‘ì† í•´ë³´ì.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ ssh k8s-node1</span><br><span class="line">Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-112-generic x86_64)</span><br><span class="line"></span><br><span class="line"> * Documentation:  https://help.ubuntu.com</span><br><span class="line"> * Management:     https://landscape.canonical.com</span><br><span class="line"> * Support:        https://ubuntu.com/advantage</span><br><span class="line"></span><br><span class="line">  System information as of Sat Oct  3 23:03:28 KST 2020</span><br><span class="line"></span><br><span class="line">  System load:    0.34              Users logged <span class="keyword">in</span>:        1</span><br><span class="line">  Usage of /home: 0.2% of 19.56GB   IP address <span class="keyword">for</span> enp6s0:  192.168.179.173</span><br><span class="line">  Memory usage:   16%               IP address <span class="keyword">for</span> docker0: 172.17.0.1</span><br><span class="line">  Swap usage:     0%                IP address <span class="keyword">for</span> tunl0:   10.244.36.64</span><br><span class="line">  Processes:      332</span><br><span class="line"></span><br><span class="line"> * Kubernetes 1.19 is out! Get it <span class="keyword">in</span> one <span class="built_in">command</span> with:</span><br><span class="line"></span><br><span class="line">     sudo snap install microk8s --channel=1.19 --classic</span><br><span class="line"></span><br><span class="line">   https://microk8s.io/ has docs and details.</span><br><span class="line"></span><br><span class="line"> * Canonical Livepatch is available <span class="keyword">for</span> installation.</span><br><span class="line">   - Reduce system reboots and improve kernel security. Activate at:</span><br><span class="line">     https://ubuntu.com/livepatch</span><br><span class="line"></span><br><span class="line">92 packages can be updated.</span><br><span class="line">1 update is a security update.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">*** System restart required ***</span><br><span class="line">Last login: Mon Sep 28 17:41:53 2020 from 192.168.188.101</span><br></pre></td></tr></table></figure><p>ë!</p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li>[<a href="https://itzone.tistory.com/694]https://itzone.tistory.com/694">https://itzone.tistory.com/694]https://itzone.tistory.com/694</a>)</li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/linux-ssh_nopasswd/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[TroubleShoot] PyTorch 1.5.0+cu101 ë²„ì ¼ ì„¤ì¹˜ ì‹œ ì—ëŸ¬</title>
      <link>https://jx2lee.github.io/troubleshoot-torch_error/</link>
      <guid>https://jx2lee.github.io/troubleshoot-torch_error/</guid>
      <pubDate>Fri, 02 Oct 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;pytorch ê´€ë ¨ í”„ë¡œì íŠ¸ë¥¼ clone í•˜ì—¬ í•´ë³´ë˜ ì¤‘ì—, requirements.txt ë‚´ torch==1.5.0+cu101 ë¶€ë¶„ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì—ëŸ¬ë¥¼ í”¼í•˜ê³  ì œëŒ€ë¡œ ì„¤ì¹˜í•´ë³´ì!&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>pytorch ê´€ë ¨ í”„ë¡œì íŠ¸ë¥¼ clone í•˜ì—¬ í•´ë³´ë˜ ì¤‘ì—, requirements.txt ë‚´ torch==1.5.0+cu101 ë¶€ë¶„ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì—ëŸ¬ë¥¼ í”¼í•˜ê³  ì œëŒ€ë¡œ ì„¤ì¹˜í•´ë³´ì!</p><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">error ë©”ì‹œì§€</a></li><li><a href="#subject02">í•´ê²°ì€ ì€ê·¼ ì‰½ë„¤ìš”?</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="error-ë©”ì‹œì§€"><a href="#error-ë©”ì‹œì§€" class="headerlink" title=" error ë©”ì‹œì§€"></a><a name="subject01"></a> error ë©”ì‹œì§€</h1><p><strong>pip install -r requirements.txt</strong> ë¡œ ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì‹œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ ë§ì´í•˜ì˜€ë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Could not find a version that satisfies the requirement torch==1.5.0+cu101 (from -r requirements.txt (line 59)) (from versions: 0.1.2, 0.1.2.post1, 0.1.2.post2, 0.3.1, 0.4.0, 0.4.1, 1.0.0, 1.0.1, 1.0.1.post2, 1.1.0, 1.2.0, 1.3.0, 1.3.1, 1.4.0, 1.5.0, 1.5.1, 1.6.0)</span><br><span class="line">ERROR: No matching distribution found <span class="keyword">for</span> torch==1.5.0+cu101 (from -r requirements.txt (line 59))</span><br></pre></td></tr></table></figure><h1 id="í•´ê²°ì€-ì€ê·¼-ì‰½ë„¤ìš”"><a href="#í•´ê²°ì€-ì€ê·¼-ì‰½ë„¤ìš”" class="headerlink" title=" í•´ê²°ì€ ì€ê·¼ ì‰½ë„¤ìš”?"></a><a name="subject02"></a> í•´ê²°ì€ ì€ê·¼ ì‰½ë„¤ìš”?</h1><p>ë³„ ê±° ì—†ì—ˆë‹¤. pip install ì‹œ -f ì˜µì…˜ì„ ì´ìš©í•´ stable version ì„ ì°¾ì•„ê°€ ì§ì ‘ ë‹¤ìš´ë¡œë“œ í•  ìˆ˜ ìˆë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install torch==1.5.0+cu101 torchvision==0.6.0+cu101 -f https://download.pytorch.org/whl/torch_stable.html</span><br></pre></td></tr></table></figure><ul><li><strong>f ì˜µì…˜:</strong> html íŒŒì¼ì˜ URL ë˜ëŠ” ê²½ë¡œë¥¼ ì´ìš©í•´ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜</li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://huvso.github.io/2020/07/02/python-pip-option.html">https://huvso.github.io/2020/07/02/python-pip-option.html</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/troubleshoot-torch_error/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Kubernetes ì•„í‚¤í…ì²˜ì— ëŒ€í•´</title>
      <link>https://jx2lee.github.io/cloud-kubernetes_chapter_02/</link>
      <guid>https://jx2lee.github.io/cloud-kubernetes_chapter_02/</guid>
      <pubDate>Sun, 27 Sep 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì‹ ì… ì§ì› êµìœ¡ìë£Œë¥¼ ìœ„í•´ ì‘ì„±í•œ Kubernetes ì†Œê°œ ìë£Œì´ë‹¤. ë§ì€ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•˜ì˜€ê³ , ì´ë²ˆ ì¥ì—ëŠ” Kubernetes ì•„í‚¤í…ì³ë¥¼ ê°„ëµíˆ ì†Œê°œí•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ì‹ ì… ì§ì› êµìœ¡ìë£Œë¥¼ ìœ„í•´ ì‘ì„±í•œ Kubernetes ì†Œê°œ ìë£Œì´ë‹¤. ë§ì€ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•˜ì˜€ê³ , ì´ë²ˆ ì¥ì—ëŠ” Kubernetes ì•„í‚¤í…ì³ë¥¼ ê°„ëµíˆ ì†Œê°œí•œë‹¤.</p><a id="more"></a><p><strong>Contents:</strong>  </p><ol><li><a href="#subject01">Architecture</a></li><li><a href="#subject02">Control Plane (Master)</a><ul><li><a href="#subject03">íŠ¹ì§• ë° ê¸°ëŠ¥</a></li><li><a href="#subject04">Component in Control Plane Node</a></li></ul></li><li><a href="#subject05">Worker Node</a><ul><li><a href="#subject06">íŠ¹ì§• ë° ê¸°ëŠ¥</a></li><li><a href="#subject07">Component in Worker Node</a></li></ul></li><li><a href="#subject08">Object</a><ul><li><a href="#subject09">Basic Object</a></li><li><a href="#subject10">Controller</a></li></ul></li><li><a href="#reference">Reference</a></li></ol><h1 id="Architecture"><a href="#Architecture" class="headerlink" title=" Architecture"></a><a name="subject01"></a> Architecture</h1><p><img src="https://v1-17.docs.kubernetes.io/images/docs/components-of-kubernetes.png" alt="kubernetes Architecture ver1.17"></p><center><U>[ê·¸ë¦¼] kubernetes architecture ver1.17</U></center><p>í´ëŸ¬ìŠ¤í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” <strong>Controlplane</strong> ì™€ ì»¨í…Œì´ë„ˆê°€ ë°°í¬ë˜ëŠ” ë¨¸ì‹  <em>(ê°€ìƒë¨¸ì‹ ì´ê±°ë‚˜ ì‹¤ì œ ì„œë²„)</em> ì¸ <strong>Worker Node</strong>ë¡œ êµ¬ì„±í•œë‹¤. Control Plane <em>(í•œê¸€ ë²ˆì—­ ì‹œ Master ë¼ê³  ë‚˜ì™€ìˆëŠ”ë° Control Plane == Master ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.)</em> ê³¼ Worker Node ë¥¼ í™•ì¸í•˜ê³  Kubernetes ë‚´ì—ì„œì˜ Object ë¥¼ ì‚´í´ë³¸ë‹¤.</p><h2 id="Control-Plane-Master"><a href="#Control-Plane-Master" class="headerlink" title=" Control Plane (Master)"></a><a name="subject02"></a> Control Plane <em>(Master)</em></h2><h3 id="íŠ¹ì§•-ë°-ê¸°ëŠ¥"><a href="#íŠ¹ì§•-ë°-ê¸°ëŠ¥" class="headerlink" title=" íŠ¹ì§• ë° ê¸°ëŠ¥"></a><a name="subject03"></a> íŠ¹ì§• ë° ê¸°ëŠ¥</h3><ul><li>ê´€ë¦¬ìë§Œ ì ‘ì†í•˜ì—¬ ë³´ì•ˆ ì„¤ì •ì´ í•„ìš”í•˜ë‹¤.</li><li>Conrol Plane Node ë‹¤ìš´ì´ ë°œìƒí•˜ë©´ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ì— ì¥ì• ê°€ ìƒê¸°ë¯€ë¡œ ë³´í†µ 3ëŒ€ë¡œ êµ¬ì„±í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•œë‹¤.<ul><li>í™€ìˆ˜ëŒ€ë¡œ êµ¬ì„±í•˜ëŠ” ì´ìœ ëŠ” ì»¨í…Œì´ë„ˆ ë°°í¬ì— ëŒ€í•œ voting ë¥¼ ìˆ˜ì›”í•˜ê²Œ í•˜ê¸° ìœ„í•¨ì´ë¼ê³  í•œë‹¤.</li></ul></li><li>ì†Œê·œëª¨ í™˜ê²½ì—ì„œëŠ” Control Plane ê³¼ Worker Node ë¥¼ ë¶„ë¦¬í•˜ì§€ ì•Šê³  ê°™ì€ ì„œë²„ì— êµ¬ì„±í•œë‹¤. ì¦‰, Control Plane ì´ë©´ì„œ ë™ì‹œì— ì»¨í…Œì´ë„ˆë¥¼ ë„ìš´ë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤.</li></ul><h3 id="Component-in-Control-Plane-Node"><a href="#Component-in-Control-Plane-Node" class="headerlink" title=" Component in Control Plane Node"></a><a name="subject04"></a> Component in Control Plane Node</h3><p><U>API server</U>:  </p><ul><li>ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ê°„ í†µì‹ ì˜ ë©”ì¹´ì´ë‹¤.</li><li>kubectl ìš”ì²­ ë° ë‚´ë¶€ ëª¨ë“ˆì˜ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. kubectl ëª…ë ¹ì–´ëŠ” Control Plane ì—ì„œë§Œ ê°€ëŠ¥í•˜ë‹¤. <em>(ë¬¼ë¡  ì„¤ì¹˜ëŠ” ëª¨ë“  ë…¸ë“œì—ì„œ ìˆ˜í–‰í•œë‹¤.)</em></li><li>ê¶Œí•œ ì²´í¬ë¥¼ í†µí•´ ìš”ì²­ì„ í—ˆìš©í•˜ê±°ë‚˜ ê±°ë¶€í•œë‹¤.</li><li>Etcd ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•œë‹¤.</li><li>RESTful API ì œê³µí•œë‹¤.</li></ul><p><U>Etcd</U>:  </p><ul><li>ë¶„ì‚°í˜• key/value ì˜¤í”ˆì†ŒìŠ¤ Storage.</li><li>Kubernetes clusterì˜ DB ì—­í• ì„ í•˜ëŠ” ì„œë²„ë¡œ ì„¤ì •ê°’ì´ë‚˜ cluster ìƒíƒœë¥¼ ì €ì¥í•œë‹¤.</li><li>Etcd ë°±ì—…ì„ í†µí•´ í´ëŸ¬ìŠ¤í„° ìƒíƒœ ë³µêµ¬ê°€ ê°€ëŠ¥í•˜ë‹¤. <em>(ex. ì˜¤ëŠ˜ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì´ ì‚¬ë§í–ˆë‹¤. ì´ë¥¼ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë°±ì—…í•œ Etcd ìŠ¤ëƒ…ìƒ·ì„ ê¸°ë°˜ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ì— ì¡°ì¸í•  ìˆ˜ ìˆë‹¤.)</em></li></ul><p><U>kube-scheduler</U>:  </p><ul><li>í• ë‹¹ì´ í•„ìš”í•œ Podë¥¼ ì—¬ëŸ¬ ì¡°ê±´(source, label)ì— ë”°ë¼ ì ì ˆí•œ ë…¸ë“œì— í• ë‹¹í•˜ëŠ” ì—­í• ì„ í•œë‹¤. </li></ul><p><U>kube-controller-manager</U>:  </p><ul><li><del>Kubernetes ì˜ Object (Pod, ReplicaSet, Deployment ë“±) ìƒíƒœë“¤ì„ ê´€ë¦¬í•œë‹¤.</del></li><li>Kubernetes ì˜ Controller ì‹¤í–‰ì„ ë‹´ë‹¹í•œë‹¤.</li></ul><p><U>cloud-controller-manager</U>:  </p><ul><li>ì˜¤í”ˆ í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ì™€ ì—°ê²°í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” controller manger ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.</li><li>AWS, GCE, Azure ë“±ì˜ í´ë¼ìš°ë“œ íŠ¹í™”ë˜ì–´ ìˆë‹¤ê³  í•œë‹¤!</li></ul><blockquote><p>ì´ë²ˆ ìë£Œë¥¼ ì¤€ë¹„í•˜ë©´ì„œ ì•ˆ ì‚¬ì‹¤ì€ api-server, etcd, kube-scheduler, kube-controller-manager ìš”ë†ˆì´ container ë‹¨ìœ„ë¡œ ì‹¤í–‰í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ì¤„ ì•Œì•˜ëŠ”ë° ë§‰ìƒ ë³´ë‹ˆ ì•„ë‹ˆì—ˆë‹¤. <code>ps -ef |grep &#123;each_component&#125;</code> ë¥¼ ìˆ˜í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-node1:~<span class="comment"># ps -ef|grep -E &quot;kube-apiserver|etcd|kube-controller-manager|kube-scheduler&quot;</span></span><br><span class="line">root      3368  3311  1 Aug31 ?        10:17:51 kube-apiserver --advertise-address=192.&gt; 168.179.185 --allow-privileged=<span class="literal">true</span> --authorization-mode=Node,RBAC ...</span><br><span class="line">root      3584  3554  1 Aug31 ?        05:58:22 etcd --advertise-client-urls=https://192.&gt; 168.179.173:2379 --cert-file=/etc/kubernetes/pki/etcd/server.crt ...</span><br><span class="line">root      3677  3636  0 Aug31 ?        00:20:07 kube-controller-manager &gt; --allocate-node-cidrs=<span class="literal">true</span> --authentication-kubeconfig=/etc/kubernetes/&gt; controller-manager.conf ... </span><br><span class="line">root      3678  3626  0 Aug31 ?        00:38:15 kube-scheduler --bind-address=127.0.0.1 &gt; --kubeconfig=/etc/kubernetes/scheduler.conf --leader-elect=<span class="literal">true</span></span><br></pre></td></tr></table></figure></blockquote><h2 id="Worker-Node"><a href="#Worker-Node" class="headerlink" title=" Worker Node"></a><a name="subject05"></a> Worker Node</h2><h3 id="íŠ¹ì§•-ë°-ê¸°ëŠ¥-1"><a href="#íŠ¹ì§•-ë°-ê¸°ëŠ¥-1" class="headerlink" title=" íŠ¹ì§• ë° ê¸°ëŠ¥"></a><a name="subject06"></a> íŠ¹ì§• ë° ê¸°ëŠ¥</h3><ul><li>Podë¥¼ ìƒì„±í•˜ê³  ë„¤íŠ¸ì›Œí¬ì™€ ë³¼ë¥¨ì„ ì„¤ì •í•©ë‹ˆë‹¤. kubelet ì´ë¼ëŠ” kubernetes Agent ë¥¼ í†µí•´ â€œì–´ë–¤ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” Pod ë¥¼ ë„ì›Œ!â€ ë¼ëŠ” ì„ë¬´ë¥¼ ë°›ëŠ”ë‹¤.</li><li>ì‹¤ì œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ëŠ” ì„œë²„ì´ë‹¤. ë…¸ì˜ˆë¼ê³  ìƒê°í•˜ë©´ í¸í•˜ë‹¤.</li><li>ê° ì„œë²„ì— ë¼ë²¨ì„ ë¶™ì—¬ ì‚¬ìš©ëª©ì ì— ë”°ë¼ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ì–´, GPU ë…¸ë“œë¡œë§Œ ì‚¬ìš©í•˜ì—¬ ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ë§Œ ë°°í¬í•˜ê³ ì í•˜ë©´ yaml ì‘ì„± ì‹œ ê´€ë ¨ label ì„ ì„¤ì •í•œë‹¤. </li></ul><h3 id="Component-in-Worker-Node"><a href="#Component-in-Worker-Node" class="headerlink" title=" Component in Worker Node"></a><a name="subject07"></a> Component in Worker Node</h3><p><U>kubelet</U>:  </p><ul><li>í´ëŸ¬ìŠ¤í„° ë‚´ ëª¨ë“  ë…¸ë“œë¡œ ë°°í¬ë˜ëŠ” Agent ì´ë‹¤. Control Plane ì—ë„ ë°°í¬í•˜ì§€ë§Œ Control Plane ì— ì‘ì„±í•˜ë©´ ë„ˆë¬´ ì—†ì–´ë³´ì¼ê¹Œ Worker Node ì— ì‘ì„±í•˜ì˜€ë‹¤.</li><li>ë…¸ë“œì— í• ë‹¹í•œ Pod ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ë‹¤.</li><li>Pod ì•ˆ ì»¨í…Œì´ë„ˆ ìƒíƒœë¥¼ ì²´í¬í•˜ê³  ì£¼ê¸°ì ìœ¼ë¡œ Masterì— ì „ë‹¬í•œë‹¤.</li><li>Control Plane ì˜ APIì„œë²„ì™€ í†µì‹ ì„ í•˜ê³  ì„ë¬´ë¥¼ ë°›ê²Œë˜ë©´ ë…¸ë“œê°€ ìˆ˜í–‰í•´ì•¼ í•  ì„ë¬´ë¥¼ ìˆ˜í–‰í•œë‹¤.</li></ul><p><U>kube-proxy</U>:  </p><ul><li>Kubernetes ë‚´ë¶€ ë³„ë„ì˜ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¥¼ ì„¤ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ”ë°, ì´ëŸ¬í•œ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ê°€ ë™ì‘í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì—­í• ì„ í•œë‹¤.</li><li>í˜¸ìŠ¤íŠ¸ì˜ <em>(ê° ë…¸ë“œì˜)</em> ë„¤íŠ¸ì›Œí¬ ê·œì¹™ì„ ê´€ë¦¬í•˜ê³  connection forwarding ì„ ìˆ˜í–‰í•œë‹¤.</li><li><a href="https://arisu1000.tistory.com/27839">ì°¸ê³ ìë£Œ</a></li></ul><h2 id="Object"><a href="#Object" class="headerlink" title=" Object"></a><a name="subject08"></a> Object</h2><p>KubernetsëŠ” ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ëŒ€ìƒì„ Objectë¼ ì¹­í•˜ë©° í¬ê²Œ Basic Object(ê¸°ë³¸ ì˜¤ë¸Œì íŠ¸)ì™€ Controller(ì»¨íŠ¸ë¡¤ëŸ¬)ë¡œ êµ¬ë¶„í•œë‹¤. </p><h3 id="Basic-Object"><a href="#Basic-Object" class="headerlink" title=" Basic Object"></a><a name="subject09"></a> Basic Object</h3><p>Basic Object ëŠ” Namespace, Pod, Service, Volume 4ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.</p><p><U>Namespace</U>:  </p><ul><li>Kubernetes cluster ë‚´ ë…¼ë¦¬ì ì¸ êµ¬ë¶„ ë‹¨ìœ„ì´ë‹¤. Pod, Service ë“±ì„ namespace ë³„ë¡œ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìœ¼ë©°, user ê¶Œí•œ ì—­ì‹œ namespace ë³„ ë¶€ì—¬<del>(ê³ êµ¬ë ¤)</del>í•  ìˆ˜ ìˆë‹¤.</li><li>ì˜ˆë¥¼ ë“¤ì–´ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì„¸ ê°œì˜ namepsace ë¥¼ ìƒì„±í•˜ì—¬ ê°ê° í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤. ëŒ€ì‹ , ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬í–ˆê¸° ë•Œë¬¸ì— ë‘ namepsace ê°„ íŒŒë“œì˜ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ ë†’ì€ ìˆ˜ì¤€ì˜ ë¶„ë¦¬ë¥¼ ì›í•˜ë©´ í´ëŸ¬ìŠ¤í„° ìì²´ë¥¼ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.</li><li>namespace ë‚´ object ëª…ì€ ìœ ì¼í•´ì•¼í•˜ì§€ë§Œ ì „ì²´ namespace ë‚´ object ëª…ì€ ìœ ì¼í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, A namespace ë‚´ Pod ì´ë¦„ì„ test ë¡œ ë°°í¬í•˜ë©´ B namespace ë‚´ Pod ì´ë¦„ì„ test ë¡œ ë°°í¬í•  ìˆ˜ ìˆë‹¤.</li><li>ì˜ˆì‹œ: kubernetes cluster ë‚´ namespace ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•œë‹¤.</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># kubectl get namespace</span></span><br><span class="line"></span><br><span class="line">NAME               STATUS   AGE</span><br><span class="line">anonymous          Active   23d</span><br><span class="line">default            Active   191d</span><br><span class="line">hyperdata          Active   170d</span><br><span class="line">istio-system       Active   23d</span><br><span class="line">kfserving-system   Active   23d</span><br><span class="line">knative-serving    Active   23d</span><br><span class="line">kube-node-lease    Active   191d</span><br><span class="line">kube-public        Active   191d</span><br><span class="line">kube-system        Active   191d</span><br><span class="line">kubeflow           Active   23d</span><br><span class="line">metallb-system     Active   171d</span><br><span class="line">nps                Active   191d</span><br><span class="line">rook-ceph          Active   24d</span><br><span class="line">tibero             Active   7d23h</span><br></pre></td></tr></table></figure><p><U>Pod</U>:  </p><ul><li>Kubernetesì˜ ìµœì†Œ ì‹¤í–‰ ë‹¨ìœ„ì´ë‹¤.</li><li>KubernetesëŠ” ì»¨í…Œì´ë„ˆë¥¼ ê°œë³„ì ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Pod ë‹¨ìœ„ë¡œ ë°°í¬í•œë‹¤. ì¦‰, ì—¬ëŸ¬ ê°œ ì»¨í…Œì´ë„ˆê°€ í•˜ë‚˜ì˜ Pod ë¡œ ë°°í¬í•  ìˆ˜ë„ ìˆê³  í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ì˜ Pod ë¡œ ë°°í¬í•  ìˆ˜ ìˆë‹¤. <em>(í›„ìì˜ ê²½ìš° Pod concept ê³¼ ë§ì§€ ì•Šì•„ ì§€ì–‘í•´ì•¼ í•  ë¶€ë¶„ì´ë‹¤)</em></li><li>Pod ë‚´ ë„¤íŠ¸ì›Œí¬ í™˜ê²½(IP, Port)ê³¼ ë””ìŠ¤í¬(Volume) ê³µìœ í•œë‹¤.<blockquote><p>A Container(Port 8080)ì™€ B Container(Port 7001)ê°€ í•˜ë‚˜ì˜ Podë¡œ ë°°í¬ë˜ì—ˆì„ë•Œ, localhost:{ê° í¬íŠ¸}ë¥¼ í†µí•´ ë‘ ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</p></blockquote></li><li>ë””ìŠ¤í¬ë¥¼ ê³µìœ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë‘ ì„±ê²©ì˜ ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•  ë•Œ íƒ€ ì»¨í…Œì´ë„ˆì˜ íŒŒì¼ì„ ì½ì„ ìˆ˜ ìˆë‹¤.</li><li>YAML / JSON í˜•ì‹ìœ¼ë¡œ ì„ ì–¸(config)í•˜ëŠ”ë°, ì£¼ë¡œ ì„ ì–¸í•  ë•ŒëŠ” YAML ì„ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.</li></ul><p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fp1EBb%2FbtqFzG1OW7a%2FjeUxSY32E5zpaBEE3mEB1k%2Fimg.png" alt="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fp1EBb%2FbtqFzG1OW7a%2FjeUxSY32E5zpaBEE3mEB1k%2Fimg.png"></p><p><U>Service</U>:  </p><ul><li>Pod ëŠ” Controller ì— ì˜í•´ ê´€ë¦¬ë˜ëŠ”ë°, ë§Œì•½ ë…¸ë“œ ë‚´ ì¥ì• ê°€ ë°œìƒí•˜ì—¬ ë‹¤ë¥¸ ë…¸ë“œì— Pod ë¥¼ ì¬ ë°°í¬í•˜ê²Œë˜ë©´ Pod ì˜ IPê°€ ë³€ê²½ëœë‹¤. ì´ë ‡ê²Œ Pod IPê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ ì IPë¥¼ íŠ¹ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Serviceë‹¤.</li><li>label ê³¼ label selector ë¥¼ ì´ìš©í•˜ì—¬ ê°™ì€ ì„œë¹„ìŠ¤ë¡œ ë¬¶ì„ íŒŒë“œë¥¼ ì •ì˜í•  ìˆ˜ ìˆê³ , ê°™ì€ ì„œë¹„ìŠ¤ë¡œ ë¬¶ì´ë©´ ê³ ì • ì£¼ì†Œë¥¼ ì´ìš©í•´ ë¬¶ì¸ íŒŒë“œê°„ í†µì‹ ì„ ì›í™œíˆ í•  ìˆ˜ ìˆë‹¤.</li><li>Service Type<ul><li>ClusterIP: kubernetes cluster ë‚´ì—ì„œë§Œ ì‚¬ìš©ê°€ëŠ¥í•œ IPë¡œ ì™¸ë¶€ì—ì„œëŠ” ì ‘ê·¼ì´ ë¶ˆê°€í•˜ë‹¤.</li><li>NodePort: cluster ë‚´ ëª¨ë“  ë…¸ë“œì˜ ì§€ì •ëœ í¬íŠ¸ë¥¼ í• ë‹¹í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, A ë…¸ë“œì— ë– ìˆëŠ” a íŒŒë“œë¡œ ì ‘ê·¼í•˜ê³  ì‹¶ì„ ë•Œ a íŒŒë“œë¥¼ NodePort ì„œë¹„ìŠ¤ë¡œ ë¬¶ì–´ì£¼ë©´ B ë…¸ë“œ IP:Port ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.</li><li>LoadBalancer: NodePort ì˜ í™•ì¥ìœ¼ë¡œ ì„œë¹„ìŠ¤ IP, ë“± ì™¸ë¶€ë¡œ ë…¸ì¶œí•˜ê³ ì í•˜ëŠ” íŠ¹ì • IP ë¥¼ ì´ìš©í•˜ì—¬ ì™¸ë¶€ì—ì„œ íŠ¹ì • IPë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” Service Type ì´ë‹¤.</li><li>ExternalName: ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ Kubernetes ë‚´ë¶€ì— í˜¸ì¶œí•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•˜ëŠ” Service Type ì´ë‹¤. <em>(ì‚¬ìš©ì„ ì•ˆí•´ë´¤ë‹¤..)</em></li></ul></li></ul><p><U>Volume</U>  </p><ul><li>Container ì¬ì‹œì‘ì— ìƒê´€ì—†ì´ íŒŒì¼ì„ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•´ì•¼í•˜ëŠ” ìŠ¤í† ë¦¬ì§€ì´ë‹¤. Pod ë‚´ Container ë“¤ì€ í•´ë‹¹ ë””ìŠ¤í¬ë¥¼ ê³µìœ í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li><li>ì¢…ë¥˜:<ul><li>emptyDir: Pod ì™€ í•¨ê»˜ ìƒì„±í•˜ê³  ì‚¬ë¼ì§€ëŠ” ì„ì‹œ ë³¼ë¥¨ì´ë‹¤.</li><li>hostPath: í•´ë‹¹ ë…¸ë“œì˜ ë””ìŠ¤í¬ ê²½ë¡œë¥¼ Pod ì— ë§ˆìš´íŠ¸í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. í•´ë‹¹ ë…¸ë“œ ë””ìŠ¤í¬ ê²½ë¡œê°€ ì¡´ì¬í•˜ì§€ëŠ” ê¼­ í™•ì¸ì´ í•„ìš”í•˜ë‹¤.</li></ul></li><li>Kubernetes ì—ì„œëŠ” emptyDir, hostPath ì´ì™¸ì— PV(PersistentVolumne) ì™€ PVC(PersistentVolumnClaim) ë¼ëŠ” ì¶”ìƒí™”í•œ ê°œë…ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. Pod ì™€ ë³„ë„ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê°€ì§€ê³  ìˆì–´ í•´ë‹¹ ë³¼ë¥¨ì„ ë¬¼ê³  ìˆëŠ” Pod ê°€ ì£½ë”ë¼ë„ PV ë˜ëŠ” PVC ë¥¼ ì§€ìš°ì§€ ì•ŠëŠ” í•œ ë°ì´í„°ëŠ” ì†Œë©¸í•˜ì§€ ì•ŠëŠ”ë‹¤. ì‰½ê²Œ ë§í•´ ë…¸íŠ¸ë¶ ë””ìŠ¤í¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì™¸ì¥ í•˜ë“œë¥¼ ì´ìš©í•œë‹¤ê³  ìƒê°í•˜ì. <ul><li>PV: í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ ìì›ìœ¼ë¡œ ë‹¤ë¤„ì§€ëŠ” ë³¼ë¥¨ ìì²´ë¥¼ ì˜ë¯¸í•œë‹¤. í•˜ë‚˜ì˜ ì €ì¥ì†Œë¡œ ìƒê°í•˜ì.</li><li>PVC: ì‚¬ìš©ìê°€ PVì— ìš”ì²­í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì–¼ë§Œí¼, ì½ê³ ì“°ê¸°ê°€ ê°€ëŠ¥í•œ ì§€ spec ì„ ì •ì˜í•˜ì—¬ ë°°í¬í•˜ë©´ ê·¸ì— ë§ëŠ” PVê°€ ìƒì„±ëœë‹¤.</li></ul></li></ul><p><img src="https://t1.daumcdn.net/cfile/tistory/9997504A5B1D3F0F05" alt="https://t1.daumcdn.net/cfile/tistory/9997504A5B1D3F0F05"></p><h3 id="Controller"><a href="#Controller" class="headerlink" title=" Controller"></a><a name="subject10"></a> Controller</h3><ul><li>Controller ëŠ” ë‹¤ì¤‘ Pod ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í• ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ì—ì„œ replication handling, rollout ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í´ëŸ¬ìŠ¤í„° ë‚´ í•œ Node ê°€ ë‹¤ìš´ë˜ì—ˆì„ ê²½ìš° Controller ëŠ” ë‹¤ë¥¸ ë…¸ë“œì— í•´ë‹¹ íŒŒë“œë¥¼ ë°°í¬(ìŠ¤ì¼€ì¥´ë§) í•¨ìœ¼ë¡œì¨ ê´€ë¦¬í•œë‹¤. êµ‰ì¥íˆ ë§ì€ Controller ê°€ ìˆëŠ”ë° ê·¸ ì¤‘ì—ì„œ ReplicaSet, Deployment, DaemonSet ì„ ì‚´í´ë³¸ë‹¤.</li></ul><p><U>ReplicaSet</U>  </p><ul><li>Pod ë¥¼ ë³µì œí•˜ì—¬ ìƒì„±í•˜ê³  ì´ë¥¼ ì§€ì†ì ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” Controller ì´ë‹¤. ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” Pod ì˜ ê°€ìš©ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì›í•˜ëŠ” ê°¯ìˆ˜ë§Œí¼ ì„¤ì •í•˜ì—¬ ë°°í¬í•˜ë©´, ê·¸ ê°¯ìˆ˜ë§Œí¼ Pod ê°€ ì‹¤í–‰ë˜ê²Œë” ê´€ë¦¬í•˜ëŠ” Controller ì´ë‹¤.</li><li>ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ë³´ë‹¨ Deployment ë“± ë‹¤ë¥¸ ì˜¤ë¸Œì íŠ¸ì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.</li><li>ì˜ˆì‹œ: nginx ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì»¨í…Œì´ë„ˆ <em>(ì´ ì˜ˆì‹œëŠ” 1 container == 1 pod)</em> ë¥¼ spec.replicas value ë§Œí¼ ìœ ì§€í•˜ì„¸ìš”.</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ReplicaSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">test-replicaset</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">test-replicaset</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">test-replicaset</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">test-replicaset</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">test-replicaset</span></span><br></pre></td></tr></table></figure><p><U>Deployment</U>  </p><ul><li>Kubernetes ì—ì„œ ìƒíƒœê°€ ì—†ëŠ”(stateless) ì•±ì„ ë°°í¬í•  ë•Œ ê°€ì¥ ê¸°ë³¸ì ì¸ ì»¨íŠ¸ë¡¤ëŸ¬, ì´ì „ ë²„ì ¼ì—ì„œëŠ” ReplicaSet ì´ ë‹´ë‹¹í–ˆì§€ë§Œ ì´ì œëŠ” Deployment ê°€ ë‹´ë‹¹í•œë‹¤.</li><li>Pod ê°œìˆ˜ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒ ë¿ ì•„ë‹ˆë¼ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ ìœ„í•œ ë°©ì‹ <em>(blue/green deployment, canary deployment, rolling deployment)</em> ì„ ì œê³µí•œë‹¤. ReplicaSet ê³¼ ë¹„êµí•˜ë©´ Pod ê°œìˆ˜ ìœ ì§€ëŠ” ê°™ì§€ë§Œ ì¶”ê°€ì ìœ¼ë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬ ë°©ì‹ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.</li><li>deployment ë°°í¬ ì‹œ ì—…ë°ì´íŠ¸ ë°©ì‹ì„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. <em>(ì¡°ëŒ€í˜‘ë‹˜ ë¸”ë¡œê·¸ì— ë”°ë¥´ë©´ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°°í¬ ë°©ì‹ì´ë©°, ë”°ë¡œ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ rolling ë°°í¬ë¥¼ ìˆ˜í–‰í•œë‹¤. <a href="https://bcho.tistory.com/1266">ì°¸ê³ </a>)</em></li></ul><blockquote><p>ë¬´ì¤‘ë‹¨ ë°°í¬ë°©ì‹: <a href="https://perfectacle.github.io/2019/04/21/non-stop-deployment/">ì°¸ê³ ìë£Œ</a></p></blockquote><p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FmVW7g%2FbtqFNFa7u1E%2FRTURWaMRdcLNpDzxj3GAwk%2Fimg.png" alt="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FmVW7g%2FbtqFNFa7u1E%2FRTURWaMRdcLNpDzxj3GAwk%2Fimg.png"></p><p><U>DaemonSet</U>  </p><ul><li>í´ëŸ¬ìŠ¤í„° ì „ì²´ì— Podë¥¼ ë„ì›Œì£¼ëŠ” Controller ì´ë‹¤. Daemonset ì„ ë°°í¬í•˜ë©´ í•­ìƒ ê·¸ Pod ê°€ ì „ì²´ ë…¸ë“œì— ë°°í¬í•œë‹¤.</li><li>ìƒˆë¡­ê²Œ ë…¸ë“œê°€ ì¶”ê°€ë˜ì—ˆì„ë•Œ ìë™ìœ¼ë¡œ Pod ë¥¼ ë°°í¬í•œë‹¤.</li><li>ë°˜ëŒ€ë¡œ ë…¸ë“œê°€ í´ëŸ¬ìŠ¤í„°ì—ì„œ ë¹ ì¡Œì„ ë•Œ ê·¸ ë…¸ë“œì— ìˆë˜ í¬ë“œëŠ” ê·¸ëŒ€ë¡œ ì‚¬ë¼ì§€ê³  ë‹¤ë¥¸ ê³³ìœ¼ë¡œ ì˜®ê²¨ê°€ì„œ ë°°í¬í•˜ì§„ ì•ŠëŠ”ë‹¤.<ul><li>ì´ëŸ¬í•œ íŠ¹ì§• ë•Œë¬¸ì— ë³´í†µ ë¡œê·¸ìˆ˜ì§‘ê¸°ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ ëª¨ë‹ˆí„°ë§ìš© ë°ëª¬ë“± í´ëŸ¬ìŠ¤í„° ì „ì²´ì— í•­ìƒ ì‹¤í–‰ì‹œì¼œ ë‘ì–´ì•¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤.</li></ul></li></ul><p><img src="https://blog.kakaocdn.net/dn/VxcCs/btqEsYpkShG/bmYxdIKPS6ELBe1asDwFT0/img.png" alt="https://blog.kakaocdn.net/dn/VxcCs/btqEsYpkShG/bmYxdIKPS6ELBe1asDwFT0/img.png"></p><p><U>StatefulSet</U>  </p><ul><li>ì•ì„œ ì‚´í´ë³¸ Controller ì™€ ë‹¬ë¦¬ ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆëŠ” Pod ë“¤ì„ ê´€ë¦¬í•˜ëŠ” Controller ë¡œ, ë³¼ë¥¨ì„ ì‚¬ìš©í•´ íŠ¹ì • ë°ì´í„°ë¥¼ ê¸°ë¡í•´ë‘ê³  Pod ê°€ ì¬ì‹œì‘ í•´ë„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.</li><li>ì—¬ëŸ¬ Pod ë¥¼ ë°°í¬í•  ë•Œ ìˆœì„œë¥¼ ì§€ì •í•˜ì—¬ ìˆœì„œëŒ€ë¡œ ë°°í¬í•  ìˆ˜ ìˆë‹¤.</li><li>Pod ì´ë¦„ì„ ì—°ì†ì„± ìˆê²Œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤. <em>(name-number ì™€ ê°™ì´ í‘œí˜„)</em></li><li>ê° Pod ì— ëŒ€í•œ PVC ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆë‹¤.</li></ul><p><img src="https://i2.wp.com/www.kylezsembery.com/wp-content/uploads/2020/06/StatefulSet.png?resize=691%2C376&ssl=1" alt="https://i2.wp.com/www.kylezsembery.com/wp-content/uploads/2020/06/StatefulSet.png?resize=691%2C376&amp;ssl=1"></p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://ooeunz.tistory.com/118">https://ooeunz.tistory.com/118</a></li><li><a href="https://www.slideshare.net/lahuman1/kubernetes-object">https://www.slideshare.net/lahuman1/kubernetes-object</a></li><li><a href="https://bcho.tistory.com/1259">https://bcho.tistory.com/1259</a></li><li><a href="https://blog.2dal.com/2018/04/30/kubernetes-02-replicaset/">https://blog.2dal.com/2018/04/30/kubernetes-02-replicaset/</a></li><li><a href="https://perfectacle.github.io/2019/04/21/non-stop-deployment/">https://perfectacle.github.io/2019/04/21/non-stop-deployment/</a></li><li><a href="https://arisu1000.tistory.com/27834">https://arisu1000.tistory.com/27834</a></li><li><a href="https://www.joinc.co.kr/w/man/12/kubernetes/overview">https://www.joinc.co.kr/w/man/12/kubernetes/overview</a></li></ul>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-kubernetes_chapter_02/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Kubernetes ì†Œê°œ</title>
      <link>https://jx2lee.github.io/cloud-kubernetes_chapter_01/</link>
      <guid>https://jx2lee.github.io/cloud-kubernetes_chapter_01/</guid>
      <pubDate>Wed, 23 Sep 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; ì‹ ì… ì§ì› êµìœ¡ìë£Œë¥¼ ìœ„í•´ ì‘ì„±í•œ Kubernetes ì†Œê°œ ìë£Œë¡œ ì´ë²ˆ ì¥ì—ëŠ” ë°°ê²½ì„ ì‹œì‘ìœ¼ë¡œ íŠ¹ì§•ê¹Œì§€ ì‚´í´ë³¸ë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> ì‹ ì… ì§ì› êµìœ¡ìë£Œë¥¼ ìœ„í•´ ì‘ì„±í•œ Kubernetes ì†Œê°œ ìë£Œë¡œ ì´ë²ˆ ì¥ì—ëŠ” ë°°ê²½ì„ ì‹œì‘ìœ¼ë¡œ íŠ¹ì§•ê¹Œì§€ ì‚´í´ë³¸ë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#subject01">ë°°ê²½</a></li><li><a href="#subject02">ê·¸ëŸ¼ ì™œ Kubernetes ê°€ ë–´ì„ê¹Œ?</a></li><li><a href="#subject03">Kubernetes ?</a></li><li><a href="#subject04">Kubernetes íŠ¹ì§•</a></li><li><a href="#reference">Reference</a></li></ol><h1 id="ë°°ê²½"><a href="#ë°°ê²½" class="headerlink" title=" ë°°ê²½"></a><a name="subject01"></a> ë°°ê²½</h1><p><img src="https://d33wubrfki0l68.cloudfront.net/26a177ede4d7b032362289c6fccd448fc4a91174/eb693/images/docs/container_evolution.svg" alt="kubernetes.io"></p><center><U>[ê·¸ë¦¼] ë°°í¬ í™˜ê²½ì˜ ë³€í™”</U></center><p>ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ í™˜ê²½ì€ ì„œë¹„ìŠ¤ ë°°í¬ì— ì¥ì ì´ ìˆê³  ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ì•„í‚¤í…ì³(MSA)ì— ë¶€í•©í•œ ë“¯ ì‹¶ì§€ë§Œ, ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œë„ ì¶©ë¶„íˆ íŒ¨í‚¤ì§•ì´ ê°€ëŠ¥í•˜ê³  ë¡œì»¬ì˜ ê°œë°œí™˜ê²½ì„ ë™ê¸°í™” ì‹œí‚¤ëŠ” ì¼ì€ vagrant ë¡œë„ ì¶©ë¶„í•˜ì˜€ë‹¤.</p><blockquote><ul><li>MSA: ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ê¸°ë²• ì¤‘ í•˜ë‚˜ë¡œ ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ íŠ¹ì • ëª©ì ì„ ê°€ì§„ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë‹¨ìœ„ë¡œ ë‚˜ëˆˆ ê²ƒ, ë‹¨ìœ„ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°„ ì•½í•œ ê²°í•©ë„ì™€ ê°•í•œ ì‘ì§‘ë„ë¥¼ ëª©í‘œë¡œ í•œë‹¤.</li><li>vargrant: ê°„ì†Œí™”í•œ VM ê´€ë¦¬ ì„œë¹„ìŠ¤ë¡œ ê°€ìƒ ë¨¸ì‹ ê³¼ ë¡œì»¬ê°„ì˜ ë™ê¸°í™” ì„œë¹„ìŠ¤ë„ ì œê³µí•œë‹¤.</li></ul></blockquote><p>ê·¸ë¦¬ê³  ê²°ì •ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ìš´ìš©í•˜ê¸° ìœ„í•œ ê´€ë¦¬ í™˜ê²½ì´ ì„±ìˆ™í•˜ì§€ ì•Šì•˜ë‹¤. Mesos DC/OS, Docker Swarm, Kubernetes ë“± ë‹¤ì–‘í•œ í™˜ê²½ì´ ë‚˜ì˜¤ê¸°ëŠ” í•˜ì˜€ì§€ë§Œ ê¸°ëŠ¥ì ìœ¼ë¡œ ë¶€ì¡±í•˜ë©° ì–´ë–¤ í”Œë«í¼ì´ ëŒ€ì„¸ë¼ê³  ì •í•´ì§€ì§€ ì•Šì•˜ë‹¤.</p><blockquote><ul><li>Mesos DC/OS: Apache Mesos ë¶„ì‚° ì‹œìŠ¤í…œ ì»¤ë„ì„ ê¸°ë°˜ìœ¼ë¡œí•˜ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤, <a href="http://www.kb-sys.co.kr/file/KBSYS_DCOS.pdf">ì°¸ê³ ìë£Œ</a></li><li>Docker Swarm: ë„ì»¤ê°€ ê³µì‹ì ìœ¼ë¡œ ê°œë°œí•œ Container Orchestration </li></ul></blockquote><p>ê·¸ëŸ¼ì—ë„ ì»¨í…Œì´ë„ˆ í™˜ê²½ìœ¼ë¡œ ë°”ë€ ì´ìœ ê°€ ë¬´ì—‡ì¼ê¹Œ? ë‘ ê¼­ì§€ë¡œ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><p><strong>MSAì˜ ë°œì „:</strong><br>MSA(Micro Service Architecture)ê°€ ë‹¨ìˆœ ê°œë…ì—ì„œ ë°œì „í•˜ê¸° ì‹œì‘í•˜ë©° ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ ë‹¤ì–‘í•œ ì¸í”„ë¼ í”Œë«í¼ë“¤ì´ ë“±ì¥í•˜ê¸° ì‹œì‘í–ˆë‹¤.</p><p><img src="https://miro.medium.com/max/1050/0*kbXK4udgYykDHfgh.png" alt="Micro Service Architecture ì˜ˆì‹œ"></p><center><U>[ê·¸ë¦¼] Micro Service Architecture ì˜ˆì‹œ- ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ íŠ¹ì • ë‹¨ìœ„ ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë¶„ë¦¬í•œ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</U></center><p>ë˜í•œ, ì„œë¹„ìŠ¤ í¬ê¸°ê°€ ì‘ì•„ì§€ë©° CPU 1~2 Core ë¡œë„ ìš´ì˜í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ë“¤ì´ ë“±ì¥í•˜ë©´ì„œ ì´ë¥¼ VM í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ í•˜ê¸°ì—” ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ê°€ ì‹¬í•´ì¡Œë‹¤.</p><blockquote><ul><li>VM í™˜ê²½ì„ ìœ„í•´ì„œ í•„ìš”í•œ ì´ë¯¸ì§€ í¬ê¸°ê°€ í¬ê³ , ë‹¤ì–‘í•œ ì„œë¹„ìŠ¤ë¥¼ VMìœ¼ë¡œ ê´€ë¦¬ ë°°í¬í•˜ê¸°ì—ëŠ” ì†ë„ ë“±ì—ì„œ íš¨ìœ¨ì ì´ì§€ ëª»í•˜ë‹¤.</li></ul></blockquote><p><strong>ì†”ë£¨ì…˜ ë°œì „ ë° DevOps ì•ˆì°©:</strong><br>ì„œë¹„ìŠ¤ ë°°í¬ ë°©ì‹ë„ VM í˜¹ì€ ì»¨í…Œì´ë„ˆ ë‹¨ìœ„ë¡œ ë°°í¬í•˜ëŠ” í”¼ë‹‰ìŠ¤ ì„œë²„ íŒ¨í„´ì´ ë“±ì¥í•˜ì˜€ê³  ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ Spinnakerì™€ ê°™ì€ ì†”ë£¨ì…˜ì´ ë“±ì¥í•˜ì˜€ë‹¤. ë˜í•œ, ì§€ëŠ¥í˜• ë¼ìš°íŒ…ê³¼ ë¶„ì‚° íŠ¸ë Œì ì…˜ ë¡œê·¸ ì¶”ì ì„ í•˜ëŠ” ê¸°ëŠ¥ë“¤ì´ Envoy ë¼ëŠ” ì†”ë£¨ì…˜ìœ¼ë¡œ ë‚˜ì˜¤ê³  ì´ë¥¼ ì¤‘ì•™ í†µì œí•˜ê¸° ìœ„í•œ Istio.io ì™€ ê°™ì€ Service Mesh ì†”ë£¨ì…˜ ê¹Œì§€ ì£¼ëª©ì„ ë°›ê¸° ì‹œì‘í•˜ì˜€ë‹¤.</p><blockquote><ul><li>Phoenix Server Patern: SW í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë³€ê²½í•œ ì„¤ì •ì„ í˜„ ì„œë²„ì— ì ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ OSì„¤ì¹˜ë¶€í„° SW ì„¤ì¹˜-ì„¤ì • ë³€ê²½ê¹Œì§€ ë‹¤ì‹œ &gt; ë°˜ë³µí•˜ëŠ” íŒ¨í„´ì„ ì˜ë¯¸í•œë‹¤.</li><li>Envoy: ëŒ€í˜• MSAì˜ ë‹¨ì¼ Applicationê³¼ Serviceë¥¼ ìœ„í•´ ì„¤ê³„ëœ ê³ ì„±ëŠ¥ ë¶„ì‚° c++í”„ë¡ì‹œ</li><li>Istio.io: Envoy proxyë¥¼ ì‚¬ìš©í•˜ë©° ì´ë¥¼ ì»¨íŠ¸ë¡¤ í•´ì£¼ëŠ” Control Planeì˜ ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜, <a href="https://gruuuuu.github.io/cloud/service-mesh-istio/#">ì°¸ê³ ìë£Œ</a></li></ul></blockquote><p>DevOps ê°œë…ë„ ë‚˜ì˜¨ì§€ ì˜¤ë˜ë˜ì—ˆì§€ë§Œ, ìš´ì˜ì„ DevOpsë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë°”ê¾¼ ê²ƒì¼ë¿ ì‹¤ì œì ì¸ ë³€í™”ê°€ ì—†ëŠ” íŒ€ë“¤ì´ ë§ì•˜ë‹¤ê³  í•œë‹¤. ë˜ëŠ” DevOpsë¼ëŠ” ì´ë¦„ ì•„ë˜ ê°œë°œíŒ€ì´ ê°œë°œê³¼ ìš´ì˜ ì—­í• ì„ ë³‘í–‰í•´ì„œ í•˜ëŠ” ì‚¬ë¡€ê°€ ì˜¤íˆë ¤ ë§ì•˜ë‹¤.</p><p>ì´ëŸ° DevOpsì˜ ê°œë…ë„ ê·¼ë˜ ë“¤ì–´ ê°œë°œíŒ€ì´ ê°œë°œê³¼ ì‹œìŠ¤í…œì— ëŒ€í•œ ë°°í¬/ìš´ì˜ì„ ë‹´ë‹¹í•œë‹¤ë©´, DevOps íŒ€ì€ ê°œë°œíŒ€ì´ ì´ë¥¼ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë” í”Œë«í¼ê³¼ ìë™í™”ë¥¼ í•˜ëŠ”ë° ëª©í‘œë¥¼ ë‘ëŠ” ì—­í• ë¡œ êµ¬ë¶„ì§€ì–´ì¡Œë‹¤.</p><h1 id="ê·¸ëŸ¼-ì™œ-Kubernetes-ê°€-ë–´ì„ê¹Œ"><a href="#ê·¸ëŸ¼-ì™œ-Kubernetes-ê°€-ë–´ì„ê¹Œ" class="headerlink" title=" ê·¸ëŸ¼ ì™œ Kubernetes ê°€ ë–´ì„ê¹Œ?"></a><a name="subject02"></a> ê·¸ëŸ¼ ì™œ Kubernetes ê°€ ë–´ì„ê¹Œ?</h1><p>ì»¨í…Œì´ë„ˆ ìš´ìš© í™˜ê²½ì€ ì˜¤í”ˆì†ŒìŠ¤ì— ì˜í•´ í‘œì¤€ì—†ì´ í˜¼ëˆìƒíƒœì˜€ëŠ”ë°, 2017ë…„ ë§ì„ ê¸°ì ìœ¼ë¡œ Kubernetesê°€ de-facto í‘œì¤€ìœ¼ë¡œ ìë¦¬ì¡ì•˜ë‹¤. ì•„ë˜ íŠ¸ëœë“œ ê·¸ë˜í”„ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ kubernetesì˜ íŠ¸ëœë“œê°€ ì§€ì†ì ìœ¼ë¡œ ì˜¬ë¼ê°€ì„œ ê°€ì¥ ë†’ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¶”ê°€ë¡œ github repo star í†µê³„ì— ëŒ€í•´ì„œë„ 2015 ë…„ì„ ê¸°ì ìœ¼ë¡œ í¬ê²Œ ì¦ê°€í•˜ì—¬ 2018ë…„ ë§ì—ëŠ” ì—„ì²­ í° ì°¨ì´ë¥¼ ë³´ì´ê³  ìˆë‹¤.</p><p><img src="https://t1.daumcdn.net/cfile/tistory/990BE94D5AFEF4A20F" alt="Container Trends"></p><center><U>[ê·¸ë¦¼] Container Orchestration Trends</U></center>  <p><img src="https://www.percona.com/community-blog/wp-content/uploads/2019/07/kubernetes-growth.jpg" alt="Container solution Trend about github repo start"></p><center><U>[ê·¸ë¦¼] github repo star for Container Orchestration</U></center><h1 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title=" Kubernetes ?"></a><a name="subject03"></a> Kubernetes ?</h1><ul><li>ì»¨í…Œì´ë„ˆ ìš´ì˜í™˜ê²½ ì¤‘ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì†”ë£¨ì…˜ì´ë‹¤. <em>(ì•½ì–´ë¡œ k8s, 8ì˜ ì˜ë¯¸ëŠ” kì™€ sì‚¬ì´ ì•ŒíŒŒë²³ ê°¯ìˆ˜)</em></li><li>êµ¬ê¸€ì˜ ë‚´ë¶€ ì»¨í…Œì´ë„ˆ ì„œë¹„ìŠ¤ë¥¼ Borgë¼ê³  í•˜ëŠ”ë° ì´ êµ¬ì¡°ë¥¼ ì˜¤í”ˆì†ŒìŠ¤í™” í•œ ê²ƒì´ë‹¤.</li><li>GO ì–¸ì–´ë¡œ êµ¬í˜„í•˜ì˜€ë‹¤. <em><a href="https://golang.org">golang</a></em></li><li>ë²¤ë”ë‚˜ í”Œë«í¼ì— ì¢…ì†ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— <strong>Public Cloud</strong> <em>(Google, Amazone, MS Azure)</em> ì™€ <strong>Private CLoud ë° ë² ì–´ë©”íƒˆ í™˜ê²½</strong> <em>(ê°€ìƒí™” í™˜ê²½ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¼ë°˜ ì„œë²„ í•˜ë“œì›¨ì–´, like ê¹¡í†µ)</em> ì—ì„œ êµ¬ì¶• ê°€ëŠ¥<ul><li>ì´ëŸ¬í•œ ì´ìœ ë¡œ Hybrid Cloud í™˜ê²½ ê°€ëŠ¥ <em>(Private + Public)</em></li></ul></li><li>ë‹¤ì–‘í•œ Container Runtime ì œê³µ<ul><li>Docker ë˜í•œ Container Runitme ìœ¼ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ì§€ë§Œ, CRI-O ê°€ í˜„ì¬ Kubernetes ë¥¼ ìœ„í•œ í‘œì¤€ Container Runtime ìœ¼ë¡œ ìë¦¬ì¡ê³  ìˆë‹¤.</li><li>ê´€ë ¨ ìë£Œ<ul><li><a href="http://www.opennaru.com/kubernetes/cri-o/">http://www.opennaru.com/kubernetes/cri-o/</a></li><li><a href="https://www.samsungsds.com/global/ko/support/insights/docker.html">https://www.samsungsds.com/global/ko/support/insights/docker.html</a></li><li><a href="https://bcho.tistory.com/1353">https://bcho.tistory.com/1353</a></li></ul></li></ul></li></ul><h1 id="Kubernetes-íŠ¹ì§•"><a href="#Kubernetes-íŠ¹ì§•" class="headerlink" title=" Kubernetes íŠ¹ì§•"></a><a name="subject04"></a> Kubernetes íŠ¹ì§•</h1><ul><li>ìƒíƒœê´€ë¦¬ : ìƒíƒœë¥¼ ì„ ì–¸í•˜ê³  ì„ ì–¸í•œ ìƒíƒœë¥¼ ê³„ì†í•´ì„œ ìœ ì§€í•œë‹¤. ë…¸ë“œê°€ ì£½ê±°ë‚˜ Container ì‘ë‹µì´ ì—†ì„ ê²½ìš°, ìë™ìœ¼ë¡œ ìƒˆë¡œìš´ Container ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ ìë™ìœ¼ë¡œ íŠ¹ì • ìƒíƒœì— ë„ë‹¬í•˜ì§€ ëª»í•œ Conatiner ë¥¼ ì¤‘ì§€í•˜ëŠ” ë“± <strong>ì„ ì–¸í•œ ìƒíƒœë¥¼ ê³„ì†í•´ì„œ ìœ ì§€</strong>í•œë‹¤.</li><li>ìŠ¤ì¼€ì¤„ë§ : ì–´ë–¤ ë…¸ë“œì— Container ë¥¼ ì‹¤í–‰í• ì§€ ê³ ë¯¼í•˜ì§€ ì•Šì•„ë„ Kubernetes ì¡°ê±´ì— ë§ëŠ” ë…¸ë“œë¥¼ ì°¾ì•„ì„œ Conatiner ë¥¼ ë°°ì¹˜í•œë‹¤. <em>(íŠ¹ì • ë…¸ë“œì— ì‹¤í–‰í•˜ê²Œ ì¡°ê±´ ì„¤ì •ë„ ê°€ëŠ¥í•˜ë‹¤)</em></li><li>í´ëŸ¬ìŠ¤í„° : ê°€ìƒ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ í†µì‹ í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ì„œë²„ì²˜ëŸ¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.</li><li>ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ : ì„œë¡œ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¥¼ ì‰½ê²Œ ì°¾ê³  í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ul><li><a href="https://bcho.tistory.com/1255">ì¿ ë²„ë„¤í‹°ìŠ¤ #1 - ì†Œê°œ</a></li><li><a href="https://ooeunz.tistory.com/84">[Kubernetes] ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë“±ì¥ ë°°ê²½</a></li><li><a href="https://medium.com/@shaul1991/%EC%B4%88%EB%B3%B4%EA%B0%9C%EB%B0%9C%EC%9E%90-%EC%9D%BC%EC%A7%80-%EB%8C%80%EC%84%B8-msa-%EB%84%88-%EB%AD%90%EB%8B%88-efba5cfafdeb">[ì´ˆë³´ê°œë°œì ì¼ì§€] ëŒ€ì„¸ MSA? ë„ˆ ë­ë‹ˆ?</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-kubernetes_chapter_01/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Database] ì¼ ë‹¨ìœ„ ì ì¬ í”„ë¡œì„¸ìŠ¤ í›‘ì–´ë³´ê¸°</title>
      <link>https://jx2lee.github.io/database-daily_batch_process/</link>
      <guid>https://jx2lee.github.io/database-daily_batch_process/</guid>
      <pubDate>Wed, 09 Sep 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;í”„ë¡œì íŠ¸ ì‹œë²”ê³¼ì œ ì¤‘ &lt;strong&gt;[ë°ì´í„° ë§ˆíŠ¸ êµ¬ì¶•]&lt;/strong&gt;ì„ ìˆ˜í–‰í•˜ë©´ì„œ ê³ ê°ìš”ê±´ì— ë§ëŠ” í…Œì´ë¸”ì„ ìƒì„±í•˜ê³  ê°±ì‹ í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ê²½í—˜í•˜ì˜€ë‹¤. ë³„ ì–´ë ¤ìš´ ë‚´ìš©ì€ ì—†ì§€ë§Œ ë‚´ ë¨¸ë¦¿ì†ì— ì €ì¥íˆê¸° ìœ„í•´ ê¸€ë¡œ ë‚¨ê²¨ë†“ëŠ”ë‹¤. &lt;em&gt;(ë„ì›€ì„ ì£¼ì‹  ê°“ì •í¬ë‹˜ê»˜ ê°ì‚¬ì˜ ì¸ì‚¬ë¥¼)&lt;/em&gt;&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>í”„ë¡œì íŠ¸ ì‹œë²”ê³¼ì œ ì¤‘ <strong>[ë°ì´í„° ë§ˆíŠ¸ êµ¬ì¶•]</strong>ì„ ìˆ˜í–‰í•˜ë©´ì„œ ê³ ê°ìš”ê±´ì— ë§ëŠ” í…Œì´ë¸”ì„ ìƒì„±í•˜ê³  ê°±ì‹ í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ê²½í—˜í•˜ì˜€ë‹¤. ë³„ ì–´ë ¤ìš´ ë‚´ìš©ì€ ì—†ì§€ë§Œ ë‚´ ë¨¸ë¦¿ì†ì— ì €ì¥íˆê¸° ìœ„í•´ ê¸€ë¡œ ë‚¨ê²¨ë†“ëŠ”ë‹¤. <em>(ë„ì›€ì„ ì£¼ì‹  ê°“ì •í¬ë‹˜ê»˜ ê°ì‚¬ì˜ ì¸ì‚¬ë¥¼)</em></p><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong></p><ol><li><a href="#createuser">ìœ ì € ìƒì„±</a>  </li><li><a href="#createtable">TARGET í…Œì´ë¸” ìƒì„±</a>  </li><li><a href="#update">ì£¼ ë‹¨ìœ„ ë°ì´í„° ë§ˆê°</a>  </li><li><a href="#reference">Reference</a>  </li></ol><h1 id="ìœ ì €-ìƒì„±"><a href="#ìœ ì €-ìƒì„±" class="headerlink" title=" ìœ ì € ìƒì„±"></a><a name="createuser"></a> ìœ ì € ìƒì„±</h1><p>í•´ë‹¹ í…Œì´ë¸”ì„ ê´€ë¦¬í•˜ëŠ” ê³„ì •ì„ ìƒì„±í•˜ì˜€ë‹¤.</p><ul><li>user/pw: mart_20/<strong>***</strong></li><li>role: connect, resource</li><li>User create query<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--Create &quot;MART_20&quot; User</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> MART_20 <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">&#x27;*******&#x27;</span>;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">CONNECT</span>, <span class="keyword">RESOURCE</span> <span class="keyword">TO</span> MART_20;</span><br></pre></td></tr></table></figure></li></ul><h1 id="TARGET-í…Œì´ë¸”-ìƒì„±"><a href="#TARGET-í…Œì´ë¸”-ìƒì„±" class="headerlink" title=" TARGET í…Œì´ë¸” ìƒì„±"></a><a name="createtable"></a> TARGET í…Œì´ë¸” ìƒì„±</h1><p>ê³ ê°ì´ ì‚¬ìš©í•˜ë˜ SQL ì¿¼ë¦¬ë¥¼ ì‚´í´ë³´ë©´, ì´ 12ê°œ Table ë° View ë¥¼ ì¡°í•©í•˜ì—¬ ë„¤ ë©ì–´ë¦¬ SELECT ì¡°íšŒ ê²°ê³¼ë¥¼ UNION ALL í•œë‹¤. ìš´ì˜ìê°€ ìˆ˜ì •í•˜ëŠ” ë¶€ë¶„ì€ ë‚ ì§œ ì¹¼ëŸ¼ì„ ì…ë ¥í•˜ê²Œë” ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì—¬ ì´ë¥¼ EXCEL ë¡œ ë‹¤ìš´ë°›ì•„ ìš”ì²­ìì—ê²Œ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìš°ë¦¬ëŠ” ì´ ì¿¼ë¦¬ì˜ ê²°ê³¼ë¬¼ì„ ë¯¸ë¦¬ í…Œì´ë¸”ë¡œ ì •ì˜í•˜ê³ , ì¼ ì ì¬ë¥¼ í†µí•´ ê³ ê°ì´ ì‰½ê²Œ ìš°ë¦¬ ì œí’ˆì„ ì´ìš©í•´ ë¶„ì„í•˜ê³  ì‹¶ì„ ë•Œ ë¶„ì„ ê°€ëŠ¥í•˜ê²Œ í™˜ê²½ì„ êµ¬ì„±í•  ì˜ˆì •ì´ë‹¤. í•˜ì§€ë§Œ ìš”ì²­ìë¥¼ ìœ„í•´ ì‘ì„±ëœ QueryëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì œì•½ì‚¬í•­ì´ ìˆë‹¤. </p><ul><li>Primary Key ë¡œ ì„¤ì •í•œ SEQ ëŠ” ì¶”í›„ ì¤‘ë³µì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.<ul><li>ìˆ˜ì§‘ì„ í•˜ë‹¤ë³´ë©´ ì–¸ì  ê°€ UNION ALL ì „ì˜ í•œ ë©ì–´ë¦¬ì—ì„œì˜ SEQ ì¹¼ëŸ¼ê³¼ ë‚˜ë¨¸ì§€ ì„¸ ë©ì–´ë¦¬ì—ì„œì˜ SEQ ì™€ ë™ì¼í•´ì§ˆ ìˆ˜ ìˆë‹¤. ì„œë¡œ ë‹¤ë¥´ê²Œ SEQ Value ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</li><li>ì´ë¥¼ í•´ê²°í•  ë°©ë²•ìœ¼ë¡œ UNION ALL ì „ì˜ ë„¤ ë©ì–´ë¦¬ë¥¼ ì ì¬ í…Œì´ë¸”ë¡œ ê°ê° ê´€ë¦¬í•˜ë©´ ëœë‹¤. ì´í›„ ìƒì„±í•œ ë„¤ ê°œ í…Œì´ë¸”ì„ UNION ALL í•œ VIEW ë¥¼ ë°”ë¼ë³´ë©´ ë˜ëŠ”ë°, ì´ëŠ” 1) ê´€ë¦¬ í¬ì¸íŠ¸ê°€ ë§ì•„ì§€ê³   2) Viewë¥¼ ì‚¬ìš©í•˜ê¸° ëŒ€ë¬¸ì— ì„±ëŠ¥ ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</li><li>ê·¸ëŸ¼ì—ë„ ë‚˜ëŠ” í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ê´€ë¦¬í•˜ê³ ì í•œë‹¤.</li></ul></li><li>Source Table ì—ì„œ ìˆ˜ì •ì´ ë°œìƒí•˜ë©´ ì´ì— ëŒ€í•œ Target Source ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤. ì¦‰, ì´ì „ ë‚ ì§œì˜ ë°ì´í„°ì— ëŒ€í•œ ìˆ˜ì •ì´ ë°œìƒí•˜ë©´ Target Source ì— ëŒ€í•œ ë°˜ì˜ì´ í•„ìš”í•˜ë‹¤.<ul><li>ì´ëŠ” ì£¼ ë˜ëŠ” ì›” ë‹¨ìœ„ DEL_FLAG ë³€ìˆ˜ë¥¼ í™œìš©í•´ ì‚­ì œ ë˜ëŠ” ì¶”ê°€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” <strong>ë°°ì¹˜ ì‘ì—…</strong> ìœ¼ë¡œ ë°˜ì˜í•  ìˆ˜ ìˆë‹¤. ë‹¨, Update period ëŠ” í˜‘ì˜ê°€ í•„ìš”í•œ ìƒí™©!</li><li><code>HABITAUL_PRACTICE_TEMP</code> í…Œì´ë¸”ì„ ìƒì„±í•˜ì—¬ ë§ˆê° ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ê²ƒì´ë‹¤.</li></ul></li></ul><p>í…Œì´ë¸” <em>Create Query</em> ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> MART_20.HABITAUL_PRACTICE_ANALYSIS (</span><br><span class="line">SEQ <span class="built_in">NUMBER</span>(<span class="number">22</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">DOMAIN_SEQ <span class="built_in">NUMBER</span>(<span class="number">22</span>),</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="string">&quot;ìœ„ë³€ì¡° í†µì¥&quot;</span> <span class="built_in">NUMBER</span>,</span><br><span class="line"><span class="string">&quot;ìœ„ë³€ì¡° ê¸°íƒ€&quot;</span> <span class="built_in">NUMBER</span>,</span><br><span class="line">DEL_FLAG <span class="built_in">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="string">&#x27;N&#x27;</span></span><br><span class="line">)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> MART_20.HABITAUL_PRACTICE_ANALYSIS_IDX_01 <span class="keyword">ON</span> MART_20.HABITAUL_PRACTICE_ANALYSIS (</span><br><span class="line">TFD_DATE,</span><br><span class="line">DOMAIN_LINK,</span><br><span class="line">DEL_FLAG</span><br><span class="line">)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> MART_20.HABITAUL_PRACTICE_TEMP (</span><br><span class="line">SEQ <span class="built_in">NUMBER</span>(<span class="number">22</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line">DOMAIN_SEQ <span class="built_in">NUMBER</span>(<span class="number">22</span>),</span><br><span class="line">...</span><br><span class="line">...<span class="string">&quot;ìœ„ë³€ì¡° í†µì¥&quot;</span> <span class="built_in">NUMBER</span>,</span><br><span class="line"><span class="string">&quot;ìœ„ë³€ì¡° ê¸°íƒ€&quot;</span> <span class="built_in">NUMBER</span></span><br><span class="line">)</span><br><span class="line">;</span><br></pre></td></tr></table></figure><ul><li>PK: SEQ</li><li>INDEX: DOMAIN_LINK, TFD_DATE, DEL_FLAG</li><li>TEMP í…Œì´ë¸”ê³¼ ì›ë³¸ í…Œì´ë¸”ì˜ ì°¨ì´ì ì€ <strong>DEL_FLAG</strong> ì¹¼ëŸ¼ì˜ ì—¬ë¶€ì´ë‹¤.</li></ul><h1 id="ì£¼-ë‹¨ìœ„-ë°ì´í„°-ë§ˆê°"><a href="#ì£¼-ë‹¨ìœ„-ë°ì´í„°-ë§ˆê°" class="headerlink" title=" ì£¼ ë‹¨ìœ„ ë°ì´í„° ë§ˆê°"></a><a name="update"></a> ì£¼ ë‹¨ìœ„ ë°ì´í„° ë§ˆê°</h1><p>ìš´ì˜ì§„ì—ì„œ ìˆ˜ì •ëœ ë°ì´í„°ë¥¼ ë°˜ì˜í•˜ê¸° ìœ„í•´ ì£¼ ë‹¨ìœ„ ë°ì´í„°ë¥¼ ë§ˆê°í•  ê²ƒì´ë‹¤. ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ì§„í–‰í•˜ëŠ”ë°, ì´ëŠ” ì‹¤ì‹œê°„ ìˆ˜ì • ë°˜ì˜ì´ ì–´ë ¤ì›Œ(êµ¬ì¡°ìƒ) ê³ ê°ì™€ í˜‘ì˜í•˜ì—¬ ì§„í–‰í•˜ì˜€ë‹¤. <em>(ë§ˆê° ì£¼ê¸°, ì¦‰ Update ë°˜ì˜ì„ í•œ ì£¼ ì „ê¹Œì§€ë§Œ ë°˜ì˜)</em></p><h2 id="1-í˜„ì¬-ê¸°ì¤€-ì´-ì „-ë°ì´í„°-ì¡°íšŒ-í›„-ì €ì¥"><a href="#1-í˜„ì¬-ê¸°ì¤€-ì´-ì „-ë°ì´í„°-ì¡°íšŒ-í›„-ì €ì¥" class="headerlink" title="1) í˜„ì¬ ê¸°ì¤€ ì´ ì „ ë°ì´í„° ì¡°íšŒ í›„ ì €ì¥"></a>1) í˜„ì¬ ê¸°ì¤€ ì´ ì „ ë°ì´í„° ì¡°íšŒ í›„ ì €ì¥</h2><p><em>ë°ì´í„° ì£¼ ë‹¨ìœ„ ê°±ì‹  ë§ˆê°ì„ ìœ„í•œ ì¡°íšŒ Query</em>ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line">   <span class="keyword">FROM</span> ( <span class="keyword">SELECT</span> SEQ,</span><br><span class="line">                 DOMAIN_SEQ,</span><br><span class="line">                 DOMAIN_LINK,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">                 <span class="keyword">CASE</span> <span class="keyword">WHEN</span> <span class="keyword">INSTR</span>(ILLE_EXPR,</span><br><span class="line">                 <span class="string">&#x27;0209&#x27;</span>) &gt; <span class="number">0</span> <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">END</span> <span class="keyword">AS</span> <span class="string">&quot;ìœ„ë³€ì¡° ê¸°íƒ€&quot;</span></span><br><span class="line">            <span class="keyword">FROM</span> (        <span class="keyword">SELECT</span> A.SEQ,</span><br><span class="line">                          <span class="keyword">DECODE</span>(WEB_CACHE_URL,<span class="literal">NULL</span>,A.DOMAIN_SEQ,<span class="number">100000001</span>) <span class="keyword">AS</span> DOMAIN_SEQ,</span><br><span class="line">                          <span class="keyword">DECODE</span>(WEB_CACHE_URL,<span class="literal">NULL</span>,B.DOMAIN_LINK,<span class="string">&#x27;webcache.googleusercontent.com&#x27;</span>) <span class="keyword">AS</span> DOMAIN_LINK,</span><br><span class="line">                          <span class="keyword">DECODE</span>(WEB_CACHE_URL,<span class="literal">NULL</span>,F.DOMAIN_NAME,<span class="string">&#x27;êµ¬ê¸€ì›¹ìºì‹œ&#x27;</span>) <span class="keyword">AS</span> DOMAIN_NAME,</span><br><span class="line">                          F.DOMAIN_CODE2,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">                          WM_CONCAT (E.EXPR_CATEGORY || E.EXPR_SUB_CATE) ILLE_EXPR</span><br><span class="line">                     <span class="keyword">FROM</span> PIRST_19.DETECTED_URL@DS16 A <span class="keyword">INNER</span> <span class="keyword">JOIN</span> PIRST_19.DOMAIN_MASTER@DS16 B <span class="keyword">ON</span> A.DOMAIN_SEQ = B.DOMAIN_SEQ </span><br><span class="line">                          <span class="keyword">INNER</span> <span class="keyword">JOIN</span> PIRST_19.DOMAIN_INFORMATION@DS16 F <span class="keyword">ON</span> A.DOMAIN_SEQ = F.DOMAIN_SEQ </span><br><span class="line">                          <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> PIRST_19.KEYWORD_MASTER@DS16 C <span class="keyword">ON</span> A.KEYWORD_SEQ = C.KEYWORD_SEQ </span><br><span class="line">                          <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> PIRST_19.A_ILLEGAL_TRADER_MST@DS16 D <span class="keyword">ON</span> A.SEQ = D.URL_SEQ </span><br><span class="line">                          <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> PIRST_19.DETECTED_URL_EXPR@DS16 E <span class="keyword">ON</span> A.SEQ = E.URL_SEQ <span class="keyword">AND</span> E.EXPR_USE = <span class="string">&#x27;Y&#x27;</span> </span><br><span class="line">                          <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> * </span><br><span class="line">                                           <span class="keyword">FROM</span> PIRST_19.DETECTED_IMG@DS16</span><br><span class="line">                                           <span class="keyword">WHERE</span> <span class="keyword">ROWID</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(<span class="keyword">ROWID</span>) <span class="keyword">FROM</span> PIRST_19.DETECTED_IMG@DS16</span><br><span class="line">                                           <span class="keyword">GROUP</span> <span class="keyword">BY</span> DETECTED_SEQ)) G <span class="keyword">ON</span> A.SEQ = G.DETECTED_SEQ</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">                      <span class="keyword">AND</span> C.KEYWORD_REG_USER_ID != <span class="string">&#x27;covid19&#x27;</span></span><br><span class="line">                    <span class="keyword">GROUP</span> <span class="keyword">BY</span> A.SEQ,</span><br><span class="line">                             <span class="keyword">DECODE</span>(WEB_CACHE_URL,<span class="literal">NULL</span>,A.DOMAIN_SEQ,<span class="number">100000001</span>),</span><br><span class="line">                             <span class="keyword">DECODE</span>(WEB_CACHE_URL,<span class="literal">NULL</span>,B.DOMAIN_LINK,<span class="string">&#x27;webcache.googleusercontent.com&#x27;</span>),</span><br><span class="line">                             <span class="keyword">DECODE</span>(WEB_CACHE_URL,<span class="literal">NULL</span>,F.DOMAIN_NAME,<span class="string">&#x27;êµ¬ê¸€ì›¹ìºì‹œ&#x27;</span>),</span><br><span class="line">                             F.DOMAIN_CODE2,</span><br><span class="line">                             F.DOMAIN_CODE3,            </span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">                             D.URL_SEQ,</span><br><span class="line">                             A.POST_DATE</span><br><span class="line">                  ) A <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> PIRST_19.A_ILLEGAL_TRADER_MST@DS16 B <span class="keyword">ON</span> A.TRADER_SEQ = B.TRADER_SEQ</span><br><span class="line">             <span class="keyword">AND</span> A.URL_SEQ = B.URL_SEQ)</span><br><span class="line"><span class="comment">--í•œ ë©ì–´ë¦¬ ë</span></span><br><span class="line"> <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"> <span class="keyword">SELECT</span> A.MANUAL_SEARCH_SEQ,</span><br><span class="line">        A.DETECTED_DOMAIN_SEQ,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">        <span class="keyword">DECODE</span>(<span class="keyword">SUBSTR</span>(D.exposure_type, <span class="keyword">INSTR</span>(D.exposure_type, <span class="string">&#x27;C09&#x27;</span>),<span class="number">3</span>),<span class="string">&#x27;C09&#x27;</span>,<span class="number">1</span>) <span class="keyword">as</span> SIXTEEN     </span><br><span class="line">   <span class="keyword">FROM</span> PIRST_19.MANUAL_DETECTED_URL@DS16 A,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">        PIRST_19.A_ILLEGAL_TRADER_MST@DS16 E</span><br><span class="line">  <span class="keyword">WHERE</span> A.DETECTED_DOMAIN_SEQ = B.DOMAIN_SEQ</span><br><span class="line">    <span class="keyword">AND</span> A.DETECTED_DOMAIN_SEQ = C.DOMAIN_SEQ</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">  <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="comment">--ë‘ ë©ì–´ë¦¬ ë</span></span><br><span class="line"> <span class="keyword">SELECT</span> A.MANUAL_SEARCH_SEQ,</span><br><span class="line">        A.DETECTED_DOMAIN_SEQ,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">        <span class="keyword">DECODE</span>(<span class="keyword">SUBSTR</span>(D.exposure_type, <span class="keyword">INSTR</span>(D.exposure_type, <span class="string">&#x27;C08&#x27;</span>),<span class="number">3</span>),<span class="string">&#x27;C08&#x27;</span>,<span class="number">1</span>) <span class="keyword">as</span> FIFTEEN,</span><br><span class="line">        <span class="keyword">DECODE</span>(<span class="keyword">SUBSTR</span>(D.exposure_type, <span class="keyword">INSTR</span>(D.exposure_type, <span class="string">&#x27;C09&#x27;</span>),<span class="number">3</span>),<span class="string">&#x27;C09&#x27;</span>,<span class="number">1</span>) <span class="keyword">as</span> SIXTEEN     </span><br><span class="line">  <span class="keyword">FROM</span> PIRST_19.MANUAL_CACHE_URL@DS16 A,</span><br><span class="line">       PIRST_19.DOMAIN_MASTER@DS16 B,</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"> <span class="keyword">WHERE</span> A.DETECTED_DOMAIN_SEQ = B.DOMAIN_SEQ</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">   <span class="keyword">AND</span> A.MBER_ID != <span class="string">&#x27;itno_cmbok&#x27;</span></span><br><span class="line"><span class="comment">----ì„¸ ë©ì–´ë¦¬ ë </span></span><br><span class="line">  <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"> <span class="keyword">SELECT</span> A.MANUAL_SEARCH_SEQ,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">        <span class="keyword">DECODE</span>(<span class="keyword">SUBSTR</span>(D.exposure_type, <span class="keyword">INSTR</span>(D.exposure_type, <span class="string">&#x27;C08&#x27;</span>),<span class="number">3</span>),<span class="string">&#x27;C08&#x27;</span>,<span class="number">1</span>) <span class="keyword">as</span> FIFTEEN,</span><br><span class="line">        <span class="keyword">DECODE</span>(<span class="keyword">SUBSTR</span>(D.exposure_type, <span class="keyword">INSTR</span>(D.exposure_type, <span class="string">&#x27;C09&#x27;</span>),<span class="number">3</span>),<span class="string">&#x27;C09&#x27;</span>,<span class="number">1</span>) <span class="keyword">as</span> SIXTEEN     </span><br><span class="line">   <span class="keyword">FROM</span> PIRST_19.MANUAL_IMAGE_URL@DS16 A,</span><br><span class="line">        PIRST_19.DOMAIN_MASTER@DS16 B,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">  <span class="keyword">WHERE</span> A.DETECTED_DOMAIN_SEQ = B.DOMAIN_SEQ</span><br><span class="line">    <span class="keyword">AND</span> A.DETECTED_DOMAIN_SEQ = C.DOMAIN_SEQ</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="comment">--ë„¤ ë©ì–´ë¦¬ ë</span></span><br><span class="line">;</span><br></pre></td></tr></table></figure><ul><li>TFD_DATE ë¥¼ SYSDATE(í˜„ì¬ ì‹œê°„) ê¸°ì¤€ 7ì¼ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰í•œë‹¤. ì¦‰, ì´ì „ ì¼ì£¼ì¼ ì¹˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•œë‹¤.<ul><li>20.09.03~20.09.09: 3993ê±´</li></ul></li><li>ê²°ê³¼ë¬¼ì„ <code>HABITUAL_TEMP</code> í…Œì´ë¸”ì— ì €ì¥í•œë‹¤.</li></ul><h2 id="2-í˜„ì¬-ê¸°ì¤€-ì¼ì£¼ì¼-ì „-ë°ì´í„°ì˜-DEL-FLAG-ë³€ê²½"><a href="#2-í˜„ì¬-ê¸°ì¤€-ì¼ì£¼ì¼-ì „-ë°ì´í„°ì˜-DEL-FLAG-ë³€ê²½" class="headerlink" title="2) í˜„ì¬ ê¸°ì¤€ ì¼ì£¼ì¼ ì „ ë°ì´í„°ì˜ DEL_FLAG ë³€ê²½"></a>2) í˜„ì¬ ê¸°ì¤€ ì¼ì£¼ì¼ ì „ ë°ì´í„°ì˜ DEL_FLAG ë³€ê²½</h2><p><em><code>HABITUAL_BUYER</code> ì— ìœ„ ê¸°ê°„ ë°ì´í„°ì˜ DEL_FLAG ë³€ê²½ Query</em> ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> HABITUAL_BUYER</span><br><span class="line"><span class="keyword">SET</span> DEL_FLAG=<span class="string">&#x27;Y&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> TFD_DATE &gt;= <span class="keyword">TO_DATE</span>(TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">&#x27;YYYYMMDD&#x27;</span>),<span class="string">&#x27;YYYYMMDD&#x27;</span>) - <span class="number">7</span></span><br><span class="line">       <span class="keyword">AND</span> TFD_DATE &lt; <span class="keyword">TO_DATE</span>(TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">&#x27;YYYYMMDD&#x27;</span>),<span class="string">&#x27;YYYYMMDD&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="3-TEMP-í…Œì´ë¸”ê³¼-TARGET-í…Œì´ë¸”-ê°„-Merge"><a href="#3-TEMP-í…Œì´ë¸”ê³¼-TARGET-í…Œì´ë¸”-ê°„-Merge" class="headerlink" title="3) TEMP í…Œì´ë¸”ê³¼ TARGET í…Œì´ë¸” ê°„ Merge"></a>3) TEMP í…Œì´ë¸”ê³¼ TARGET í…Œì´ë¸” ê°„ Merge</h2><p><em>ë‘ í…Œì´ë¸” ê°„ (<code>HABITUAL_BUYER</code> // <code>HABITUAL_TEMP</code>) Merge Ouery</em>ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">MERGE</span> <span class="keyword">INTO</span> (<span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> HABITUAL_BUYER</span><br><span class="line"> <span class="keyword">WHERE</span> TFD_DATE &gt;= <span class="keyword">TO_DATE</span>(TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">&#x27;YYYYMMDD&#x27;</span>),<span class="string">&#x27;YYYYMMDD&#x27;</span>) - <span class="number">7</span></span><br><span class="line">   <span class="keyword">AND</span> TFD_DATE &lt; <span class="keyword">TO_DATE</span>(TO_CHAR(<span class="keyword">SYSDATE</span>, <span class="string">&#x27;YYYYMMDD&#x27;</span>),<span class="string">&#x27;YYYYMMDD&#x27;</span>)</span><br><span class="line">) <span class="keyword">AS</span> A</span><br><span class="line"><span class="keyword">USING</span> HABITUAL_TEMP <span class="keyword">AS</span> B</span><br><span class="line"><span class="keyword">ON</span> (A.SEQ = B.SEQ)</span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">MATCHED</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">SET</span></span><br><span class="line">A.DEL_FLAG = <span class="string">&#x27;N&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="keyword">NOT</span> <span class="keyword">MATCHED</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">INSERT</span> (A.SEQ,A.DOMAIN_SEQ ,A.DOMAIN_LINK ,A.DOMAIN_NAME ,A.CODE_NM2 ,A.CODE_NM3,A.DETECTED_CRAWL_COUNT,A.DETECTED_LINK,A.DETECTED_COUNT ,A.TRUE_DETECTION_COUNT ,A.FALSE_DETECTION_COUNT ,A.DETECTED_NEW_EXPOSURE_COUNT ,A.DETECTED_RE_EXPOSURE,A.DETECTED_RE_EXPOSURE_COUNT ,A.DOMAIN_CATEGORY01,A.DOMAIN_CATEGORY02,A.SEARCH_COL_TYPE,A.DOMAIN_GROUP,A.DETECTED_DEPTH,A.DOMAIN_COUNTRY_CODE,A.DETECTED_STATUS,A.DETECTED_GROUP,A.DETECTED_TYPE,A.DETECTED_CHECK_TYPE,A.KEYWORD_SEQ,A.KEYWORD_VALUE,A.INDI_DOMAIN_SEQ,A.WEB_CACHE_URL,A.DETECTED_TIME ,A.TFD_DATE ,A.DEL_DONE_DATE ,A.UPDATOR,A.REQUEST_ORDINAL,A.DETECTED_POST_TYPE,A.GATHERING_TYPE,A.IMG_DETECTION_TYPE,A.POST_DATE ,A.REFERENCE,A.TRADER_TYPE,A.<span class="string">&quot;íŒë§¤ìID&quot;</span>,A.<span class="string">&quot;ì´ë©”ì¼&quot;</span>,A.<span class="string">&quot;ì¹´ì¹´ì˜¤í†¡&quot;</span>,A.<span class="string">&quot;ë„¤ì´íŠ¸ì˜¨&quot;</span>,A.<span class="string">&quot;MSNë©”ì‹ ì €&quot;</span>,A.<span class="string">&quot;ìŠ¤ì¹´ì´í”„&quot;</span>,A.<span class="string">&quot;ìœ„ì±—&quot;</span>,A.QQ,A.<span class="string">&quot;í…”ë ˆê·¸ë¨&quot;</span>,A.<span class="string">&quot;ê¸°íƒ€1&quot;</span>,A.<span class="string">&quot;ê¸°íƒ€2&quot;</span>,A.<span class="string">&quot;í•¸ë“œí°ë²ˆí˜¸&quot;</span>,A.<span class="string">&quot;ì¼ë°˜ë²ˆí˜¸&quot;</span>,A.<span class="string">&quot;ê±°ë˜ ê°œì¸ì •ë³´DB&quot;</span> ,A.<span class="string">&quot;ê±°ë˜ í†µì¥&quot;</span> ,A.<span class="string">&quot;ê±°ë˜ IDíŒë§¤&quot;</span> ,A.<span class="string">&quot;ê±°ë˜ ì•„ì´í•€&quot;</span> ,A.<span class="string">&quot;ê±°ë˜ ëŒ€í¬í°&quot;</span> ,A.<span class="string">&quot;ê±°ë˜ í•´í‚¹&quot;</span> ,A.<span class="string">&quot;ê±°ë˜ ê¸°íƒ€&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ì¦ëª…ì„œ&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ì„±ì í‘œ&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ì‹ ë¶„ì¦&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ìê²©ì¦&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ì—¬ê¶Œ&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ê¸°ë¡ë¶€&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ë‚´ì—­ì„œ&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° í†µì¥&quot;</span> ,A.<span class="string">&quot;ìœ„ë³€ì¡° ê¸°íƒ€&quot;</span> )</span><br><span class="line"><span class="keyword">VALUES</span> (B.SEQ,B.DOMAIN_SEQ ,B.DOMAIN_LINK ,B.DOMAIN_NAME ,B.CODE_NM2 ,B.CODE_NM3,B.DETECTED_CRAWL_COUNT,B.DETECTED_LINK,B.DETECTED_COUNT ,B.TRUE_DETECTION_COUNT ,B.FALSE_DETECTION_COUNT ,B.DETECTED_NEW_EXPOSURE_COUNT ,B.DETECTED_RE_EXPOSURE,B.DETECTED_RE_EXPOSURE_COUNT ,B.DOMAIN_CATEGORY01,B.DOMAIN_CATEGORY02,B.SEARCH_COL_TYPE,B.DOMAIN_GROUP,B.DETECTED_DEPTH,B.DOMAIN_COUNTRY_CODE,B.DETECTED_STATUS,B.DETECTED_GROUP,B.DETECTED_TYPE,B.DETECTED_CHECK_TYPE,B.KEYWORD_SEQ,B.KEYWORD_VALUE,B.INDI_DOMAIN_SEQ,B.WEB_CACHE_URL,B.DETECTED_TIME ,B.TFD_DATE ,B.DEL_DONE_DATE ,B.UPDATOR,B.REQUEST_ORDINAL,B.DETECTED_POST_TYPE,B.GATHERING_TYPE,B.IMG_DETECTION_TYPE,B.POST_DATE ,B.REFERENCE,B.TRADER_TYPE,B.<span class="string">&quot;íŒë§¤ìID&quot;</span>,B.<span class="string">&quot;ì´ë©”ì¼&quot;</span>,B.<span class="string">&quot;ì¹´ì¹´ì˜¤í†¡&quot;</span>,B.<span class="string">&quot;ë„¤ì´íŠ¸ì˜¨&quot;</span>,B.<span class="string">&quot;MSNë©”ì‹ ì €&quot;</span>,B.<span class="string">&quot;ìŠ¤ì¹´ì´í”„&quot;</span>,B.<span class="string">&quot;ìœ„ì±—&quot;</span>,B.QQ,B.<span class="string">&quot;í…”ë ˆê·¸ë¨&quot;</span>,B.<span class="string">&quot;ê¸°íƒ€1&quot;</span>,B.<span class="string">&quot;ê¸°íƒ€2&quot;</span>,B.<span class="string">&quot;í•¸ë“œí°ë²ˆí˜¸&quot;</span>,B.<span class="string">&quot;ì¼ë°˜ë²ˆí˜¸&quot;</span>,B.<span class="string">&quot;ê±°ë˜ ê°œì¸ì •ë³´DB&quot;</span> ,B.<span class="string">&quot;ê±°ë˜ í†µì¥&quot;</span> ,B.<span class="string">&quot;ê±°ë˜ IDíŒë§¤&quot;</span> ,B.<span class="string">&quot;ê±°ë˜ ì•„ì´í•€&quot;</span> ,B.<span class="string">&quot;ê±°ë˜ ëŒ€í¬í°&quot;</span> ,B.<span class="string">&quot;ê±°ë˜ í•´í‚¹&quot;</span> ,B.<span class="string">&quot;ê±°ë˜ ê¸°íƒ€&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ì¦ëª…ì„œ&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ì„±ì í‘œ&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ì‹ ë¶„ì¦&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ìê²©ì¦&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ì—¬ê¶Œ&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ê¸°ë¡ë¶€&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ë‚´ì—­ì„œ&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° í†µì¥&quot;</span> ,B.<span class="string">&quot;ìœ„ë³€ì¡° ê¸°íƒ€&quot;</span> )</span><br></pre></td></tr></table></figure><ul><li>SEQ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ê°€ ì¡´ì¬í•˜ë©´ DEL_FLAGë¥¼ N ìœ¼ë¡œ ìˆ˜ì •í•œë‹¤.</li><li>ë§Œì•½ ê¸°ì¡´ ì ì¬ëœ SEQê°€ ì—†ëŠ” ë°ì´í„°ê°€ ìˆë‹¤ë©´, ìƒˆë¡­ê²Œ INSERT (ì‚­ì œë  ê²½ìš°ë„ ìˆì§€ë§Œ ì¶”ê°€ë  ê²½ìš°ë„ ì¡´ì¬) í•œë‹¤.</li></ul><p>ê° í…Œì´ë¸” ì¡°íšŒí•´ë³´ë©´ FLAGê°€ ë³€ê²½ëœ ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--20.09.03~20.09.09 ìƒˆë¡œ ìˆ˜ì§‘í•œ ë°ì´í„° ì¡°íšŒ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> MART_20.HABITUAL_TEMP</span><br><span class="line">;</span><br><span class="line"><span class="comment">--3993</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--BUYER í…Œì´ë¸”ì—ì„œ ì¼ì£¼ì¼ ì „ ë°ì´í„° FLAG Yë¡œ ìˆ˜ì • í›„ COUNT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> MART_20.HABITUAL_BUYER</span><br><span class="line"><span class="keyword">WHERE</span> DEL_FLAG=<span class="string">&#x27;Y&#x27;</span></span><br><span class="line">;</span><br><span class="line"><span class="comment">--3993</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--MERGE ì´í›„ COUNT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*)</span><br><span class="line"><span class="keyword">FROM</span> MART_20.HABITUAL_BUYER</span><br><span class="line"><span class="keyword">WHERE</span> DEL_FLAG=<span class="string">&#x27;Y&#x27;</span></span><br><span class="line">;</span><br><span class="line"><span class="comment">--0, ì™œëƒë©´ ìˆ˜ì •ëœ ë°ì´í„°ê°€ ì—†ìœ¼ë¯€ë¡œ.. </span></span><br></pre></td></tr></table></figure><p>ë°ì´í„° ì£¼ ë‹¨ìœ„ ë§ˆê° ìˆœì„œë¥¼ í•œ ì¤„ë¡œ ìš”ì•½í•˜ë©´, ë§ˆê° ê¸°ì¤€ ì¹˜ ë°ì´í„°ë¥¼ ì¡°íšŒ í›„ TEMP í…Œì´ë¸”ì— ì €ì¥í•˜ê³  TARGET í…Œì´ë¸”(TEMP í…Œì´ë¸”ì— ì €ì¥í•œ ë°ì´í„°ì˜ ê°™ì€ ë‚ ì§œ)ì˜ DEL_FLAG ë¥¼ Yë¡œ ë³€ê²½í•˜ì—¬ TEMP í…Œì´ë¸”ê³¼ Merge í•œë‹¤.  </p><p>ì§ì ‘ ìˆ˜í–‰í•˜ë©´ì„œ ëŠë‚€ì ì€ Merge ë¡œ ì¸í•œ ì„±ëŠ¥ ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ì§€ëŠ” ë” ì—°êµ¬í•´ë´ì•¼ê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. ë°°ì¹˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ì„œ ìš¸íŒ€ ì„ ë°°ë‹˜ì´ ë§ì€ ë„ì›€ì„ ì£¼ì…¨ë‹¤. ì•ìœ¼ë¡œ ë‚˜ë„ ë‚´ í›„ë°°ì—ê²Œ ë§ì€ ë„ì›€ì„ ì¤„ ìˆ˜ ìˆëŠ” ì„ ë°°ë¡œ ê±°ë“­ë‚˜ê¸¸.. </p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="reference"></a> Reference</h1><ol><li><a href="https://kookyungmin.github.io/db/2018/07/30/oracle_32/">https://kookyungmin.github.io/db/2018/07/30/oracle_32/</a></li><li><a href="https://jennylee4517.github.io/sql/oracle-1%EC%9D%BC%EC%B0%A8/">https://jennylee4517.github.io/sql/oracle-1ì¼ì°¨/</a></li><li><a href="https://m.blog.naver.com/PostView.nhn?blogId=ojini21c&logNo=221193420479&proxyReferer=https:%2F%2Fwww.google.com%2F">https://m.blog.naver.com/PostView.nhn?blogId=ojini21c&amp;logNo=221193420479&amp;proxyReferer=https:%2F%2Fwww.google.com%2F</a></li></ol><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/database-daily_batch_process/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Rook Ceph] Rook ceph dashboard ì‚¬ìš©í•˜ê¸°</title>
      <link>https://jx2lee.github.io/cloud-export_rook_ceph_dashboard/</link>
      <guid>https://jx2lee.github.io/cloud-export_rook_ceph_dashboard/</guid>
      <pubDate>Wed, 02 Sep 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Toolbox POD ë¡œ ì ‘ê·¼í•˜ì—¬ ceph cluster ë¥¼ í™•ì¸í•˜ê³¤ í•œë‹¤. alias ë¡œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ì„¤ì •í•˜ì˜€ì§€ë§Œ, ì¢€ ë” ì§ê´€ì ìœ¼ë¡œ ë³´ê¸° ìœ„í•´ dashboard ë¥¼ ë°°í¬í•´ ë³´ì! &lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Toolbox POD ë¡œ ì ‘ê·¼í•˜ì—¬ ceph cluster ë¥¼ í™•ì¸í•˜ê³¤ í•œë‹¤. alias ë¡œ ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ì„¤ì •í•˜ì˜€ì§€ë§Œ, ì¢€ ë” ì§ê´€ì ìœ¼ë¡œ ë³´ê¸° ìœ„í•´ dashboard ë¥¼ ë°°í¬í•´ ë³´ì! </p><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#checksvc">rook-ceph service í™•ì¸</a>  </li><li><a href="#makesvc">rook-ceph-mgr-dashboard-external-http ì„œë¹„ìŠ¤ ìƒì„±</a>  </li><li><a href="#connect">dashboard ì ‘ì†</a>  </li><li><a href="#ref">Reference</a></li></ol><h1 id="rook-ceph-Service-í™•ì¸"><a href="#rook-ceph-Service-í™•ì¸" class="headerlink" title=" rook-ceph Service í™•ì¸"></a><a name="checksvc"></a> rook-ceph Service í™•ì¸</h1><p><code>kubectl get service -n rook-ceph</code> ëª…ë ¹ì–´ë¡œ ê¸°ë™ì¤‘ì¸ ì„œë¹„ìŠ¤ë¥¼ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># kubectl get service -n rook-ceph</span></span><br><span class="line">NAME                                    TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE</span><br><span class="line">csi-cephfsplugin-metrics                ClusterIP   10.96.205.129   &lt;none&gt;        8080/TCP,8081/TCP   2d17h</span><br><span class="line">csi-rbdplugin-metrics                   ClusterIP   10.96.158.126   &lt;none&gt;        8080/TCP,8081/TCP   2d17h</span><br><span class="line">rook-ceph-mgr                           ClusterIP   10.96.133.224   &lt;none&gt;        9283/TCP            2d17h</span><br><span class="line">rook-ceph-mgr-dashboard                 ClusterIP   10.96.37.245    &lt;none&gt;        8443/TCP            2d17h</span><br><span class="line">rook-ceph-mon-a                         ClusterIP   10.96.59.113    &lt;none&gt;        6789/TCP,3300/TCP   2d17h</span><br><span class="line">rook-ceph-mon-b                         ClusterIP   10.96.26.250    &lt;none&gt;        6789/TCP,3300/TCP   2d17h</span><br><span class="line">rook-ceph-mon-c                         ClusterIP   10.96.235.59    &lt;none&gt;        6789/TCP,3300/TCP   2d17h</span><br></pre></td></tr></table></figure><p><code>rook-ceph-mgr-dashboard</code> ì„œë¹„ìŠ¤ê°€ 8443 í¬íŠ¸ë¡œ í†µì‹  ê°€ëŠ¥í•˜ê²Œ ì„¤ì •ë˜ì–´ ìˆë‹¤. ì™¸ë¶€ë¡œ dashboard ë¥¼ ë…¸ì¶œí•˜ëŠ” ë°©ë²•ì€ <em>1) rook-ceph-mgr ì„œë¹„ìŠ¤ type ë°”ê¾¸ê¸°</em> ì™€ <em>2) external service</em> ê°€ ìˆë‹¤. ì´ë²ˆ ê¸€ì—ì„œëŠ” 2ë²ˆ ë°©ë²•ì„ ì´ìš©í•´ dashboard ë¥¼ ì‚¬ìš©í•´ë³´ê² ë‹¤.</p><h1 id="rook-ceph-mgr-dashboard-external-http-ì„œë¹„ìŠ¤-ìƒì„±í•˜ê¸°"><a href="#rook-ceph-mgr-dashboard-external-http-ì„œë¹„ìŠ¤-ìƒì„±í•˜ê¸°" class="headerlink" title=" rook-ceph-mgr-dashboard-external-http ì„œë¹„ìŠ¤ ìƒì„±í•˜ê¸°"></a><a name="makesvc"></a> rook-ceph-mgr-dashboard-external-http ì„œë¹„ìŠ¤ ìƒì„±í•˜ê¸°</h1><p>ë‹¤ìŒê³¼ ê°™ì€ yaml ë¥¼ ì‘ì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~/hypercloud-rook-ceph-master/deploy<span class="comment"># cat dashboard-external-http.yaml</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: rook-ceph-mgr-dashboard-external-http</span><br><span class="line">  namespace: rook-ceph</span><br><span class="line">  labels:</span><br><span class="line">    app: rook-ceph-mgr</span><br><span class="line">    rook_cluster: rook-ceph</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">  - name: dashboard</span><br><span class="line">    port: 8443</span><br><span class="line">    protocol: TCP</span><br><span class="line">    targetPort: 8443</span><br><span class="line">  selector:</span><br><span class="line">    app: rook-ceph-mgr</span><br><span class="line">    rook_cluster: rook-ceph</span><br><span class="line">  sessionAffinity: None</span><br><span class="line">  <span class="built_in">type</span>: NodePort</span><br></pre></td></tr></table></figure><ul><li>Service íƒ€ì…ì€ <code>NodePort</code> ë¡œ ì„¤ì •í•œë‹¤. ì´ì™¸ ì™¸ë¶€ë¡œ ë…¸ì¶œí•˜ê³  ì‹¶ë‹¤ë©´ <code>LoadBalancer</code> ë¡œ ë³€ê²½í•œë‹¤. <em>(ë¡œë“œë°¸ëŸ°ì„œ ê²½ìš° í¼ë¸”ë¦­ IPê°€ ì¡´ì¬í•´ì•¼í•œë‹¤.)</em></li><li>rook-ceph-mgr Port ê°€ ë§Œì•½ ë‚˜ì™€ ë‹¤ë¥¸ ë²ˆí˜¸(ì˜ˆ. 7775) ë¡œ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´, ìœ„ yaml ì—ì„œë„ ê°™ì€ í¬íŠ¸ë¡œ ì„¤ì •í•´ì•¼í•œë‹¤.</li></ul><p>ìƒì„±í•œ yaml ì„ ì´ìš©í•´ <code>kubectl apply -f dashboard-external-http.yaml</code> ì»¤ë§¨ë“œë¡œ service ë¥¼ ìƒì„±í•œë‹¤. ì´í›„ ì ‘ì†í•˜ê¸° ìœ„í•œ ì´ˆê¸° admin ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì„ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì»¤ë§¨ë“œë¥¼ ìˆ˜í–‰í•œë‹¤.</p><p><code>kubectl -n rook-ceph get secret rook-ceph-dashboard-password -o jsonpath=&quot;&#123;[&#39;data&#39;][&#39;password&#39;]&#125;&quot; | base64 --decode &amp;&amp; echo</code></p><h1 id="dashboard-ì ‘ì†"><a href="#dashboard-ì ‘ì†" class="headerlink" title=" dashboard ì ‘ì†"></a><a name="connect"></a> dashboard ì ‘ì†</h1><p>í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ì¤‘ í•˜ë‚˜ë¥¼ ê³¨ë¼ <code>https://[ë…¸ë“œip]:[port]</code> ë¡œ ì ‘ì†í•œë‹¤.</p><ul><li>ID/PW:  <code>admin/[ë°”ë¡œ ìœ„ ì»¤ë§¨ë“œ ìˆ˜í–‰ ê²°ê³¼]</code></li><li>ìµœì´ˆ ì ‘ì† í›„ ì„¤ì •ì— ë“¤ì–´ê°€ PWë¥¼ ë°”ê¾¸ë„ë¡ í•˜ì.</li></ul><p>dashboard UI ë¥¼ í†µí•´ ceph cluster ìƒíƒœë¥¼ ì§ê´€ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆì–´ í¸ë¦¬í•˜ê¸´ í•˜ë‹¤.  ê·¸ë˜ë„ ì¡°ê¸ˆ ë” ì¿ ë²„ë„¤í‹°ìŠ¤ì™€ ì¹œí•´ì§€ê¸° ìœ„í•´ ì»¤ë§¨ë“œë¡œ ceph cluster ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ë” ë‚˜ì„ë“¯ í•˜ë‹¤!</p><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="ref"></a> Reference</h1><ul><li><a href="https://github.com/rook/rook/blob/master/Documentation/ceph-dashboard.md">https://github.com/rook/rook/blob/master/Documentation/ceph-dashboard.md</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-export_rook_ceph_dashboard/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë‹¨ìˆœ í‚¤ì›Œë“œ ë§¤ì¹­ ëª¨ë“ˆ</title>
      <link>https://jx2lee.github.io/python-keyword_match/</link>
      <guid>https://jx2lee.github.io/python-keyword_match/</guid>
      <pubDate>Wed, 19 Aug 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;í”„ë¡œì íŠ¸ ì‹œë²” ê³¼ì œ ì¤‘ í•˜ë‚˜ì¸ â€œê²Œì‹œíŒ ë° íšŒì›ê°€ì… ì—¬ë¶€ íŒë‹¨â€ì„ ìœ„í•´ íŒŒì´ì¬ìœ¼ë¡œ ëª¨ë“ˆì„ í•˜ë‚˜ ì‘ì„±í–ˆë‹¤. ì•Œê³ ë¦¬ì¦˜ ìì²´ëŠ” ì •ë§ ë‹¨ìˆœí•œë°, í•´ë‹¹ ê²Œì‹œíŒê³¼ íšŒì›ê°€ì… ì—¬ë¶€ì— ëŒ€í•œ í‚¤ì›Œë“œë¥¼ í†µí•´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ë§Œ í™•ì¸í•˜ì—¬ íŒë‹¨í•œë‹¤. ëª¨ë“ˆ ì‘ì„± ë°°ê²½ê³¼ ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>í”„ë¡œì íŠ¸ ì‹œë²” ê³¼ì œ ì¤‘ í•˜ë‚˜ì¸ â€œê²Œì‹œíŒ ë° íšŒì›ê°€ì… ì—¬ë¶€ íŒë‹¨â€ì„ ìœ„í•´ íŒŒì´ì¬ìœ¼ë¡œ ëª¨ë“ˆì„ í•˜ë‚˜ ì‘ì„±í–ˆë‹¤. ì•Œê³ ë¦¬ì¦˜ ìì²´ëŠ” ì •ë§ ë‹¨ìˆœí•œë°, í•´ë‹¹ ê²Œì‹œíŒê³¼ íšŒì›ê°€ì… ì—¬ë¶€ì— ëŒ€í•œ í‚¤ì›Œë“œë¥¼ í†µí•´ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ë§Œ í™•ì¸í•˜ì—¬ íŒë‹¨í•œë‹¤. ëª¨ë“ˆ ì‘ì„± ë°°ê²½ê³¼ ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.</p><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#background">ëª¨ë“ˆ ì‘ìƒ ë°°ê²½</a></li><li><a href="#howto">ì–´ë–»ê²Œ ì‘ì„±í• ê¹Œ?</a></li><li><a href="#test">í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ”ìš”?</a></li><li><a href="#review">ì–´ë• ë‚˜ìš”?</a></li></ol><h1 id="ëª¨ë“ˆ-ì‘ì„±-ë°°ê²½"><a href="#ëª¨ë“ˆ-ì‘ì„±-ë°°ê²½" class="headerlink" title=" ëª¨ë“ˆ ì‘ì„± ë°°ê²½"></a><a name="background"></a> ëª¨ë“ˆ ì‘ì„± ë°°ê²½</h1><p>ì›ë˜ í‚¤ì›Œë“œ ë§¤ì¹­ ê´€ë ¨ ì‹œë²”ê³¼ì œëŠ” ì£¼ ì‚¬ì—…ì ì˜ì—­ì¸ í¬ë¡¤ëŸ¬ì—ì„œ ìˆ˜í–‰í•˜ê¸°ë¡œ í•˜ì˜€ì§€ë§Œ, ë¹…ë°ì´í„° í”Œë«í¼ì„ êµ¬ì¶•í•˜ë©´ì„œ ë¹…ë°ì´í„° í”Œë«í¼ ì•ˆì—ì„œ ìˆ˜í–‰í•´ì•¼ ê·¸ë¦¼ì´ ì´ì˜ì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ì˜ê²¬ì´ ë‚˜ì™€ ìš°ë¦¬ìª½ì—ì„œ ìˆ˜í–‰í•˜ê¸°ë¡œ ê²°ì •í•˜ì˜€ë‹¤. ê´€ë ¨í•˜ì—¬ ì—°êµ¬ì†Œì— ë¬¸ì˜í–ˆì§€ë§Œ, í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€ì— ëŒ€í•œ ì—°êµ¬ëŠ” ì´ë£¨ì–´ì§€ì§€ ì•Šì•„ ìš°ë¦¬ íŒ€ì—ì„œ ë§¡ì•„ ì§„í–‰í•˜ê¸°ë¡œ í˜‘ì˜í•˜ì˜€ë‹¤.  </p><p>êµ¬ê¸€ë§ì„ í†µí•´ì„œ ë§ì€ í‚¤ì›Œë“œ ë§¤ì¹­ ìë£Œë¥¼ ì°¾ì•˜ì§€ë§Œ, ì‹œë²”ê³¼ì œ ì„±ê²©ì´ í¬ê¸° ë•Œë¬¸ì— ê±°ì°½í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì“°ì§€ ì•Šê¸°ë¡œ í•˜ì˜€ë‹¤. ë‹¨ìˆœ í•´ë‹¹ ì—¬ë¶€ì— ëŒ€í•œ í‚¤ì›Œë“œë¥¼ ë°›ì•„ ì´ í‚¤ì›Œë“œê°€ ìˆëŠ”ì§€? ì—†ëŠ”ì§€? ë§Œ íŒë‹¨í•˜ëŠ” ìª½ìœ¼ë¡œ ì‹œë²”ê³¼ì œë¥¼ ìˆ˜í–‰í•˜ê¸°ë¡œ í–ˆë‹¤.  </p><p>ìš°ë¦¬ëŠ” ì´ 2ê°œ DB table ì—ì„œ ë°ì´í„°ë¥¼ ë°›ê¸°ë¡œ í–ˆë‹¤. ì²« ë²ˆì§¸ ëŠ” <em>URL / URL ë‚´ í…ìŠ¤íŠ¸ / timestamp</em> ì¹¼ëŸ¼ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í…Œì´ë¸”ì´ë‹¤. ë‘ ë²ˆì§¸ ëŠ” <em>keyword type / keyword value (type: í•´ë‹¹ í”„ë¡œì íŠ¸ì—ì„œëŠ” íšŒì›ê°€ì… ê³¼ ê²Œì‹œíŒ)</em> ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í…Œì´ë¸”ì´ë‹¤. ìœ„ í…Œì´ë¸” ë°ì´í„°ëŠ” ìš°ë¦¬ ì œí’ˆ python API ë¥¼ ì´ìš©í•´ dataframe ìœ¼ë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ìƒí™©ì´ë‹¤.  </p><blockquote><p><em>ëª¨ë“ˆ ì‘ì„± ë°°ê²½: í”„ë¡œì íŠ¸ ì‹œë²”ê³¼ì œ ì¤‘ í‚¤ì›Œë“œ ë§¤ì¹­ì„ Pyhthon ìœ¼ë¡œ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‘ì„±!</em></p></blockquote><h1 id="ì–´ë–»ê²Œ-ì‘ì„±í• ê¹Œ"><a href="#ì–´ë–»ê²Œ-ì‘ì„±í• ê¹Œ" class="headerlink" title=" ì–´ë–»ê²Œ ì‘ì„±í• ê¹Œ?"></a><a name="howto"></a> ì–´ë–»ê²Œ ì‘ì„±í• ê¹Œ?</h1><p>ì‚¬ì‹¤ ë§‰ë§‰í–ˆë‹¤. ì•„ë‹ˆ, ëŒ€ì¶©ëŒ€ì¶© ì§œë©´ ê¸ˆë°© ì§¤ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ì§€ë§Œ Python ì—­ëŸ‰ì„ í‚¤ì›Œë³¼ ê²¸ ëª¨ë“ˆí™”ë¡œ ì§„í–‰í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤. ê·¸ëŸ¬ë˜ ì¤‘, <a href="https://github.com/vi3k6i5/flashtext">FlashText</a> ì•Œê³ ë¦¬ì¦˜ì„ ì°¾ì•˜ê³  ì´ íŒ¨í‚¤ì§€ë¥¼ ì°¸ê³ í•˜ê³ ì í–ˆë‹¤. ë³¸ íŒ¨í‚¤ì§€ëŠ” <strong>string/list/dictionary/file</strong> ë¡œ ë°ì´í„°ë¥¼ ì½ì–´ì™€ í•´ë‹¹ í‚¤ì›Œë“œ ì‚¬ì „ì„ ë§Œë“¤ê³ , ë³€í™˜í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. í•˜ì§€ë§Œ ë‚´ê°€ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ê²ƒì€ <strong>Pandas Dataframe</strong> í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë‹¤ë¤„ì•¼ í•˜ê¸° ë•Œë¬¸ì—, FlashText <strong>KeywordProcessor</strong> í´ë˜ìŠ¤ë¥¼ ì°¨ìš©í•˜ì—¬ ì‘ì„±í•˜ì˜€ë‹¤.  </p><p>ê´€ë ¨ ëª¨ë“ˆ ì‚¬ìš©ë²•ì€ <a href="https://github.com/jx2lee/keywordmatch">Github</a>ì— ì˜¬ë ¤ë‘ì—ˆë‹¤. ì°¸ê³ í•˜ê¸¸ ë°”ë¼ë©°, í”„ë¡œì íŠ¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ <strong>ê¸ˆìœµì¸ì§€, ì£¼íƒì¸ì§€?</strong> ì— ëŒ€í•œ í‚¤ì›Œë“œ ë§¤ì¹­ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³¸ë‹¤.  </p><blockquote><p><em>ì–´ë–»ê²Œ? FlashText ëª¨ë“ˆ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±!</em></p></blockquote><h1 id="í…ŒìŠ¤íŠ¸-ê²°ê³¼ëŠ”ìš”"><a href="#í…ŒìŠ¤íŠ¸-ê²°ê³¼ëŠ”ìš”" class="headerlink" title=" í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ”ìš”?"></a><a name="test"></a> í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ”ìš”?</h1><p><a href="https://github.com/jx2lee/keywordmatch">Github</a>ì— <strong>example.py</strong> ë¡œ ì‘ì„±í•˜ì˜€ë‹¤. ê·œì¹™ìœ¼ë¡œëŠ” test í•  ìˆ˜ ìˆëŠ” document ë“±ì„ ì‘ì„±í•´ì•¼ì§€ë§Œ ê·¸ê±´ ì¶”í›„ì— ì‹œê°„ì´ ë‚¨ëŠ”ë‹¤ë©´ ì§„í–‰í•˜ë„ë¡ í•œë‹¤. <strong>exmaple.py</strong> ëŠ” ë‹¤ìŒê³¼ ê°™ê³  ê° ì¤„ ë§ˆë‹¤ ì§§ì€ ì„¤ëª…ì„ ë‹¬ë„ë¡ í•˜ê² ë‹¤.  </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> keywordmatch <span class="keyword">import</span> MatchingProcessor</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;example.pickle&quot;</span>, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        test_df = pickle.load(f)</span><br><span class="line">    test_df_keyword = pd.DataFrame(&#123;<span class="string">&#x27;íƒ€ì…&#x27;</span>:[<span class="string">&#x27;ê¸ˆìœµ&#x27;</span>, <span class="string">&#x27;ì£¼íƒ&#x27;</span>, <span class="string">&#x27;ê¸ˆìœµ&#x27;</span>, <span class="string">&#x27;ì£¼íƒ&#x27;</span>, <span class="string">&#x27;ê¸ˆìœµ&#x27;</span>, <span class="string">&#x27;ì£¼íƒ&#x27;</span>],</span><br><span class="line">                                    <span class="string">&#x27;í‚¤ì›Œë“œ&#x27;</span>:[<span class="string">&#x27;ì€í–‰&#x27;</span>, <span class="string">&#x27;ì¤‘ë‘êµ¬&#x27;</span>, <span class="string">&#x27;ì†¡ê¸ˆ&#x27;</span>, <span class="string">&#x27;ë¶€ì‚°&#x27;</span>, <span class="string">&#x27;ì¶œê¸ˆ&#x27;</span>, <span class="string">&#x27;ê²½ë‚¨&#x27;</span>]&#125;)</span><br><span class="line"></span><br><span class="line">    instance = MatchingProcessor(test_df, <span class="string">&#x27;ê¸°ì‚¬ë‚´ìš©&#x27;</span>, [<span class="string">&#x27;ì£¼íƒ&#x27;</span>, <span class="string">&#x27;ê¸ˆìœµ&#x27;</span>])</span><br><span class="line">    instance.set_logger(<span class="string">&#x27;t1&#x27;</span>, is_file=<span class="literal">False</span>)</span><br><span class="line">    instance.add_column()</span><br><span class="line">    instance.get_keyword_processor(test_df_keyword, <span class="string">&#x27;íƒ€ì…&#x27;</span>, <span class="string">&#x27;í‚¤ì›Œë“œ&#x27;</span>)</span><br><span class="line">    result = instance.is_keyword()</span><br><span class="line"></span><br><span class="line">    instance._data[<span class="string">&#x27;ìˆ˜ì§‘ì‹œê°„&#x27;</span>] = datetime(<span class="number">2020</span>, <span class="number">8</span>, <span class="number">19</span>).strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br><span class="line">    tibero = &#123;<span class="string">&#x27;ip&#x27;</span>: <span class="string">&#x27;192.168.179.166&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;port&#x27;</span>: <span class="string">&#x27;8629&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;sid&#x27;</span>: <span class="string">&#x27;tibero&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;id_pw&#x27;</span>: [<span class="string">&#x27;tibero&#x27;</span>, <span class="string">&#x27;tmax&#x27;</span>],</span><br><span class="line">              <span class="string">&#x27;output_columns&#x27;</span>: [<span class="string">&#x27;ê¸°ì‚¬ì œëª©&#x27;</span>, <span class="string">&#x27;ê¸°ì‚¬ë‚´ìš©&#x27;</span>, <span class="string">&#x27;ìˆ˜ì§‘ì‹œê°„&#x27;</span>],</span><br><span class="line">              <span class="string">&#x27;table&#x27;</span>: <span class="string">&#x27;CRAWLER_DATA&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;table_columns&#x27;</span>: [<span class="string">&#x27;DETECTED_LINK&#x27;</span>, <span class="string">&#x27;DETECTED_CONTENTS&#x27;</span>, <span class="string">&#x27;DETECTED_TIME&#x27;</span>]&#125;</span><br><span class="line">    instance.save_output_database(jar_file=<span class="string">&#x27;/Users/jj/python/coding-test/tibero6-jdbc.jar&#x27;</span>, db_info=tibero)</span><br></pre></td></tr></table></figure><ul><li><strong>Line 1-4</strong>: íŒ¨í‚¤ì§€ import ë¶€ë¶„, ì„¤ì¹˜í•œ íŒ¨í‚¤ì§€ëŠ” <em>Jaydebeapi, pandas</em></li><li><strong>Line 7-10</strong>: ì²« ë²ˆì§¸ í…Œì´ë¸”ê³¼ ë‘ ë²ˆì§¸ í…Œì´ë¸” ë°ì´í„°ë¥¼ DataFrame ìœ¼ë¡œ ë¡œë“œ</li><li><strong>Line 12-16</strong>: <strong>MatchingProcessor</strong> í´ë˜ìŠ¤ë¡œ ìƒì„±í•œ ê°ì²´ë¡œ í…ŒìŠ¤íŠ¸</li><li><strong>Line 18</strong>: í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ TimeStamp ì—´ ì¶”ê°€</li><li><strong>Line 19-25</strong>: DB info ë¥¼ dictionary í˜•íƒœë¡œ í‘œí˜„</li><li><strong>Line 26</strong>: í•´ë‹¹ DB ë¡œ Insert í•¨ìˆ˜ ì‹¤í–‰</li></ul><p><strong>ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:</strong>  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">~/python/keywordmatch master</span><br><span class="line">keyword-matching â¯ python example.py</span><br><span class="line">[2020-08-20 16:29:16,632][INFO] Finished Adding Columns: [<span class="string">&#x27;ì£¼íƒ&#x27;</span>, <span class="string">&#x27;ê¸ˆìœµ&#x27;</span>]</span><br><span class="line">[2020-08-20 16:29:16,636][INFO] Finished Setting Keyword_processor: &#123;<span class="string">&#x27;ì¤‘ë‘êµ¬&#x27;</span>: <span class="string">&#x27;ì£¼íƒ&#x27;</span>, <span class="string">&#x27;ë¶€ì‚°&#x27;</span>: <span class="string">&#x27;ì£¼íƒ&#x27;</span>, <span class="string">&#x27;ê²½ë‚¨&#x27;</span>: <span class="string">&#x27;ì£¼íƒ&#x27;</span>, <span class="string">&#x27;ì€í–‰&#x27;</span>: <span class="string">&#x27;ê¸ˆìœµ&#x27;</span>, <span class="string">&#x27;ì†¡ê¸ˆ&#x27;</span>: <span class="string">&#x27;ê¸ˆìœµ&#x27;</span>, <span class="string">&#x27;ì¶œê¸ˆ&#x27;</span>: <span class="string">&#x27;ê¸ˆìœµ&#x27;</span>&#125;</span><br><span class="line">[2020-08-20 16:29:16,636][INFO] Start Keyword Match.</span><br><span class="line">100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8468/8468 [00:05&lt;00:00, 1530.62it/s]</span><br><span class="line">[2020-08-20 16:29:22,200][INFO] Finished Keyword Match.</span><br><span class="line">[2020-08-20 16:29:23,781][INFO] Connected Tibero: 192.168.179.166:8629:tibero</span><br><span class="line">[2020-08-20 16:29:23,781][INFO] Started Creating SQL dump.</span><br><span class="line">100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8468/8468 [00:00&lt;00:00, 50532.56it/s]</span><br><span class="line">[2020-08-20 16:29:23,964][INFO] Finished Creating SQL dump. dump size: 8468</span><br><span class="line">[2020-08-20 16:29:23,964][INFO] Started pushing data. SQL Query: INSERT INTO CRAWLER_DATA VALUES (?,?,?)</span><br><span class="line">[2020-08-20 16:29:25,305][INFO] Finished pushing data.</span><br><span class="line">[2020-08-20 16:29:25,305][INFO] Disconnected Tibero.</span><br></pre></td></tr></table></figure><h1 id="ì–´ë• ë‚˜ìš”"><a href="#ì–´ë• ë‚˜ìš”" class="headerlink" title=" ì–´ë• ë‚˜ìš”?"></a><a name="review"></a> ì–´ë• ë‚˜ìš”?</h1><p>í‚¤ì›Œë“œ ë§¤ì¹­ì´ ì œëŒ€ë¡œ ìˆ˜í–‰ë˜ì—ˆëŠ”ì§€ëŠ” ì•„ë¬´ë„ ëª¨ë¥¸ë‹¤. ë‚˜ëŠ” ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ <strong>Python</strong> ì„ ì¢€ ë” ì‚´í´ë³¼ ìˆ˜ ìˆëŠ” ê¸°íšŒì˜€ê³ , ì¢€ ë” ë‹¤ì–‘í•œ ëª¨ë“ˆì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ì—­ëŸ‰ì„ í™•ë³´í•œ ê²ƒìœ¼ë¡œ ë§Œì¡±í•œë‹¤. ë¬¼ë¡  í”„ë¡œì íŠ¸ì—ëŠ” ì´ ëª¨ë“ˆì„ ë“¤ê³  ë“¤ì–´ê°ˆ ìƒê°ì´ë‹¤. ì™œ? ê²°ê³¼ê°€ ì œëŒ€ë¡œ ë‚˜ì™”ëŠ”ì§€ëŠ” ê³ ê°ë„ ëª¨ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. ë¬¼ë¡  ì¢€ ë” ê²°ê³¼ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ìƒê°í•˜ê³  ì¶”ê°€í•´ë³´ë„ë¡ ë…¸ë ¥í•˜ê² ì§€ë§Œ.. 10ì›” ë§ ëª©í‘œì¸ ì´ í”„ë¡œì íŠ¸ì—ì„œ<em>(ì•„ ë¬¼ë¡  í•œ ë‹¬ ì •ë„ ë”œë ˆì´ ë  ì˜ˆì •)</em> íŠœë‹ì€ í•„ìš”í•  ì§€ ëª¨ë¥´ê² ë‹¤. ì•„, ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•œ ë¶€ë¶„ì€ ì•„ë§ˆ ì´ëŸ¬í•œ í‚¤ì›Œë“œ ë§¤ì¹­ì„ ë°°ì¹˜ì„±ìœ¼ë¡œ ìˆ˜í–‰í• ì§€ëŠ” ì§ì ‘ ë“¤ì–´ê°€ë´ì•¼ ì•Œ ê²ƒ ê°™ë‹¤.  </p><p>í•˜ì—¬íŠ¼, Pythonì„ ë” ì•Œì•„ë³´ê³  ì‹¶ì€ ë§ˆìŒì´ ìƒê²¼ë‹¤.</p><blockquote><p><em>ê²°ë¡ : Python ì„ ì•Œê²Œë˜ë©´ì„œ ì ì  ë¹ ì ¸ë“¤ì—ˆë‹¤.</em> </p></blockquote><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/python-keyword_match/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] SQL í•¨ìˆ˜ ì •ë¦¬</title>
      <link>https://jx2lee.github.io/sql-function/</link>
      <guid>https://jx2lee.github.io/sql-function/</guid>
      <pubDate>Tue, 21 Jul 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;í”„ë¡œì íŠ¸ ì°¸ì—¬ ì¤‘ ë°ì´í„° ë§ˆíŠ¸ êµ¬ì¶•ì„ ìœ„í•œ SQL ì¿¼ë¦¬ë¥¼ ë¶„ì„í•˜ë©´ì„œ, ê´€ë ¨ëœ ì§€ì‹ì„ ë‚´ ë¨¸ë¦¿ì†ì— ìŒ“ê¸°(?)ìœ„í•´ ì •ë¦¬í•œë‹¤. í•„ìš” ì‹œ ì—…ë°ì´íŠ¸ í•  ì˜ˆì •&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>í”„ë¡œì íŠ¸ ì°¸ì—¬ ì¤‘ ë°ì´í„° ë§ˆíŠ¸ êµ¬ì¶•ì„ ìœ„í•œ SQL ì¿¼ë¦¬ë¥¼ ë¶„ì„í•˜ë©´ì„œ, ê´€ë ¨ëœ ì§€ì‹ì„ ë‚´ ë¨¸ë¦¿ì†ì— ìŒ“ê¸°(?)ìœ„í•´ ì •ë¦¬í•œë‹¤. í•„ìš” ì‹œ ì—…ë°ì´íŠ¸ í•  ì˜ˆì •</p><a id="more"></a><h1 id="DECODE"><a href="#DECODE" class="headerlink" title="DECODE"></a>DECODE</h1><p>í‘œì¤€ SQL í•¨ìˆ˜ëŠ” ì•„ë‹ˆì§€ë§Œ ì˜ ì‚¬ìš©í•˜ë©´ í¸í•œ ì˜¤ë¼í´ í•¨ìˆ˜, <code>CASE WHEN</code> êµ¬ë¬¸ì„ ê¶Œì¥í•˜ê¸°ë„ í•˜ì§€ë§Œ ì´ì™• ë‚˜ì™”ìœ¼ë‹ˆ ê³µë¶€í•´ë³´ì.<br><code>DECODE</code> ëŠ” Programming ì—ì„œì˜ <code>if else</code> ì™€ ê°™ì€ ì—­í• ì„ í•œë‹¤. ì‚¬ìš©ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DECODE(&#123;column&#125;, &#123;condition_01&#125;, &#123;return_01&#125;, &#123;condition_02&#125;, &#123;return_02&#125;, &#123;condition_03&#125;, &#123;return_03&#125;, ...)</span><br><span class="line"></span><br><span class="line"><span class="comment">--example</span></span><br><span class="line"></span><br><span class="line">DECODE(WEB_CACHE_URL,NULL,A.DOMAIN_SEQ,100000001)</span><br></pre></td></tr></table></figure><ul><li><code>WEB_CACHE_URL</code> ì¹¼ëŸ¼ì´ ë§Œì•½ NULL ì´ë¼ë©´ A í…Œì´ë¸” <code>DOMAIN_SEQ</code> ëŒ€ì…</li><li>ë§Œì•½ NULLì´ ì•„ë‹ˆë©´ 100000001 ëŒ€ì…</li><li>ê²°ë¡ : <code>WEB_CACHE_URL</code> ì¹¼ëŸ¼ì´ ë§Œì•½ NULL ì´ë¼ë©´ A í…Œì´ë¸” <code>DOMAIN_SEQ</code> ê°’ì„ ëŒ€ì…í•˜ê³  ì•„ë‹ˆë©´ 100000001 ëŒ€ì…</li></ul><h1 id="CASE-WHEN"><a href="#CASE-WHEN" class="headerlink" title="CASE WHEN"></a>CASE WHEN</h1><p><code>DECODE</code> ëŒ€ì‹  <code>CASE WHEN</code> ì„ ê¶Œì¥í•œë‹¤ë‹ˆ ì•Œì•„ë³´ë„ë¡ í•œë‹¤. <code>DECODE</code> ë‘ ê°™ì´ <code>if else</code> ì™€ ê°™ì€ ì—­í• ì„ í•˜ë©° <code>CASE WHEN</code> ì´ ê°€ë…ì„±ì´ ë” ì¢‹ë‹¤ê³ ë“¤ í•œë‹¤. ì‚¬ìš©ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">CASE WHEN &#123;condition_01&#125; THEN &#123;return_01&#125;</span><br><span class="line"> WHEN &#123;condition_02&#125; THEN &#123;return_02&#125;</span><br><span class="line"> ...</span><br><span class="line"> ELSE &#123;return_other&#125;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--example</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CASE</span> <span class="keyword">WHEN</span> ( <span class="keyword">SELECT</span> CODE_NM</span><br><span class="line">              <span class="keyword">FROM</span> COMTCCMMNDETAILCODE</span><br><span class="line">             <span class="keyword">WHERE</span> CODE = D.DOMAIN_CODE2) <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">OR</span> ( <span class="keyword">SELECT</span> CODE_NM</span><br><span class="line">                                                             <span class="keyword">FROM</span> COMTCCMMNDETAILCODE</span><br><span class="line">                                                            <span class="keyword">WHERE</span> CODE = D.DOMAIN_CODE2) != <span class="string">&#x27;&#x27;</span> <span class="keyword">THEN</span> ( <span class="keyword">SELECT</span> CODE_NM</span><br><span class="line">                                                                                                        <span class="keyword">FROM</span> COMTCCMMNDETAILCODE</span><br><span class="line">                                                                                                       <span class="keyword">WHERE</span> CODE = D.DOMAIN_CODE2) <span class="keyword">ELSE</span> <span class="literal">NULL</span> <span class="keyword">END</span> <span class="keyword">AS</span> CODE_NM2</span><br></pre></td></tr></table></figure><ul><li>condition<ul><li>COMTCCMMNDETAILCODE í…Œì´ë¸”ì—ì„œ <code>CODE</code>ê°€ D í…Œì´ë¸” <code>DOMATIN_CODE2</code> ì™€ ê°™ì„ë•Œ, <code>CODE_NM</code> ì´ NULL ì´ ì•„ë‹ˆê±°ë‚˜ <em>(or)</em></li><li>COMTCCMMNDETAILCODE í…Œì´ë¸”ì—ì„œ <code>CODE</code>ê°€ D í…Œì´ë¸” <code>DOMATIN_CODE2</code> ì™€ ê°™ì„ë•Œ, <code>CODE_NM</code> ì´ â€˜â€™ ì´ ì•„ë‹ˆë¼ë©´</li></ul></li><li>return: COMTCCMMNDETAILCODE í…Œì´ë¸”ì—ì„œ <code>CODE</code>ê°€ D í…Œì´ë¸” <code>DOMATIN_CODE2</code> ì™€ ê°™ì„ë•Œ <code>CODE_NM</code> ëŒ€ì…</li><li>ELSE: NULL ëŒ€ì…</li><li>ê²°ë¡ : <code>CODE_NM</code> ê°’ì´ ìˆìœ¼ë©´ <code>CODE_NM</code>, ì—†ìœ¼ë©´ NULL</li></ul><h1 id="CAST"><a href="#CAST" class="headerlink" title="CAST"></a>CAST</h1><p>ì¹¼ëŸ¼ í˜•ë³€í™˜ì— ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ë¡œ UNION(UNION ALL) ì‚¬ìš© ì‹œ ì¹¼ëŸ¼ í˜•íƒœë¥¼ ì¼ì¹˜ì‹œí‚¬ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì‚¬ìš©ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CAST(&#123;column&#125; as &#123;data_type&#123;length&#125;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">--exmaple</span></span><br><span class="line"></span><br><span class="line">CAST(A.DETECTED_LINK AS NVARCHAR(4000)) AS DETECTED_LINK</span><br></pre></td></tr></table></figure><ul><li>A í…Œì´ë¸” <code>DETECTED_LINK</code> ì¹¼ëŸ¼ì„ <em>NVARCHAR</em> length 4000 í˜•íƒœë¡œ ë³€í™˜</li></ul><h1 id="INSTR"><a href="#INSTR" class="headerlink" title="INSTR"></a>INSTR</h1><p>ë¬¸ìì—´ì— íŠ¹ì • ë¬¸ìì—´(substring)ì„ ê²€ìƒ‰í•´ì„œ ìœ„ì¹˜ë¥¼ return(ë§Œì•½ ì—†ë‹¤ë©´ 0) í•˜ëŠ” í•¨ìˆ˜ë¡œ ì‚¬ìš©ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INSTR(&#123;string or column&#125; &#123;substring&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">--example</span></span><br><span class="line"></span><br><span class="line">INSTR(D.exposure_type, &#x27;S01&#x27;)</span><br></pre></td></tr></table></figure><ul><li>D í…Œì´ë¸” <code>EXPOSURE_TYPE</code> ì¹¼ëŸ¼ ë‚´ S01 ë¬¸ìì—´ ìœ„ì¹˜ë¥¼ ë°˜í™˜</li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://gent.tistory.com/227">https://gent.tistory.com/227</a></li><li><a href="https://gent.tistory.com/311">https://gent.tistory.com/311</a></li><li><a href="http://www.incodom.kr/SQL/INSTR%2CINSTRB">http://www.incodom.kr/SQL/INSTR%2CINSTRB</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/sql-function/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Etcd ë°±ì—…ì„ ìœ„í•œ CronJob ìƒì„±</title>
      <link>https://jx2lee.github.io/cloud-etcd_cronjob/</link>
      <guid>https://jx2lee.github.io/cloud-etcd_cronjob/</guid>
      <pubDate>Tue, 16 Jun 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ìµœê·¼ Control Plane ë…¸ë“œ ë³µêµ¬ ë•Œë¬¸ì— Etcd ë°±ì—…ì— ëŒ€í•œ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ë‹¤. ë§¤ íŠ¹ì • ì‹œê°„ ìŠ¤ëƒ…ìƒ·ì„ ì°ì–´ë‚´ëŠ” CronJob ì„ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ìµœê·¼ Control Plane ë…¸ë“œ ë³µêµ¬ ë•Œë¬¸ì— Etcd ë°±ì—…ì— ëŒ€í•œ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ë‹¤. ë§¤ íŠ¹ì • ì‹œê°„ ìŠ¤ëƒ…ìƒ·ì„ ì°ì–´ë‚´ëŠ” CronJob ì„ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><a id="more"></a><h1 id="ì¤€ë¹„ì‚¬í•­"><a href="#ì¤€ë¹„ì‚¬í•­" class="headerlink" title="ì¤€ë¹„ì‚¬í•­"></a>ì¤€ë¹„ì‚¬í•­</h1><h2 id="control-plane-ë…¸ë“œì˜-ì¸ì¦ì„œ-íŒŒì¼"><a href="#control-plane-ë…¸ë“œì˜-ì¸ì¦ì„œ-íŒŒì¼" class="headerlink" title="control plane ë…¸ë“œì˜ ì¸ì¦ì„œ íŒŒì¼"></a>control plane ë…¸ë“œì˜ ì¸ì¦ì„œ íŒŒì¼</h2><ul><li><code>/etc/kubernetes/pki/ca.crt</code></li><li><code>/etc/kubernetes/pki/ca.key</code></li></ul><h2 id="etcd-ë²„ì „-í™•ì¸"><a href="#etcd-ë²„ì „-í™•ì¸" class="headerlink" title="etcd ë²„ì „ í™•ì¸"></a>etcd ë²„ì „ í™•ì¸</h2><ul><li>cluster ë‚´ etcd íŒŒë“œë¥¼ ì¡°íšŒí•˜ì—¬ ë²„ì ¼ ì²´í¬<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl describe pod/etcd-k8s-master -n kube-system | grep Image:</span><br><span class="line">    Image:         k8s.gcr.io/etcd:3.3.10</span><br></pre></td></tr></table></figure></li></ul><h2 id="setup-sh"><a href="#setup-sh" class="headerlink" title="setup.sh"></a><code>setup.sh</code></h2><ul><li>apply í•  yaml íŒŒì¼ ë‚´ docker registry ì™€ node name ì„ ë³€ê²½í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸</li><li><code>Usage</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./setup.sh</span><br><span class="line">Usage   : ./script.sh &#123;registry_endpoint&#125; &#123;master_node&#125;</span><br><span class="line">Example : ./script.sh 192.168.179.185:5000 k8s-master</span><br></pre></td></tr></table></figure></li></ul><h1 id="etcd-snapshot-yaml"><a href="#etcd-snapshot-yaml" class="headerlink" title="etcd_snapshot.yaml"></a><code>etcd_snapshot.yaml</code></h1><h2 id="control-plane-ì¸ì¦ì„œ-íŒŒì¼ì„-volume-ë¶€ë¶„-etc-kubernetes-pki-etcd-í´ë”ì—-ë³µì‚¬"><a href="#control-plane-ì¸ì¦ì„œ-íŒŒì¼ì„-volume-ë¶€ë¶„-etc-kubernetes-pki-etcd-í´ë”ì—-ë³µì‚¬" class="headerlink" title="control plane ì¸ì¦ì„œ íŒŒì¼ì„ volume ë¶€ë¶„ /etc/kubernetes/pki/etcd í´ë”ì— ë³µì‚¬"></a>control plane ì¸ì¦ì„œ íŒŒì¼ì„ <code>volume</code> ë¶€ë¶„ <code>/etc/kubernetes/pki/etcd</code> í´ë”ì— ë³µì‚¬</h2><h2 id="etcd-ë°±ì—…-ìŠ¤ëƒ…ìƒ·ì˜-ì €ì¥-ìœ„ì¹˜ë¥¼-volume-ë¶€ë¶„-backup-ìœ¼ë¡œ-ì„¤ì •"><a href="#etcd-ë°±ì—…-ìŠ¤ëƒ…ìƒ·ì˜-ì €ì¥-ìœ„ì¹˜ë¥¼-volume-ë¶€ë¶„-backup-ìœ¼ë¡œ-ì„¤ì •" class="headerlink" title="etcd ë°±ì—… ìŠ¤ëƒ…ìƒ·ì˜ ì €ì¥ ìœ„ì¹˜ë¥¼ volume ë¶€ë¶„ backup ìœ¼ë¡œ ì„¤ì •"></a>etcd ë°±ì—… ìŠ¤ëƒ…ìƒ·ì˜ ì €ì¥ ìœ„ì¹˜ë¥¼ <code>volume</code> ë¶€ë¶„ <code>backup</code> ìœ¼ë¡œ ì„¤ì •</h2><ul><li>ìŠ¤ëƒ…ìƒ·ì´ í•´ë‹¹ ë””ë ‰í† ë¦¬ì— ì €ì¥</li><li>ì›í•˜ëŠ” ìŠ¤ëƒ…ìƒ· ì €ì¥ ì£¼ê¸°ë¥¼ crontab ìœ¼ë¡œ í‘œí˜„<ul><li>ë³¸ì¸ì€ ë§¤ì¼ ì˜¤ì „ 6ì‹œì— ìˆ˜í–‰í•˜ëŠ” <code>0 6 * * *</code> ìœ¼ë¡œ ì„¤ì •</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CronJob</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">etcd-backup</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">schedule:</span> <span class="string">&quot;0 6 * * *&quot;</span></span><br><span class="line">  <span class="attr">jobTemplate:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">template:</span></span><br><span class="line">        <span class="attr">spec:</span></span><br><span class="line">          <span class="attr">containers:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">etcd-backup</span></span><br><span class="line">            <span class="attr">image:</span> &#123;<span class="string">registry_endpoint</span>&#125;<span class="string">/k8s.gcr.io/etcd:3.3.10</span></span><br><span class="line">            <span class="attr">env:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ETCDCTL_API</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line">            <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>]</span><br><span class="line">            <span class="attr">args:</span> [<span class="string">&quot;-c&quot;</span>, <span class="string">&quot;etcdctl --endpoints=https://127.0.0.1:2379 --cacert=/etc/kubernetes/pki/etcd/ca.crt --cert=/etc/kubernetes/pki/etcd/healthcheck-client.crt --key=/etc/kubernetes/pki/etcd/healthcheck-client.key snapshot save /backup/etcd-snapshot-$(date +%Y-%m-%d_%H-%M-%S_%Z).db&quot;</span>]</span><br><span class="line">            <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/etc/kubernetes/pki/etcd</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">etcd-certs</span></span><br><span class="line">              <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/backup</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">backup</span></span><br><span class="line">          <span class="attr">restartPolicy:</span> <span class="string">OnFailure</span></span><br><span class="line">          <span class="attr">nodeSelector:</span></span><br><span class="line">            <span class="attr">kubernetes.io/hostname:</span> &#123;<span class="string">master_node</span>&#125;</span><br><span class="line">          <span class="attr">tolerations:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">effect:</span> <span class="string">NoSchedule</span></span><br><span class="line">            <span class="attr">operator:</span> <span class="string">Exists</span></span><br><span class="line">          <span class="attr">hostNetwork:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">volumes:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">etcd-certs</span></span><br><span class="line">            <span class="attr">hostPath:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/etc/kubernetes/pki/etcd</span></span><br><span class="line">              <span class="attr">type:</span> <span class="string">DirectoryOrCreate</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">backup</span></span><br><span class="line">            <span class="attr">hostPath:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/etc/kubernetes/pki/etcd/snapshot</span></span><br><span class="line">              <span class="attr">type:</span> <span class="string">DirectoryOrCreate</span></span><br></pre></td></tr></table></figure><h2 id="script-ì‹¤í–‰ìœ¼ë¡œ-etcd-snapshot-yaml-ë‚´-node-name-ê³¼-private-registry-ì£¼ì†Œ-ë³€ê²½"><a href="#script-ì‹¤í–‰ìœ¼ë¡œ-etcd-snapshot-yaml-ë‚´-node-name-ê³¼-private-registry-ì£¼ì†Œ-ë³€ê²½" class="headerlink" title="script ì‹¤í–‰ìœ¼ë¡œ etcd_snapshot.yaml ë‚´ node name ê³¼ private registry ì£¼ì†Œ ë³€ê²½"></a>script ì‹¤í–‰ìœ¼ë¡œ <code>etcd_snapshot.yaml</code> ë‚´ node name ê³¼ private registry ì£¼ì†Œ ë³€ê²½</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./setup.sh 192.168.179.185:5000 k8s-master</span><br></pre></td></tr></table></figure><h1 id="ë°°í¬"><a href="#ë°°í¬" class="headerlink" title="ë°°í¬"></a>ë°°í¬</h1><p><code>$ kubectl apply -f etcd_snapshot.yaml</code></p><h1 id="ë°°í¬-í™•ì¸"><a href="#ë°°í¬-í™•ì¸" class="headerlink" title="ë°°í¬ í™•ì¸"></a>ë°°í¬ í™•ì¸</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get cronjob -n kube-system</span><br><span class="line">NAME          SCHEDULE    SUSPEND   ACTIVE   LAST SCHEDULE   AGE</span><br><span class="line">etcd-backup   0 6 * * *   False     0        &lt;none&gt;          14m</span><br><span class="line"></span><br><span class="line">$ ll /etc/kubernetes/pki/etcd/snapshot</span><br><span class="line">drwxr-xr-x 2 root root     4096  6ì›” 18 15:00 ./</span><br><span class="line">drwxr-xr-x 3 root root     4096  6ì›” 17 15:00 ../</span><br><span class="line">-rw-r--r-- 1 root root 41095200  6ì›” 17 15:00 etcd-snapshot-2020-06-17_06-00-04_UTC.db</span><br><span class="line">-rw-r--r-- 1 root root 41095200  6ì›” 18 15:00 etcd-snapshot-2020-06-18_06-00-08_UTC.db</span><br></pre></td></tr></table></figure><ul><li><code>hostPath</code> ë¡œ ì„¤ì •í•œ <code>/etc/kubernetes/pki/etcd/snapshot</code> ë‚´ snapshot.db í™•ì¸</li></ul><blockquote><p><em>ì†ŒìŠ¤ì½”ë“œëŠ” <a href="https://github.com/jx2lee/etcd-cronjob">https://github.com/jx2lee/etcd-cronjob</a> ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</em></p></blockquote><h1 id="Refernce"><a href="#Refernce" class="headerlink" title="Refernce"></a>Refernce</h1><ul><li><a href="https://labs.consol.de/kubernetes/2018/05/25/kubeadm-backup.html">https://labs.consol.de/kubernetes/2018/05/25/kubeadm-backup.html</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-etcd_cronjob/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[TroubleShoot] Control Plane Node ì¶”ê°€</title>
      <link>https://jx2lee.github.io/troubleshoot-add_controlplane_node/</link>
      <guid>https://jx2lee.github.io/troubleshoot-add_controlplane_node/</guid>
      <pubDate>Mon, 15 Jun 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;í´ëŸ¬ìŠ¤í„° ìš´ì˜ ì‹œ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œê°€ ì‚­ì œë˜ì—ˆì„ ë•Œ í´ëŸ¬ìŠ¤í„°ì— ì¬ ì¶”ê°€í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>í´ëŸ¬ìŠ¤í„° ìš´ì˜ ì‹œ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œê°€ ì‚­ì œë˜ì—ˆì„ ë•Œ í´ëŸ¬ìŠ¤í„°ì— ì¬ ì¶”ê°€í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤.</p><a id="more"></a><h1 id="Kubernetes-ì»¨íŠ¸ë¡¤-í”Œë ˆì¸-ë…¸ë“œ-ì¶”ê°€-ë°©ë²•"><a href="#Kubernetes-ì»¨íŠ¸ë¡¤-í”Œë ˆì¸-ë…¸ë“œ-ì¶”ê°€-ë°©ë²•" class="headerlink" title="Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì¶”ê°€ ë°©ë²•"></a>Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ë…¸ë“œ ì¶”ê°€ ë°©ë²•</h1><h2 id="ê¸°ì¡´-í´ëŸ¬ìŠ¤í„°-ë…¸ë“œ-ë‚´-etc-kubernetes-pki-í´ë”ë¥¼-ì¶”ê°€-ë…¸ë“œì˜-etc-kubernetesì—-ë³µì‚¬"><a href="#ê¸°ì¡´-í´ëŸ¬ìŠ¤í„°-ë…¸ë“œ-ë‚´-etc-kubernetes-pki-í´ë”ë¥¼-ì¶”ê°€-ë…¸ë“œì˜-etc-kubernetesì—-ë³µì‚¬" class="headerlink" title="ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ë‚´ /etc/kubernetes/pki í´ë”ë¥¼ ì¶”ê°€ ë…¸ë“œì˜ /etc/kubernetesì— ë³µì‚¬"></a>ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ë‚´ <strong>/etc/kubernetes/pki</strong> í´ë”ë¥¼ ì¶”ê°€ ë…¸ë“œì˜ <strong>/etc/kubernetes</strong>ì— ë³µì‚¬</h2><h2 id="ê¸°ì¡´-í´ëŸ¬ìŠ¤í„°-ë…¸ë“œ-ë‚´-var-lib-etcd-member-í´ë”ë¥¼-ì¶”ê°€-ë…¸ë“œ-ë‚´-íŠ¹ì •-ë””ë ‰í† ë¦¬-ë‚˜ì˜-ê²½ìš°-init-í´ë”-ë¡œ-ë³µì‚¬"><a href="#ê¸°ì¡´-í´ëŸ¬ìŠ¤í„°-ë…¸ë“œ-ë‚´-var-lib-etcd-member-í´ë”ë¥¼-ì¶”ê°€-ë…¸ë“œ-ë‚´-íŠ¹ì •-ë””ë ‰í† ë¦¬-ë‚˜ì˜-ê²½ìš°-init-í´ë”-ë¡œ-ë³µì‚¬" class="headerlink" title="ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ë‚´ /var/lib/etcd/member í´ë”ë¥¼ ì¶”ê°€ ë…¸ë“œ ë‚´ íŠ¹ì • ë””ë ‰í† ë¦¬ (ë‚˜ì˜ ê²½ìš° init í´ë”) ë¡œ ë³µì‚¬"></a>ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ë‚´ <strong>/var/lib/etcd/member</strong> í´ë”ë¥¼ ì¶”ê°€ ë…¸ë“œ ë‚´ íŠ¹ì • ë””ë ‰í† ë¦¬ <em>(ë‚˜ì˜ ê²½ìš° init í´ë”)</em> ë¡œ ë³µì‚¬</h2><h3 id="ê¸°ì¡´-í´ëŸ¬ìŠ¤í„°-ë…¸ë“œ-ë‚´-etcd-íŒŒë“œì—-ì ‘ê·¼í•˜ì—¬-ë‹¤ìŒ-ëª…ë ¹ì–´ë¡œ-snap-db-ìƒì„±"><a href="#ê¸°ì¡´-í´ëŸ¬ìŠ¤í„°-ë…¸ë“œ-ë‚´-etcd-íŒŒë“œì—-ì ‘ê·¼í•˜ì—¬-ë‹¤ìŒ-ëª…ë ¹ì–´ë¡œ-snap-db-ìƒì„±" class="headerlink" title="ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ë‚´ etcd íŒŒë“œì— ì ‘ê·¼í•˜ì—¬ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ snap db ìƒì„±"></a>ê¸°ì¡´ í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ë‚´ etcd íŒŒë“œì— ì ‘ê·¼í•˜ì—¬ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ snap db ìƒì„±</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ETCDCTL_API=3 etcdctl --endpoints 127.0.0.1:2379 \</span><br><span class="line">--cacert /etc/kubernetes/pki/etcd/ca.crt --cert /etc/kubernetes/pki/etcd/server.crt \</span><br><span class="line">--key /etc/kubernetes/pki/etcd/server.key snapshot save snap</span><br></pre></td></tr></table></figure><h3 id="ìƒì„±í•œ-snap-db-ë¥¼-ì¶”ê°€í•˜ê³ ì-í•˜ëŠ”-ë…¸ë“œì˜-íŠ¹ì •-ë””ë ‰í† ë¦¬-ë‚˜ì˜-ê²½ìš°-init-í´ë”-ë¡œ-ì´ë™"><a href="#ìƒì„±í•œ-snap-db-ë¥¼-ì¶”ê°€í•˜ê³ ì-í•˜ëŠ”-ë…¸ë“œì˜-íŠ¹ì •-ë””ë ‰í† ë¦¬-ë‚˜ì˜-ê²½ìš°-init-í´ë”-ë¡œ-ì´ë™" class="headerlink" title="ìƒì„±í•œ snap db ë¥¼ ì¶”ê°€í•˜ê³ ì í•˜ëŠ” ë…¸ë“œì˜ íŠ¹ì • ë””ë ‰í† ë¦¬ (ë‚˜ì˜ ê²½ìš° init í´ë”) ë¡œ ì´ë™"></a>ìƒì„±í•œ snap db ë¥¼ ì¶”ê°€í•˜ê³ ì í•˜ëŠ” ë…¸ë“œì˜ íŠ¹ì • ë””ë ‰í† ë¦¬ <em>(ë‚˜ì˜ ê²½ìš° init í´ë”)</em> ë¡œ ì´ë™</h3><h2 id="ì´ˆê¸°-í´ëŸ¬ìŠ¤í„°-êµ¬ì¶•-ì‹œ-ì‚¬ìš©í•œ-kubeadm-config-yaml-ì¤€ë¹„"><a href="#ì´ˆê¸°-í´ëŸ¬ìŠ¤í„°-êµ¬ì¶•-ì‹œ-ì‚¬ìš©í•œ-kubeadm-config-yaml-ì¤€ë¹„" class="headerlink" title="ì´ˆê¸° í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ì‹œ ì‚¬ìš©í•œ kubeadm-config.yaml ì¤€ë¹„"></a>ì´ˆê¸° í´ëŸ¬ìŠ¤í„° êµ¬ì¶• ì‹œ ì‚¬ìš©í•œ kubeadm-config.yaml ì¤€ë¹„</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: kubeadm.k8s.io/v1beta2</span><br><span class="line">kind: ClusterConfiguration</span><br><span class="line">kubernetesVersion: <span class="string">&quot;v1.15.3&quot;</span></span><br><span class="line">controlPlaneEndpoint: <span class="string">&quot;192.168.179.185:6443&quot;</span> <span class="comment"># VIP:6443</span></span><br><span class="line">networking:</span><br><span class="line"> serviceSubnet: <span class="string">&quot;10.96.0.0/16&quot;</span></span><br><span class="line"> podSubnet: <span class="string">&quot;10.244.0.0/16&quot;</span> <span class="comment"># must equal CIDR in calico.yaml</span></span><br><span class="line">apiServer:</span><br><span class="line">  extraArgs:</span><br><span class="line">    advertise-address: <span class="string">&quot;192.168.179.185&quot;</span> <span class="comment"># VIP</span></span><br></pre></td></tr></table></figure><h2 id="ìƒˆë¡œ-ì¶”ê°€í• -ë…¸ë“œ-k8s-node5-ë¼-ê°€ì •-ì—-ë‹¤ìŒ-ëª…ë ¹ì–´ë¥¼-í†µí•´-etcd-ë°ì´í„°-ë³µêµ¬"><a href="#ìƒˆë¡œ-ì¶”ê°€í• -ë…¸ë“œ-k8s-node5-ë¼-ê°€ì •-ì—-ë‹¤ìŒ-ëª…ë ¹ì–´ë¥¼-í†µí•´-etcd-ë°ì´í„°-ë³µêµ¬" class="headerlink" title="ìƒˆë¡œ ì¶”ê°€í•  ë…¸ë“œ(k8s-node5 ë¼ ê°€ì •)ì— ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ etcd ë°ì´í„° ë³µêµ¬"></a>ìƒˆë¡œ ì¶”ê°€í•  ë…¸ë“œ<em>(k8s-node5 ë¼ ê°€ì •)</em>ì— ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ etcd ë°ì´í„° ë³µêµ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm \</span><br><span class="line">    -v <span class="string">&#x27;/root/init:/backup&#x27;</span> \</span><br><span class="line">    -v <span class="string">&#x27;/var/lib/etcd:/var/lib/etcd&#x27;</span> \</span><br><span class="line">    --env ETCDCTL_API=3 \</span><br><span class="line">    <span class="string">&#x27;k8s.gcr.io/etcd:3.3.10&#x27;</span> \</span><br><span class="line">    /bin/sh -c <span class="string">&quot;etcdctl snapshot restore &#x27;/backup/snap.db&#x27; ; mv /default.etcd/member/ /var/lib/etcd/&quot;</span></span><br></pre></td></tr></table></figure><h2 id="ìƒˆë¡œ-ì¶”ê°€í• -ë…¸ë“œ-k8s-node5-ì—-kubeadm-init-ìˆ˜í–‰"><a href="#ìƒˆë¡œ-ì¶”ê°€í• -ë…¸ë“œ-k8s-node5-ì—-kubeadm-init-ìˆ˜í–‰" class="headerlink" title="ìƒˆë¡œ ì¶”ê°€í•  ë…¸ë“œ (k8s-node5) ì— kubeadm init ìˆ˜í–‰"></a>ìƒˆë¡œ ì¶”ê°€í•  ë…¸ë“œ <em>(k8s-node5)</em> ì— kubeadm init ìˆ˜í–‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --config=kubeadm-config.yaml\</span><br><span class="line">--ignore-preflight-errors=DirAvailable--var-lib-etcd</span><br></pre></td></tr></table></figure><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://codefarm.me/2019/05/22/kubernetes-recovery-master-failure/">https://codefarm.me/2019/05/22/kubernetes-recovery-master-failure/</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/troubleshoot-add_controlplane_node/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Etc] DevOps ì¸í„°ë·° ê¸°ìˆ ì§ˆë¬¸ ì •ë¦¬</title>
      <link>https://jx2lee.github.io/etc-devops_interview_questions/</link>
      <guid>https://jx2lee.github.io/etc-devops_interview_questions/</guid>
      <pubDate>Wed, 10 Jun 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;DevOps ì§ë¬´ ì‹¤ë¬´ì ë©´ì ‘ì—ì„œ ë°›ì€ ì¸í„°ë·° ë‚´ìš©ì„ ì •ë¦¬í•˜ì˜€ë‹¤. ê¸°ìˆ ì ì¸ ë‚´ìš©ë§Œ ì •ë¦¬í•˜ì˜€ê³  ì´ì™¸ì—ëŠ” &lt;strong&gt;ì´ì§ ì‚¬ìœ &lt;/strong&gt;ì— ëŒ€í•´ ë§ì´ ê¶ê¸ˆí•´ í•˜ì˜€ë‹¤. ë‚˜ì—ê²Œ ì´ì§ì‚¬ìœ  ë³´ë‹¨ ê¸°ìˆ ì„ ì•Œê³  ë„“íˆëŠ”ê²Œ ì¤‘ìš”í•  ê²ƒ ê°™ì•„.. ì¶”ê°€ì ìœ¼ë¡œ ë©´ì ‘ì„ ì§„í–‰í•˜ë©´ ì•ìœ¼ë¡œ ê³„ì† ì¶”ê°€í•  ì˜ˆì •ì´ë©° ì§ˆë¬¸ì€ ê¸°ìˆ ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>DevOps ì§ë¬´ ì‹¤ë¬´ì ë©´ì ‘ì—ì„œ ë°›ì€ ì¸í„°ë·° ë‚´ìš©ì„ ì •ë¦¬í•˜ì˜€ë‹¤. ê¸°ìˆ ì ì¸ ë‚´ìš©ë§Œ ì •ë¦¬í•˜ì˜€ê³  ì´ì™¸ì—ëŠ” <strong>ì´ì§ ì‚¬ìœ </strong>ì— ëŒ€í•´ ë§ì´ ê¶ê¸ˆí•´ í•˜ì˜€ë‹¤. ë‚˜ì—ê²Œ ì´ì§ì‚¬ìœ  ë³´ë‹¨ ê¸°ìˆ ì„ ì•Œê³  ë„“íˆëŠ”ê²Œ ì¤‘ìš”í•  ê²ƒ ê°™ì•„.. ì¶”ê°€ì ìœ¼ë¡œ ë©´ì ‘ì„ ì§„í–‰í•˜ë©´ ì•ìœ¼ë¡œ ê³„ì† ì¶”ê°€í•  ì˜ˆì •ì´ë©° ì§ˆë¬¸ì€ ê¸°ìˆ ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆë‹¤.</p><a id="more"></a><p>êµ¬ë¶„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.<br><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#kubernetes">Kubernetes</a></li><li><a href="#python">Python</a></li><li><a href="#db">Database</a></li><li><a href="#linux">Linux</a></li><li><a href="#network">Network</a></li><li><a href="#hadoop">Hadoop</a></li></ol><hr><ol><li><a name="kubernetes"></a> <em>Kubernetes</em><ul><li><code>VM vs container</code><br>:ë‘ ê°œ ëª¨ë‘ ê°€ìƒí™” ê¸°ìˆ ë¡œ í° ì°¨ì´ëŠ” HyperVisor ìœ ë¬´ì´ë‹¤. VMì˜ ê²½ìš° ìš´ì˜ì²´ì œì—ì„œ í”„ë¡œì„¸ìŠ¤ê°€ ì‹œì‘í•˜ëŠ” ë°˜ë©´ ì»¨í…Œì´ë„ˆëŠ” í˜¸ìŠ¤íŠ¸ ìš´ì˜ì²´ì œì˜ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë˜ì–´ ì¢€ ë” ê°€ë³ê³  MSA êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. ë˜í•œ, ìš´ì˜ì²´ì œ ì»¤ë„ì˜ ê³µìœ í•¨ìœ¼ë¡œì¨ ë¹ ë¥´ë©° ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì ë‹¤.<br><img src="https://www.weave.works/assets/images/bltb6200bc085503718/containers-vs-virtual-machines.jpg" alt="https://www.weave.works/assets/images/bltb6200bc085503718/containers-vs-virtual-machines.jpg"></li><li><code>Docker Swarm</code><br>:ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ ë„êµ¬ ì¤‘ í•˜ë‚˜ë¡œ Docker í˜¸ìŠ¤íŠ¸ë“¤ì„ í•˜ë‚˜ì¸ ê²ƒì²˜ëŸ¼ ë§Œë“¤ì–´ì£¼ëŠ” ë„êµ¬. Master/Worker ë…¸ë“œë¡œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•œë‹¤.<br>:<a href="https://medium.com/@chrisjune_13837/infra-docker-swarmì´ë€-595d33160379">https://medium.com/@chrisjune_13837/infra-docker-swarmì´ë€-595d33160379</a></li><li><code>proxy (k8s)</code><br>:Pod ë¡œ ì—°ê²°ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ë©° íŒŒë“œ ê°„ í†µì‹ ì„ ìœ„í•´ ë¼ìš°íŒ…ì„ ë•ëŠ”ë‹¤. íŒŒë“œ ê°„ í†µì‹ ì„ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— íŒŒë“œ ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤ì™€ì˜ í†µì‹ ì„ ì›í™œíˆ í•´ì¤€ë‹¤.</li><li><code>istio</code><br>:Data Plane <em>(í”„ë¡ì‹œë“¤ë¡œ ì´ë£¨ì–´ì ¸ íŠ¸ë˜í”½ì„ ì„¤ì •ê°’ì— ë”°ë¼ ì»¨íŠ¸ë¡¤ í•˜ëŠ” ë¶€ë¶„)</em>ì˜ ë©”ì¸ í”„ë¡ì‹œë¡œ Envoy Proxyë¥¼ ì‚¬ìš©í•˜ë©° ì´ë¥¼ ì»¨íŠ¸ë¡¤ í•´ì£¼ëŠ” Control Plane <em>(í”„ë¡ì‹œë“¤ì— ì„¤ì •ê°’ì„ ì „ë‹¬í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬)</em>ì˜ ì˜¤í”ˆì†ŒìŠ¤ ì†”ë£¨ì…˜. ì´ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” ì•„ë˜ í¬ìŠ¤íŠ¸ê°€ ì˜ ì •ë¦¬ë˜ì–´ ìˆë‹¤.<br>:<a href="https://gruuuuu.github.io/cloud/service-mesh-istio/#">https://gruuuuu.github.io/cloud/service-mesh-istio/#</a></li><li><code>readiness/liveness probe</code><br>:ì»¨í…Œì´ë„ˆê°€ ì‚´ì•„ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” health check ë°©ë²•ì¸ liveness probe, ì»¨í…Œì´ë„ˆê°€ ì„œë¹„ìŠ¤ ê°€ëŠ¥í•œ ìƒíƒœì¸ì§€ í™•ì¸í•˜ëŠ” health check ë°©ë²•ì¸ readiness probe<br>:<a href="https://bcho.tistory.com/m/1264">https://bcho.tistory.com/m/1264</a>  </li></ul></li></ol><ol start="2"><li><a name="python"></a> <strong><em>Python</em></strong><ul><li><code>global interpreter lock</code><br>:íŠ¹ì • ì‹œì ì—ì„œì˜ í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ ì‹¤í–‰í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒ<br>:<a href="https://m.blog.naver.com/alice_k106/221566619995">https://m.blog.naver.com/alice_k106/221566619995</a></li><li><code>async</code><br>:í•˜ë‚˜ì˜ ì“°ë ˆë“œë¡œ ë™ì‹œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì„ ìœ„í•œ íŒŒì´ì¬ íŒ¨í‚¤ì§€<br>:<a href="https://www.daleseo.com/python-asyncio/">https://www.daleseo.com/python-asyncio/</a></li><li><code>garbage collection</code><br>:íŒŒì´ì¬ì€ ë³´í†µ <code>garbage collection</code> ê³¼ <code>reference counting</code> ì„ í†µí•´ í• ë‹¹ëœ ë©”ëª¨ë¦¬ë¥¼ ê´€ë¦¬í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ì°¸ì¡° íšŸìˆ˜ê°€ 0ì´ ëœ ê°ì²´ë¥¼ í•´ì œí•˜ëŠ” <code>reference counting</code> ë°©ì‹ì„ ì‚¬ìš©í•˜ì§€ë§Œ, <code>reference cycles (ìˆœí™˜ì°¸ì¡°)</code> ê°€ ë°œìƒí•˜ë©´ <code>garbage collection</code> ìœ¼ë¡œ ì´ë¥¼ í•´ê²°í•œë‹¤.<br>:<a href="https://winterj.me/python-gc/">https://winterj.me/python-gc/</a></li><li><code>decorator</code><br>:ëŒ€ìƒ í•¨ìˆ˜ë¥¼ wrapping í•˜ê³  ì´ wrapping ëœ í•¨ìˆ˜ì˜ ì•ë’¤ì— ì¶”ê°€ì ìœ¼ë¡œ ê¾¸ë©°ì§ˆ êµ¬ë¬¸ë“¤ì„ ì •ì˜í•´ ì†ì‰½ê²Œ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ <code>í•¨ìˆ˜ë¥¼ ê¾¸ë©°ì£¼ëŠ” í•¨ìˆ˜</code> ë¼ê³  í‘œí˜„í•  ìˆ˜ ìˆë‹¤.<br>:<a href="https://bluese05.tistory.com/30">https://bluese05.tistory.com/30</a><br>:<a href="https://nachwon.github.io/decorator/">https://nachwon.github.io/decorator/</a>  </li></ul></li></ol><ol start="3"><li><a name="db"></a> <strong><em>Database</em></strong><ul><li><code>Tibero vs MySQL</code><br>:ì‚¬ì‹¤ ì´ ì§ˆë¬¸ì— ë‹µë³€ì€ ì˜¤í”ˆì†ŒìŠ¤ vs ìƒìš©ì´ë¼ê³  ë§í–ˆë‹¤.. êµ¬ê¸€ë§ì„ í•˜ë©´ ë¹„êµìë£Œê°€ ë‚˜ì˜¤ê¸´ í•˜ì§€ë§Œ ì–´ë–»ê²Œ ì‘ì„±í•´ì•¼ë  ì§€ ëª°ë¼ ë§í¬ë§Œ ë‚¨ê²¨ë‘ê³  ë©´ì ‘ì „ì— ë³´ê³  ë“¤ì–´ê°€ì!<br>:<a href="https://db-engines.com/en/system/MySQL%3BTibero">https://db-engines.com/en/system/MySQL%3BTibero</a></li><li><code>Dead Lock</code><br>:ë°ì´í„° ì¼ê´€ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ íŠ¸ëœì­ì…˜ ê°„ êµì°©ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤. ë‘ ê°œì˜ íŠ¸ëœì­ì…˜ ê°„ ê°ê°ì˜ íŠ¸ëœì­ì…˜ì´ ê°€ì§€ê³  ìˆëŠ” ë¦¬ì†ŒìŠ¤ì˜ Lock ì„ íšë“í•˜ë ¤ê³  í•  ë•Œ ë°œìƒí•œë‹¤. (ì˜ˆë¥¼ë“¤ì–´, A-&gt;D1 íŠ¸ëœì­ì…˜ ë°œìƒ / B-&gt;D2 íŠ¸ëœì­ì…˜ ë°œìƒ ì´í›„ Aê°€ D2ì— ì»¤ë°‹ì„ í•˜ê²Œ ë˜ë©´ Dead Lock ë°œìƒ)<br>:<a href="https://medium.com/@chrisjune_13837/db-lock-ë½ì´ë€-ë¬´ì—‡ì¸ê°€-d908296d0279">https://medium.com/@chrisjune_13837/db-lock-ë½ì´ë€-ë¬´ì—‡ì¸ê°€-d908296d0279</a>  </li></ul></li></ol><ol start="4"><li><a name="linux"></a> <strong><em>Linux</em></strong><ul><li><code>fstrim</code><br>:ë””ìŠ¤í¬ IO(ì£¼ë¡œ SSD) ì„±ëŠ¥ ì €í•˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë¦¬ëˆ…ìŠ¤ ëª…ë ¹ì–´<br><img src="http://forum.falinux.com/zbxe/files/attach/images/583/202/783/7cb0f69c8ebc4e151fcf222b4bffb25b.png" alt="http://forum.falinux.com/zbxe/files/attach/images/583/202/783/7cb0f69c8ebc4e151fcf222b4bffb25b.png"></li><li><code>/dev ë””ë ‰í† ë¦¬</code><br>:ì¥ì¹˜ íŒŒì¼ì„ ìœ„í•œ ë””ë ‰í† ë¦¬ë¡œ <code>Node(ë…¸ë“œ)</code> ë¼ê³  ë¶ˆë¦¬ëŠ” ìš”ì†Œë¥¼ í¬í•¨í•˜ë©°, ê° ë…¸ë“œëŠ” ì‹œìŠ¤í…œì˜ í•œ ì¥ì¹˜ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. <code>/dev/null</code> ì€ ê°€ìƒì¥ì¹˜ë¡œì¨ í”„ë¡œê·¸ë¨ì˜ ì¶œë ¥ì„ ë¬´ì‹œí•˜ì—¬ í™”ë©´ ìƒ í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•˜ì§€ ì•Šì„ ë•Œ ìœ ìš©í•˜ë‹¤. <code>/dev/0(zero)</code> ëŠ” write ìˆ˜í–‰ ì‹œ ì„±ê³µì ì¸ ë¦¬í„´ ì½”ë“œë¥¼ ì œê³µí•˜ë©° íŠ¹ì • í¬ê¸°ì˜ íŒŒì¼ì„ ìƒì„±í•˜ê±°ë‚˜ ì €ì¥ ì¥ì¹˜ë¥¼ í¬ë§·í•˜ê¸° ìœ„í•´ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.</li><li><code>LAID (ë¦¬ëˆ…ìŠ¤ ë””ìŠ¤í¬)</code><br>:ì—¬ëŸ¬ ê°œ HDD ë¥¼ í•˜ë‚˜ì˜ HDD ë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹<br>:<a href="https://infrajp.tistory.com/9">https://infrajp.tistory.com/9</a></li><li><code>pipe / redirect</code><br>:<code>pipe)</code> í”„ë¡œì„¸ìŠ¤ í˜¹ì€ ì‹¤í–‰ëœ í”„ë¡œê·¸ë¨ì˜ ê²°ê³¼ë¥¼ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì „ë‹¬í•˜ê±°ë‚˜ ë‚¨ê¸¸ ë•Œ ì‚¬ìš©<br>:<code>redirect)</code> í”„ë¡œê·¸ë¨ì˜ ê²°ê³¼ í˜¹ì€ ì¶œë ¥ì„ íŒŒì¼ì´ë‚˜ ë‹¤ë¥¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ë‹¬í•˜ê±°ë‚˜ ë‚¨ê¸¸ ë•Œ ì‚¬ìš©  <ul><li>0: standard input <em>(stdin)</em></li><li>1: standard output <em>(stdout)</em></li><li>2: standard error <em>(stderr)</em><br><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Stdstreams-notitle.svg/450px-Stdstreams-notitle.svg.png" alt="https://upload.wikimedia.org/wikipedia/commons/thumb/7/70/Stdstreams-notitle.svg/450px-Stdstreams-notitle.svg.png">  </li></ul></li><li><code>kernel parameter ë³€ê²½ ì´ìœ  (ì‚¬ìš© ì´ìœ )</code><br>:<code>kernel parameter</code> ë€ ì»¤ë„(ì‹œìŠ¤í…œì„ ê´€ë¦¬í•˜ëŠ” ê±°ëŒ€í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜)ì´ ë©”ëª¨ë¦¬ì™€ í”„ë¡œì„¸ìŠ¤ë¥¼ í• ë‹¹í•˜ê¸° ìœ„í•œ ê°’ìœ¼ë¡œ, <code>/proc/sys</code> (OSë§ˆë‹¤ ìƒì´í•  ìˆ˜ ìˆìŒ) ë””ë ‰í† ë¦¬ì— ì¡´ì¬í•œë‹¤.  </li></ul></li></ol><ol start="5"><li><a name="network"></a> <strong><em>Network</em></strong><ul><li><code>DNS(Domain Name System)</code><br>:ì „í™”ë²ˆí˜¸ë¶€, ë„ë©”ì¸ ëª…ì„ IP ì£¼ì†Œë¡œ ë³€í™˜í•´ì£¼ëŠ” system<br>:<a href="https://samsikworld.tistory.com/489">https://samsikworld.tistory.com/489</a></li><li><code>CNAME, A record</code><br>:<code>CNAME)</code> Canonical Name ìœ¼ë¡œ í•˜ë‚˜ì˜ ë„ë©”ì¸ì— ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•˜ëŠ” ë°©ì‹<br>:<code>A record)</code> ë„ë©”ì¸ ì´ë¦„ì— í•˜ë‚˜ì˜ IP address ê°€ ìˆìŒì„ ì˜ë¯¸<br>:<a href="https://twpower.github.io/40-difference-between-cname-and-a-record">https://twpower.github.io/40-difference-between-cname-and-a-record</a>  </li><li><code>TCP / UDP</code><br>:TCP/IPì˜ ì „ì†¡ê³„ì¸µì— ì‚¬ìš©í•˜ëŠ” í”„ë¡œí† ì½œë¡œ, <code>ì „ì†¡ê³„ì¸µ</code>ì´ë€ IPì— ì˜í•´ ì „ë‹¬í•˜ëŠ” íŒ¨í‚·ì˜ ì˜¤ë¥˜ë¥¼ ê²€ì‚¬í•˜ê³  ì¬ì „ì†¡ ìš”êµ¬ ë“±ì˜ ì œì–´ë¥¼ ë‹´ë‹¹í•œë‹¤.<br>:<code>TCP(Transmission Control Protocol)</code> ì‹ ë¢°ì„±ì„ ìš”êµ¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©(ì–‘ë°©í–¥ ì „ì†¡)<br>:<code>UDP(User Datagram Protocol)</code> ê°„ë‹¨í•œ ë°ì´í„°ë¥¼ ë¹ ë¥¸ ì†ë„ë¡œ ì „ì†¡í•˜ê³ ì í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©  </li></ul></li></ol><ul><li><a name="hadoop"></a> <strong><em>Hadoop / Spark</em></strong><ul><li><code>broadcasting join vs shuffle join</code><br>:<code>broadcasting join)</code> ë°ì´í„°ë¥¼ executor ë¡œ ë³µì‚¬í•˜ì§€ë§Œ executor ê°„ ë°ì´í„° ë³µì‚¬ê°€ ì—†ì–´ ì†ë„ê°€ ë¹¨ë¼ì§ˆ ìˆ˜ ìˆë‹¤.<br><img src="https://henningkropponlinede.files.wordpress.com/2016/12/spark-broadcast.png" alt="broadcasting join"><br>:<code>shuffle join</code> ì€ ì¡°ì¸ëœ ë°ì´í„°ë¡œ ë™ì¼í•œ executor ë¡œ ì´ë™í•˜ê¸° ìœ„í•´ ì…”í”Œ ì—°ì‚°ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì´ë™ì´ ë§ì´ ë°œìƒí•œë‹¤.<br><img src="https://henningkropponlinede.files.wordpress.com/2016/12/spark-broadcast-torrent.png" alt="shuffle join"><br>:<a href="https://knight76.tistory.com/entry/spark-ìŠ¤íŒŒí¬-ì¡°ì¸-ì „ëµ-ì…”í”Œ-ì¡°ì¸-ë¸Œë¡œìºìŠ¤íŠ¸-ì¡°ì¸-shuffle-join-broadcast-join">https://knight76.tistory.com/entry/spark-ìŠ¤íŒŒí¬-ì¡°ì¸-ì „ëµ-ì…”í”Œ-ì¡°ì¸-ë¸Œë¡œìºìŠ¤íŠ¸-ì¡°ì¸-shuffle-join-broadcast-join</a>  </li></ul></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/etc-devops_interview_questions/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•œ íŒŒë“œ ë°°í¬ ì‹œ transport endpoint is not connected</title>
      <link>https://jx2lee.github.io/cloud-mount_failed/</link>
      <guid>https://jx2lee.github.io/cloud-mount_failed/</guid>
      <pubDate>Sun, 07 Jun 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;kubernetes í´ëŸ¬ìŠ¤í„° ìš´ì˜ ì¤‘ control plane ë…¸ë“œ ì¥ì• ê°€ ë°œìƒí•´ ì—¬ëŸ¬ ì‚½ì§ˆì„ í•˜ë˜ ì¤‘.. ê¸°ì¡´ ìš´ì˜ì¤‘ì´ë˜ Pod ê°€ ë–  ìˆì§€ë¥¼ ëª»í•´ í™•ì¸ &lt;em&gt;(describe)&lt;/em&gt; í•´ë³´ë‹ˆ &lt;strong&gt;transport endpoint is not connected&lt;/strong&gt; ë¬¸êµ¬ì™€ í•¨ê»˜ Mount failed í•˜ì˜€ë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>kubernetes í´ëŸ¬ìŠ¤í„° ìš´ì˜ ì¤‘ control plane ë…¸ë“œ ì¥ì• ê°€ ë°œìƒí•´ ì—¬ëŸ¬ ì‚½ì§ˆì„ í•˜ë˜ ì¤‘.. ê¸°ì¡´ ìš´ì˜ì¤‘ì´ë˜ Pod ê°€ ë–  ìˆì§€ë¥¼ ëª»í•´ í™•ì¸ <em>(describe)</em> í•´ë³´ë‹ˆ <strong>transport endpoint is not connected</strong> ë¬¸êµ¬ì™€ í•¨ê»˜ Mount failed í•˜ì˜€ë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><a id="more"></a><h1 id="Describe-Pod"><a href="#Describe-Pod" class="headerlink" title="Describe Pod"></a>Describe Pod</h1><p>ì¥ì• ê°€ ë°œìƒí•œ íŒŒë“œë¥¼ Describe í•œ ê²°ê³¼ì´ë‹¤.<br>ì´ 3 Waring-FailedMount ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ëŠ”ë°, <code>Rook-ceph</code> ì˜ cephfs ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ë¥¼ ì´ìš©í•´ ê³µìœ ë³¼ë¥¨<em>(rserver-share)</em>/Homeë””ë ‰í† ë¦¬<em>(rserver-home)</em>/í† í°<em>(default-token-4w7gr)</em> ì €ì¥ì†Œë¥¼ ìƒì„±í•˜ê³ ì í–ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Events:</span><br><span class="line">  Type     Reason       Age                     From                Message</span><br><span class="line">  ----     ------       ----                    ----                -------</span><br><span class="line">  Warning  FailedMount  13m (x143 over 5h2m)    kubelet, k8s-node1  MountVolume.SetUp failed <span class="keyword">for</span> volume <span class="string">&quot;pvc-3a160803-5d2e-4a45-9c9f-b78a0a2e7339&quot;</span> : <span class="built_in">stat</span> /var/lib/kubelet/pods/eea991e6-9908-4d41-bd01-141af0566079/volumes/kubernetes.io~csi/pvc-3a160803-5d2e-4a45-9c9f-b78a0a2e7339/mount: transport endpoint is not connected</span><br><span class="line">  Warning  FailedMount  3m1s (x125 over 4h44m)  kubelet, k8s-node1  Unable to mount volumes <span class="keyword">for</span> pod <span class="string">&quot;rserver-3.6.3-deployment-776f6b8ddc-gwbk5_nps(eea991e6-9908-4d41-bd01-141af0566079)&quot;</span>: timeout expired waiting <span class="keyword">for</span> volumes to attach or mount <span class="keyword">for</span> pod <span class="string">&quot;nps&quot;</span>/<span class="string">&quot;rserver-3.6.3-deployment-776f6b8ddc-gwbk5&quot;</span>. list of unmounted volumes=[rserver-home]. list of unattached volumes=[rserver-share rserver-home default-token-6w7gr]</span><br></pre></td></tr></table></figure><p>Pod log ë¥¼ í™•ì¸í•˜ê³  ì‹¶ì—ˆì§€ë§Œ ì• ì´ˆì— ëœ¨ê¸°ë„ ì „ì— Mount Failed ë˜ì—ˆê¸°ì— í•´ë‹¹ ë…¸ë“œë¡œ ì ‘ì†í•˜ì—¬ Kubelet ë¡œê·¸ë¥¼ í™•ì¸í•˜ì˜€ë‹¤.</p><h1 id="Kubelet-log"><a href="#Kubelet-log" class="headerlink" title="Kubelet log"></a>Kubelet log</h1><p>í•´ë‹¹ ë…¸ë“œì— <code>journal -f | grep kubelet</code> ìœ¼ë¡œ ë¡œê·¸ë¥¼ ì‚´í´ë³´ë‹ˆ Describe ì™€ ë‹¤ë¥¸ ì ì´ ì—†ì–´ë³´ì´ì§€ë§Œ, ê° Pod ì˜ ë³¼ë¥¨ì˜ Path <em>(ë©”ì„¸ì§€ì—ëŠ” <code>stat /</code> ìœ¼ë¡œ í‘œí˜„)</em> ë¥¼ ì¶œë ¥í•´ì¤€ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Jun 08 13:49:57 k8s-node1 kubelet[4638]: E0608 13:49:57.738465    4638 nestedpendingoperations.go:270] Operation <span class="keyword">for</span> <span class="string">&quot;\&quot;kubernetes.io/csi/rook-ceph.cephfs.csi.ceph.com^0001-0009-rook-ceph-0000000000000001-d90262eb-a499-11ea-a466-52c8f6e260ed\&quot;&quot;</span> failed. No retries permitted until 2020-06-08 13:51:59.738429723 +0000 UTC m=+21911.512876014 (durationBeforeRetry 2m2s). Error: <span class="string">&quot;MountVolume.SetUp failed for volume \&quot;pvc-3a160803-5d2e-4a45-9c9f-b78a0a2e7339\&quot; (UniqueName: \&quot;kubernetes.io/csi/rook-ceph.cephfs.csi.ceph.com^0001-0009-rook-ceph-0000000000000001-d90262eb-a499-11ea-a466-52c8f6e260ed\&quot;) pod \&quot;rserver-3.6.3-deployment-776f6b8ddc-gwbk5\&quot; (UID: \&quot;eea991e6-9908-4d41-bd01-141af0566079\&quot;) : stat /var/lib/kubelet/pods/eea991e6-9908-4d41-bd01-141af0566079/volumes/kubernetes.io~csi/pvc-3a160803-5d2e-4a45-9c9f-b78a0a2e7339/mount: transport endpoint is not connected&quot;</span></span><br><span class="line">Jun 08 13:50:01 k8s-node1 kubelet[4638]: E0608 13:50:01.755308    4638 kubelet.go:1665] Unable to mount volumes <span class="keyword">for</span> pod <span class="string">&quot;rserver-3.6.3-deployment-776f6b8ddc-gwbk5_nps(eea991e6-9908-4d41-bd01-141af0566079)&quot;</span>: timeout expired waiting <span class="keyword">for</span> volumes to attach or mount <span class="keyword">for</span> pod <span class="string">&quot;nps&quot;</span>/<span class="string">&quot;rserver-3.6.3-deployment-776f6b8ddc-gwbk5&quot;</span>. list of unmounted volumes=[rserver-home]. list of unattached volumes=[rserver-share rserver-home default-token-6w7gr]; skipping pod</span><br><span class="line">Jun 08 13:50:01 k8s-node1 kubelet[4638]: E0608 13:50:01.755344    4638 pod_workers.go:190] Error syncing pod eea991e6-9908-4d41-bd01-141af0566079 (<span class="string">&quot;rserver-3.6.3-deployment-776f6b8ddc-gwbk5_nps(eea991e6-9908-4d41-bd01-141af0566079)&quot;</span>), skipping: timeout expired waiting <span class="keyword">for</span> volumes to attach or mount <span class="keyword">for</span> pod <span class="string">&quot;nps&quot;</span>/<span class="string">&quot;rserver-3.6.3-deployment-776f6b8ddc-gwbk5&quot;</span>. list of unmounted volumes=[rserver-home]. list of unattached volumes=[rserver-share rserver-home default-token-6w7gr]</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> /var/lib/kubelet/pods/eea991e6-9908-4d41-bd01-141af0566079/volumes/kubernetes.io~csi/pvc-3a160803-5d2e-4a45-9c9f-b78a0a2e7339/mount</span><br></pre></td></tr></table></figure><p>ì´ ë¶€ë¶„ì„ ì£¼ëª©í•´ì„œ ë³´ì. í•´ë‹¹ Path ìœ¼ë¡œ ì ‘ê·¼í•˜ì—¬ <code>mount</code> í´ë”ë¥¼ í™•ì¸í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">/var/lib/kubelet/pods/eea991e6-9908-4d41-bd01-141af0566079/volumes/kubernetes.io~csi/pvc-3a160803-5d2e-4a45-9c9f-b78a0a2e7339</span><br><span class="line">$ ll</span><br><span class="line">ls: cannot access <span class="string">&#x27;mount&#x27;</span>: Transport endpoint is not connected</span><br><span class="line">total 12</span><br><span class="line">drwxr-x--- 3 root root 4096 Jun  2 06:27 ./</span><br><span class="line">drwxr-x--- 4 root root 4096 Jun  2 06:27 ../</span><br><span class="line">d????????? ? ?    ?       ?            ? mount/</span><br><span class="line">-rw-r--r-- 1 root root  328 Jun  8 13:54 vol_data.json</span><br></pre></td></tr></table></figure><p><code>mount</code> í´ë”ì˜ í‘œí˜„ì´ ì´ìƒí•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë¶„ëª… í´ë”ì— ëŒ€í•œ ì½ê¸°ì“°ê¸°ì‹¤í–‰ ê¶Œí•œê³¼ ì†Œìœ ì/ê·¸ë£¹ì´ ë‚˜ì™€ì•¼ í•˜ì§€ë§Œ ëª¨ë‘ ë¬¼ìŒí‘œë¡œ ì¶œë ¥í•œë‹¤. ì´ì— ëŒ€í•œ êµ¬ê¸€ë§ì„ í•´ë³¸ ê²°ê³¼, í•´ë‹¹ ë””ë ‰í† ë¦¬ì˜ mount ê°€ ë¹„ì •ìƒ ì‘ë™í•˜ì—¬ ì´ë¥¼ í•´ì œí•´ì•¼ í•œë‹¤ê³  í•œë‹¤.  </p><p>ì •í™•í•œ ì›ì¸ì€ ëª¨ë¥´ê² ì§€ë§Œ, <strong>í•´ë‹¹ í´ë”ì— ëŒ€í•œ ì˜ëª»ëœ mount ë¡œ ì¸í•´ PVC ê°€ PV ë¥¼ ì œëŒ€ë¡œ ë°”ë¼ë³´ì§€ ëª»í•˜ì—¬ Mount Failed</strong> ë‚œ ê²ƒìœ¼ë¡œ ì´í•´í–ˆë‹¤. í•´ë‹¹ ë””ë ‰í† ë¦¬ë¥¼ <code>umount</code> ë¥¼ ì´ìš©í•´ ë§ˆìš´íŠ¸ë¥¼ í•´ì œí•˜ê³ , Kubelet ë¡œê·¸ë¥¼ ë” í™•ì¸í•˜ì—¬ ë‹¤ë¥¸ PV stat ìœ¼ë¡œ ì ‘ê·¼í•´ ë§ˆìš´íŠ¸ í•´ì œë¥¼ ìˆ˜í–‰í•œë‹¤.  </p><p>ë³´ì•„í•˜ë‹ˆ í•œ ë²ˆì˜ <code>umount</code> ë¡œ ëë‚˜ì§€ ì•Šì•„ ë‚˜ì˜ ê²½ìš°,<br><code>/var/lib/kubelet/pods/&#123;ìœ„UUID&#125;/volumes/kubernetes.io~csi/</code> ë‚´ ëª¨ë“  PVC ë¡œ ì ‘ê·¼í•˜ì—¬ í´ë”ê°€ ì´ìƒí•˜ë©´ ë§ˆìš´íŠ¸ë¥¼ í•´ì œ í•˜ì˜€ë‹¤. ë¬´ì‹í•  ìˆ˜ ìˆì§€ë§Œ.. ì–´ì¨Œë“  ëª¨ë‘ ìˆ˜í–‰í•˜ì—¬ Kubelet ë¡œê·¸ì— ì´ìƒì´ ì—†ëŠ” ê²ƒì„ í™•ì¸í•œë‹¤.</p><h1 id="ì •ìƒ-ì‘ë™-í™•ì¸"><a href="#ì •ìƒ-ì‘ë™-í™•ì¸" class="headerlink" title="ì •ìƒ ì‘ë™ í™•ì¸"></a>ì •ìƒ ì‘ë™ í™•ì¸</h1><p><code>kubectl get all -n nps</code> ëª…ë ¹ì–´ë¡œ ê¸°ì¡´ì— ë– ìˆì§€ ëª»í•œ íŒŒë“œê°€ ì •ìƒ ê¸°ë™í•˜ì˜€ëŠ”ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-node2:~<span class="comment"># kubectl get all -n nps -o wide</span></span><br><span class="line">NAME                                            READY   STATUS              RESTARTS   AGE</span><br><span class="line">pod/jupyter-3.7-deployment-f798bb7f4-n2kqq      1/1     Running             0          5h21m</span><br><span class="line">pod/jupyter-3.8-deployment-d47c78475-9gsb8      0/1     ContainerCreating   0          4d12h</span><br><span class="line">pod/pypiserver-deployment-7bbbb48f8c-rkbhk      1/1     Running             0          6d3h</span><br><span class="line">pod/rserver-3.5.3-deployment-96f5d6b4-dhgkg     1/1     Running             0          6d7h</span><br><span class="line">pod/rserver-3.6.3-deployment-776f6b8ddc-gwbk5   1/1     Running             0          6d7h</span><br></pre></td></tr></table></figure><blockquote><p><em>3.8 jupyter ì˜ ê²½ìš° í•´ë‹¹ íŒŒë“œëŠ” ë…¸ë“œê°€ ë‹¬ë¼.. ê·€ì°®ì•„ì„œ ì•„ì§ ê³ ì¹˜ì§€ ì•Šì€ ëª¨ìŠµì´ë‹¤. ì´ë¥¼ ê³ ì¹˜ë ¤ë©´ ê°™ì€ ë°©ë²•ìœ¼ë¡œ í•´ë‹¹ ë…¸ë“œë¡œ ì ‘ê·¼í•˜ì—¬ í•´ê²°í•´ì•¼ í•  ê²ƒ ê°™ë‹¤.</em></p></blockquote><h1 id="ê²°ë¡ "><a href="#ê²°ë¡ " class="headerlink" title="ê²°ë¡ "></a>ê²°ë¡ </h1><p>ì´ë²ˆ ì¥ì• ë¥¼ ê²ªìœ¼ë©´ì„œ ì–»ì€ êµí›ˆìœ¼ë¡œëŠ”,<br>Pod Describe ë„ ì¢‹ì§€ë§Œ ì¥ì• ê°€ ë‚˜ëŠ” ë¦¬ì†ŒìŠ¤ì˜ ë…¸ë“œë¡œ ì ‘ê·¼í•˜ì—¬ Kubelet ë¡œê·¸ë„ í•¨ê»˜ ë³´ëŠ” ìŠµê´€ì„ ê°€ì ¸ì•¼ ê² ë‹¤. ë¬¼ë¡  Describeë¡œë„ ì¶©ë¶„íˆ ì•Œì•„ë‚¼ ìˆ˜ ìˆëŠ” ì •ë³´ì§€ë§Œ, ë…¸ë“œë“¤ ê°„ í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” Kubelet ë¡œê·¸ë¥¼ í†µí•´ ì¢€ ë” ì„¸ë¶€ì ì¸ Info ì™€ Warning ì„ í™•ì¸í•˜ì—¬ ì¼ì„ì´ì¡°ì˜ íš¨ê³¼ë¥¼ ëˆ„ë¦´ ìˆ˜ ìˆë‹¤ ìƒê°í•œë‹¤.</p><blockquote><p>ì—”ì§€ë‹ˆì–´ì˜ ì‚¶ì€.. ë¡œê·¸ë¼ëŠ” ì„ ë°°ì˜ ë§ì´ ìƒê°ë‚œë‹¤.</p></blockquote><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-mount_failed/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] Jupyter Notebook ë¡œê·¸ íŒŒì¼ ìƒì„±</title>
      <link>https://jx2lee.github.io/python-jupyter_logging/</link>
      <guid>https://jx2lee.github.io/python-jupyter_logging/</guid>
      <pubDate>Wed, 27 May 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Jupyter Notebook ì‹¤í–‰ ì´ë ¥ì„ ë¡œê·¸íŒŒì¼ë¡œ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.  &lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Jupyter Notebook ì‹¤í–‰ ì´ë ¥ì„ ë¡œê·¸íŒŒì¼ë¡œ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.  </p><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#env">Environment</a></li><li><a href="#history">log_history.py</a></li><li><a href="#tunning">Customize IPython/core/history.py</a></li><li><a href="#result">Result</a></li><li><a href="#ref">Reference</a></li></ol><h1 id="Environment"><a href="#Environment" class="headerlink" title=" Environment"></a><a name="env"></a> Environment</h1><p>Kubernetes í™˜ê²½ì—ì„œ Jupyter Notebook ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ deployment ë¡œ ê´€ë¦¬í•˜ê³  ì„œë¹„ìŠ¤ëŠ” ë…¸ë“œí¬íŠ¸ë¡œ êµ¬ì„±í•˜ì—¬ íŠ¹ì • í¬íŠ¸ë¡œ Jupyter Notebook ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ì„¤ì •í•˜ì˜€ë‹¤. Python ë²„ì ¼ì€ 3.8ì—ì„œ ì§„í–‰í•˜ì˜€ìœ¼ë©°, Docker imageëŠ” 3.8, 3.7 ë“± ì†Œìˆ˜ ì²« ì§¸ ìë¦¬ê¹Œì§€ì˜ ë²„ì ¼ë§Œ ë¹Œë“œí•  ìˆ˜ ìˆê²Œ ì‘ì„±ë˜ì—ˆë‹¤. í™˜ê²½ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ kg all -n jupyter-logging</span><br><span class="line">NAME                                            READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/jupyter-3.8-deployment-6676cc56d6-xth7b     1/1     Running   0          13h</span><br><span class="line"></span><br><span class="line">NAME                      TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE</span><br><span class="line">service/jupyter-38-svc    NodePort   10.96.187.185   &lt;none&gt;        8888:30180/TCP   24d</span><br><span class="line"></span><br><span class="line">NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">deployment.apps/jupyter-3.8-deployment     1/1     1            1           13h</span><br><span class="line"></span><br><span class="line">NAME                                                  DESIRED   CURRENT   READY   AGE</span><br><span class="line">replicaset.apps/jupyter-3.8-deployment-6676cc56d6     1         1         1       13h</span><br></pre></td></tr></table></figure><p>Dockerfile ë¥¼ í†µí•œ ë¹Œë“œ í™˜ê²½ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ ll</span><br><span class="line">total 104</span><br><span class="line">drwxr-xr-x 2 root root  4096 May 28 09:05 ./</span><br><span class="line">drwxr-xr-x 6 root root  4096 May 26 09:56 ../</span><br><span class="line">-rw-r--r-- 1 root root    71 May 26 01:52 create_pwd_hash.py</span><br><span class="line">-rw-r--r-- 1 root root  8160 May 26 08:10 Dockerfile</span><br><span class="line">-rw-r--r-- 1 root root   965 May 26 01:52 fix-permissions</span><br><span class="line">-rw-r--r-- 1 root root 33023 May 28 09:05 history.py</span><br><span class="line">-rw-r--r-- 1 root root  1877 May 26 09:54 jupyter_notebook_config.py</span><br><span class="line">-rw-r--r-- 1 root root   949 May 28 09:04 log_history.py</span><br><span class="line">-rwxr-xr-x 1 root root   524 May 26 01:52 start-notebook.sh*</span><br><span class="line">-rwxr-xr-x 1 root root  6302 May 26 01:52 start.sh*</span><br><span class="line">-rwxr-xr-x 1 root root  1181 May 26 01:52 start-singleuser.sh*</span><br></pre></td></tr></table></figure><blockquote><p><em>íŒŒì¼ ëª©ë¡ ì¤‘ ìƒˆë¡œ ì¶”ê°€í•œ ê²ƒì€ <code>log_history.py</code>ì™€ <code>history.py</code>ì´ë‹¤. ì¶”í›„ì— Dockerfile ì»¤ìŠ¤í…€í™” í•œ ê²°ê³¼ë¥¼ ì¶”ê°€í•  ì˜ˆì •ì´ë‹¤.</em></p></blockquote><h1 id="log-history-py"><a href="#log-history-py" class="headerlink" title=" log_history.py"></a><a name="history"></a> log_history.py</h1><p>ìƒì†Œí•  ê²ƒì´ë‹¤. ë§ë‹¤. ì™œëƒí•˜ë©´ íŒŒì¼ ë„¤ì´ë°ì€ ë‚´ê°€ ìƒê°í•œ ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.  </p><p>ê³ ê°ì‚¬ ìš”ê±´ì€ ê°„ë‹¨í•˜ë‹¤. Jupyter Notebook ì„ ì´ìš©í•´ ë¶„ì„ê°€ê°€ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì˜€ì„ ë•Œ, ì½”ë“œ ì´ë ¥ì„ ë‚¨ê¸°ëŠ” logê°€ í•„ìš”í–ˆë‹¤. ë¬¼ë¡  python ë¡œê·¸ì˜ ê²½ìš° python ì„ ì‹¤í–‰í•œ ë””ë ‰í† ë¦¬ì—ì„œ .python_history ê°€ ì‘ì„±ë˜ì§€ë§Œ, ì´ë†ˆì˜ Jupyter Notebook ì€ ì–´ë””ì—ë‹¤ ë¡œê·¸ë¥¼ ë‚¨ê¸°ëŠ”ì§€ íŒŒì•…ì´ ì–´ë ¤ì› ë‹¤.  </p><p>But, Jupyter Notebook ê³¼ IPython ì˜ ê´€ê³„ë¥¼ íŒŒì•…í•˜ë©´ ì‰½ê²Œ í’€ë¦°ë‹¤. êµ¬ê¸€ë§ í•˜ë©´ ì‰½ê²Œ ì°¨ì´ì ì„ ì‚´í•„ ìˆ˜ ìˆê² ì§€ë§Œ, ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´ ì°¨ì´ê°€ ìˆëŠ” ê²ƒ ë³´ë‹¤ <code>í¬í•¨ê´€ê³„</code>ë¥¼ ê°€ì§„ë‹¤. ì¦‰, Jupyter Notebook ì€ ë‹¤ì–‘í•œ ì–¸ì–´ë¥¼ ì§€ì›í•˜ëŠ”ë° ê·¸ ì¤‘ IPython ì´ íŒŒì´ì¬ ì–¸ì–´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤. ë‹¤ì‹œ ë§í•´ Jupyter Notebookì€ IPython ì„ í¬í•¨í•œë‹¤.  </p><p>ì„œë¡ ì´ ê¸¸ì—ˆë‹¤. ê²°êµ­ Jupyter POD ë¥¼ ê¸°ë™í•˜ë©´ $HOME ë””ë ‰í† ë¦¬ì— <code>.ipython</code> í´ë”ê°€ ìƒì„±ëœë‹¤. êµ¬ì¡°ë¥¼ ì‚´í”¼ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@jupyter-3:~/.ipython<span class="comment"># tree .</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ extensions</span><br><span class="line">â”œâ”€â”€ nbextensions</span><br><span class="line">â””â”€â”€ profile_default</span><br><span class="line">    â”œâ”€â”€ db</span><br><span class="line">    â”œâ”€â”€ history.sqlite</span><br><span class="line">    â”œâ”€â”€ jupyter.log</span><br><span class="line">    â”œâ”€â”€ <span class="built_in">log</span></span><br><span class="line">    â”œâ”€â”€ pid</span><br><span class="line">    â”œâ”€â”€ security</span><br><span class="line">    â””â”€â”€ startup</span><br><span class="line">        â””â”€â”€ README</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ìš°ë¦¬ê°€ ì£¼ì˜ìˆê²Œ ë³¼ ë””ë ‰í† ë¦¬ëŠ” <code>startup</code> í´ë”ë‹¤. ì´ë¦„ì—ì„œ ë³´ì´ë“¯, startup í´ë”ì˜ README ë¥¼ ì—´ì–´ë³´ë©´ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤. Notebook ì„ ì‹¤í–‰í•˜ê¸° ì „ í™˜ê²½ êµ¬ì„±ì„ ë„ì™€ì£¼ëŠ” ê³µê°„ì´ë‹¤. ì´ í´ë”ì— ë‹¤ìŒê³¼ ê°™ì´ <code>log_history.py</code> ë¥¼ ì‘ì„±í•œë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> atexit</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">ip = get_ipython()</span><br><span class="line">LIMIT = <span class="number">100000</span> <span class="comment"># limit the size of the history</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_history</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;save the IPython history to a plaintext file&quot;&quot;&quot;</span></span><br><span class="line">    histfile = os.path.join(ip.profile_dir.location, <span class="string">&quot;jupyter.log&quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;[INFO] Saving plaintext history to %s&quot;</span> % histfile)</span><br><span class="line">    lines = []</span><br><span class="line">    lines.extend(<span class="string">&#x27;[&#123;0&#125;]\n&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(record[<span class="number">2</span>][<span class="number">1</span>], record[<span class="number">2</span>][<span class="number">0</span>]) + <span class="string">&#x27;\n&#x27;</span> <span class="keyword">for</span> record <span class="keyword">in</span> ip.history_manager.get_range())</span><br><span class="line">    <span class="comment"># get previous lines</span></span><br><span class="line">    <span class="comment"># this is only necessary because we truncate the history,</span></span><br><span class="line">    <span class="comment"># otherwise we chould just open with mode=&#x27;a&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(histfile):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(histfile, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="comment">#lines = f.readlines()</span></span><br><span class="line">            f.writelines(lines)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(histfile, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.writelines(lines)</span><br><span class="line"></span><br><span class="line"><span class="comment"># do the save at exit</span></span><br><span class="line">atexit.register(save_history)</span><br></pre></td></tr></table></figure><p>ì½”ë“œë¥¼ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´ log íŒŒì¼ì´ ìˆë‹¤ë©´ íŒŒì¼ì„ ìˆ˜ì •ëª¨ë“œë¡œ ì—´ì–´ Notebook ì•ˆì—ì„œ ì‹¤í–‰í•œ Python ì‹¤í–‰ ì´ë ¥ì„ ì¶”ê°€í•˜ê³ , ì—†ìœ¼ë©´ ìƒˆë¡œ ë§Œë“¤ì–´ ì²˜ìŒìœ¼ë¡œ ìƒì„±í•œ ë¡œê·¸ë¥¼ ì¶”ê°€í•œë‹¤. ì—¬ê¸°ì„œ ì£¼ì˜ê¹Šê²Œ ë³¼ ê³³ì€ <code>history_manager</code> ì˜¤ë¸Œì íŠ¸ì´ë‹¤.  </p><p>Jupyter Notebook ì˜ History ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ë¡œ ë‹¤ìŒ ì±•í„°ì—ì„œ ê°„ë‹¨íˆ ì„¤ëª…í•˜ê³  ìˆ˜ì •í•œ ë¶€ë¶„ì„ ì„¤ëª…í•˜ê² ë‹¤.  </p><h1 id="Customize-IPython-core-history-py"><a href="#Customize-IPython-core-history-py" class="headerlink" title=" Customize IPython/core/history.py"></a><a name="tunning"></a> Customize IPython/core/history.py</h1><p>python ì„¤ì¹˜ ë””ë ‰í† ë¦¬ ë‚´ site-package ì—ëŠ” IPython ì´ ì¡´ì¬í•  ê²ƒì´ë‹¤. <code>$PY_PKG_DIR/IPython/core</code> ì— <code>history.py</code> ë¥¼ ìˆ˜ì •í•  ê²ƒì´ë‹¤.  </p><p>ìˆ˜ì •ì´ ì™œ í•„ìš”í•œê°€? ê¸°ë³¸ì ìœ¼ë¡œ Jupyter Notebook ì€ sqlite3 DBì— history ë¥¼ ë‚¨ê¸°ì§€ë§Œ Timestamp ëŠ” ì—†ë‹¤. ì´ë¥¼ ìœ„í•´ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— <code>history.py</code> ë¥¼ ì—´ì–´ <code>def store_inputs</code> í•¨ìˆ˜ë¥¼ ì°¾ì•„ë³¸ë‹¤. ê·¸ ë‹¤ìŒì€ ì‰½ë‹¤, í•œ ì¤„ë§Œ ì¶”ê°€í•˜ë©´ ëœë‹¤.  </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">store_inputs</span>(<span class="params">self, line_num, source, source_raw=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Store source and raw input in history and create input cache</span></span><br><span class="line"><span class="string">    variables ``_i*``.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Parameters</span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    line_num : int</span></span><br><span class="line"><span class="string">      The prompt number of this input.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    source : str</span></span><br><span class="line"><span class="string">      Python input.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    source_raw : str, optional</span></span><br><span class="line"><span class="string">      If given, this is the raw input without any IPython transformations</span></span><br><span class="line"><span class="string">      applied to it.  If not given, ``source`` is used.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> source_raw <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        source_raw = source</span><br><span class="line">    source = source.rstrip(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    source_raw = source_raw.rstrip(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># do not store exit/quit commands</span></span><br><span class="line">    <span class="keyword">if</span> self._exit_re.match(source_raw.strip()):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    self.input_hist_parsed.append(source)</span><br><span class="line">    <span class="comment">#############</span></span><br><span class="line">    <span class="comment">###append</span></span><br><span class="line">    self.input_hist_raw.append([source_raw, datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)])</span><br><span class="line">    <span class="comment">###append-end</span></span><br><span class="line">    <span class="comment">#############</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> self.db_input_cache_lock:</span><br><span class="line">        self.db_input_cache.append((line_num, source, source_raw))</span><br><span class="line">        <span class="comment"># Trigger to flush cache and write to DB.</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.db_input_cache) &gt;= self.db_cache_size:</span><br><span class="line">            self.save_flag.<span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># update the auto _i variables</span></span><br><span class="line">    self._iii = self._ii</span><br><span class="line">    self._ii = self._i</span><br><span class="line">    self._i = self._i00</span><br><span class="line">    self._i00 = source_raw</span><br><span class="line"></span><br><span class="line">    <span class="comment"># hackish access to user namespace to create _i1,_i2... dynamically</span></span><br><span class="line">    new_i = <span class="string">&#x27;_i%s&#x27;</span> % line_num</span><br><span class="line">    to_main = &#123;<span class="string">&#x27;_i&#x27;</span>: self._i,</span><br><span class="line">               <span class="string">&#x27;_ii&#x27;</span>: self._ii,</span><br><span class="line">               <span class="string">&#x27;_iii&#x27;</span>: self._iii,</span><br><span class="line">               new_i : self._i00 &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> self.shell <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        self.shell.push(to_main, interactive=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p>ì´ í•¨ìˆ˜ë¥¼ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´, Jupyter Notebook ì—ì„œ ë°œìƒí•œ python history input ì„ sqlite3 DB ì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜ë‹¤. ì¶”ê°€ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.<br><code>self.input_hist_raw.append([source_raw, datetime.datetime.now().strftime(&#39;%Y-%m-%d %H:%M:%S&#39;)])</code>  </p><blockquote><p><em>ì´ í•¨ìˆ˜ë¥¼ ì¶”ì í•œ ê³¼ì •ì€ history_manager.get_range() ê°€ generator í˜•íƒœë¡œ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— <code>yield</code> ê²€ìƒ‰ì„ í•´ë³´ë‹ˆ ë‹´ë‹¹ í•¨ìˆ˜ëŠ” <code>_get_range_session</code> ì„ì„ í™•ì¸í–ˆë‹¤. ì²« ì¤„ <code>input_hist_raw</code> ê°€ history ì˜ raw data ë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ê³  <code>input_hist_raw</code> ê²€ìƒ‰í•˜ì—¬ <code>store_inputs</code> í•¨ìˆ˜ë¥¼ trace í•˜ì˜€ë‹¤.</em></p></blockquote><h1 id="Result"><a href="#Result" class="headerlink" title=" Result"></a><a name="result"></a> Result</h1><p>ê°„ë‹¨í•œ Notebook ì„ ìƒì„±í•˜ê³  log íŒŒì¼ì„ í™•ì¸í•´ë³¸ë‹¤. log ê²½ë¡œëŠ” <code>$HOME/.ipython/profile-default</code> ê²½ë¡œì´ë‹¤. <em>(log_history.py ì—ì„œ ìˆ˜ì • ê°€ëŠ¥)</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">$ cat jupyter.log</span><br><span class="line">[2020-05-28 08:43:46]</span><br><span class="line"><span class="built_in">print</span>(1)</span><br><span class="line">[2020-05-28 08:43:47]</span><br><span class="line">def sum(a, b): <span class="comment"># 3ê³¼ 5ê°€ ê°ê° ë§¤ê°œë³€ìˆ˜ aì™€ bì— í• ë‹¹ëœë‹¤.</span></span><br><span class="line">    result = a + b <span class="comment"># ë³€ìˆ˜ resultì—ëŠ” ë§¤ê°œë³€ìˆ˜ aì™€ bì˜ í•©ì´ í• ë‹¹ë˜ë¯€ë¡œ ì´ ê²½ìš°ì—ëŠ” 3ê³¼ 5ì˜ í•©ì¸ 8ì´ í• ë‹¹ëœë‹¤.</span></span><br><span class="line">    <span class="built_in">return</span> result <span class="comment"># 8ì„ í•¨ìˆ˜ ë°”ê¹¥ìœ¼ë¡œ ë°˜í™˜í•œë‹¤.</span></span><br><span class="line">[2020-05-28 08:43:47]</span><br><span class="line">sum(10,20)</span><br><span class="line">[2020-05-28 08:43:47]</span><br><span class="line"><span class="built_in">print</span>(2)</span><br><span class="line">[2020-05-28 08:43:47]</span><br><span class="line">def say_hello(func):                    <span class="comment"># 1</span></span><br><span class="line">    def wrapper2(*args, **kwargs):      <span class="comment"># 8</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Hello&#x27;</span>)                  <span class="comment"># 11</span></span><br><span class="line">        <span class="built_in">return</span> func(*args, **kwargs)    <span class="comment"># 12</span></span><br><span class="line">    <span class="built_in">return</span> wrapper2                     <span class="comment"># 9</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def say_hi(func):                       <span class="comment"># 2</span></span><br><span class="line">    def wrapper1(*args, **kwargs):      <span class="comment"># 5</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Hi&#x27;</span>)                     <span class="comment"># 13</span></span><br><span class="line">        <span class="built_in">return</span> func(*args, **kwargs)    <span class="comment"># 14</span></span><br><span class="line">    <span class="built_in">return</span> wrapper1                     <span class="comment"># 6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@say_hello                              <span class="comment"># 7</span></span><br><span class="line">@say_hi                                 <span class="comment"># 4</span></span><br><span class="line">def introduce(name):                    <span class="comment"># 3</span></span><br><span class="line">    <span class="built_in">print</span>(f<span class="string">&#x27;My name is &#123;name&#125;!&#x27;</span>)        <span class="comment"># 15</span></span><br><span class="line"></span><br><span class="line">introduce(<span class="string">&#x27;Jaejun&#x27;</span>)                    <span class="comment"># 10</span></span><br></pre></td></tr></table></figure><blockquote><p><em>ì¶”ê°€ì ìœ¼ë¡œ ê³ ë ¤í•  ì‚¬í•­ì´ ìˆë‹¤. log íŒŒì¼ ê´€ë¦¬ì¸ë° ìµœëŒ€ í¬ê¸°ë¥¼ ì§€ì •í•´ì„œ ìš©ëŸ‰ì´ ì»¤ì§€ë©´ ì´ì „ History ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ì•ˆì„ ë§ˆë ¨í•˜ê³  ìˆë‹¤. ì¡°ë§Œê°„ Dockerfile ë„ ì™„ì„±ë˜ë©´ ì¶”ê°€í•  ì˜ˆì •ì´ë‹¤.</em></p></blockquote><h1 id="Reference"><a href="#Reference" class="headerlink" title=" Reference"></a><a name="ref"></a> Reference</h1><ul><li><a href="https://anaconda.org/conda-forge/python-json-logger">https://anaconda.org/conda-forge/python-json-logger</a></li><li><a href="https://velog.io/@log327">https://velog.io/@log327</a></li><li><a href="https://stackoverflow.com/">https://stackoverflow.com/questions/16858724/how-to-log-ipython-history-to-text-file</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/python-jupyter_logging/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] CDH(ClouDera Hadoop) Client ì„¤ì •</title>
      <link>https://jx2lee.github.io/hadoop-client/</link>
      <guid>https://jx2lee.github.io/hadoop-client/</guid>
      <pubDate>Thu, 14 May 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;center&gt; Python ì„ ì´ìš©í•´ CDH ì—°ë™í•˜ëŠ” ê³¼ì •ì—ì„œ Hadoop Client ì„¤ì • ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•œë‹¤.&lt;/center&gt;
&lt;br&gt;
&lt;br&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<center> Python ì„ ì´ìš©í•´ CDH ì—°ë™í•˜ëŠ” ê³¼ì •ì—ì„œ Hadoop Client ì„¤ì • ë°©ë²•ì— ëŒ€í•´ ì •ë¦¬í•œë‹¤.</center><br><br><a id="more"></a><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents:</strong>  </p><ol><li><a href="#download">Bianry Download</a></li><li><a href="#config">CDH Hadoop Config</a></li><li><a href="#tar">Client ì••ì¶• í•´ì œ</a></li><li><a href="#apply">Config ì ìš©</a></li><li><a href="#hosts">/etc/hosts ì ìš©</a></li><li><a href="#env">ENV</a></li></ol><h1 id="Bianry-Download"><a href="#Bianry-Download" class="headerlink" title=" Bianry Download"></a><a name="donwload"></a> Bianry Download</h1><ul><li>wget ì„ ì´ìš©í•´ CDH hadoop 3 ë²„ì ¼ì„ ë‹¤ìš´</li><li><code>$ wget https://archive.apache.org/dist/hadoop/core/hadoop-3.0.0/hadoop-3.0.0.tar.gz</code></li></ul><h1 id="CDH-Hadoop-Config"><a href="#CDH-Hadoop-Config" class="headerlink" title=" CDH Hadoop Config"></a><a name="config"></a> CDH Hadoop Config</h1><ul><li>CDH ì›¹ì—ì„œ hadoop config ì„ ë‹¤ìš´ë¡œë“œ<ul><li>core-site.xml</li><li>hdfs-site.xml</li><li>yarn-site.xml <em>(Yarn êµ¬ì„± ì‹œ)</em></li></ul></li></ul><h1 id="Client-ì••ì¶•-í•´ì œ"><a href="#Client-ì••ì¶•-í•´ì œ" class="headerlink" title=" Client ì••ì¶• í•´ì œ"></a><a name="tar"></a> Client ì••ì¶• í•´ì œ</h1><ul><li>íŠ¹ì • directory ì— ì••ì¶• í•´ì œ</li><li><code>$ tar -xvf hadoop-3.0.0.tar.gz &amp;&amp; mv hadoop-3.0.0 hadoop</code></li></ul><h1 id="Config-ì ìš©"><a href="#Config-ì ìš©" class="headerlink" title=" Config ì ìš©"></a><a name="apply"></a> Config ì ìš©</h1><ul><li><code>$HADOOP_HOME/etc/hadoop</code> ì— ìœ„ì— ì¤€ë¹„í•œ CDH config ì„ copy &amp; paste</li><li><code>$ cp *-site.xml $HADOOP_HOME/etc/hadoop</code></li></ul><h1 id="etc-hosts-ì ìš©"><a href="#etc-hosts-ì ìš©" class="headerlink" title=" /etc/hosts ì ìš©"></a><a name="hosts"></a> /etc/hosts ì ìš©</h1><ul><li>Client ì„œë²„ì˜ IP hostname ì— ë§ˆì°¬ê°€ì§€ë¡œ í´ëŸ¬ìŠ¤í„° ë…¸ë“œ ì •ë³´ë¥¼ ì‘ì„±<ul><li>example<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/hosts</span></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">192.168.179.181  chd1</span><br><span class="line">192.168.179.182  chd2</span><br><span class="line">192.168.179.183  chd3</span><br></pre></td></tr></table></figure></li><li><code>$ touch /etc/hosts</code> ë¡œ íŒŒì¼ ì ìš©</li></ul></li></ul><h1 id="ENV"><a href="#ENV" class="headerlink" title=" ENV"></a><a name="env"></a> ENV</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/home/jovyan/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_CMD=/home/jovyan/hadoop/bin/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$HADOOP_CMD</span></span><br></pre></td></tr></table></figure><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-client/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] Jupyter Notebook ì„ ì´ìš©í•œ Hadoop ë° Database ì—°ë™</title>
      <link>https://jx2lee.github.io/python-connection_test/</link>
      <guid>https://jx2lee.github.io/python-connection_test/</guid>
      <pubDate>Thu, 14 May 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Python ì„ ì´ìš©í•œ Hadoop ë° Database ì—°ë™ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤.  &lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Python ì„ ì´ìš©í•œ Hadoop ë° Database ì—°ë™ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ë‹¤.  </p><a id="more"></a><p><strong>í™˜ê²½êµ¬ì„±</strong>:  </p><ul><li>Hadoop Cluster <em>(CDH 6.3.2)</em><ul><li>cdh1: 192.168.179.181</li><li>cdh2: 192.168.179.182</li><li>cdh3: 192.168.179.183 <em>(master)</em></li></ul></li><li>Jupyter Notebook<ul><li>docker custom image <em>(python version: 3.7)</em></li><li>kubernetes deployment ë°°í¬<ul><li><code>namespace</code>: nps</li></ul></li><li>ì»¨í…Œì´ë„ˆ í™˜ê²½ : Ubuntu 18.04.4 LTS</li></ul></li></ul><p><strong><span class="github-emoji" alias="sparkles" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png?v8">&#x2728;</span> Contents</strong>:  </p><ol><li><a href="#hdfs">HDFS</a></li><li><a href="#hive">Hive</a></li><li><a href="#hbase">HBase</a></li><li><a href="#impala">Impala</a></li><li><a href="#spark">Spark</a></li><li><a href="#sybase">Sybase</a></li><li><a href="#oracle">Oracle</a></li></ol><h1 id="HDFS"><a href="#HDFS" class="headerlink" title=" HDFS"></a><a name="hdfs"></a> HDFS</h1><h2 id="ì„¤ì¹˜-íŒ¨í‚¤ì§€"><a href="#ì„¤ì¹˜-íŒ¨í‚¤ì§€" class="headerlink" title="ì„¤ì¹˜ íŒ¨í‚¤ì§€"></a>ì„¤ì¹˜ íŒ¨í‚¤ì§€</h2><h3 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h3><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><ul><li>hdfs<ul><li>Requirement already satisfied: docopt in /opt/conda/lib/python3.8/site-packages (from hdfs) (0.6.2)</li><li>Requirement already satisfied: six&gt;=1.9.0 in /opt/conda/lib/python3.8/site-packages (from hdfs) (1.14.0)</li><li>Requirement already satisfied: requests&gt;=2.7.0 in /opt/conda/lib/python3.8/site-packages (from hdfs) (2.23.0)</li><li>Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,&lt;1.26,&gt;=1.21.1 in /opt/conda/lib/python3.8/site-packages (from   - requests&gt;=2.7.0-&gt;hdfs) (1.25.9)</li><li>Requirement already satisfied: chardet&lt;4,&gt;=3.0.2 in /opt/conda/lib/python3.8/site-packages (from requests&gt;=2.7.0-&gt;hdfs) (3.0.4)</li><li>Requirement already satisfied: idna&lt;3,&gt;=2.5 in /opt/conda/lib/python3.8/site-packages (from requests&gt;=2.7.0-&gt;hdfs) (2.9)</li><li>Requirement already satisfied: certifi&gt;=2017.4.17 in /opt/conda/lib/python3.8/site-packages (from requests&gt;=2.7.0-&gt;hdfs) (2020.4.5.1)</li></ul></li></ul><h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> hdfs <span class="keyword">import</span> InsecureClient</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connection</span></span><br><span class="line"></span><br><span class="line">client_hdfs = InsecureClient(<span class="string">&#x27;http://192.168.179.183:9870&#x27;</span>, user=<span class="string">&#x27;hdfs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Create</span></span><br><span class="line"></span><br><span class="line">create_df = pd.DataFrame([<span class="number">1000</span>, <span class="number">2000</span>, <span class="number">3000</span>, <span class="number">4000</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> client_hdfs.write(<span class="string">&#x27;/tmp/t2.csv&#x27;</span>, encoding = <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> writer:</span><br><span class="line">    create_df.to_csv(writer)</span><br><span class="line"></span><br><span class="line">print(client_hdfs.<span class="built_in">list</span>(<span class="string">&#x27;/tmp&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## Read</span></span><br><span class="line"></span><br><span class="line">client_hdfs.<span class="built_in">list</span>(<span class="string">&#x27;/tmp&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> client_hdfs.read(<span class="string">&#x27;/tmp/test.csv&#x27;</span>, encoding = <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> reader:</span><br><span class="line">    df = pd.read_csv(reader)</span><br><span class="line">    print(df)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Update</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> client_hdfs.read(<span class="string">&#x27;/tmp/t2.csv&#x27;</span>, encoding = <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> reader:</span><br><span class="line">    df = pd.read_csv(reader)</span><br><span class="line">df.loc[<span class="number">4</span>] = [<span class="number">4</span>,<span class="number">5000</span>]</span><br><span class="line">client_hdfs.delete(<span class="string">&#x27;/tmp/t2.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> client_hdfs.write(<span class="string">&#x27;/tmp/t2.csv&#x27;</span>, encoding = <span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> writer:</span><br><span class="line">    df.to_csv(writer)</span><br><span class="line">    print(df)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Delete</span></span><br><span class="line"></span><br><span class="line">client_hdfs.delete(<span class="string">&#x27;/tmp/t2.csv&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;t2.csv&#x27;</span> <span class="keyword">in</span> client_hdfs.<span class="built_in">list</span>(<span class="string">&#x27;/tmp&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="https://pypi.org/project/hdfs/">https://pypi.org/project/hdfs/</a></li><li><a href="https://hdfscli.readthedocs.io/en/latest/api.html">https://hdfscli.readthedocs.io/en/latest/api.html</a></li></ul><h1 id="Hive"><a href="#Hive" class="headerlink" title=" Hive"></a><a name="hive"></a> Hive</h1><h2 id="ì„¤ì¹˜-íŒ¨í‚¤ì§€-1"><a href="#ì„¤ì¹˜-íŒ¨í‚¤ì§€-1" class="headerlink" title="ì„¤ì¹˜ íŒ¨í‚¤ì§€"></a>ì„¤ì¹˜ íŒ¨í‚¤ì§€</h2><h3 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a>Linux</h3><ul><li>libsasl2-dev</li><li>libsasl2-modules</li></ul><h3 id="Python-1"><a href="#Python-1" class="headerlink" title="Python"></a>Python</h3><ul><li>pyhive<ul><li>Requirement already satisfied: future in /opt/conda/lib/python3.8/site-packages (from pyhive) (0.18.2)</li><li>Requirement already satisfied: python-dateutil in /opt/conda/lib/python3.8/site-packages (from pyhive) (2.8.1)</li><li>Requirement already satisfied: six&gt;=1.5 in /opt/conda/lib/python3.8/site-packages (from python-dateutil-&gt;pyhive) (1.14.0)</li></ul></li><li>thrift</li><li>sasl</li><li>thrift_sasl<ul><li>Requirement already satisfied: thrift&gt;=0.10.0 in /opt/conda/lib/python3.8/site-packages (from thrift_sasl) (0.13.0)</li><li>Requirement already satisfied: sasl&gt;=0.2.1 in /opt/conda/lib/python3.8/site-packages (from thrift_sasl) (0.2.1)</li><li>Requirement already satisfied: six&gt;=1.13.0 in /opt/conda/lib/python3.8/site-packages (from thrift_sasl) (1.14.0)</li></ul></li></ul><h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pyhive.hive <span class="keyword">as</span> hive</span><br><span class="line">conn = hive.Connection(host=<span class="string">&#x27;cdh3&#x27;</span>, port=<span class="number">10000</span>, username=<span class="string">&#x27;root&#x27;</span>, password=<span class="string">&#x27;tmaxtmax&#x27;</span>, database=<span class="string">&#x27;default&#x27;</span>, auth=<span class="string">&#x27;CUSTOM&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create</span></span><br><span class="line"></span><br><span class="line">cur = conn.cursor()</span><br><span class="line">sql = <span class="string">&quot;CREATE TABLE `default`.`create_test` (  `field_1` bigint ,  `field_2` string ,  `field_3` string ,  `field_4` string ,  `field_5` string ,  `field_6` bigint ,  `field_7` string ,  `field_8` double ,  `field_9` string ,  `field_10` string ) ROW FORMAT   DELIMITED    FIELDS TERMINATED BY &#x27;|&#x27;    COLLECTION ITEMS TERMINATED BY &#x27;&#x27;    MAP KEYS TERMINATED BY &#x27;&#x27;  STORED AS TextFile&quot;</span></span><br><span class="line">cur.execute(sql)</span><br><span class="line"></span><br><span class="line">cur = conn.cursor()</span><br><span class="line">cur.execute(<span class="string">&#x27;select * from create_test&#x27;</span>)</span><br><span class="line">res = cur.fetchall()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read</span></span><br><span class="line"></span><br><span class="line">cur.execute(<span class="string">&#x27;select count(*) from create_test&#x27;</span>)</span><br><span class="line">res = cur.fetchall()</span><br><span class="line"></span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Update</span></span><br><span class="line"></span><br><span class="line">cur.execute(<span class="string">&#x27;alter table create_test rename to create_test_rev&#x27;</span>)</span><br><span class="line">cur.execute(<span class="string">&#x27;describe create_test_rev&#x27;</span>)</span><br><span class="line">res = cur.fetchall()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Delete</span></span><br><span class="line"></span><br><span class="line">cur.execute(<span class="string">&#x27;drop table create_test_rev&#x27;</span>)</span><br><span class="line">cur.execute(<span class="string">&#x27;show tables&#x27;</span>)</span><br><span class="line">res = cur.fetchall()</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure><h2 id="Ref-1"><a href="#Ref-1" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="https://sungwookkang.com/m/1367">https://sungwookkang.com/m/1367</a></li></ul><h1 id="HBase"><a href="#HBase" class="headerlink" title=" HBase"></a><a name="hbase"></a> HBase</h1><ul><li>Hbase ì„œë²„ ë‚´ Thrift ê°€ ë™ì‘í•˜ê³  ìˆì–´ì•¼í•¨<ul><li>í´ëŸ¬ìŠ¤í„° ë‚´ ì•„ë¬´ ë…¸ë“œì—ì„œ <code>$ hbase thrift &amp;</code> ëª…ë ¹ì–´ë¡œ thrift ì‹¤í–‰<ul><li>backgroud êµ¬ë™</li></ul></li></ul></li></ul><h2 id="ì„¤ì¹˜-íŒ¨í‚¤ì§€-2"><a href="#ì„¤ì¹˜-íŒ¨í‚¤ì§€-2" class="headerlink" title="ì„¤ì¹˜ íŒ¨í‚¤ì§€"></a>ì„¤ì¹˜ íŒ¨í‚¤ì§€</h2><h3 id="Linux-2"><a href="#Linux-2" class="headerlink" title="Linux"></a>Linux</h3><h3 id="Python-2"><a href="#Python-2" class="headerlink" title="Python"></a>Python</h3><ul><li>happybase<ul><li>Requirement already satisfied: six in /opt/conda/lib/python3.8/site-packages (from happybase) (1.14.0)</li><li>Requirement already satisfied: thriftpy2&gt;=0.4 in /opt/conda/lib/python3.8/site-packages (from happybase) (0.4.11)</li><li>Requirement already satisfied: ply&lt;4.0,&gt;=3.4 in /opt/conda/lib/python3.8/site-packages (from thriftpy2&gt;=0.4-&gt;happybase) (3.11)</li></ul></li></ul><h2 id="Code-2"><a href="#Code-2" class="headerlink" title="Code"></a>Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> happybase</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connection</span></span><br><span class="line"></span><br><span class="line">conn = happybase.Connection(<span class="string">&#x27;192.168.179.183&#x27;</span>, <span class="number">9090</span>, autoconnect=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Create </span></span><br><span class="line"></span><br><span class="line">conn.create_table(<span class="string">&#x27;test&#x27;</span>,&#123;<span class="string">&#x27;cf&#x27;</span>:&#123;&#125;&#125;)</span><br><span class="line">conn.tables()</span><br><span class="line"></span><br><span class="line"><span class="comment">## Read</span></span><br><span class="line"></span><br><span class="line">tbl = conn.table(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> key, data <span class="keyword">in</span> tbl.scan():</span><br><span class="line">    print(key, data)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Update</span></span><br><span class="line"></span><br><span class="line">table = conn.table(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">table.put(<span class="string">&#x27;row-key&#x27;</span>,&#123;<span class="string">&#x27;cf:col1&#x27;</span>:<span class="string">&#x27;value1&#x27;</span>,<span class="string">&#x27;cf:col2&#x27;</span>:<span class="string">&#x27;value2&#x27;</span>&#125;)</span><br><span class="line">row = <span class="built_in">dict</span>(table.row(<span class="string">&#x27;row-key&#x27;</span>))</span><br><span class="line"></span><br><span class="line">print(row)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Delete</span></span><br><span class="line"></span><br><span class="line">conn.delete_table(<span class="string">&#x27;test&#x27;</span>, disable=<span class="literal">True</span>)</span><br><span class="line">conn.tables()</span><br></pre></td></tr></table></figure><h2 id="Ref-2"><a href="#Ref-2" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="https://creatorw.tistory.com/entry/Hbase%EC%99%80-python-%EC%97%B0%EA%B2%B0-%ED%95%98%EA%B8%B0%EA%B8%B0">https://creatorw.tistory.com/entry/Hbase%EC%99%80-python-%EC%97%B0%EA%B2%B0-%ED%95%98%EA%B8%B0%EA%B8%B0</a></li></ul><h1 id="Impala"><a href="#Impala" class="headerlink" title=" Impala"></a><a name="impala"></a> Impala</h1><ul><li>connection ì‹œ host ëŠ” ë§ˆìŠ¤í„°ë¡œ ì‘ì„±í•˜ë‹ˆ connection ì´ ë˜ì§€ ì•ŠìŒ<ul><li>ë§ˆìŠ¤í„° ì™¸ ë…¸ë“œ ipë¡œ host ì„¤ì • í•„ìš”</li></ul></li></ul><h2 id="ì„¤ì¹˜-íŒ¨í‚¤ì§€-3"><a href="#ì„¤ì¹˜-íŒ¨í‚¤ì§€-3" class="headerlink" title="ì„¤ì¹˜ íŒ¨í‚¤ì§€"></a>ì„¤ì¹˜ íŒ¨í‚¤ì§€</h2><h3 id="Linux-3"><a href="#Linux-3" class="headerlink" title="Linux"></a>Linux</h3><h3 id="Python-3"><a href="#Python-3" class="headerlink" title="Python"></a>Python</h3><ul><li>impyla==0.15a1 *(ê¼­ 0.15a1 ë²„ì ¼ ì„¤ì¹˜ í•„ìš”)<ul><li>Requirement already satisfied: six in /opt/conda/lib/python3.8/site-packages (from impyla==0.15a1) (1.14.0)</li><li>Requirement already satisfied: bitarray in /opt/conda/lib/python3.8/site-packages (from impyla==0.15a1) (1.2.1)</li><li>Requirement already satisfied: thrift&gt;=0.9.3 in /opt/conda/lib/python3.8/site-packages (from impyla==0.15a1) (0.13.0)</li><li>Requirement already satisfied: thriftpy2==0.4.0; python_version &gt;= â€œ3.0â€ in /opt/conda/lib/python3.8/site-packages (from impyla==0.15a1) (  - 0.4.0)</li><li>Requirement already satisfied: ply&lt;4.0,&gt;=3.4 in /opt/conda/lib/python3.8/site-packages (from thriftpy2==0.4.0; python_version &gt;=   - â€œ3.0â€-&gt;impyla==0.15a1) (3.11)</li></ul></li></ul><h2 id="Code-3"><a href="#Code-3" class="headerlink" title="Code"></a>Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> impala.dbapi <span class="keyword">import</span> connect</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connection</span></span><br><span class="line"></span><br><span class="line">conn = connect(host=<span class="string">&#x27;192.168.179.181&#x27;</span>, port=<span class="number">21050</span>)</span><br><span class="line">cursor = conn.cursor()</span><br><span class="line">cursor.get_databases()</span><br><span class="line"></span><br><span class="line">drop = <span class="string">&quot;DROP TABLE IF EXISTS default.tab;&quot;</span></span><br><span class="line"></span><br><span class="line">create = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">CREATE EXTERNAL TABLE default.tab</span></span><br><span class="line"><span class="string">(</span></span><br><span class="line"><span class="string">id INT,</span></span><br><span class="line"><span class="string">col_1 BOOLEAN,</span></span><br><span class="line"><span class="string">col_2 DOUBLE,</span></span><br><span class="line"><span class="string">col_3 TIMESTAMP</span></span><br><span class="line"><span class="string">)</span></span><br><span class="line"><span class="string">ROW FORMAT DELIMITED FIELDS TERMINATED BY &#x27;,&#x27;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Create</span></span><br><span class="line"></span><br><span class="line">cursor.execute(create)</span><br><span class="line">cursor.execute(<span class="string">&#x27;select count(*) from default.tab&#x27;</span>)</span><br><span class="line">res = cursor.fetchall()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Read</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&#x27;select * from tab&#x27;</span>)</span><br><span class="line">res = cursor.fetchall()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Update</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&#x27;alter table default.tab rename to default.tab_rev&#x27;</span>)</span><br><span class="line">cursor.execute(<span class="string">&#x27;describe default.tab_rev&#x27;</span>)</span><br><span class="line">res = cursor.fetchall()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Delete</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&#x27;drop table default.tab_rev&#x27;</span>)</span><br><span class="line">cursor.execute(<span class="string">&#x27;show tables&#x27;</span>)</span><br><span class="line">res = cursor.fetchall()</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure><h2 id="Ref-3"><a href="#Ref-3" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="https://euriion.com/?p=411856">https://euriion.com/?p=411856</a></li><li><a href="https://m.blog.naver.com/PostView.nhn?blogId=hancury&logNo=220755129588&proxyReferer=https:%2F%2Fwww.google.com%2F">https://m.blog.naver.com/PostView.nhn?blogId=hancury&amp;logNo=220755129588&amp;proxyReferer=https:%2F%2Fwww.google.com%2F</a></li></ul><h1 id="Spark"><a href="#Spark" class="headerlink" title=" Spark"></a><a name="spark"></a> Spark</h1><ul><li>python 3.8 íŒ¨í‚¤ì§€ ë¯¸ì§€ì› <em>(pyspark)</em><ul><li><code>python 3.7</code> í™˜ê²½ì—ì„œë§Œ ì§„í–‰</li></ul></li><li>ì»¨í…Œì´ë„ˆ ë‚´ <code>hadoop client</code> ë° <code>spark</code> ì„¤ì¹˜ í•„ìš”<ul><li>hadoop: <code>$ wget https://archive.apache.org/dist/hadoop/core/hadoop-3.0.0/hadoop-3.0.0.tar.gz</code><ul><li>cdh í´ë¼ì´ì–¸íŠ¸ êµ¬ì„±íŒŒì¼ ì¤‘ core-site.xml, hdfs-site.xml, yarn-site.xml ì„ <code>$HADOOP_HOME/etc/hadoop</code> ìœ¼ë¡œ copy&amp;paste</li></ul></li><li>spark: <a href="https://archive.apache.org/dist/spark/spark-2.4.0/spark-2.4.0-bin-hadoop2.7.tgz">spark-2.4.0-bin-hadoop2.7.tgz</a></li></ul></li><li><code>.bashrc</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/home/jovyan/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_CMD=/home/jovyan/hadoop/bin/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=/home/jovyan/hadoop/etc/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$HADOOP_CMD</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> SPARK_HOME=/home/jovyan/spark</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$SPARK_HOME</span>/bin</span><br></pre></td></tr></table></figure></li><li>CDH spark êµ¬ì„±<ul><li>master: yarn</li><li>deploy mode: client</li></ul></li></ul><h2 id="ì„¤ì¹˜-íŒ¨í‚¤ì§€-4"><a href="#ì„¤ì¹˜-íŒ¨í‚¤ì§€-4" class="headerlink" title="ì„¤ì¹˜ íŒ¨í‚¤ì§€"></a>ì„¤ì¹˜ íŒ¨í‚¤ì§€</h2><h3 id="Linux-4"><a href="#Linux-4" class="headerlink" title="Linux"></a>Linux</h3><ul><li>default-jdk</li></ul><h3 id="Python-4"><a href="#Python-4" class="headerlink" title="Python"></a>Python</h3><ul><li>pyspark<ul><li>Requirement already satisfied: py4j==0.10.7 in /opt/conda/lib/python3.8/site-packages (from pyspark) (0.10.7)</li></ul></li></ul><h2 id="Ref-4"><a href="#Ref-4" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="https://www.sicara.ai/blog/2017-05-02-get-started-pyspark-jupyter-notebook-3-minutes">https://www.sicara.ai/blog/2017-05-02-get-started-pyspark-jupyter-notebook-3-minutes</a></li><li><a href="https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/spark_ipython.html">https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/spark_ipython.html</a></li><li><a href="https://github.com/mike-wendt/cloudera-jupyter-notebook-spark">https://github.com/mike-wendt/cloudera-jupyter-notebook-spark</a></li></ul><blockquote><p>ìœ„ì™€ ê°™ì€ í™˜ê²½ì—ì„œ Spark ì—°ë™ì€ ì‚¬ì‹¤ ì–´ë µë‹¤. ì™œëƒí•˜ë©´ CDH ë‚´ Yarn ì—ì„œ ì»¨í…Œì´ë„ˆ í˜¸ìŠ¤íŠ¸ëª…ì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŠ” CDH Yarn config ë¥¼ ìˆ˜ì •í•´ì„œ, ì»¨í…Œì´ë„ˆ í˜¸ìŠ¤íŠ¸ëª…ì„ ë°”ë¼ë³¼ ìˆ˜ ìˆê²Œë” ë³€ê²½í•˜ë©´ yarn-client ëª¨ë“œë¡œ ì—°ë™ì´ ê°€ëŠ¥í•˜ë‹¤. ì•„ë‹ˆë©´ <code>Livy</code> ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ CDH í´ëŸ¬ìŠ¤í„°ì— ì„¤ì¹˜í•˜ì—¬ API ë¡œ ì—°ë™í•˜ëŠ” ë°©ë²•ì´ ì¡´ì¬í•œë‹¤. <em>(êµ¬ê¸€ë§ ì¶”ì²œ)</em></p></blockquote><h1 id="Sybase"><a href="#Sybase" class="headerlink" title=" Sybase"></a><a name="sybase"></a> Sybase</h1><ul><li>jar file<ul><li>jconn3.jar <em>(jdk ë²„ì ¼ë³„ë¡œ ìƒì´í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ jconn4.jar ì¤€ë¹„ í•„ìš”)</em></li></ul></li></ul><h2 id="ì„¤ì¹˜-íŒ¨í‚¤ì§€-5"><a href="#ì„¤ì¹˜-íŒ¨í‚¤ì§€-5" class="headerlink" title="ì„¤ì¹˜ íŒ¨í‚¤ì§€"></a>ì„¤ì¹˜ íŒ¨í‚¤ì§€</h2><h3 id="Linux-5"><a href="#Linux-5" class="headerlink" title="Linux"></a>Linux</h3><ul><li>default-jdk</li></ul><h3 id="Python-5"><a href="#Python-5" class="headerlink" title="Python"></a>Python</h3><ul><li>jpype1==0.6.3</li><li>Jaydebeapi</li></ul><h2 id="Code-4"><a href="#Code-4" class="headerlink" title="Code"></a>Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jpype</span><br><span class="line"><span class="keyword">import</span> jaydebeapi</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connection</span></span><br><span class="line"></span><br><span class="line">conn = jaydebeapi.connect(<span class="string">&#x27;com.sybase.jdbc3.jdbc.SybDriver&#x27;</span>, <span class="string">&#x27;jdbc:sybase:Tds:192.168.179.169:2638&#x27;</span>, &#123;<span class="string">&#x27;user&#x27;</span>: <span class="string">&#x27;DBA&#x27;</span>, <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;sql&#x27;</span>&#125;</span><br><span class="line">                          ,[<span class="string">&#x27;/home/jovyan/jconn3.jar&#x27;</span>])</span><br><span class="line">c1 = conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment">## Create</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;create table aa(a int)&#x27;</span>)</span><br><span class="line">c1.execute(<span class="string">&#x27;select * from aa&#x27;</span>)</span><br><span class="line">print(c1.fetchall())</span><br><span class="line"></span><br><span class="line"><span class="comment">## Read</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;select * from aa&#x27;</span>)</span><br><span class="line">print(c1.fetchall())</span><br><span class="line"></span><br><span class="line"><span class="comment">## Update</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;insert into aa (a) values (1000)&#x27;</span>)</span><br><span class="line">c1.execute(<span class="string">&#x27;select * from aa&#x27;</span>)</span><br><span class="line">print(c1.fetchall())</span><br><span class="line"></span><br><span class="line"><span class="comment">## Delete</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;drop table aa&#x27;</span>)</span><br><span class="line">c1.execute(<span class="string">&#x27;select * from aa&#x27;</span>)</span><br><span class="line">print(c1.fetchall())</span><br></pre></td></tr></table></figure><h2 id="Ref-5"><a href="#Ref-5" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="https://stackoverflow.com/questions/3319788/what-is-the-best-way-to-connect-to-a-sybase-database-from-python">https://stackoverflow.com/questions/3319788/what-is-the-best-way-to-connect-to-a-sybase-database-from-python</a></li></ul><h1 id="Oracle"><a href="#Oracle" class="headerlink" title=" Oracle"></a><a name="oracle"></a> Oracle</h1><ul><li>jar file<ul><li>ojdbc6.jar</li></ul></li></ul><h2 id="ì„¤ì¹˜-íŒ¨í‚¤ì§€-6"><a href="#ì„¤ì¹˜-íŒ¨í‚¤ì§€-6" class="headerlink" title="ì„¤ì¹˜ íŒ¨í‚¤ì§€"></a>ì„¤ì¹˜ íŒ¨í‚¤ì§€</h2><h3 id="Linux-6"><a href="#Linux-6" class="headerlink" title="Linux"></a>Linux</h3><ul><li>default-jdk</li></ul><h3 id="Python-6"><a href="#Python-6" class="headerlink" title="Python"></a>Python</h3><ul><li>jpype1==0.6.3</li><li>Jaydebeapi</li></ul><h2 id="Code-5"><a href="#Code-5" class="headerlink" title="Code"></a>Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jpype</span><br><span class="line"><span class="keyword">import</span> jaydebeapi</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connection</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#jpype.startJVM(jpype.getDefaultJVMPath(), classpath=&#x27;/home/jovyan/ojdbc6.jar&#x27;, convertStrings=True)</span></span><br><span class="line">conn = jaydebeapi.connect(<span class="string">&#x27;oracle.jdbc.driver.OracleDriver&#x27;</span>, <span class="string">&#x27;jdbc:oracle:thin:scott/tiger@192.168.179.167:1521:ORCL1&#x27;</span>, jars=<span class="string">&#x27;/home/jovyan/ojdbc6.jar&#x27;</span>)</span><br><span class="line"></span><br><span class="line">c1 = conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment">## Create</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;create table bb(a number)&#x27;</span>)</span><br><span class="line">c1.execute(<span class="string">&#x27;select * from bb&#x27;</span>)</span><br><span class="line">res = c1.fetchone()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Read</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;select * from emp&#x27;</span>)</span><br><span class="line">res = c1.fetchone()</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Update</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;insert into bb values (1000)&#x27;</span>)</span><br><span class="line">c1.execute(<span class="string">&#x27;select * from bb&#x27;</span>)</span><br><span class="line">print(c1.fetchall())</span><br><span class="line"></span><br><span class="line"><span class="comment">## Delete</span></span><br><span class="line"></span><br><span class="line">c1.execute(<span class="string">&#x27;drop table scott.bb&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="Ref-6"><a href="#Ref-6" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="https://m.blog.naver.com/PostView.nhn?blogId=axzswq&logNo=221533592504&proxyReferer=https:%2F%2Fwww.google.com%2F">https://m.blog.naver.com/PostView.nhn?blogId=axzswq&amp;logNo=221533592504&amp;proxyReferer=https:%2F%2Fwww.google.com%2F</a></li><li><a href="http://blog.naver.com/PostView.nhn?blogId=delfood&logNo=221666021769&categoryNo=33&parentCategoryNo=0&viewDate=&currentPage=1&postListTopCurrentPage=1&from=search">http://blog.naver.com/PostView.nhn?blogId=delfood&amp;logNo=221666021769&amp;categoryNo=33&amp;parentCategoryNo=0&amp;viewDate=&amp;currentPage=1&amp;postListTopCurrentPage=1&amp;from=search</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/python-connection_test/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Kubeflow Katib</title>
      <link>https://jx2lee.github.io/cloud-kubeflow_katib/</link>
      <guid>https://jx2lee.github.io/cloud-kubeflow_katib/</guid>
      <pubDate>Sun, 03 May 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Kubeflow ì±…ì„ ê³µë¶€í•˜ë©° ë‚´ìš©ì„ ì •ë¦¬í•˜ê³ ì í•œë‹¤. ì´ë²ˆ íŒŒíŠ¸ëŠ” &lt;strong&gt;Katib&lt;/strong&gt; ì´ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Kubeflow ì±…ì„ ê³µë¶€í•˜ë©° ë‚´ìš©ì„ ì •ë¦¬í•˜ê³ ì í•œë‹¤. ì´ë²ˆ íŒŒíŠ¸ëŠ” <strong>Katib</strong> ì´ë‹¤.</p><a id="more"></a><h1 id="Katib"><a href="#Katib" class="headerlink" title="Katib"></a>Katib</h1><p>Kubeflow ì„¤ì¹˜ ì‹œ ìë™ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ, í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”ì™€ ë‰´ëŸ´ ì•„í‚¤í…ì²˜ íƒìƒ‰(NAS)ìœ¼ë¡œ êµ¬ì„±í•œë‹¤. í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”ì™€ ë‰´ëŸ´ ì•„í‚¤í…ì²˜ íƒìƒ‰(NAS)ì— ëŒ€í•œ ê°œë…ì€ ì´ë²ˆ ê¸€ì—ì„œ ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤.</p><ul><li>í•˜ì´í¼íŒŒë¼ë¯¸í„° ì°¸ê³ <ul><li><a href="https://jx2lee.github.io/2019/07/02/ml-introduction_to_grid_search/">https://jx2lee.github.io/2019/07/02/ml-introduction_to_grid_search/</a></li><li><a href="https://medium.com/@jorgesleonel/hyperparameters-in-machine-deep-learning-ca69ad10b981">Hyperparameters in Machine /Deep Learning</a></li></ul></li><li>ë‰´ëŸ´ ì•„í‚¤í…ì³ íƒìƒ‰(NAS)<ul><li><a href="http://research.sualab.com/review/2018/09/28/nasnet-review.html">AutoMLì„ ì´ìš©í•œ Architecture Search ì†Œê°œ ë° NASNet ë…¼ë¬¸ ë¦¬ë·°</a></li><li><a href="http://www.secmem.org/blog/2019/07/19/Network-Architecture-Search/">Network Architecture Search - Samsung Software Membership</a></li></ul></li></ul><h1 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h1><p>Katib ì€ í¬ê²Œ 4ê°€ì§€ ê°œë…ìœ¼ë¡œ ì´ë£¨ì–´ì¡Œë‹¤.</p><p><img src="/image/katib-architecture.png" alt="Katib êµ¬ì¡°"></p><ul><li>Experiment : í•˜ë‚˜ì˜ ì‹¤í–‰ë‹¨ìœ„ë¡œ Job ê°œë…ìœ¼ë¡œ ìƒê°í•˜ë©´ ëœë‹¤. K8s ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤ë¡œ Trial ë¥¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì„ í•˜ë©° Experiment ëŠ” 5ê°œ ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰œë‹¤.<ul><li>Trial Count : ì‹¤í–‰ íšŸìˆ˜ (ë³‘ë ¬)</li><li>Trial Template : Trial íŒŒë“œ í…œí”Œë¦¿</li><li>Objective : ëª©í‘œ ìˆ˜ì¹˜ (ìµœê³³ê°’ ë˜ëŠ” ìµœì†Ÿê°’ ì„¤ì •)</li><li>Search Parameter : íƒìƒ‰í•˜ê³ ì í•˜ëŠ” íŒŒë¼ë¯¸í„° ê°’ì˜ range</li><li>Search Algorithm : íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜</li></ul></li><li>Trial : ìµœì í™” ê³¼ì •ì˜ ë°˜ë³µ ë‹¨ìœ„. Experimentì˜ Trial Count ê°’ ë§Œí¼ Trialì„ ìƒì„±í•˜ê³  ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰. í•˜ë‚˜ì˜ Trial ì—ì„œ í•˜ë‚˜ì˜ worker jobì„ ì‹¤í–‰, Trial ë„ K8s ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤</li><li>Suggestion : Search Algorithm ìœ¼ë¡œ ìƒì„±í•œ í•˜ì´í¼íŒŒë¼ë¯¸í„° ê°’ì˜ ëª¨ìŒ. í•˜ë‚˜ì˜ Experiment ì—ì„œ í•˜ë‚˜ì˜ Suggestion ì„ ìƒì„±</li><li>Worker job : íŒŒë¼ë¯¸í„°ì™€ Suggestion ê°’ì„ ì´ìš©í•´ Trial, ê°ê°ì˜ ê°’ì„ í‰ê°€í•˜ê³  ê³„ì‚¬í•˜ëŠ” í”„ë¡œì„¸ìŠ¤. ì‹¤ì œë¡œ í•™ìŠµì„ ìˆ˜í–‰í•˜ë©° K8s Job ê³¼ TFJob, PyTorch ì„ ì‚¬ìš©</li></ul><h2 id="Experiment-example"><a href="#Experiment-example" class="headerlink" title="Experiment example"></a>Experiment example</h2><p>MNIST ì˜ˆì œ í…œí”Œë¦¿ì„ í•¨ê»˜ ë³´ë©° ìœ„ì—ì„œ ì„¤ëª…í•œ êµ¬ì¡°ì™€ ë¹„êµí•˜ë©° ì‚´í´ë³¸ë‹¤.</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">&quot;kubeflow.org/v1alpha3&quot;</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Experiment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kubeflow</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">controller-tools.k8s.io:</span> <span class="string">&quot;1.0&quot;</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">handson-experiment-1</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">parallelTrialCount:</span> <span class="number">5</span><span class="comment"># ë³‘ë ¬ë¡œ ì‹¤í–‰í•  Trial ìˆ˜ë¡œ, ë¦¬ì†ŒìŠ¤ í—ˆìš©í•œë„ê¹Œì§€ ë™ì‹œì— 5ê°œ Trial ì„ ì‹¤í–‰í•œë‹¤.</span></span><br><span class="line">  <span class="attr">maxTrialCount:</span> <span class="number">30</span> <span class="comment"># ìµœëŒ€ë¡œ ì‹¤í–‰í•  Trial ìˆ˜ë¡œ ì´ 30ê°œ. parallelTrialCount ê°€ 5 ì´ë¯€ë¡œ ë³‘ë ¬ë¡œ 5ê°œ Trial ì„ ì‹¤í–‰í•˜ê³  6ë²ˆ ë°˜ë³µ</span></span><br><span class="line">  <span class="attr">maxFailedTrialCount:</span> <span class="number">3</span>  <span class="comment"># ì‹¤íŒ¨ í•œë„ ìˆ˜ë¡œ Trial ì´ 3ë²ˆ ì‹¤íŒ¨í•˜ë©´ Experiment ë¥¼ ì¤‘ì§€í•œë‹¤. </span></span><br><span class="line">  <span class="attr">objective:</span>  <span class="comment"># ìˆ˜ì§‘ ëŒ€ìƒì˜ ë©”íŠ¸ë¦­ ì„¤ì • ë‹¨ê³„ </span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">maximize</span>  <span class="comment"># ìµœëŒ“ê°’ ë˜ëŠ” ìµœì†Ÿê°’ ì„¤ì • (ë³¸ ì˜ˆì œëŠ” maximize, ìµœëŒ“ê°’)</span></span><br><span class="line">    <span class="attr">goal:</span> <span class="number">0.99</span><span class="comment"># ëª©í‘œ ìˆ˜ì¹˜ ì„¤ì •</span></span><br><span class="line">    <span class="attr">objectiveMetricName:</span> <span class="string">validation-accuracy</span>  <span class="comment"># ìˆ˜ì§‘í•  ë©”íŠ¸ë¦­ name, validation-accuracy ë¡œ ì„¤ì •</span></span><br><span class="line">    <span class="attr">additionalMetricNames:</span>  <span class="comment"># ì´ì™¸ ìˆ˜ì§‘í•  ë©”íŠ¸ë¦­ì„ ì •ì˜ (accuracy, loss, validation-loss 3ê°œë¥¼ ì¶”ê°€ ìˆ˜ì§‘í•  ì˜ˆì •)</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">accuracy</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">loss</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">Validation-loss</span></span><br><span class="line">  <span class="attr">algorithm:</span>  <span class="comment"># Search Algorithm ì„¤ì • (ê·¸ë¦¬ë“œ, ëœë¤, í•˜ì´í¼ë°´ë“œ, ë² ì´ì§€ì•ˆìµœì í™” ì„ íƒ ê°€ëŠ¥)</span></span><br><span class="line">    <span class="attr">algorithmName:</span> <span class="string">random</span></span><br><span class="line">  <span class="attr">trialTemplate:</span>  <span class="comment"># Trial í…œí”Œë¦¿ ì •ì˜</span></span><br><span class="line">    <span class="attr">goTemplate:</span></span><br><span class="line">        <span class="attr">rawTemplate:</span> <span class="string">|-</span></span><br><span class="line">          <span class="attr">apiVersion:</span> <span class="string">batch/v1</span></span><br><span class="line">          <span class="attr">kind:</span> <span class="string">Job</span></span><br><span class="line">          <span class="attr">metadata:</span></span><br><span class="line">            <span class="attr">name:</span> &#123;&#123;<span class="string">.Trial</span>&#125;&#125;</span><br><span class="line">            <span class="attr">namespace:</span> &#123;&#123;<span class="string">.NameSpace</span>&#125;&#125;</span><br><span class="line">          <span class="attr">spec:</span></span><br><span class="line">            <span class="attr">template:</span></span><br><span class="line">              <span class="attr">spec:</span></span><br><span class="line">                <span class="attr">containers:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="attr">name:</span> &#123;&#123;<span class="string">.Trial</span>&#125;&#125;</span><br><span class="line">                  <span class="attr">image:</span> <span class="string">brightfly/katib-job:handson</span></span><br><span class="line">                  <span class="attr">command:</span></span><br><span class="line">                  <span class="bullet">-</span> <span class="string">&quot;python&quot;</span></span><br><span class="line">                  <span class="bullet">-</span> <span class="string">&quot;/app/katib_keras_mnist.py&quot;</span></span><br><span class="line">                  &#123;&#123;<span class="bullet">-</span> <span class="string">with</span> <span class="string">.HyperParameters</span>&#125;&#125;<span class="comment"># ì„¤ì • íŒŒë¼ë¯¸í„°ì˜ iteration êµ¬ë¬¸. .Name=.Value í˜•íƒœë¡œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘</span></span><br><span class="line">                  &#123;&#123;<span class="bullet">-</span> <span class="string">range</span> <span class="string">.</span>&#125;&#125;</span><br><span class="line">                  <span class="bullet">-</span> <span class="string">&quot;<span class="template-variable">&#123;&#123;.Name&#125;&#125;</span>=<span class="template-variable">&#123;&#123;.Value&#125;&#125;</span>&quot;</span></span><br><span class="line">                  &#123;&#123;<span class="bullet">-</span> <span class="string">end</span>&#125;&#125;</span><br><span class="line">                  &#123;&#123;<span class="bullet">-</span> <span class="string">end</span>&#125;&#125;</span><br><span class="line">                <span class="attr">restartPolicy:</span> <span class="string">Never</span></span><br><span class="line">  <span class="attr">parameters:</span> <span class="comment"># í•˜ì´í¼íŒŒë¼ë¯¸í„° ì…ë ¥ê°’ìœ¼ë¡œ learning rate ì™€ dropout ì„¤ì •</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">--learning_rate</span></span><br><span class="line">      <span class="attr">parameterType:</span> <span class="string">double</span></span><br><span class="line">      <span class="attr">feasibleSpace:</span>  <span class="comment"># ê° í•˜ì´í¼íŒŒë¼ë¯¸í„°ì˜ range ì„¤ì •</span></span><br><span class="line">        <span class="attr">min:</span> <span class="string">&quot;0.01&quot;</span></span><br><span class="line">        <span class="attr">max:</span> <span class="string">&quot;0.03&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">--dropout_rate</span></span><br><span class="line">      <span class="attr">parameterType:</span> <span class="string">double</span></span><br><span class="line">      <span class="attr">feasibleSpace:</span></span><br><span class="line">        <span class="attr">min:</span> <span class="string">&quot;0.1&quot;</span></span><br><span class="line">        <span class="attr">max:</span> <span class="string">&quot;0.9&quot;</span></span><br></pre></td></tr></table></figure><p>ë³¸ í…œí”Œë¦¿ìœ¼ë¡œ Experiment ë¥¼ ì‹¤í–‰í•˜ë©´ <code>python /app/katib_keras_mnist.py -learning_rate=0.012--dropout_rate=0.381</code> ì™€ ê°™ì´ ì‹¤í–‰í•œë‹¤.</p><h1 id="Katib-Component"><a href="#Katib-Component" class="headerlink" title="Katib Component"></a>Katib Component</h1><p>Katib ì„ êµ¬ì„±í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œëŠ” ì´ 4ê°œê°€ ì¡´ì¬í•œë‹¤. ê° ì»´í¬ë„ŒíŠ¸ëŠ” kubectl ë¡œ ì¡°íšŒ ê°€ëŠ¥í•˜ë©° K8sì˜ Deployment ë¡œ ê´€ë¦¬í•œë‹¤.</p><ul><li>katib-manager : GRPC API server</li><li>katib-db : Katib ì˜ ë°±ì—”ë“œ ì €ì¥ì†Œ, mysql</li><li>katib-ui : Katib UI</li><li>katib-controller : katib CRDì˜ ì»¨íŠ¸ë¡¤ëŸ¬</li></ul><h1 id="Katib-UI"><a href="#Katib-UI" class="headerlink" title="Katib UI"></a>Katib UI</h1><p>Web UIë¥¼ ì œê³µí•˜ëŠ”ë° í¬ê²Œ Hyperparameter Tuning ê³¼ NAS 2ê°œ ë©”ë‰´ê°€ ì¡´ì¬í•œë‹¤. Hyperparameter Tuning ì—ì„œëŠ” ì§ì ‘ YAML ì„ ì‘ì„±í•˜ê±°ë‚˜ ë§ˆìš°ìŠ¤ì™€ í‚¤ë³´ë“œë¡œ ê°’ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ë¥¼ ì œê³µí•œë‹¤.</p><p><img src="https://www.kubeflow.org/docs/images/katib-home.png" alt="Katib UI"></p><h1 id="Katib-Command-line-interface"><a href="#Katib-Command-line-interface" class="headerlink" title="Katib Command-line interface"></a>Katib Command-line interface</h1><p>UI ì™¸ì— ì»¤ë§¨ë“œë¼ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ëŠ”ë°, kfctl ë˜ëŠ” kubectl ì„ ì´ìš©í•´ Experiment ì„ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ë‹¨, Experiment ë¦¬ì†ŒìŠ¤ ê¶Œí•œì´ ì¡´ì¬í•´ì•¼í•œë‹¤.</p><p><code>kubectl apply -f mnist_experiment_random.yaml</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master my-kubeflow]<span class="comment"># kubectl get pod -n kubeflow</span></span><br><span class="line">NAME                                                           READY   STATUS             RESTARTS   AGE</span><br><span class="line">admission-webhook-bootstrap-stateful-set-0                     1/1     Running            1          26d</span><br><span class="line">admission-webhook-deployment-68c6dd4cc5-sb6hq                  1/1     Running            0          6d23h</span><br><span class="line">application-controller-stateful-set-0                          1/1     Running            1          26d</span><br><span class="line">argo-ui-78bf45b698-r5zhr                                       1/1     Running            0          26d</span><br><span class="line">centraldashboard-6957f8bcbc-6nktd                              1/1     Running            1          26d</span><br><span class="line">handson-experiment-1-random-57698b477b-dzmwm                   1/1     Running            0          98s</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>mnist_experimnet_random.yaml : (<a href="https://github.com/mojokb/handson-kubeflow/blob/master/katib/mnist_experiment_random.yaml">https://github.com/mojokb/handson-kubeflow/blob/master/katib/mnist_experiment_random.yaml</a>)</p></blockquote><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="http://book.interpark.com/product/BookDisplay.do?_method=detail&sc.prdNo=332046194&gclid=CjwKCAjwqJ_1BRBZEiwAv73uwCjVo3_lnw6A88qkbJmo2pBfMRE2p047vy7Cg4VhMsimg_dqSpxewBoCKwsQAvD_BwE">ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë¨¸ì‹ ëŸ¬ë‹ì´ ì²˜ìŒì´ë¼ë©´! ì¿ ë¸Œí”Œë¡œìš°!</a></li><li><a href="https://www.kubeflow.org">Kubeflow.org</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-kubeflow_katib/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Kubeflow Fairing</title>
      <link>https://jx2lee.github.io/cloud-kubeflow_fairing/</link>
      <guid>https://jx2lee.github.io/cloud-kubeflow_fairing/</guid>
      <pubDate>Mon, 27 Apr 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Kubeflow ì±…ì„ ê³µë¶€í•˜ë©° ë‚´ìš©ì„ ì •ë¦¬í•˜ê³ ì í•œë‹¤. ì´ë²ˆ íŒŒíŠ¸ëŠ” &lt;strong&gt;Fairing&lt;/strong&gt; ì´ë‹¤. &lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Kubeflow ì±…ì„ ê³µë¶€í•˜ë©° ë‚´ìš©ì„ ì •ë¦¬í•˜ê³ ì í•œë‹¤. ì´ë²ˆ íŒŒíŠ¸ëŠ” <strong>Fairing</strong> ì´ë‹¤. </p><a id="more"></a><h1 id="Fairing"><a href="#Fairing" class="headerlink" title="Fairing"></a>Fairing</h1><p>Kubeflow í™˜ê²½ì—ì„œ ML ëª¨ë¸ì„ ì†ì‰½ê²Œ í•™ìŠµ-ë°°í¬í•  ìˆ˜ ìˆëŠ” Python Package</p><h1 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h1><ul><li>work flow<ul><li>python ìœ¼ë¡œ ì‘ì„±í•œ íŒŒì¼ì„ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë¹Œë“œ</li><li>ë¹Œë“œëœ ì´ë¯¸ì§€ë¥¼ ë ˆì§€ìŠ¤íŠ¸ë¦¬ push</li><li>ë°°í¬ ë¦¬ì†ŒìŠ¤ì— ë”°ë¼ k8s Job, TFJob, KFServing ë“±ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ k8s API ì„œë²„ ìš”ì²­</li></ul></li><li>ìœ„ work flow ëŠ” <em>preprocessor, builder, deployer</em> êµ¬ì¡°ë¡œ ì„¤ê³„<ul><li><em>preprocessor</em> : Python íŒŒì¼ì„ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë¹Œë“œí•  ìˆ˜ ìˆê²Œ íŒ¨í‚¤ì§€í™”</li><li><em>builder</em> : íŒ¨í‚¤ì§€ëœ íŒŒì¼ì„ ë„ì»¤ ì´ë¯¸ì§€í™”</li><li><em>deployer</em> : ìƒì„±í•œ ì´ë¯¸ì§€ ë°°í¬</li></ul></li></ul><p>Fairing ì€ Kubeflow ì„¤ì¹˜ í›„ ìƒì„±í•œ ë…¸íŠ¸ë¶ ì´ë¯¸ì§€ì—ëŠ” default ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ë”°ë¡œ ì„¤ì¹˜ë¥¼ í•˜ì§€ ì•Šì•„ë„ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.</p><h1 id="Fairing-ì˜ˆì œ"><a href="#Fairing-ì˜ˆì œ" class="headerlink" title="Fairing ì˜ˆì œ"></a>Fairing ì˜ˆì œ</h1><p>Fairing ì˜ˆì œëŠ” Kubeflow ë…¸íŠ¸ë¶ ì„œë²„ì—ì„œ ì§„í–‰í•œë‹¤. ì•ì„œ ì†Œê°œí–ˆë“¯ì´ Fairing ì€ K8s ë¦¬ì†ŒìŠ¤ë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— docker registry ì™€ kubeflow ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•˜ë‹¤. í…ŒìŠ¤íŠ¸ ê²°ê³¼, private docker registry ì— fairing ì´ë¯¸ì§€ë¥¼ push/pull í•  ë•Œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì¥ì•  í•´ê²°ì´ ì´ë£¨ì–´ì§€ì§€ ì•Šì•„ docker hub ì˜ ê³µê°œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì´ë©°, ì±… ìˆœì„œì— ë”°ë¼ ì§„í–‰í•œë‹¤.</p><h2 id="fairing-config-ipynb"><a href="#fairing-config-ipynb" class="headerlink" title="fairing_config.ipynb"></a>fairing_config.ipynb</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># in Jupyter Notebook</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> kubeflow.fairing <span class="keyword">as</span> fairing</span><br><span class="line"></span><br><span class="line">docker_registry = <span class="string">&quot;jaejunlee&quot;</span></span><br><span class="line"></span><br><span class="line">fairing.config.set_builder(</span><br><span class="line">    <span class="string">&#x27;append&#x27;</span>,</span><br><span class="line">    base_image=<span class="string">&#x27;gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v0.7.0&#x27;</span>,</span><br><span class="line">    image_name=<span class="string">&#x27;fairing-test&#x27;</span>,</span><br><span class="line">    registry=docker_registry, push=<span class="literal">True</span>)</span><br><span class="line">fairing.config.set_deployer(<span class="string">&#x27;job&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>():</span></span><br><span class="line">    hostname = tf.constant(os.environ[<span class="string">&#x27;HOSTNAME&#x27;</span>])</span><br><span class="line">    sess = tf.Session()</span><br><span class="line">    print(<span class="string">&#x27;Hostname : &#x27;</span>, sess.run(hostname).decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">remote_train = fairing.config.fn(train)</span><br><span class="line">remote_train()</span><br></pre></td></tr></table></figure><p>ìœ„ ì˜ˆì œëŠ” HOSTNAME í™˜ê²½ë³€ìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤. <code>gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v0.7.0</code> ê¸°ë³¸ ì´ë¯¸ì§€ì— ìœ„ ì¶œë ¥í•¨ìˆ˜ë¥¼ ì…íŒ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ì—¬ jaejunlee public registry ì— í‘¸ì‰¬í•˜ê³  fairing-job ì´ë€ ì´ë¦„ì˜ k8s job ì´ k8s ì— ì‹¤í–‰ì„ ìš”ì²­í•œë‹¤. ì‰½ê²Œ ë§í•´, ê¸°ë³¸ ì´ë¯¸ì§€ ìœ„ì— ë‹´ì•„ fairing ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê³  k8s ë¥¼ ì´ìš©í•´ ì •ì˜í•œ í•¨ìˆ˜ë¥¼ k8s ì—ì„œ ì‹¤í–‰í•œë‹¤. <code>hub.docker.io</code> ì— ì ‘ì†í•˜ì—¬ í™•ì¸í•˜ë©´ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•  ë•Œ ë§ˆë‹¤ ì´ë¯¸ì§€ë¥¼ push í•œë‹¤. <em>(set_builder ë¶€ë¶„ push=True ë¡œ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì´ë‹¤.)</em></p><p>ì½”ë“œë¥¼ í†µí•´ Config í´ë˜ìŠ¤ëŠ” preprocessor, builder, deployer ì— ëŒ€ì‘í•˜ëŠ” setterë“¤ì„ ê°€ì§€ê³  ìˆë‹¤. ê°ê°ì˜ default ê°’ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><em>preprocessor</em> : Notebook í™˜ê²½ì€ â€œnotebookâ€, else â€œpythonâ€</li><li><em>builder</em> : â€œappendâ€</li><li><em>deployâ€</em> : job</li></ul><p>Fairing êµ¬ì¡° 3ê°œë¥¼ ì‚´í´ë³´ë„ë¡ í•œë‹¤.</p><h1 id="Preprocessor-in-Fairing"><a href="#Preprocessor-in-Fairing" class="headerlink" title="Preprocessor in Fairing"></a>Preprocessor in Fairing</h1><p>preprocessor ëŠ” ë„ì»¤ ì´ë¯¸ì§€ë¡œ íŒ¨í‚¤ì§€í™” í•  ëŒ€ìƒì„ ì„¤ì •í•˜ëŠ”ë°, íƒ€ì…ì€ ì´ 4ê°œì´ë‹¤.</p><ul><li><p><em>python</em> : íŒŒì´ì¬ file íŒ¨í‚¤ì§€í™”</p><ul><li>ë„ì»¤ ì´ë¯¸ì§€ ë‚´ app/{íŒŒì¼ëª…}.py ë¡œ cmd ìƒì„±</li><li>example<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os, time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>():</span></span><br><span class="line">    print(<span class="string">&quot;Training...&quot;</span>)</span><br><span class="line">    <span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">    x = tf.constant([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], shape=[<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">    print(x)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">if</span> os.getenv(<span class="string">&#x27;FAIRING_RUNTIME&#x27;</span>, <span class="literal">None</span>) <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:  <span class="comment"># if else êµ¬ì¡°ë¥¼ í†µí•´ ì´ë¯¸ì§€ê°€ ìƒì„±ë˜ë©´ FAIRING_RUNTIME ë³€ìˆ˜ê°€ 1 ë¡œ ë³€í™˜ëœë‹¤. ì¦‰, ì´ë¯¸ì§€ ìƒì„±í›„ì—ëŠ” train() ë§Œ ì‘ì—…</span></span><br><span class="line">        train()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">from</span> kubeflow <span class="keyword">import</span> fairing</span><br><span class="line">        DOCKER_REGISTRY = <span class="string">&#x27;jaejunlee&#x27;</span></span><br><span class="line">        file_name = os.path.basename(__file__)</span><br><span class="line">        print(<span class="string">&quot;Executing &#123;&#125; remotely.&quot;</span>.<span class="built_in">format</span>(file_name))</span><br><span class="line">        fairing.config.set_preprocessor(<span class="string">&#x27;python&#x27;</span>, executable=file_name, input_files=[file_name])</span><br><span class="line">        fairing.config.set_builder(</span><br><span class="line">            <span class="string">&#x27;append&#x27;</span>, base_image=<span class="string">&#x27;gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v0.7.0&#x27;</span>,</span><br><span class="line">            registry=DOCKER_REGISTRY, push=<span class="literal">True</span>)</span><br><span class="line">        fairing.config.run()</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x fairing_preprocessor_python.py</span><br><span class="line">$ ./fairing_preprocessor_python.py</span><br><span class="line">[I 200428 09:36:11 config:134] Using preprocessor: &lt;kubeflow.fairing.preprocessors.base.BasePreProcessor object at 0x7f8b2fc1e278&gt;</span><br><span class="line">[I 200428 09:36:11 config:136] Using builder: &lt;kubeflow.fairing.builders.append.append.AppendBuilder object at 0x7f8b2fc1e2b0&gt;</span><br><span class="line">[I 200428 09:36:11 config:138] Using deployer: &lt;kubeflow.fairing.deployers.job.job.Job object at 0x7f8b2fc1e9b0&gt;</span><br><span class="line">[W 200428 09:36:11 append:50] Building image using Append builder...</span><br><span class="line">[I 200428 09:36:11 base:107] Creating docker context: /tmp/fairing_context_jvkk0mqm</span><br><span class="line">[I 200428 09:36:11 docker_creds_:234] Loading Docker credentials <span class="keyword">for</span> repository <span class="string">&#x27;gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v0.7.0&#x27;</span></span><br><span class="line">[W 200428 09:36:13 append:54] Image successfully built <span class="keyword">in</span> 1.9876068960002158s.</span><br><span class="line">[W 200428 09:36:13 append:94] Pushing image jaejunlee/fairing-job:13B00B9B...</span><br><span class="line">[I 200428 09:36:13 docker_creds_:234] Loading Docker credentials <span class="keyword">for</span> repository <span class="string">&#x27;jaejunlee/fairing-job:13B00B9B&#x27;</span></span><br><span class="line">[W 200428 09:36:15 append:81] Uploading jaejunlee/fairing-job:13B00B9B</span><br><span class="line">[I 200428 09:36:16 docker_session_:280] Layer sha256:823f4685c03b26a545ca41dcdca1e782ad5e52cf85bac03113edaa6aebdca1b3 exists, skipping</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">sha256:19f71f3a178549ee1bacd534f061e4b465d85c3378ecddb4dc716f1283aff2a8 pushed.</span><br><span class="line">[I 200428 09:36:22 docker_session_:334] Finished upload of: jaejunlee/fairing-job:13B00B9B</span><br><span class="line">[W 200428 09:36:22 append:99] Pushed image jaejunlee/fairing-job:13B00B9B <span class="keyword">in</span> 9.045510983996792s.</span><br><span class="line">[W 200428 09:36:22 job:101] The job fairing-job-gm8hb launched.</span><br><span class="line">[W 200428 09:36:22 manager:296] Waiting <span class="keyword">for</span> fairing-job-gm8hb-87z5h to start...</span><br><span class="line">[W 200428 09:36:22 manager:296] Waiting <span class="keyword">for</span> fairing-job-gm8hb-87z5h to start...</span><br><span class="line">[W 200428 09:36:22 manager:296] Waiting <span class="keyword">for</span> fairing-job-gm8hb-87z5h to start...</span><br><span class="line">[W 200428 09:36:23 manager:296] Waiting <span class="keyword">for</span> fairing-job-gm8hb-87z5h to start...</span><br><span class="line">[I 200428 09:36:29 manager:302] Pod started running True</span><br><span class="line">Training...</span><br><span class="line">Tensor(<span class="string">&quot;Const:0&quot;</span>, shape=(2, 3), dtype=int32)</span><br><span class="line">[W 200428 09:36:31 job:173] Cleaning up job fairing-job-gm8hb...</span><br></pre></td></tr></table></figure></li></ul></li><li><p><em>notebook</em> : jupyter notebook ë‚´ìš©ì„ íŒŒì´ì¬ file ë¡œ ë³€í™˜í•˜ì—¬ íŒŒì´ì¬ file ì„ íŒ¨í‚¤ì§€í™”  </p><ul><li>example<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># jupyter notebook</span><br><span class="line"># fairing_preprocessor_notebook.ipynb</span><br><span class="line"></span><br><span class="line">import os, time</span><br><span class="line"></span><br><span class="line">def train():</span><br><span class="line">    print(&quot;Training...&quot;)</span><br><span class="line">    import tensorflow as tf</span><br><span class="line">    x &#x3D; tf.constant([1,2,3,4,5,6], shape&#x3D;[2,3])</span><br><span class="line">    print(x)</span><br><span class="line">    time.sleep(1)</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">train()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># fairing_preprocessor_notebook.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> kubeflow <span class="keyword">import</span> fairing</span><br><span class="line"></span><br><span class="line">DOCKER_REGISTRY = <span class="string">&#x27;jaejunlee&#x27;</span></span><br><span class="line">file_name = os.path.basename(__file__)</span><br><span class="line">print(<span class="string">&quot;Executing &#123;&#125; remotely.&quot;</span>.<span class="built_in">format</span>(file_name))</span><br><span class="line">fairing.config.set_preprocessor(<span class="string">&#x27;notebook&#x27;</span>, notebook_file=<span class="string">&#x27;fairing_preprocessor_notebook.ipynb&#x27;</span>)</span><br><span class="line">fairing.config.set_builder(</span><br><span class="line">    <span class="string">&#x27;append&#x27;</span>, base_image=<span class="string">&#x27;gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v0.7.0&#x27;</span>,</span><br><span class="line">    registry=DOCKER_REGISTRY, push=<span class="literal">True</span>)</span><br><span class="line">fairing.config.run()</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x fairing_preprocessor_notebook.py</span><br><span class="line">$ ./fairing_preprocessor_notebook.py</span><br><span class="line">[I 200428 09:44:27 config:134] Using preprocessor: &lt;kubeflow.fairing.preprocessors.converted_notebook.ConvertNotebookPreprocessor object at 0x7fd480eb0908&gt;</span><br><span class="line">[I 200428 09:44:27 config:136] Using builder: &lt;kubeflow.fairing.builders.append.append.AppendBuilder object at 0x7fd480eb0860&gt;</span><br><span class="line">[I 200428 09:44:27 config:138] Using deployer: &lt;kubeflow.fairing.deployers.job.job.Job object at 0x7fd4809d6240&gt;</span><br><span class="line">[W 200428 09:44:27 append:50] Building image using Append builder...</span><br><span class="line">[I 200428 09:44:27 base:107] Creating docker context: /tmp/fairing_context_b254bkb_</span><br><span class="line">[I 200428 09:44:27 converted_notebook:127] Converting fairing_preprocessor_notebook.ipynb to fairing_preprocessor_notebook.py</span><br><span class="line">[I 200428 09:44:27 docker_creds_:234] Loading Docker credentials <span class="keyword">for</span> repository <span class="string">&#x27;gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v0.7.0&#x27;</span></span><br><span class="line">[W 200428 09:44:29 append:54] Image successfully built <span class="keyword">in</span> 1.9862057870050194s.</span><br><span class="line">[W 200428 09:44:29 append:94] Pushing image jaejunlee/fairing-job:7FCC2CF6...</span><br><span class="line">[I 200428 09:44:29 docker_creds_:234] Loading Docker credentials <span class="keyword">for</span> repository <span class="string">&#x27;jaejunlee/fairing-job:7FCC2CF6&#x27;</span></span><br><span class="line">[W 200428 09:44:31 append:81] Uploading jaejunlee/fairing-job:7FCC2CF6</span><br><span class="line">[I 200428 09:44:31 docker_session_:280] Layer </span><br><span class="line">sha256:380fe9d3ba2fe8c69d05cc9038b72aa9ec669cd0d51b0e61f312edb13586d5a8 pushed.</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">[I 200428 09:44:38 docker_session_:334] Finished upload of: jaejunlee/fairing-job:7FCC2CF6</span><br><span class="line">[W 200428 09:44:38 append:99] Pushed image jaejunlee/fairing-job:7FCC2CF6 <span class="keyword">in</span> 9.018262255005538s.</span><br><span class="line">[W 200428 09:44:38 job:101] The job fairing-job-bbpjs launched.</span><br><span class="line">[W 200428 09:44:38 manager:296] Waiting <span class="keyword">for</span> fairing-job-bbpjs-5jq22 to start...</span><br><span class="line">[W 200428 09:44:38 manager:296] Waiting <span class="keyword">for</span> fairing-job-bbpjs-5jq22 to start...</span><br><span class="line">[W 200428 09:44:38 manager:296] Waiting <span class="keyword">for</span> fairing-job-bbpjs-5jq22 to start...</span><br><span class="line">[W 200428 09:44:39 manager:296] Waiting <span class="keyword">for</span> fairing-job-bbpjs-5jq22 to start...</span><br><span class="line">[I 200428 09:44:44 manager:302] Pod started running True</span><br><span class="line">Training...</span><br><span class="line">Tensor(<span class="string">&quot;Const:0&quot;</span>, shape=(2, 3), dtype=int32)</span><br><span class="line">[W 200428 09:44:47 job:173] Cleaning up job fairing-job-bbpjs...</span><br></pre></td></tr></table></figure></li></ul></li><li><p><em>full_notebook</em> : jupyter notebook íŒ¨í‚¤ì§€í™” í•˜ëŠ”ë°, ìˆ˜í–‰ í›„ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ë…¸íŠ¸ë¶ íŒŒì¼ë¡œ ìƒì„±</p></li><li><p><em>function</em> : ë‹¨ì¼ í•¨ìˆ˜ íŒ¨í‚¤ì§€í™”</p></li></ul><h1 id="Builder-in-Fairing"><a href="#Builder-in-Fairing" class="headerlink" title="Builder in Fairing"></a>Builder in Fairing</h1><p>Builder ëŠ” preprocessor ê°€ ìƒì„±í•œ íŒ¨í‚¤ì§€ë¥¼ ë„ì»¤ ì´ë¯¸ì§€í™” í•œë‹¤.</p><ul><li><p>ë¹Œë“œ íƒ€ì…</p><ul><li>append : docker client ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  íŒŒì´ì„  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ë°©ì‹<ul><li>self-signed ë¡œ ì¸ì¦ëœ ë ˆì§€ìŠ¤íŠ¸ë¦¬ëŠ” ì‚¬ìš© ë¶ˆê°€</li><li><code>.local</code> ë¡œ ì„¤ì •í•œ ì£¼ì†ŒëŠ” í—ˆìš© ê°€ëŠ¥ (kubeflow ìš© ë ˆì§€ìŠ¤íŠ¸ë¦¬ êµ¬ì¶•ì‹œ)</li><li>ë¡œê·¸ì¸ì´ í•„ìš”í•œ ë ˆì§€ìŠ¤íŠ¸ë¦¬, ì¦‰ docker hub ë¥¼ ì´ìš©í•˜ë ¤ë©´ ë…¸íŠ¸ë¶ ì»¨í…Œì´ë„ˆ ë‚´ <code>.docker/config.json</code> íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼í•œë‹¤. ìˆ˜ì •í•˜ëŠ” ë°©ë²•ì€, ë„ì»¤ ì„œë²„ì—ì„œ docker loging ì„ í†µí•´ ìƒì„±í•œ <code>config.json</code> íŒŒì¼ì„ ë…¸íŠ¸ë¶ ì»¨í…Œì´ë„ˆ <code>~/.docker/config.json</code> ìœ¼ë¡œ ë³µì‚¬í•œë‹¤.<ul><li>cluster : êµ¬ê¸€ ì»¨í…Œì´ë„ˆ íˆ´ì¸ Kaniko ë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ë°©ì‹</li><li>docker : ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ë°©ì‹</li></ul></li><li>í•´ë‹¹ í™˜ê²½ì´ ë„ì»¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ì¡´ì¬í•´ì•¼í•¨</li></ul></li></ul></li><li><p>format</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">DOCKER_REGISTRY=<span class="string">&#x27;&#123;ì´ë¯¸ì§€ë¥¼ push/pull ì£¼ì†Œ&#125;&#x27;</span></span><br><span class="line">fairing.config.set_builder(</span><br><span class="line">    <span class="string">&#x27;&#123;build type&#125;&#x27;</span>,</span><br><span class="line">    base_image=<span class="string">&#x27;&#123;python ì„ ì‹¤í–‰í•œ ê¸°ë³¸ ì´ë¯¸ì§€ ëª…&#125;:&#123;íƒœê·¸&#125;&#x27;</span>,</span><br><span class="line">    registry=DOCKER_REGISTRY,</span><br><span class="line">    push=True)</span><br></pre></td></tr></table></figure></li></ul><h1 id="Deployer-in-Fairing"><a href="#Deployer-in-Fairing" class="headerlink" title="Deployer in Fairing"></a>Deployer in Fairing</h1><p>Deployer ëŠ” builder ë¡œ ìƒì„±í•œ ì´ë¯¸ì§€ë¥¼ ë°°í¬í•œë‹¤.</p><ul><li>format</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fairing.config.set_deployer(<span class="string">&#x27;job&#x27;</span>,</span><br><span class="line">                       namespace=?,</span><br><span class="line">                       pod_spec_mutators=?                         </span><br><span class="line">                       )</span><br></pre></td></tr></table></figure><ul><li>ë°°í¬í˜•íƒœ : job, tfjob, pytorchjob, serving, kfserving, gcpjob, gcpservingë“±</li><li>namespace : ë°°í¬ê°€ ì‹¤í–‰í•  namespace</li><li>pod_spec_mutators : ë°°í¬ pod ì˜ spec ì •ì˜</li></ul><p>ì´ë ‡ê²Œ ê°ê° ì •ì˜í•œ Preprocessor, Builder, Deployer ë¥¼ í†µí•´ <code>Config.run</code> ìœ¼ë¡œ Fairing ì„ ì‹¤í–‰í•œë‹¤. ì‹¤í–‰ ìˆœì„œëŠ” ì„¤ëª…í•œ íë¦„ëŒ€ë¡œ preprocessor ë¡œ íŒ¨í‚¤ì§€í™” í•  ëŒ€ìƒì„ ì„ íƒí•˜ê³ , Builder ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ë©° Deployer ë¡œ ë°°í¬í•œë‹¤.</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="http://book.interpark.com/product/BookDisplay.do?_method=detail&sc.prdNo=332046194&gclid=CjwKCAjwqJ_1BRBZEiwAv73uwCjVo3_lnw6A88qkbJmo2pBfMRE2p047vy7Cg4VhMsimg_dqSpxewBoCKwsQAvD_BwE">ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë¨¸ì‹ ëŸ¬ë‹ì´ ì²˜ìŒì´ë¼ë©´! ì¿ ë¸Œí”Œë¡œìš°!</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-kubeflow_fairing/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Shell] k8s Pod ë‚´ alias ì ìš© ìŠ¤í¬ë¦½íŠ¸</title>
      <link>https://jx2lee.github.io/shell-append_alias_to_pod/</link>
      <guid>https://jx2lee.github.io/shell-append_alias_to_pod/</guid>
      <pubDate>Thu, 23 Apr 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì‚¬ë‚´ í´ë¼ìš°ë“œ ì œí’ˆì„ ì´ìš©í•´ ì—…ë¬´ë¥¼ ë³´ë˜ ì¤‘, ê³„ì†ë˜ëŠ” íŒ¨ì¹˜ ì‘ì—…ìœ¼ë¡œ ë§¤ë²ˆ ìƒì„±í•˜ëŠ” ì»¨í…Œì´ë„ˆì˜ alias ê°€ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì íŒ¨ì¹˜ ì´í›„ ìƒˆë¡œ ìƒì„±í•˜ëŠ” íŒŒë“œë¥¼ ê²€ìƒ‰í•˜ê³  &lt;code&gt;.bashrc&lt;/code&gt; ì— alias ë¥¼ ì¶”ê°€í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.05.07 : ìŠ¤í¬ë¦½íŠ¸ ê°œì„  (exec, alias ë‘ ê°œ í•¨ìˆ˜ë¡œ ë¶„ë¦¬)&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ì‚¬ë‚´ í´ë¼ìš°ë“œ ì œí’ˆì„ ì´ìš©í•´ ì—…ë¬´ë¥¼ ë³´ë˜ ì¤‘, ê³„ì†ë˜ëŠ” íŒ¨ì¹˜ ì‘ì—…ìœ¼ë¡œ ë§¤ë²ˆ ìƒì„±í•˜ëŠ” ì»¨í…Œì´ë„ˆì˜ alias ê°€ ì‚¬ë¼ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê³ ì íŒ¨ì¹˜ ì´í›„ ìƒˆë¡œ ìƒì„±í•˜ëŠ” íŒŒë“œë¥¼ ê²€ìƒ‰í•˜ê³  <code>.bashrc</code> ì— alias ë¥¼ ì¶”ê°€í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.</p><p><strong>Update Note</strong></p><ul><li>2020.05.07 : ìŠ¤í¬ë¦½íŠ¸ ê°œì„  (exec, alias ë‘ ê°œ í•¨ìˆ˜ë¡œ ë¶„ë¦¬)</li></ul><a id="more"></a><h1 id="ë¬¸ì œ-ë°œìƒ"><a href="#ë¬¸ì œ-ë°œìƒ" class="headerlink" title="ë¬¸ì œ ë°œìƒ"></a>ë¬¸ì œ ë°œìƒ</h1><p>íŒ¨ì¹˜ê°€ ì§„í–‰ë˜ë©´ í•´ë‹¹ íŒŒë“œì˜ ì´ë¯¸ì§€ë¥¼ êµì²´í•´ì•¼ í•œë‹¤. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ ê¸°ì¡´ íŒŒë“œë¥¼ ì‚­ì œí•˜ê³  êµì²´ëœ ì´ë¯¸ì§€ë¡œ íŒŒë“œë¥¼ ì¬ìƒì„±í•˜ëŠ”ë°, ê·¸ëŸ¼ ê¸°ì¡´ íŒŒë“œì—ì„œ ì‘ì—…ì„ í•˜ë˜ alias ë“¤ì´ ì‚¬ë¼ì§„ë‹¤. (ë‹¹ì—°íˆ ì»¨í…Œì´ë„ˆê°€ ì¬ê¸°ë™í•˜ë©´ì„œ <code>.bashrc</code> ì´ˆê¸°í™”)</p><ul><li>ê¸°ì¡´ ì‚¬ìš©í•˜ëŠ” alias</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">alias dasboot=&#x27;startDomainAdminServer -u jeus -p jeus&#x27;</span><br><span class="line">alias dasdown=&#x27;stopServer -host localhost:9736 -u jeus -p jeus&#x27;</span><br><span class="line"></span><br><span class="line">alias hdstart=&#x27;startManagedServer -server hyperdata -u jeus -p jeus&#x27;</span><br><span class="line">alias hdstop=&#x27;stopServer -host localhost:19736 -u jeus -p jeus&#x27;</span><br><span class="line"></span><br><span class="line">alias pastart=&#x27;startManagedServer -server ProAuth -u jeus -p jeus&#x27;</span><br><span class="line">alias pastop=&#x27;stopServer -host localhost:29736 -u jeus -p jeus&#x27;</span><br><span class="line"></span><br><span class="line">alias polog=&#x27;tail -100f /hyperdata/proobject7/logs/ProObject.log&#x27;</span><br><span class="line">alias slog=&#x27;tail -100f /db/tibero6/instance/tibero/log/slog/sys.log&#x27;</span><br></pre></td></tr></table></figure><h1 id="Script-ì„¤ê³„-ë°©ì•ˆ"><a href="#Script-ì„¤ê³„-ë°©ì•ˆ" class="headerlink" title="Script ì„¤ê³„ ë°©ì•ˆ"></a>Script ì„¤ê³„ ë°©ì•ˆ</h1><p>ìš°ì„  ê³ ë ¤í•  ì ì€ êµì²´í•œ ì´ë¯¸ì§€ë¡œ ê¸°ë™í•œ íŒŒë“œë¥¼ ì°¾ì•„ì•¼ í•œë‹¤. ì´ëŠ” <code>grep</code> ê³¼ <code>awk</code> ë¥¼ ì´ìš©í•´ íŒŒë“œ ì •ë³´ë¥¼ ì¡°íšŒí•˜ì—¬ <strong>íŒŒë“œ ì´ë¦„</strong>ì„ ê²€ìƒ‰í•˜ê³  <code>kubectl exec</code> ìœ¼ë¡œ <code>.bashrc</code> ì— alias ë¥¼ ì¶”ê°€í•œë‹¤. ë‹¹ì—°íˆ ì¶”ê°€ë§Œ í•œë‹¤ê³  ì ìš©ì´ ì•ˆë˜ë¯€ë¡œ ë§ˆì§€ë§‰ì— <code>source ~/.bashrc</code> ëª…ë ¹ì–´ë¥¼ íŒŒë“œì— ë„˜ê²¨ì£¼ê³  ì ‘ì†í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì„¤ê³„ë¥¼ í•˜ì˜€ë‹¤.</p><p>ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>íŒŒë“œ ì´ë¦„ ê²€ìƒ‰</li><li>alias ë¥¼ <code>.bashrc</code> ì— ì¶”ê°€</li><li>bash ì ìš©ì„ ìœ„í•œ <code>source</code> ëª…ë ¹ì–´ ì „ë‹¬</li><li>íŒŒë“œ ì ‘ê·¼</li></ul><blockquote><p><em>ì‚¬ë‚´ í´ë¼ìš°ë“œì—ì„œëŠ” namespace ê°€ default ë¡œ ì •ì˜ë˜ì–´ ìˆë‹¤. ì´ëŠ” ë°”ë€Œì§€ ì•Šê¸° ë•Œë¬¸ì— ìŠ¤í¬ë¦½íŠ¸ ì•ˆì— default ë¡œ ì„¤ì •í•˜ì˜€ë‹¤.</em></p></blockquote><h1 id="Script"><a href="#Script" class="headerlink" title="Script"></a>Script</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> script <span class="keyword">for</span> managing hd container</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> jaejun.lee.1991@gmail.com</span></span><br><span class="line"></span><br><span class="line">namespace=$(kubectl get namespace  | grep hpcd | awk &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line">pod=$(kubectl describe pod -n hpcd-510fdc58 | grep -B 20 hyperdata8.3_hd | grep &quot;Name:           hpcd&quot; | awk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line"></span><br><span class="line">function hd_container_exec() &#123;</span><br><span class="line">echo &quot;[INFO] exec $pod in $namespace&quot; | grep &quot;[INFO]&quot; --color</span><br><span class="line">kubectl exec -ti -n $namespace $pod -- bash</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function append_alias() &#123;</span><br><span class="line">echo &quot;[INFO] append alias to $pod&quot; | grep &quot;[INFO]&quot; --color</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias dasboot=&quot;\&quot;startDomainAdminServer -u jeus -p jeus&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias dasdown=&quot;\&quot;stopServer -host localhost:9736 -u jeus -p jeus&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias pastart=&quot;\&quot;startManagedServer -server ProAuth -u jeus -p jeus&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias pastop=&quot;\&quot;stopServer -host localhost:29736 -u jeus -p jeus&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias hdstart=&quot;\&quot;startManagedServer -server hyperdata -u jeus -p jeus&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias hdstop=&quot;\&quot;stopServer -host localhost:19736 -u jeus -p jeus&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias polog=&quot;\&quot;tail -f /hyperdata/proobject7/logs/ProObject.log&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;echo alias slog=&quot;\&quot;tail -f /db/tibero6/instance/tibero/log/slog/sys.log&quot;\&quot; &gt;&gt; ~/.bashrc&#x27;</span><br><span class="line">kubectl exec -n $namespace $pod -- bash -c &#x27;source ~/.bashrc&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function main() &#123;</span><br><span class="line">  case &quot;$&#123;1:-&#125;&quot; in</span><br><span class="line">  exec)</span><br><span class="line">    hd_container_exec</span><br><span class="line">    ;;</span><br><span class="line">  alias)</span><br><span class="line">    append_alias</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    set +x</span><br><span class="line">    echo &quot;usage:&quot; &gt;&amp;2</span><br><span class="line">    echo &quot;   $0 exec&quot; &gt;&amp;2</span><br><span class="line">    echo &quot;   $0 alias&quot; &gt;&amp;2</span><br><span class="line">    ;;</span><br><span class="line">  esac</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main $1</span><br></pre></td></tr></table></figure><ul><li><del>6ë²ˆì§¸ ì¤„ : alias ë¥¼ ì ìš©í•  íŒŒë“œ ì´ë¦„ì„ ê²€ìƒ‰</del></li><li><del>9ë²ˆì§¸ ì¤„ ~ 29ë²ˆì§¸ ì¤„ : <code>source ~/.bashrc</code> ì´ì „ : alias ë¥¼ <code>.bashrc</code> ì— ì¶”ê°€</del></li><li><del>30ë²ˆì§¸ ì¤„ : <code>.bashrc</code> ì ìš©</del></li><li><del>31ë²ˆì§¸ ì¤„ : íŒŒë“œ ì ‘ê·¼</del></li><li>hd_container_exec : íŠ¹ì • ì»¨í…Œì´ë„ˆ<em>(hd)</em> ë¡œ ì ‘ê·¼í•˜ëŠ” í•¨ìˆ˜</li><li>append_alias : íŠ¹ì • ì»¨í…Œì´ë„ˆ<em>(hd)</em> ë‚´ <code>.bashrc</code> íŒŒì¼ì— alias ë¥¼ ì¶”ê°€í•˜ê³  ì ìš©í•˜ëŠ” í•¨ìˆ˜</li><li>main : <code>exec</code> or <code>alias</code> ì¸ìë¥¼ ë°›ëŠ” ë©”ì¸ í•¨ìˆ˜</li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/shell-append_alias_to_pod/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Shell] ë‘ docker registry ê°„ ì´ë¯¸ì§€ ìµœì‹ í™”</title>
      <link>https://jx2lee.github.io/shell-image_updater/</link>
      <guid>https://jx2lee.github.io/shell-image_updater/</guid>
      <pubDate>Wed, 08 Apr 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ìµœê·¼ë“¤ì–´ ì´ë¯¸ì§€ íŒ¨ì¹˜ê°€ ìì£¼ ì´ë£¨ì–´ì§€ë©´ì„œ, ì´ë¯¸ì§€ë¥¼ ì¼ì¼ì´ í’€(pull)í•˜ê³  ìš¸íŒ€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— í‘¸ì‰¬(push)í•˜ëŠ” ì‘ì—…ì´ ì§€ì†ì ìœ¼ë¡œ ë°œìƒí•˜ì˜€ë‹¤. ìµœì‹ í™”ê°€ ì´ë£¨ì–´ì§€ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ daemon / insecure-registry ì— ë“±ë¡í•´ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ ìŠ¤í¬ë¦½íŠ¸ ì§œëŠ” ì—°ìŠµë„ í•  ê²¸ ì´ë¯¸ì§€ ìµœì‹ í™” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì˜€ê³  ì´ë¥¼ ì†Œê°œí•˜ê³ ì í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ìµœê·¼ë“¤ì–´ ì´ë¯¸ì§€ íŒ¨ì¹˜ê°€ ìì£¼ ì´ë£¨ì–´ì§€ë©´ì„œ, ì´ë¯¸ì§€ë¥¼ ì¼ì¼ì´ í’€(pull)í•˜ê³  ìš¸íŒ€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— í‘¸ì‰¬(push)í•˜ëŠ” ì‘ì—…ì´ ì§€ì†ì ìœ¼ë¡œ ë°œìƒí•˜ì˜€ë‹¤. ìµœì‹ í™”ê°€ ì´ë£¨ì–´ì§€ëŠ” ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ daemon / insecure-registry ì— ë“±ë¡í•´ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ ìŠ¤í¬ë¦½íŠ¸ ì§œëŠ” ì—°ìŠµë„ í•  ê²¸ ì´ë¯¸ì§€ ìµœì‹ í™” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì˜€ê³  ì´ë¥¼ ì†Œê°œí•˜ê³ ì í•œë‹¤.</p><a id="more"></a><h1 id="ìƒí™©"><a href="#ìƒí™©" class="headerlink" title="ìƒí™©"></a>ìƒí™©</h1><p>ê°„ë‹¨íˆ AíŒ€, BíŒ€(ë‚´ê°€ ì†í•œ)ì— ëŒ€í•´ ê°„ëµíˆ ì„¤ëª…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>AíŒ€ : ì´ë¯¸ì§€ë¥¼ ìµœì‹ í™” í•˜ë©° ì´ë¯¸ì§€ íƒœê·¸ëŠ” ë‚ ì§œ_v?ìœ¼ë¡œ ì„¤ì •í•œë‹¤. ìµœì‹  ì´ë¯¸ì§€ëŠ” a ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë“±ë¡í•œë‹¤.</li><li>BíŒ€ : í…ŒìŠ¤íŠ¸ ì‘ì—…ì„ ë§ˆì¹œ ìµœì‹  ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•´ íŒ¨ì¹˜í•˜ê³  ì´ë¥¼ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸ í•œë‹¤. b ë ˆì§€ìŠ¤íŠ¸ë¦¬ë¥¼ ì´ìš©í•œë‹¤.</li></ul><p>ì‚¬ì‹¤ ìˆ˜ì‘ì—…ìœ¼ë¡œ ì¼ì¼ì´ ì´ë¯¸ì§€ íƒœê·¸ë¥¼ í™•ì¸í•˜ë©° pull&amp;push í•´ë„ ëœë‹¤. docker pull a/ì´ë¯¸ì§€:íƒœê·¸, docker tag a/ì´ë¯¸ì§€:íƒœê·¸ b/ì´ë¯¸ì§€:íƒœê·¸, docker push b/ì´ë¯¸ì§€:íƒœê·¸.. í•˜ë‚˜ì˜ ì œí’ˆì„ ì •ìƒê¸°ë™í•˜ë ¤ë©´ <strong>4</strong>ê°œì˜ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë‹ˆ êµ‰ì¥íˆ ë¶ˆí¸í•˜ì˜€ë‹¤. ì´ë¯¸ì§€ ìµœì í™”ê°€ ì•ˆë˜ì–´ì„œ ê·¸ëŸ°ì§€ í•œ ì´ë¯¸ì§€ì˜ pull&amp;push ê°€ 2ë¶„ì •ë„ ê±¸ë¦¬ëŠ” ê²½ìš°ë„ ì¡´ì¬í•œë‹¤.</p><p>ì´ë¥¼ íƒ€íŒŒí•˜ê³ ì ê°„ë‹¨í•œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ ëª¨ë‘ update í•˜ë˜ê°€, í•œ ì´ë¯¸ì§€ë§Œ update í•˜ê²Œë” ë§Œë“¤ì—ˆë‹¤.</p><h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><p>ì»¨í”¼ê·¸ íŒŒì¼ í•˜ë‚˜ì™€ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ í•˜ë‚˜ê°€ ì¡´ì¬í•œë‹¤. ì»¨í”¼ê·¸ íŒŒì¼(registry.config)ì€ pull í•˜ê¸° ìœ„í•œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì£¼ì†Œì™€ push í•˜ê¸° ìœ„í•œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì£¼ì†Œë¥¼ ì‘ì„±í•œë‹¤. ì´ ì¤‘ í•˜ë‚˜ë¼ë„ ì‘ì„±í•˜ì§€ ì•Šìœ¼ë©´ ERRORê°€ ë°œìƒí•œë‹¤. ê°„ë‹¨íˆ ì‚´í´ë³´ì.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â¯ ./updateImage.sh</span><br><span class="line">usage:</span><br><span class="line">   ./updateImage.sh all</span><br><span class="line">   ./updateImage.sh img &#123;image_name&#125;</span><br></pre></td></tr></table></figure><p>ì‰˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” í¬ê²Œ <code>all</code> ê³¼ <code>img</code>ê°€ ìˆë‹¤. registry.config ë¥¼ ëª¨ë‘ ì‘ì„±í–ˆë‹¤ëŠ” ê°€ì •í•˜ì— ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•´ë³¸ë‹¤.</p><ul><li><p><strong>all</strong> : ì´ 4ê°œì˜ ìµœì‹  ì´ë¯¸ì§€ë¥¼ pull&amp;push</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â¯ ./updateImage.sh all</span><br><span class="line">[PULL REGISTRY] 192.xxx.xxx.xxx</span><br><span class="line">[PUSH REGISTRY] 192.yyy.yyy.yyy</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p><strong>img</strong> : 4ê°œ ì¤‘ ì›í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ pull&amp;push</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â¯ ./updateImage.sh img</span><br><span class="line">[PULL REGISTRY] 192.xxx.xxx.xxx</span><br><span class="line">[PUSH REGISTRY] 192.yyy.yyy.yyy</span><br><span class="line">Enter the image name : ???</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li>image name ì„ ì‘ì„±í•˜ë©´ ê·¸ ì´ë¯¸ì§€ì˜ ìµœì‹  íƒœê·¸ë¥¼ ì°¾ê³  ì´ë¥¼ pull&amp;push í•œë‹¤.</li><li><del>ìµœì‚¬ ì œí’ˆëª…ì´ í˜¹ì‹œë‚˜ ë…¸ì¶œë˜ë©´ ì•ˆë ê¹Œ ì‹¶ì–´ ìˆ˜í–‰ ê²°ê³¼ëŠ” ì‘ì„±í•˜ì§€ ì•Šì•˜ë”°.</del></li></ul></li></ul><h1 id="Script"><a href="#Script" class="headerlink" title="Script"></a>Script</h1><p>ìŠ¤í¬ë¦½íŠ¸ëŠ” <a href="https://github.com/jx2lee/image-updater">ë‚´ ê¹ƒí—™</a>ì— ì˜¬ë ¤ë‘ì—ˆì§€ë§Œ í•˜ê¸°ì—ë„ ìˆë‹¤. <del>ë‚œ ì°©í•œ í¸ì´ë‹¤.</del></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Thu, 08.04.2020</span></span><br><span class="line"><span class="comment"># jaejun.lee.1991@gmail.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#include</span></span><br><span class="line">base_dir=$(dirname <span class="string">&quot;<span class="variable">$0</span>&quot;</span>)</span><br><span class="line">. <span class="variable">$&#123;base_dir&#125;</span>/registry.config</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">check_env</span></span>()&#123;</span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="variable">$&#123;pull_registry&#125;</span> ] || [ -z <span class="variable">$&#123;push_registry&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;[ERROR] You must set registry variables in registry.config!&quot;</span> | grep <span class="string">&quot;[ERROR]&quot;</span> --color</span><br><span class="line">      <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;[PULL REGISTRY] <span class="variable">$&#123;pull_registry&#125;</span>&quot;</span> | grep <span class="string">&quot;[PULL REGISTRY]&quot;</span> --color</span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;[PUSH REGISTRY] <span class="variable">$&#123;push_registry&#125;</span>&quot;</span> | grep <span class="string">&quot;[PUSH REGISTRY]&quot;</span> --color</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">check_img</span></span>() &#123;</span><br><span class="line">    image_pattern=<span class="string">&#x27;hyperdata8.3_&#x27;</span></span><br><span class="line">    <span class="built_in">echo</span> -n <span class="string">&quot;Enter the image name : &quot;</span></span><br><span class="line">    <span class="built_in">read</span> name</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$&#123;name&#125;</span> == *<span class="variable">$&#123;image_pattern&#125;</span>* ]];<span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Update <span class="variable">$name</span> image..&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;[ERROR] you must enter the image on hyperdata8.3_&#123;tb, hl, efa, hd&#125;!&quot;</span> | grep <span class="string">&quot;[ERROR]&quot;</span> --color</span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">update_all</span></span>()&#123;</span><br><span class="line">    image_list=( <span class="string">&quot;hyperdata8.3_hd&quot;</span> <span class="string">&quot;hyperdata8.3_tb&quot;</span> <span class="string">&quot;hyperdata8.3_hl&quot;</span> <span class="string">&quot;hyperdata8.3_eda&quot;</span> )</span><br><span class="line">    <span class="keyword">for</span> image <span class="keyword">in</span> <span class="variable">$&#123;image_list[@]&#125;</span>;<span class="keyword">do</span></span><br><span class="line">        version=$(curl -X GET <span class="variable">$&#123;pull_registry&#125;</span>/v2/<span class="variable">$&#123;image&#125;</span>/tags/list | jq -r <span class="string">&#x27;.tags | .[-1]&#x27;</span>)</span><br><span class="line">        docker pull <span class="variable">$&#123;pull_registry&#125;</span>/<span class="variable">$&#123;image&#125;</span>:<span class="variable">$&#123;version&#125;</span></span><br><span class="line">        docker tag <span class="variable">$&#123;pull_registry&#125;</span>/<span class="variable">$&#123;image&#125;</span>:<span class="variable">$&#123;version&#125;</span> <span class="variable">$&#123;push_registry&#125;</span>/<span class="variable">$&#123;image&#125;</span>:<span class="variable">$&#123;version&#125;</span></span><br><span class="line">        docker push <span class="variable">$&#123;push_registry&#125;</span>/<span class="variable">$&#123;image&#125;</span>:<span class="variable">$&#123;version&#125;</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">update_once</span></span>()&#123;</span><br><span class="line">    version=$(curl -X GET <span class="variable">$&#123;pull_registry&#125;</span>/v2/<span class="variable">$&#123;name&#125;</span>/tags/list | jq -r <span class="string">&#x27;.tags | .[-1]&#x27;</span>)</span><br><span class="line">    docker pull <span class="variable">$&#123;pull_registry&#125;</span>/<span class="variable">$&#123;name&#125;</span>:<span class="variable">$&#123;version&#125;</span></span><br><span class="line">    docker tag <span class="variable">$&#123;pull_registry&#125;</span>/<span class="variable">$&#123;name&#125;</span>:<span class="variable">$&#123;version&#125;</span> <span class="variable">$&#123;push_registry&#125;</span>/<span class="variable">$&#123;name&#125;</span>:<span class="variable">$&#123;version&#125;</span></span><br><span class="line">    docker push <span class="variable">$&#123;push_registry&#125;</span>/<span class="variable">$&#123;name&#125;</span>:<span class="variable">$&#123;version&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">main</span></span>() &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$&#123;1:-&#125;</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">  all)</span><br><span class="line">    check_env</span><br><span class="line">    update_all</span><br><span class="line">    ;;</span><br><span class="line">  img)</span><br><span class="line">    check_env</span><br><span class="line">    check_img</span><br><span class="line">    update_once</span><br><span class="line">    ;;</span><br><span class="line">  *)</span><br><span class="line">    <span class="built_in">set</span> +x</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;usage:&quot;</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;   <span class="variable">$0</span> all&quot;</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;   <span class="variable">$0</span> img hyperdata8.3_hd&quot;</span> &gt;&amp;2</span><br><span class="line">    ;;</span><br><span class="line">  <span class="keyword">esac</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main <span class="variable">$1</span></span><br></pre></td></tr></table></figure><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/shell-image_updater/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Metallb for Kubernetes ì„¤ì¹˜</title>
      <link>https://jx2lee.github.io/cloud-install_metallb/</link>
      <guid>https://jx2lee.github.io/cloud-install_metallb/</guid>
      <pubDate>Sun, 05 Apr 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Kubernetes ì— ë¡œë“œë°¸ëŸ°ì„œ ìƒì„±ì„ ìœ„í•´ ì„¤ì¹˜í•œ Metallb ì„¤ì¹˜ ê³¼ì •ì„ ë‹¤ë¤„ë³¸ë‹¤. ì„œë¹„ìŠ¤ë¥¼ íŠ¹ì • IP ë¡œ ë…¸ì¶œí•˜ê¸° ìœ„í•´ Metallb config ì„¤ì •ê³¼ ì„œë¹„ìŠ¤ë¡œ ë…¸ì¶œí•˜ëŠ” ë‹¨ê³„ë¡œ ì„¤ëª…í•œë‹¤. &lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Kubernetes ì— ë¡œë“œë°¸ëŸ°ì„œ ìƒì„±ì„ ìœ„í•´ ì„¤ì¹˜í•œ Metallb ì„¤ì¹˜ ê³¼ì •ì„ ë‹¤ë¤„ë³¸ë‹¤. ì„œë¹„ìŠ¤ë¥¼ íŠ¹ì • IP ë¡œ ë…¸ì¶œí•˜ê¸° ìœ„í•´ Metallb config ì„¤ì •ê³¼ ì„œë¹„ìŠ¤ë¡œ ë…¸ì¶œí•˜ëŠ” ë‹¨ê³„ë¡œ ì„¤ëª…í•œë‹¤. </p><a id="more"></a><h1 id="Metallb-ë€"><a href="#Metallb-ë€" class="headerlink" title="Metallb ë€"></a>Metallb ë€</h1><h2 id="MetalLBëŠ”-í‘œì¤€-ë¼ìš°íŒ…-í”„ë¡œí† ì½œì„-ì‚¬ìš©í•˜ì—¬-ë² ì–´-ë©”íƒˆ-ê¹¡í†µ-Kubernetes-í´ëŸ¬ìŠ¤í„°ì—-ëŒ€í•œ-ë¡œë“œ-ë°¸ëŸ°ì„œ-êµ¬í˜„-ì´ë¼ê³ -í•œë‹¤-í‘œì¤€-ë„¤íŠ¸ì›Œí¬-ì¥ë¹„ì™€-í†µí•©ë˜ëŠ”-ë„¤íŠ¸ì›Œí¬-LB-êµ¬í˜„ì„-ì œê³µí•˜ì—¬-ë² ì–´-ë©”íƒˆ-í´ëŸ¬ìŠ¤í„°ì˜-ì™¸ë¶€-ì„œë¹„ìŠ¤ë„-ê°€ëŠ¥í•˜ê²Œ-ë§Œë“¤ì–´ì£¼ëŠ”-ê²ƒì„-ëª©í‘œë¡œ-í•œë‹¤"><a href="#MetalLBëŠ”-í‘œì¤€-ë¼ìš°íŒ…-í”„ë¡œí† ì½œì„-ì‚¬ìš©í•˜ì—¬-ë² ì–´-ë©”íƒˆ-ê¹¡í†µ-Kubernetes-í´ëŸ¬ìŠ¤í„°ì—-ëŒ€í•œ-ë¡œë“œ-ë°¸ëŸ°ì„œ-êµ¬í˜„-ì´ë¼ê³ -í•œë‹¤-í‘œì¤€-ë„¤íŠ¸ì›Œí¬-ì¥ë¹„ì™€-í†µí•©ë˜ëŠ”-ë„¤íŠ¸ì›Œí¬-LB-êµ¬í˜„ì„-ì œê³µí•˜ì—¬-ë² ì–´-ë©”íƒˆ-í´ëŸ¬ìŠ¤í„°ì˜-ì™¸ë¶€-ì„œë¹„ìŠ¤ë„-ê°€ëŠ¥í•˜ê²Œ-ë§Œë“¤ì–´ì£¼ëŠ”-ê²ƒì„-ëª©í‘œë¡œ-í•œë‹¤" class="headerlink" title="MetalLBëŠ” í‘œì¤€ ë¼ìš°íŒ… í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ë² ì–´ ë©”íƒˆ (ê¹¡í†µ) Kubernetes í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ ë¡œë“œ ë°¸ëŸ°ì„œ êµ¬í˜„ ì´ë¼ê³  í•œë‹¤. í‘œì¤€ ë„¤íŠ¸ì›Œí¬ ì¥ë¹„ì™€ í†µí•©ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ LB êµ¬í˜„ì„ ì œê³µí•˜ì—¬ ë² ì–´ ë©”íƒˆ í´ëŸ¬ìŠ¤í„°ì˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ë„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤."></a>MetalLBëŠ” í‘œì¤€ ë¼ìš°íŒ… í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ë² ì–´ ë©”íƒˆ (ê¹¡í†µ) Kubernetes í´ëŸ¬ìŠ¤í„°ì— ëŒ€í•œ <strong>ë¡œë“œ ë°¸ëŸ°ì„œ êµ¬í˜„</strong> ì´ë¼ê³  í•œë‹¤. í‘œì¤€ ë„¤íŠ¸ì›Œí¬ ì¥ë¹„ì™€ í†µí•©ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ LB êµ¬í˜„ì„ ì œê³µí•˜ì—¬ ë² ì–´ ë©”íƒˆ í´ëŸ¬ìŠ¤í„°ì˜ ì™¸ë¶€ ì„œë¹„ìŠ¤ë„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.</h2><blockquote><p><em>í”„ë¼ì´ë¹— í´ë¼ìš°ë“œ í™˜ê²½ì—ì„œ ë²¤ë”ì‚¬ë¥¼ ì´ìš©í•˜ì§€ ì•ŠëŠ” kubernetes ìš´ì˜ì˜ ê²½ìš°, ê³µìœ  IP ë§Œ ì¡´ì¬í•œë‹¤ë©´ ì´ë¥¼ ë¡œë“œë°¸ëŸ°ì„œë¡œ í™œìš©í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ì¥ì ì´ ìˆë‹¤.</em></p></blockquote><h1 id="Metallb-ì„¤ì¹˜"><a href="#Metallb-ì„¤ì¹˜" class="headerlink" title="Metallb ì„¤ì¹˜"></a>Metallb ì„¤ì¹˜</h1><p><a href="https://raw.githubusercontent.com/google/metallb/v0.7.3/manifests/metallb.yaml">github</a> ì˜ ê³µì‹ ë°°í¬ ì•¼ë¯ˆì„ íŠ¹ì • ë””ë ‰í† ë¦¬ <em>(ex. metallb)</em> ì— ë‹¤ìš´ë°›ì•„ ë°°í¬í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/jlee/metallb</span><br><span class="line">wget -O metallb.yaml https://raw.githubusercontent.com/google/metallb/v0.7.3/manifests/metallb.yaml</span><br><span class="line">kubectl apply -f metallb.yaml</span><br></pre></td></tr></table></figure><p>ì´í›„ ìƒì„±í•˜ëŠ” metallb-system ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— íŒŒë“œë¥¼ ì •ìƒ ë°°í¬í•˜ì˜€ëŠ”ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-node2:/data/jlee<span class="comment"># kubectl get pods -n metallb-system</span></span><br><span class="line">NAME                          READY   STATUS    RESTARTS   AGE</span><br><span class="line">controller-547d466688-25w69   1/1     Running   0          2d21h</span><br><span class="line">speaker-dfhwc                 1/1     Running   0          2d21h</span><br><span class="line">speaker-kpc2n                 1/1     Running   0          2d21h</span><br><span class="line">speaker-lfjv9                 1/1     Running   0          2d21h</span><br><span class="line">speaker-p9qlt                 1/1     Running   0          2d21h</span><br></pre></td></tr></table></figure><h1 id="Metallb-Configmap-ë°°í¬"><a href="#Metallb-Configmap-ë°°í¬" class="headerlink" title="Metallb Configmap ë°°í¬"></a>Metallb Configmap ë°°í¬</h1><p>ë¡œë“œë°¸ëŸ°ì„œ ìƒì„±ì— ëŒ€í•œ ì»¨í”¼ê·¸ ë§µ ì•¼ë¯ˆì„ ìƒì„±í•˜ê³  ë°°í¬í•œë‹¤. ì´ë¦„ì€ <code>metallb-Configmap.yaml</code> ë¡œ ì„¤ì •í•˜ì˜€ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-node2:/data/jlee/metallb<span class="comment"># cat metallb-ConfigMap.yaml</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: ConfigMap</span><br><span class="line">metadata:</span><br><span class="line">  namespace: metallb-system</span><br><span class="line">  name: config</span><br><span class="line">data:</span><br><span class="line">  config: |</span><br><span class="line">    address-pools:</span><br><span class="line">    - name: my-ip-space</span><br><span class="line">      protocol: layer2</span><br><span class="line">      addresses:</span><br><span class="line">      - 192.168.179.184-192.168.179.195</span><br></pre></td></tr></table></figure><ul><li>adresses ë¶€ë¶„ì€ ë¡œë“œë°¸ëŸ°ì„œë¡œ ì‚¬ìš©í•  IP ëŒ€ì—­ëŒ€ë¥¼ ì„¤ì •í•œë‹¤. ë‚˜ì˜ ê²½ìš°, 184-195 ê¹Œì§€ ì—¬ìœ  IP ê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— range ë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.<ul><li>ë§Œì•½ í•˜ë‚˜ì˜ IP ë¡œ ì„¤ì •í•  ê²½ìš° IP í•˜ë‚˜ë§Œ ì‘ì„±í•œë‹¤.</li></ul></li><li>ì •ìƒ ë°°í¬í•˜ì˜€ëŠ”ì§€ configmap ì„ ì¶œë ¥í•œë‹¤.<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-node2:/data/jlee/metallb<span class="comment"># kubectl get configmap -n metallb-system -o yaml</span></span><br><span class="line">apiVersion: v1</span><br><span class="line">items:</span><br><span class="line">- apiVersion: v1</span><br><span class="line">  data:</span><br><span class="line">    config: |</span><br><span class="line">      address-pools:</span><br><span class="line">      - name: my-ip-space</span><br><span class="line">        protocol: layer2</span><br><span class="line">        addresses:</span><br><span class="line">        - 192.168.179.184-192.168.179.195</span><br><span class="line">  kind: ConfigMap</span><br><span class="line">  metadata:</span><br><span class="line">    annotations:</span><br><span class="line">      kubectl.kubernetes.io/last-applied-configuration: |</span><br><span class="line">        &#123;<span class="string">&quot;apiVersion&quot;</span>:<span class="string">&quot;v1&quot;</span>,<span class="string">&quot;data&quot;</span>:&#123;<span class="string">&quot;config&quot;</span>:<span class="string">&quot;address-pools:\n- name: my-ip-space\n  protocol: layer2\n  addresses:\n  - 192.168.179.184-192.168.179.195\n&quot;</span>&#125;,<span class="string">&quot;kind&quot;</span>:<span class="string">&quot;ConfigMap&quot;</span>,<span class="string">&quot;metadata&quot;</span>:&#123;<span class="string">&quot;annotations&quot;</span>:&#123;&#125;,<span class="string">&quot;name&quot;</span>:<span class="string">&quot;config&quot;</span>,<span class="string">&quot;namespace&quot;</span>:<span class="string">&quot;metallb-system&quot;</span>&#125;&#125;</span><br><span class="line">    creationTimestamp: <span class="string">&quot;2020-04-03T09:56:44Z&quot;</span></span><br><span class="line">    name: config</span><br><span class="line">    namespace: metallb-system</span><br><span class="line">    resourceVersion: <span class="string">&quot;13110630&quot;</span></span><br><span class="line">    selfLink: /api/v1/namespaces/metallb-system/configmaps/config</span><br><span class="line">    uid: 49765aca-9364-48c2-9f9a-4fa2304651e8</span><br><span class="line">kind: List</span><br><span class="line">metadata:</span><br><span class="line">  resourceVersion: <span class="string">&quot;&quot;</span></span><br><span class="line">  selfLink: <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="ì„œë¹„ìŠ¤-ë°°í¬-í›„-í™•ì¸"><a href="#ì„œë¹„ìŠ¤-ë°°í¬-í›„-í™•ì¸" class="headerlink" title="ì„œë¹„ìŠ¤ ë°°í¬ í›„ í™•ì¸"></a>ì„œë¹„ìŠ¤ ë°°í¬ í›„ í™•ì¸</h1><p>4ê°œ íŒŒë“œ í†µì‹ ì„ ìœ„í•œ ì„œë¹„ìŠ¤ ì•¼ë¯ˆ íŒŒì¼ì— type ì„ ë¡œë“œë°¸ëŸ°ì„œë¡œ ì„¤ì •í•˜ê³  ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•œë‹¤.</p><p><em>loadbalancer.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="string">..</span></span><br><span class="line"><span class="string">..</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="string">...</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">LoadBalancer</span></span><br><span class="line">  <span class="attr">loadBalancerIP:</span> <span class="number">192.168</span><span class="number">.179</span><span class="number">.184</span> <span class="comment"># ì´ ë¶€ë¶„ ìˆ˜ì • í•„ìš”</span></span><br></pre></td></tr></table></figure><ul><li><code>loadBalancerIP</code> ê°’ì„ ìœ„ <strong>metallb-Configmap.yaml ë‚´ IP ë²”ìœ„ì— í¬í•¨í•œ í•˜ë‚˜</strong>ë¡œ ì‚¬ìš©í•œë‹¤.</li><li>ì´í›„ ë°°í¬í•œ ì„œë¹„ìŠ¤ë¥¼ í™•ì¸í•˜ë©´ <code>EXTERNA-IP</code> ì— IP ê°€ í‘œì‹œë  ê²ƒì´ë‹¤.<ul><li>ë°˜ë“œì‹œ <code>ip ê°’ì€ configmap ip range ì•ˆ</code>ì—ì„œ ì‚¬ìš©í•´ì•¼í•œë‹¤.</li><li><code>kubectl get svc</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NAME       TYPE           CLUSTER-IP    EXTERNAL-IP       PORT(S)                                                                                                                                                                      AGE</span><br><span class="line">hyper-lb   LoadBalancer   10.96.25.50   192.168.179.184   20:31010/TCP,21:31020/TCP,22:31030/TCP,23:31040/TCP,80:31060/TCP,8080:31080/TCP,9736:31085/TCP,8629:31090/TCP,8630:31100/TCP,28080:31160/TCP,1883:31190/TCP,2883:31200/TCP   6h42m</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://metallb.universe.tf">https://metallb.universe.tf</a></li><li><a href="https://ssup2.github.io/record/Kubernetes_MetalLB_ì„¤ì¹˜_Ubuntu_18.04/">https://ssup2.github.io/record/Kubernetes_MetalLB_ì„¤ì¹˜_Ubuntu_18.04/</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-install_metallb/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] kubectl ëª…ë ¹ì–´ ìˆ˜í–‰ ì‹œ ì‹¤í–‰ì†ë„ ì €í•˜ ë¬¸ì œ</title>
      <link>https://jx2lee.github.io/cloud-kubectl_hang/</link>
      <guid>https://jx2lee.github.io/cloud-kubectl_hang/</guid>
      <pubDate>Mon, 30 Mar 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë„ì»¤ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ë³€ê²½í•˜ë˜ ë„ì¤‘, k8s í´ëŸ¬ìŠ¤í„°ì—ì„œ kubectl ëª…ë ¹ì–´ê°€ ëŠë ¤ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. ì›ì¸ì„ íŒŒì•…í•˜ê³  ì´ë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë„ì»¤ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ë³€ê²½í•˜ë˜ ë„ì¤‘, k8s í´ëŸ¬ìŠ¤í„°ì—ì„œ kubectl ëª…ë ¹ì–´ê°€ ëŠë ¤ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. ì›ì¸ì„ íŒŒì•…í•˜ê³  ì´ë¥¼ í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ-ë°œìƒ"><a href="#ë¬¸ì œ-ë°œìƒ" class="headerlink" title="ë¬¸ì œ ë°œìƒ"></a>ë¬¸ì œ ë°œìƒ</h1><p>kubectl ë¥¼ ì‚¬ìš©í•˜ë©´ ê²°ê³¼ëŠ” ë‚˜ì˜¤ì§€ë§Œ ì—„ì²­ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. <code>time kubectl get nodes</code> ë¥¼ ìˆ˜í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ê²°ê³¼ê°€ ë‚˜ì™”ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">NAME         STATUS   ROLES    AGE   VERSION</span><br><span class="line">k8s-master   Ready    master   14d   v1.15.3</span><br><span class="line">k8s-node1    Ready    master   14d   v1.15.3</span><br><span class="line">k8s-node2    Ready    master   14d   v1.15.3</span><br><span class="line">k8s-node3    Ready    &lt;none&gt;   14d   v1.15.3</span><br><span class="line">k8s-node4    Ready    &lt;none&gt;   14d   v1.15.3</span><br><span class="line"></span><br><span class="line">real    2m1.032s</span><br><span class="line">user    2m0.089s</span><br><span class="line">sys    2m0.041s</span><br></pre></td></tr></table></figure><h1 id="ì›ì¸-íŒŒì•…"><a href="#ì›ì¸-íŒŒì•…" class="headerlink" title="ì›ì¸ íŒŒì•…"></a>ì›ì¸ íŒŒì•…</h1><ul><li><p><code>kube-system</code> ì˜ íŒŒë“œ ìƒíƒœ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:/data<span class="comment"># kubectl get pods -n kube-system</span></span><br><span class="line">NAME                                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">calico-kube-controllers-56cd854695-hvnkl   1/1     Running   0          7d</span><br><span class="line">calico-node-4f2bt                          1/1     Running   0          7d</span><br><span class="line">calico-node-bhk4z                          1/1     Running   0          7d</span><br><span class="line">calico-node-kmvm9                          1/1     Running   0          7d</span><br><span class="line">calico-node-q928k                          1/1     Running   0          7d</span><br><span class="line">calico-node-snf8z                          0/1     Evicted   0          90m</span><br><span class="line">coredns-5c98db65d4-7665n                   1/1     Running   35         10d</span><br><span class="line">coredns-5c98db65d4-7hpxb                   1/1     Running   34         10d</span><br><span class="line">etcd-k8s-master                            1/1     Running   3          14d</span><br><span class="line">etcd-k8s-node1                             1/1     Running   0          14d</span><br><span class="line">etcd-k8s-node2                             1/1     Running   0          14d</span><br><span class="line">kube-apiserver-k8s-master                  1/1     Running   3          5d23h</span><br><span class="line">kube-apiserver-k8s-node1                   1/1     Running   0          5d23h</span><br><span class="line">kube-apiserver-k8s-node2                   1/1     Running   0          5d23h</span><br><span class="line">kube-controller-manager-k8s-master         1/1     Running   3          14d</span><br><span class="line">kube-controller-manager-k8s-node1          1/1     Running   7          14d</span><br><span class="line">kube-controller-manager-k8s-node2          1/1     Running   8          14d</span><br><span class="line">kube-proxy-4dhqc                           1/1     Running   0          14d</span><br><span class="line">kube-proxy-9v87c                           1/1     Running   0          14d</span><br><span class="line">kube-proxy-pfrwf                           1/1     Running   0          14d</span><br><span class="line">kube-proxy-tsdb6                           0/1     Evicted   0          91m</span><br><span class="line">kube-proxy-vsk6r                           1/1     Running   0          14d</span><br><span class="line">kube-scheduler-k8s-master                  1/1     Running   2          14d</span><br><span class="line">kube-scheduler-k8s-node1                   1/1     Running   6          14d</span><br><span class="line">kube-scheduler-k8s-node2                   1/1     Running   8          14d</span><br><span class="line">tiller-deploy-758bcdc94f-c92cw             1/1     Running   0          14d</span><br></pre></td></tr></table></figure><ul><li>Evcited ëœ ìº˜ë¦¬ì½” ë…¸ë“œ íŒŒë“œê°€ ë³´ì¸ë‹¤. ë¶„ëª… k8s-master ë…¸ë“œì—ì„œ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. (ë¯¸ë¦¬ ìº¡ì³ë¥¼ ë– ë†“ì§€ ëª»í•´ -o wide ì˜µì…˜ì„ ì¤€ ê²°ê³¼ëŠ” ì—†ë‹¤) </li><li><code>calico-node-snf8z</code> íŒŒë“œë¥¼ describe í•´ë³´ì.</li></ul></li><li><p><code>calico-node-snf8z</code> ìº˜ë¦¬ì½” íŒŒë“œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:/data<span class="comment"># kd pod -n kube-system calico-node-snf8z</span></span><br><span class="line">Name:                 calico-node-snf8z</span><br><span class="line">Namespace:            kube-system</span><br><span class="line">Priority:             2000001000</span><br><span class="line">Priority Class Name:  system-node-critical</span><br><span class="line">Node:                 k8s-master/</span><br><span class="line">Start Time:           Tue, 31 Mar 2020 14:14:44 +0900</span><br><span class="line">Labels:               controller-revision-hash=5744776c47</span><br><span class="line">                    k8s-app=calico-node</span><br><span class="line">                    pod-template-generation=1</span><br><span class="line">Annotations:          scheduler.alpha.kubernetes.io/critical-pod:</span><br><span class="line">Status:               Failed</span><br><span class="line">Reason:               Evicted</span><br><span class="line">Message:              The node was low on resource: ephemeral-storage.</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ul><li><p><code>The node was low on resource: ephemeral-storage.</code> ë©”ì„¸ì§€ê°€ ëˆˆì— ëˆë‹¤.</p></li><li><p>êµ¬ê¸€ë§ì„ í†µí•´ ì•Œì•„ë³¸ ê²°ê³¼, í•´ë‹¹ íŒŒë“œê°€ ë°°í¬ëœ ë…¸ë“œ ìš©ëŸ‰ì´ ë¶€ì¡±í•˜ë‹¤ ëŠë¼ë©´ íŒŒë“œë¥¼ ë„ìš°ì§€ ëª»í•˜ê³  Evicted ìƒíƒœë¡œ ë³€í•œë‹¤ê³  í•œë‹¤.</p><ul><li>ìƒíƒœë¥¼ ë³´ì•„í•˜ë‹ˆ docker root directory ê°€ /var/lib ê°€ default ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ ì´ë¯¸ì§€ ë“± ë°ì´í„°ê°€ ë§ì´ ìŒ“ì´ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. <em>(ë£¨íŠ¸ ì „ì²´ ë””ë ‰í† ë¦¬ì˜ ì•½ 80% ì´ìƒì„ ì°¨ì§€í•˜ê³  ìˆì—ˆë‹¤. ì´ëŠ” full ë‚˜ì§€ ì•Šì•„ë„ kubernetest ê°€ ì„¤ì •í•œ ì ì • ìš©ëŸ‰(?)ì—ì„œë§Œ íŒŒë“œë¥¼ ë„ìš°ê²Œë” ì„¤ê³„ëœ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤-ë‡Œí”¼ì…œ)</em></li><li>ì´ë¥¼ í•´ê²°í•˜ê³ ì docker root directory ë¥¼ ë³€ê²½í•˜ì˜€ë‹¤. <a href="">ì°¸ê³ </a></li></ul></li><li><p>ì´í›„ <strong>Evicted ëœ ìº˜ë¦¬ì½” ë…¸ë“œ íŒŒë“œë¥¼ ì¬ê¸°ë™</strong>í•˜ì˜€ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart 7feda4bd2162</span><br></pre></td></tr></table></figure></li></ul></li></ul><h1 id="ê²°ê³¼"><a href="#ê²°ê³¼" class="headerlink" title="ê²°ê³¼"></a>ê²°ê³¼</h1><p>í•´ë‹¹ ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘í•˜ê³  <code>kube-system</code> íŒŒë“œ ìƒíƒœë¥¼ í™•ì¸í•œ ê²°ê³¼, ëª¨ë‘ ì •ìƒ ì‘ë™í•˜ê³  ìˆìœ¼ë©° kubectl ëª…ë ¹ì–´ ì‹¤í–‰ë„ ì´ì „ì²˜ëŸ¼ ë¹ ë¥´ê²Œ ë³µêµ¬ë˜ì—ˆë‹¤. ì´ë¥¼ í†µí•´ kubectl ëª…ë ¹ì–´ì–´ê°€ ëŠë ¤ì§„ ì´ìœ ëŠ” *â€<strong>ë…¸ë“œ ìš©ëŸ‰ ë° ë…¸ë“œ ê°„ í†µì‹ </strong>ì¼ ìˆ˜ë„ ìˆë‹¤â€* ë¼ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ë‹¤. ì´ì™¸ì—ë„ ë§ì€ ë¶€ë¶„ì—ì„œ ëª…ë ¹ì–´ ì‹¤í–‰ ì‹œê°„ì´ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆëŠ”ë° ê·¸ë•Œë§ˆë‹¤ ê¸€ì— ì¶”ê°€í•  ì˜ˆì •ì´ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:/data<span class="comment"># kgpo -n kube-system</span></span><br><span class="line">NAME                                       READY   STATUS    RESTARTS   AGE     IP                NODE         NOMINATED NODE   READINESS GATES</span><br><span class="line">calico-kube-controllers-56cd854695-hvnkl   1/1     Running   0          7d      10.244.169.130    k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">calico-node-2wvj8                          1/1     Running   0          54s     192.168.179.172   k8s-master   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">calico-node-4f2bt                          1/1     Running   0          7d      192.168.179.176   k8s-node4    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">calico-node-bhk4z                          1/1     Running   0          7d      192.168.179.174   k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">calico-node-kmvm9                          1/1     Running   0          7d      192.168.179.175   k8s-node3    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">calico-node-q928k                          1/1     Running   0          7d      192.168.179.173   k8s-node1    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">coredns-5c98db65d4-7665n                   1/1     Running   35         10d     10.244.36.71      k8s-node1    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">coredns-5c98db65d4-7hpxb                   1/1     Running   34         10d     10.244.169.148    k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">etcd-k8s-master                            1/1     Running   3          14d     192.168.179.172   k8s-master   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">etcd-k8s-node1                             1/1     Running   0          14d     192.168.179.173   k8s-node1    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">etcd-k8s-node2                             1/1     Running   0          14d     192.168.179.174   k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-apiserver-k8s-master                  1/1     Running   3          5d23h   192.168.179.172   k8s-master   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-apiserver-k8s-node1                   1/1     Running   0          5d23h   192.168.179.173   k8s-node1    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-apiserver-k8s-node2                   1/1     Running   0          5d23h   192.168.179.174   k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-controller-manager-k8s-master         1/1     Running   3          14d     192.168.179.172   k8s-master   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-controller-manager-k8s-node1          1/1     Running   7          14d     192.168.179.173   k8s-node1    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-controller-manager-k8s-node2          1/1     Running   8          14d     192.168.179.174   k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-proxy-4dhqc                           1/1     Running   0          14d     192.168.179.175   k8s-node3    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-proxy-8qtnp                           1/1     Running   0          54s     192.168.179.172   k8s-master   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-proxy-9v87c                           1/1     Running   0          14d     192.168.179.174   k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-proxy-pfrwf                           1/1     Running   0          14d     192.168.179.173   k8s-node1    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-proxy-vsk6r                           1/1     Running   0          14d     192.168.179.176   k8s-node4    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-scheduler-k8s-master                  1/1     Running   2          14d     192.168.179.172   k8s-master   &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-scheduler-k8s-node1                   1/1     Running   6          14d     192.168.179.173   k8s-node1    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">kube-scheduler-k8s-node2                   1/1     Running   8          14d     192.168.179.174   k8s-node2    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">tiller-deploy-758bcdc94f-c92cw             1/1     Running   0          14d     10.244.122.75     k8s-node4    &lt;none&gt;           &lt;none&gt;</span><br><span class="line">root@k8s-node2:/data<span class="comment"># time kubectl get nodes</span></span><br><span class="line">NAME         STATUS   ROLES    AGE   VERSION</span><br><span class="line">k8s-master   Ready    master   14d   v1.15.3</span><br><span class="line">k8s-node1    Ready    master   14d   v1.15.3</span><br><span class="line">k8s-node2    Ready    master   14d   v1.15.3</span><br><span class="line">k8s-node3    Ready    &lt;none&gt;   14d   v1.15.3</span><br><span class="line">k8s-node4    Ready    &lt;none&gt;   14d   v1.15.3</span><br><span class="line"></span><br><span class="line">real    0m1.032s</span><br><span class="line">user    0m0.089s</span><br><span class="line">sys    0m0.041s</span><br></pre></td></tr></table></figure><hr><p>2020.03.31 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-kubectl_hang/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Kubeflow íì‡„ë§ ì„¤ì¹˜ ì¤‘ Namespace ìƒì„± í™”ë©´ì´ ë‚˜ì˜¤ì§€ ì•ŠëŠ” ë¬¸ì œ</title>
      <link>https://jx2lee.github.io/cloud-kubeflow_error/</link>
      <guid>https://jx2lee.github.io/cloud-kubeflow_error/</guid>
      <pubDate>Sun, 29 Mar 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Kubeflow ë¥¼ íì‡„ í™˜ê²½ì—ì„œ ì„¤ì¹˜í•˜ë˜ ì¤‘ Namespace ìƒì„±í™”ë©´ì´ ë‚˜ì˜¤ì§€ ì•Šê³  ì‹¬ì§€ì–´ ì„ íƒí•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•˜ê³  í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Note&lt;/strong&gt;  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.05.19 : Image list ë³€ê²½&lt;/li&gt;
&lt;li&gt;2020.06.24 : Image List ë³€ê²½ (kfserving-system ì— í•„ìš”í•œ ì´ë¯¸ì§€ ì¶”ê°€)&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Kubeflow ë¥¼ íì‡„ í™˜ê²½ì—ì„œ ì„¤ì¹˜í•˜ë˜ ì¤‘ Namespace ìƒì„±í™”ë©´ì´ ë‚˜ì˜¤ì§€ ì•Šê³  ì‹¬ì§€ì–´ ì„ íƒí•  ìˆ˜ ì—†ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤. ë¬¸ì œì˜ ì›ì¸ì„ íŒŒì•…í•˜ê³  í•´ê²°í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><p><strong>Update Note</strong>  </p><ul><li>2020.05.19 : Image list ë³€ê²½</li><li>2020.06.24 : Image List ë³€ê²½ (kfserving-system ì— í•„ìš”í•œ ì´ë¯¸ì§€ ì¶”ê°€)</li></ul><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><ul><li>UI ì ‘ì† í›„ namespace ìƒì„±ì´ ë˜ì§€ ì•ŠìŒ<ul><li><code>.cache</code> í´ë” ì‚­ì œ í›„ ì¬ ë°°í¬í•´ë„ ê³„ì†ë˜ëŠ” ë¬¸ì œ ë°œìƒ</li></ul></li></ul><h2 id="kubectl-get-pod-n-kubeflow"><a href="#kubectl-get-pod-n-kubeflow" class="headerlink" title="kubectl get pod -n kubeflow"></a>kubectl get pod -n kubeflow</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">NAME                                                           READY   STATUS             RESTARTS   AGE</span><br><span class="line">admission-webhook-bootstrap-stateful-set-0                     1/1     Running            0          15m</span><br><span class="line">admission-webhook-deployment-68c6dd4cc5-sgtn6                  1/1     Running            0          14m</span><br><span class="line">application-controller-stateful-set-0                          1/1     Running            0          15m</span><br><span class="line">argo-ui-78bf45b698-2vhm9                                       1/1     Running            0          15m</span><br><span class="line">centraldashboard-fd9549bd5-nv68z                               1/1     Running            0          15m</span><br><span class="line">jupyter-web-app-deployment-7797778d74-5lq9d                    1/1     Running            0          15m</span><br><span class="line">katib-controller-55545cb4c8-8xdtn                              1/1     Running            1          15m</span><br><span class="line">katib-db-d99f776cd-zww8n                                       0/1     Running            1          15m</span><br><span class="line">katib-manager-67d9689545-9j6cf                                 0/1     CrashLoopBackOff   6          15m</span><br><span class="line">katib-ui-889499864-fd4hc                                       1/1     Running            0          15m</span><br><span class="line">metacontroller-0                                               1/1     Running            0          15m</span><br><span class="line">metadata-db-68df96445c-br8vt                                   1/1     Running            0          15m</span><br><span class="line">metadata-deployment-865fddd777-dpkbv                           1/1     Running            0          15m</span><br><span class="line">metadata-envoy-deployment-68f64489cc-ts88j                     1/1     Running            0          15m</span><br><span class="line">metadata-grpc-deployment-7f5d6c8ccb-j99d2                      1/1     Running            1          15m</span><br><span class="line">metadata-ui-84c76df48f-4sxdq                                   1/1     Running            0          15m</span><br><span class="line">minio-75d8cbbb5c-2dsgt                                         1/1     Running            0          15m</span><br><span class="line">ml-pipeline-7f6548ff8-74lh6                                    0/1     ImagePullBackOff   0          15m</span><br><span class="line">ml-pipeline-ml-pipeline-visualizationserver-559c875d6b-9mth7   0/1     ImagePullBackOff   0          15m</span><br><span class="line">ml-pipeline-persistenceagent-796c6c4c75-l8vx2                  0/1     ImagePullBackOff   0          15m</span><br><span class="line">ml-pipeline-scheduledworkflow-f86df57bd-87j5p                  0/1     ImagePullBackOff   0          15m</span><br><span class="line">ml-pipeline-ui-fb8b6778f-zgx59                                 1/1     Running            0          15m</span><br><span class="line">ml-pipeline-viewer-controller-deployment-78bdcc54fc-pf8lb      1/1     Running            0          15m</span><br><span class="line">mysql-6c5ddbd98b-pkqqr                                         1/1     Running            0          15m</span><br><span class="line">notebook-controller-deployment-7694b76c89-fb6g5                1/1     Running            0          15m</span><br><span class="line">profiles-deployment-5c48f8d6d8-kxfx5                           1/2     CrashLoopBackOff   7          15m</span><br><span class="line">pytorch-operator-dfb77d487-92dqx                               1/1     Running            0          15m</span><br><span class="line">seldon-operator-controller-manager-0                           1/1     Running            1          15m</span><br><span class="line">spartakus-volunteer-74f96589f9-g2xd5                           1/1     Running            0          15m</span><br><span class="line">tensorboard-6867797f97-kqxsc                                   1/1     Running            0          15m</span><br><span class="line">tf-job-operator-58d7d7d976-jhpk4                               1/1     Running            0          15m</span><br><span class="line">workflow-controller-66dd745699-9bqcx                           1/1     Running            0          15m</span><br></pre></td></tr></table></figure><h2 id="log"><a href="#log" class="headerlink" title="log"></a>log</h2><h3 id="profiles-deployment-manager"><a href="#profiles-deployment-manager" class="headerlink" title="profiles-deployment manager"></a>profiles-deployment manager</h3><p><code>k logs -n kubeflow profiles-deployment-5c48f8d6d8-kxfx5 -c manager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">flag provided but not defined: -workload-identity</span><br><span class="line">Usage of /manager:</span><br><span class="line">  -kubeconfig string</span><br><span class="line">        Paths to a kubeconfig. Only required <span class="keyword">if</span> out-of-cluster.</span><br><span class="line">  -master string</span><br><span class="line">        The address of the Kubernetes API server. Overrides any value <span class="keyword">in</span> kubeconfig. Only required <span class="keyword">if</span> out-of-cluster.</span><br><span class="line">  -metrics-addr string</span><br><span class="line">        The address the metric endpoint binds to. (default <span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">  -userid-header string</span><br><span class="line">        Key of request header containing user id (default <span class="string">&quot;x-goog-authenticated-user-email&quot;</span>)</span><br><span class="line">  -userid-prefix string</span><br><span class="line">        Request header user id common prefix (default <span class="string">&quot;accounts.google.com:&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="profiles-deployment-kfam"><a href="#profiles-deployment-kfam" class="headerlink" title="profiles-deployment kfam"></a>profiles-deployment kfam</h3><p><code>k logs -n kubeflow profiles-deployment-5c48f8d6d8-kxfx5 -c kfam</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time=<span class="string">&quot;2020-03-26T06:02:16Z&quot;</span> level=info msg=<span class="string">&quot;Server started&quot;</span></span><br></pre></td></tr></table></figure><h3 id="centraldashboard-pod-logs"><a href="#centraldashboard-pod-logs" class="headerlink" title="centraldashboard pod logs"></a>centraldashboard pod logs</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Initializing Kubernetes configuration</span><br><span class="line">Unable to fetch Nodes &#123; kind: <span class="string">&#x27;Status&#x27;</span>,</span><br><span class="line">  apiVersion: <span class="string">&#x27;v1&#x27;</span>,</span><br><span class="line">  metadata: &#123;&#125;,</span><br><span class="line">  status: <span class="string">&#x27;Failure&#x27;</span>,</span><br><span class="line">  message:</span><br><span class="line">   <span class="string">&#x27;nodes is forbidden: User &quot;system:serviceaccount:kubeflow:centraldashboard&quot; cannot list resource &quot;nodes&quot; in API group &quot;&quot; at the cluster scope&#x27;</span>,</span><br><span class="line">  reason: <span class="string">&#x27;Forbidden&#x27;</span>,</span><br><span class="line">  details: &#123; kind: <span class="string">&#x27;nodes&#x27;</span> &#125;,</span><br><span class="line">  code: 403 &#125;</span><br><span class="line">Unable to fetch Application information: &#123; kind: <span class="string">&#x27;Status&#x27;</span>,</span><br><span class="line">  apiVersion: <span class="string">&#x27;v1&#x27;</span>,</span><br><span class="line">  metadata: &#123;&#125;,</span><br><span class="line">  status: <span class="string">&#x27;Failure&#x27;</span>,</span><br><span class="line">  message:</span><br><span class="line">   <span class="string">&#x27;applications.app.k8s.io is forbidden: User &quot;system:serviceaccount:kubeflow:centraldashboard&quot; cannot list resource &quot;applications&quot; in API group &quot;app.k8s.io&quot; in the namespace &quot;kubeflow&quot;&#x27;</span>,</span><br><span class="line">Using Profiles service at http://profiles-kfam.kubeflow:8081/kfam</span><br><span class="line">  reason: <span class="string">&#x27;Forbidden&#x27;</span>,</span><br><span class="line">  details: &#123; group: <span class="string">&#x27;app.k8s.io&#x27;</span>, kind: <span class="string">&#x27;applications&#x27;</span> &#125;,</span><br><span class="line">  code: 403 &#125;</span><br><span class="line">Unable to fetch Nodes &#123; kind: <span class="string">&#x27;Status&#x27;</span>,</span><br><span class="line">  apiVersion: <span class="string">&#x27;v1&#x27;</span>,</span><br><span class="line">  metadata: &#123;&#125;,</span><br><span class="line">  status: <span class="string">&#x27;Failure&#x27;</span>,</span><br><span class="line">  message:</span><br><span class="line">   <span class="string">&#x27;nodes is forbidden: User &quot;system:serviceaccount:kubeflow:centraldashboard&quot; cannot list resource &quot;nodes&quot; in API group &quot;&quot; at the cluster scope&#x27;</span>,</span><br><span class="line">  reason: <span class="string">&#x27;Forbidden&#x27;</span>,</span><br><span class="line">  details: &#123; kind: <span class="string">&#x27;nodes&#x27;</span> &#125;,</span><br><span class="line">  code: 403 &#125;</span><br><span class="line"><span class="string">&quot;other&quot;</span> is not a supported platform <span class="keyword">for</span> Metrics</span><br><span class="line">Server listening on port http://localhost:8082 (<span class="keyword">in</span> production mode)</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br><span class="line">Unable to contact Profile Controller [object Object]</span><br></pre></td></tr></table></figure><ul><li><strong>Unable to contact Profile Controller [object Object]</strong><ul><li>centraldashboard ì—ì„œ profile controller ìš”ì²­ì„ ë°›ì§€ ëª»í•˜ëŠ” ìƒí™©</li><li>ê° íŒŒë“œì— ì ‘ì†í•˜ì—¬ (centraldashboard, profile controller-manager) í•‘ì„ ë•Œë ¤ë´¤ëŠ”ë° ëª¨ë‘ í†µì‹ ì´ ì›í™œí•˜ì˜€ìŒ</li></ul></li></ul><h1 id="í•´ê²°-ë°©ì•ˆ"><a href="#í•´ê²°-ë°©ì•ˆ" class="headerlink" title="í•´ê²° ë°©ì•ˆ"></a>í•´ê²° ë°©ì•ˆ</h1><ul><li>ì—„ì²­ë‚˜ê²Œ ë§ì€ ë°©ë²•ì„ ì‹œë„í–ˆë‹¤.<ul><li>kfctl verion, ê°ì¢… ì´ë¯¸ì§€ ë³€ê²½ ë“±..</li><li>ì‹œí–‰ì°©ì˜¤ ëì— centraldashobard ì™€ profile-deployment íŒŒë“œì— ìƒì„±í•œ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ ë²„ì ¼ ë¬¸ì œì˜€ë‹¤.<ul><li><code>gcr.io/kubeflow-images-public/centraldashboard:latest</code></li><li><code>gcr.io/kubeflow-images-public/profile-controller:v20191024-v0.7.0-rc.5-12-g956569ba-e3b0c4</code></li><li><code>gcr.io/kubeflow-images-public/kfam@sha256:3b0d4be7e59a3fa5ed1d80dccc832312caa94f3b2d36682524d3afc4e45164f0</code><ul><li>digest ë¡œ ì´ë£¨ì–´ì§„ ì´ë¯¸ì§€ëŠ” pull ì´í›„ì— tag ë¥¼ ìƒì„±í•˜ì—¬ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— push í•˜ì˜€ë‹¤. (ex. <code>gcr.io/kubeflow-images-public/kfam:3b0d4be7e59a3fa5ed1d80dccc832312caa94f3b2d36682524d3afc4e45164f0</code>)</li></ul></li></ul></li></ul></li><li>ìµœì¢…ì ìœ¼ë¡œ kubeflow 0.7.1 ë²„ì ¼ì— ì‚¬ìš©í•œ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">argoproj/argoui:v2.3.0</span><br><span class="line">argoproj/workflow-controller:v2.3.0</span><br><span class="line">docker.io/istio/citadel:1.1.6</span><br><span class="line">docker.io/istio/galley:1.1.6</span><br><span class="line">docker.io/istio/kubectl:1.1.6</span><br><span class="line">docker.io/istio/mixer:1.1.6</span><br><span class="line">docker.io/istio/pilot:1.1.6</span><br><span class="line">docker.io/istio/proxy_init:1.1.6</span><br><span class="line">docker.io/istio/proxyv2:1.1.6</span><br><span class="line">docker.io/istio/sidecar_injector:1.1.6</span><br><span class="line">docker.io/jaegertracing/all-in-one:1.9</span><br><span class="line">docker.io/kiali/kiali:v0.16</span><br><span class="line">docker.io/prom/prometheus:v2.3.1</span><br><span class="line">docker.io/seldonio/seldon-core-operator:0.4.1</span><br><span class="line">gcr.io/google_containers/spartakus-amd64:v1.1.0</span><br><span class="line">gcr.io/kfserving/alibi-explainer:0.2.2</span><br><span class="line">gcr.io/kfserving/kfserving-controller:0.2.2</span><br><span class="line">gcr.io/kfserving/logger:0.2.2</span><br><span class="line">gcr.io/kfserving/pytorchserver:0.2.2</span><br><span class="line">gcr.io/kfserving/sklearnserver:0.2.2</span><br><span class="line">gcr.io/kfserving/storage-initializer:0.2.2 </span><br><span class="line">gcr.io/kfserving/xgbserver:0.2.2</span><br><span class="line">gcr.io/kubebuilder/kube-rbac-proxy:v0.4.0</span><br><span class="line">gcr.io/kubeflow-images-public/admission-webhook:v20190520-v0-139-gcee39dbc-dirty-0d8f4c</span><br><span class="line">gcr.io/kubeflow-images-public/ingress-setup:latest</span><br><span class="line">gcr.io/kubeflow-images-public/jupyter-web-app:9419d4d</span><br><span class="line">gcr.io/kubeflow-images-public/katib/v1alpha3/katib-controller:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/katib/v1alpha3/katib-manager:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/katib/v1alpha3/katib-ui:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/kubernetes-sigs/application:1.0-beta</span><br><span class="line">gcr.io/kubeflow-images-public/metadata-frontend:v0.1.8</span><br><span class="line">gcr.io/kubeflow-images-public/metadata:v0.1.11</span><br><span class="line">gcr.io/kubeflow-images-public/pytorch-operator:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v-base-ef41372-1177829795472347138</span><br><span class="line">gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-cpu:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/tensorflow-1.14.0-notebook-gpu:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/tensorflow-2.0.0a0-notebook-cpu:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/tensorflow-2.0.0a0-notebook-gpu:v0.7.0</span><br><span class="line">gcr.io/kubeflow-images-public/tf_operator:kubeflow-tf-operator-postsubmit-v1-5adee6f-6109-a25c</span><br><span class="line">gcr.io/ml-pipeline/api-server:0.1.31</span><br><span class="line">gcr.io/ml-pipeline/envoy:metadata-grpc</span><br><span class="line">gcr.io/ml-pipeline/frontend:0.1.31</span><br><span class="line">gcr.io/ml-pipeline/persistenceagent:0.1.31</span><br><span class="line">gcr.io/ml-pipeline/scheduledworkflow:0.1.31</span><br><span class="line">gcr.io/ml-pipeline/viewer-crd-controller:0.1.31</span><br><span class="line">gcr.io/ml-pipeline/visualization-server:0.1.27</span><br><span class="line">gcr.io/tfx-oss-public/ml_metadata_store_server:0.15.1</span><br><span class="line">grafana/grafana:6.0.2</span><br><span class="line">mcr.microsoft.com/onnxruntime/server:v0.5.1</span><br><span class="line">metacontroller/metacontroller:v0.3.0</span><br><span class="line">minio/minio:RELEASE.2018-02-09T22-40-05Z</span><br><span class="line">mysql:5.6</span><br><span class="line">mysql:8</span><br><span class="line">mysql:8.0.3</span><br><span class="line">nvcr.io/nvidia/tensorrtserver:19.05-py3</span><br><span class="line">tensorflow/serving:1.11.0</span><br><span class="line">tensorflow/serving:1.11.0-gpu</span><br><span class="line">tensorflow/serving:1.12.0</span><br><span class="line">tensorflow/serving:1.12.0-gpu</span><br><span class="line">tensorflow/serving:1.13.0</span><br><span class="line">tensorflow/serving:1.13.0-gpu</span><br><span class="line">tensorflow/serving:1.14.0</span><br><span class="line">tensorflow/serving:1.14.0-gpu</span><br><span class="line">tensorflow/tensorflow:1.8.0</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/activator@sha256:88d864eb3c47881cf7ac058479d1c735cc3cf4f07a11aad0621cd36dcd9ae3c6</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/autoscaler-hpa@sha256:a7801c3cf4edecfa51b7bd2068f97941f6714f7922cb4806245377c2b336b723</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/autoscaler@sha256:aeaacec4feedee309293ac21da13e71a05a2ad84b1d5fcc01ffecfa6cfbb2870</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/controller@sha256:3b096e55fa907cff53d37dadc5d20c29cea9bb18ed9e921a588fee17beb937df</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/networking/istio@sha256:057c999bccfe32e9889616b571dc8d389c742ff66f0b5516bad651f05459b7bc</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/queue@sha256:e0654305370cf3bbbd0f56f97789c92cf5215f752b70902eba5d5fc0e88c5aca</span><br><span class="line">gcr.io/knative-releases/knative.dev/serving/cmd/webhook@sha256:c2076674618933df53e90cf9ddd17f5ddbad513b8c95e955e45e37be7ca9e0e8</span><br><span class="line">gcr.io/kubeflow-images-public/centraldashboard@sha256:4299297b8390599854aa8f77e9eb717db684b32ca9a94a0ab0e73f3f73e5d8b5</span><br><span class="line">gcr.io/kubeflow-images-public/kfam@sha256:3b0d4be7e59a3fa5ed1d80dccc832312caa94f3b2d36682524d3afc4e45164f0</span><br><span class="line">gcr.io/kubeflow-images-public/notebook-controller@sha256:6490f737000bd1d2520ac4b8cbde2b09749cdb291b1967ddda95d05131db49db</span><br><span class="line">gcr.io/kubeflow-images-public/profile-controller@sha256:e601b2226e534a4f8e0722cfc44ae4a919a90265c4c6c9e7a7a55fcb57032f25</span><br></pre></td></tr></table></figure><blockquote><p><em>tar íŒŒì¼ë¡œ ìš©ëŸ‰ì„ ê³„ì‚°í•œ ê²°ê³¼ ì•½ 30G(no gzip option)</em></p></blockquote><h1 id="ì¶”ê°€ë¡œ-ë°œìƒí•œ-ë¬¸ì œ"><a href="#ì¶”ê°€ë¡œ-ë°œìƒí•œ-ë¬¸ì œ" class="headerlink" title="ì¶”ê°€ë¡œ ë°œìƒí•œ ë¬¸ì œ"></a>ì¶”ê°€ë¡œ ë°œìƒí•œ ë¬¸ì œ</h1><ul><li>Kubeflow ë°°í¬ ì „ istio-system ì™€ knative-serving ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ì¡´ì¬í•˜ì—¬ ë°°í¬í•  ë•Œ ì—ëŸ¬ê°€ ë°œìƒ</li><li>í•´ê²° ë°©ì•ˆ<ul><li>ë°°í¬ ì „ istio-system / knative-serving ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚­ì œ í›„ ì¬ ë°°í¬</li></ul></li></ul><h1 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h1><ul><li><a href="https://github.com/kubeflow/kubeflow/issues/3859">https://github.com/kubeflow/kubeflow/issues/3859</a></li><li><a href="https://github.com/kubeflow/kubeflow/issues/4788">https://github.com/kubeflow/kubeflow/issues/4788</a></li><li><a href="https://github.com/kubeflow/kubeflow/issues/4718">https://github.com/kubeflow/kubeflow/issues/4718</a></li><li><a href="https://github.com/kubeflow/kubeflow/issues/3900">https://github.com/kubeflow/kubeflow/issues/3900</a></li><li><a href="https://stackoverflow.com/questions/54203646/kubernetes-how-to-increase-ephemeral-storage">https://stackoverflow.com/questions/54203646/kubernetes-how-to-increase-ephemeral-storage</a></li><li><a href="https://www.kangwoo.kr/2020/02/18/pcì—-kubeflow-ì„¤ì¹˜í•˜ê¸°-3ë¶€-kubeflow-ì„¤ì¹˜í•˜ê¸°/">https://www.kangwoo.kr/2020/02/18/pcì—-kubeflow-ì„¤ì¹˜í•˜ê¸°-3ë¶€-kubeflow-ì„¤ì¹˜í•˜ê¸°/</a></li></ul><hr><p>2020.03.30 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-kubeflow_error/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Docker private registry ì„¤ì •</title>
      <link>https://jx2lee.github.io/cloud-docker_registry/</link>
      <guid>https://jx2lee.github.io/cloud-docker_registry/</guid>
      <pubDate>Tue, 17 Mar 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;docker private registry ë¥¼ ìƒì„±í•˜ê³ , tar íŒŒì¼ë¡œ ë³€í™˜í•œ ì´ë¯¸ì§€ë¥¼ load ë° registry ì— push í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. ì‚¬ì´íŠ¸ì— ë‚˜ê°€ê²Œ ë˜ë©´ íì‡„ë§ì¸ ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì¸ë°, ì´ëŸ´ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ì„œ &lt;strong&gt;ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ë¥¼ ì½ì–´ë“¤ì—¬ docker image ë¥¼ tarë¡œ ë³€í™˜í•˜ê³  registry ì— push í•˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸&lt;/strong&gt;ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.03.30 : docker run ì‹œ mount ë°©ë²•(-v ì˜µì…˜) ë° docker image pull / push ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€&lt;/li&gt;
&lt;li&gt;2020.04.13 : docker run ì‹œ restart argument ì¶”ê°€&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>docker private registry ë¥¼ ìƒì„±í•˜ê³ , tar íŒŒì¼ë¡œ ë³€í™˜í•œ ì´ë¯¸ì§€ë¥¼ load ë° registry ì— push í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. ì‚¬ì´íŠ¸ì— ë‚˜ê°€ê²Œ ë˜ë©´ íì‡„ë§ì¸ ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì¸ë°, ì´ëŸ´ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ì„œ <strong>ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ë¥¼ ì½ì–´ë“¤ì—¬ docker image ë¥¼ tarë¡œ ë³€í™˜í•˜ê³  registry ì— push í•˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸</strong>ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.</p><p><strong>Update Note</strong></p><ul><li>2020.03.30 : docker run ì‹œ mount ë°©ë²•(-v ì˜µì…˜) ë° docker image pull / push ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€</li><li>2020.04.13 : docker run ì‹œ restart argument ì¶”ê°€</li></ul><a id="more"></a><h1 id="Private-registry-ìƒì„±"><a href="#Private-registry-ìƒì„±" class="headerlink" title="Private registry ìƒì„±"></a>Private registry ìƒì„±</h1><h2 id="registry-ì´ë¯¸ì§€ë¥¼-Pull-í•˜ê³ -container-ë¥¼-ê¸°ë™í•œë‹¤"><a href="#registry-ì´ë¯¸ì§€ë¥¼-Pull-í•˜ê³ -container-ë¥¼-ê¸°ë™í•œë‹¤" class="headerlink" title="registry ì´ë¯¸ì§€ë¥¼ Pull í•˜ê³  container ë¥¼ ê¸°ë™í•œë‹¤."></a>registry ì´ë¯¸ì§€ë¥¼ Pull í•˜ê³  container ë¥¼ ê¸°ë™í•œë‹¤.</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull registry</span><br><span class="line">docker run -dit --name bips-registry --restart=always -p 5000:5000 -v /data/registry:/var/lib/registry registry:latest</span><br></pre></td></tr></table></figure><blockquote><ul><li><em>-v í”Œë˜ê·¸ë¥¼ ì´ìš©í•´ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì €ì¥ì†Œë¥¼ /data/registry ë§ˆìš´íŠ¸ ì‹œì¼œ ì»¨í…Œì´ë„ˆë¥¼ ë™ì‘í•œë‹¤. ì´ëŠ” ì´ë¯¸ì§€ê°€ ë§ì•„ì§ˆ ê²½ìš° ìš©ëŸ‰ì´ í° ë””ë°”ì´ìŠ¤ì— ì§ì ‘ ì„¤ì •í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.</em></li><li><em><code>--restart=alyways</code> ì¸ìë¥¼ ì¶”ê°€í•˜ì—¬ ë„ì»¤ ë°ëª¬ ì¬ì‹œì‘ ì‹œ ê¸°ë™í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤.</em></li></ul></blockquote><h1 id="Image-push"><a href="#Image-push" class="headerlink" title="Image push"></a>Image push</h1><h2 id="tar-íŒŒì¼ë¡œ-ë¬¶ì€-ì´ë¯¸ì§€ë¥¼-docker-load-i-tar-name-ìœ¼ë¡œ-ì´ë¯¸ì§€ë¥¼-ìƒì„±í•˜ê³ -ì´ë¥¼-registry-ì—-push-í•œë‹¤"><a href="#tar-íŒŒì¼ë¡œ-ë¬¶ì€-ì´ë¯¸ì§€ë¥¼-docker-load-i-tar-name-ìœ¼ë¡œ-ì´ë¯¸ì§€ë¥¼-ìƒì„±í•˜ê³ -ì´ë¥¼-registry-ì—-push-í•œë‹¤" class="headerlink" title="tar íŒŒì¼ë¡œ ë¬¶ì€ ì´ë¯¸ì§€ë¥¼ docker load -i {tar_name} ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ registry ì— push í•œë‹¤."></a>tar íŒŒì¼ë¡œ ë¬¶ì€ ì´ë¯¸ì§€ë¥¼ <code>docker load -i &#123;tar_name&#125;</code> ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ registry ì— push í•œë‹¤.</h2><ul><li>ì›ë˜ ì´ë¯¸ì§€ : 192.168.17.131:5000/ubuntu_t6:2020303_v2</li><li>íƒœê·¸ ë³€ê²½ í›„ ì´ë¯¸ì§€ : 92.168.179.185:5000/ubuntu_t6:2020303_v2</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker tag 192.168.17.131:5000/ubuntu_t6:2020303_v2 192.168.179.185:5000/ubuntu_t6:2020303_v2</span><br><span class="line">docker push 192.168.179.185:5000/ubuntu_t6:2020303_v2</span><br></pre></td></tr></table></figure><h1 id="Image-í™•ì¸"><a href="#Image-í™•ì¸" class="headerlink" title="Image í™•ì¸"></a>Image í™•ì¸</h1><h2 id="registry-ì—-í•´ë‹¹-ì´ë¯¸ì§€ê°€-ì¡´ì¬í•˜ëŠ”ì§€-curl-ëª…ë ¹ì–´ë¡œ-í™•ì¸í•œë‹¤"><a href="#registry-ì—-í•´ë‹¹-ì´ë¯¸ì§€ê°€-ì¡´ì¬í•˜ëŠ”ì§€-curl-ëª…ë ¹ì–´ë¡œ-í™•ì¸í•œë‹¤" class="headerlink" title="registry ì— í•´ë‹¹ ì´ë¯¸ì§€ê°€ ì¡´ì¬í•˜ëŠ”ì§€ curl ëª…ë ¹ì–´ë¡œ í™•ì¸í•œë‹¤."></a>registry ì— í•´ë‹¹ ì´ë¯¸ì§€ê°€ ì¡´ì¬í•˜ëŠ”ì§€ <code>curl</code> ëª…ë ¹ì–´ë¡œ í™•ì¸í•œë‹¤.</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># curl -X GET 192.168.179.185:5000/v2/_catalog</span></span><br><span class="line">&#123;<span class="string">&quot;repositories&quot;</span>:[<span class="string">&quot;dfa-module&quot;</span>,<span class="string">&quot;hd8.3_rel&quot;</span>,<span class="string">&quot;hl_r172919&quot;</span>,<span class="string">&quot;ubuntu_t6&quot;</span>]&#125;</span><br><span class="line">root@k8s-master:~<span class="comment"># curl -X GET 192.168.179.185:5000/v2/ubuntu_t6/tags/list</span></span><br><span class="line">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;ubuntu_t6&quot;</span>,<span class="string">&quot;tags&quot;</span>:[<span class="string">&quot;2020303_v2&quot;</span>]&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ì˜~ ë“±ë¡ë˜ì—ˆë‹¤!</p></blockquote><h1 id="Docker-Image-Pull-amp-Push-ìŠ¤í¬ë¦½íŠ¸"><a href="#Docker-Image-Pull-amp-Push-ìŠ¤í¬ë¦½íŠ¸" class="headerlink" title="Docker Image Pull &amp; Push ìŠ¤í¬ë¦½íŠ¸"></a>Docker Image Pull &amp; Push ìŠ¤í¬ë¦½íŠ¸</h1><p>íì‡„ë§ í™˜ê²½ì—ì„œ docker hub ì˜ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ëŠ” ìƒí™©ì´ ë°œìƒí•˜ì˜€ë‹¤. ì´ë¥¼ ìœ„í•´ íì‡„ë§ì´ ì•„ë‹Œ í™˜ê²½ì—ì„œ ì´ë¯¸ì§€ë¥¼ pull í•˜ê³ , ì´ë¥¼ íì‡„ë§ í™˜ê²½ì—ì„œ íŠ¹ì • registry (private docker registry) ì— push í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤.</p><ul><li><p>ê¸°ëŠ¥</p><ul><li><p>pull : docker hub ì˜ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™€ <code>tars</code> ë””ë ‰í† ë¦¬ì— ì €ì¥í•œë‹¤.</p></li><li><p>push : <code>tars</code> ë””ë ‰í† ë¦¬ì— tar ì´ë¯¸ì§€ë¥¼ íŠ¹ì • registry ì— push í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â¯ ./imageLoader</span><br><span class="line">usage:</span><br><span class="line">  ./imageLoader pull</span><br><span class="line">  ./imageLoader push &#123;registry_endpoint&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>ì´ë¯¸ì§€:íƒœê·¸ ë¡œ ì´ë£¨ì–´ì§„ <code>.imageList</code> ê°€ ì„ í–‰ìœ¼ë¡œ ì¤€ë¹„í•´ì•¼ í•œë‹¤. ë˜í•œ, <code>.imageListHash</code> ëŠ” íƒœê·¸ëª…ì´ ì•„ë‹Œ í•´ì‰¬ê°’ìœ¼ë¡œ ë˜ì–´ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ë°›ì„ ë•Œ ì‚¬ìš©í•œë‹¤. ë§Œì•½ ë‘˜ ì¤‘ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ê°€ ìˆë‹¤ë©´ ì„ íƒì— ë”°ë¼ ì‚­ì œí•˜ê³  í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ì— ì£¼ì„ì„ ì„¤ì •í•œë‹¤.</p><ul><li>ì²« ë²ˆì§¸ pull/push í•˜ëŠ” ë¶€ë¶„ì´ <code>ì´ë¯¸ì§€:íƒœê·¸</code>, ë‘ ë²ˆì§¸ê°€ <code>ì´ë¯¸ì§€@í•´ì‰¬</code></li><li>ë³¸ì¸ì€ Kubeflow ë¥¼ íì‡„ë§ í™˜ê²½ì—ì„œ ì„¤ì¹˜í•  ì´ìŠˆê°€ ìƒê²¨ í•„ìš”í•œ ì´ë¯¸ì§€ ë¦¬ìŠ¤íŠ¸ë¥¼ .imageList / .imageListHash ì— ì‘ì„±í•˜ì˜€ë‹¤.</li><li>ì°¸ê³ ë¡œ Kubeflow íì‡„ë§ ì„¤ì¹˜ ì‹œ ì´ë¯¸ì§€ ë²„ì ¼ ë•Œë¬¸ì— ì• ë¥¼ ë§ì´ ë¨¹ì—ˆë‹¤..</li></ul></li><li><p><a href="https://github.com/jx2lee/kubeflow-image-loader">github</a> ì— ì˜¬ë ¤ë‘ì—ˆë‹¤. í—ˆì ‘í•œ ìŠ¤í¬ë¦½íŠ¸ ì´ì§€ë§Œ, í˜„ ì§ì¥ì—ì„œëŠ” í¸í•˜ê²Œ(?) ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„ ê³µìœ í•œë‹¤. <del>ë§ì€ ë³„ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</del></p></li></ul><hr><p>2020.03.18 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-docker_registry/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Orphaned pod found ì—ëŸ¬ í•´ê²°</title>
      <link>https://jx2lee.github.io/cloud_orphaned_pod_error/</link>
      <guid>https://jx2lee.github.io/cloud_orphaned_pod_error/</guid>
      <pubDate>Wed, 11 Mar 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” kubelet log ì— Orphaned pod found , but volume subpaths are still present on disk ë¡œê·¸ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” kubelet log ì— Orphaned pod found , but volume subpaths are still present on disk ë¡œê·¸ê°€ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.</p><a id="more"></a><h1 id="Kubelet-log"><a href="#Kubelet-log" class="headerlink" title="Kubelet log"></a>Kubelet log</h1><p><code>journalctl -f | grep kubelet</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mar 12 01:31:04 k8s-node2 kubelet[19210]: E0312 01:31:04.964272   19210 kubelet_volumes.go:154] Orphaned pod <span class="string">&quot;1a2f73f1-77a2-4053-975f-57a89fdba1db&quot;</span> found, but volume subpaths are still present on disk : There were a total of 1 errors similar to this. Turn up verbosity to see them.</span><br></pre></td></tr></table></figure><h1 id="ë¬¸ì œ-ì›ì¸"><a href="#ë¬¸ì œ-ì›ì¸" class="headerlink" title="ë¬¸ì œ ì›ì¸"></a>ë¬¸ì œ ì›ì¸</h1><p>í•´ë‹¹ ë…¸ë“œë¥¼ ì¬ë¶€íŒ…í–ˆì„ ë•Œ ê¸°ì¡´ì— ë‚¨ì•„ìˆë˜ íŒŒë“œ ì •ë³´ë¡œ ì¸í•˜ì—¬ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒ ê°™ë‹¤. ì‚¬ë¼ì§„ íŒŒë“œì˜ ì •ë³´ì— volume subpath ë„ ì‚­ì œë˜ì§€ ì•Šì€ ê²ƒì´ë‹¤.</p><h1 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h1><p>ì˜ì™¸ë¡œ ê°„ë‹¨í•˜ë‹¤. í•´ë‹¹ pod ì •ë³´ë¥¼ ì‚­ì œí•˜ë©´ ë˜ëŠ”ë°, ë³¸ì¸ í™˜ê²½ìœ¼ë¡œëŠ” <code>/var/lib/kubelet/pods/</code> ì— íŒŒë“œ UUID í´ë”ë¥¼ ì‚­ì œí•˜ë©´ ëœë‹¤. ì´í›„ kubelet ì„ ì¬ê¸°ë™í•˜ë©´ ìœ„ ë¡œê·¸ê°€ ì‚­ì œë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><h1 id="ì´ì™¸-ë¬¸ì œë“¤"><a href="#ì´ì™¸-ë¬¸ì œë“¤" class="headerlink" title="ì´ì™¸ ë¬¸ì œë“¤"></a>ì´ì™¸ ë¬¸ì œë“¤</h1><p>ì˜¤ëŠ˜ ìˆì—ˆë˜ ë‹¤ì–‘í•œ ì—ëŸ¬ë“¤ì„ í•œ ë²ˆ ì •ë¦¬í–ˆë‹¤ (ë„¤íŠ¸ì›Œí¬ ë¬¸ì œë¡œ ì¸í•´ file stroage ë¥¼ ë°°í¬í•˜ëŠ” ë¬¸ì œëŠ” ë” íŒŒì•…í•´ë³¸ í›„ í¬ìŠ¤íŒ… í•  ì˜ˆì •ì´ë‹¤).</p><h2 id="kubelet-ë¡œê·¸ì—-Unable-to-read-config-path-â€œ-etc-kubernetes-manifestsâ€-path-does-not-exist-ignoring-ë©”ì„¸ì§€-ë°œìƒ"><a href="#kubelet-ë¡œê·¸ì—-Unable-to-read-config-path-â€œ-etc-kubernetes-manifestsâ€-path-does-not-exist-ignoring-ë©”ì„¸ì§€-ë°œìƒ" class="headerlink" title="kubelet ë¡œê·¸ì— Unable to read config path â€œ/etc/kubernetes/manifestsâ€: path does not exist, ignoring ë©”ì„¸ì§€ ë°œìƒ"></a>kubelet ë¡œê·¸ì— Unable to read config path â€œ/etc/kubernetes/manifestsâ€: path does not exist, ignoring ë©”ì„¸ì§€ ë°œìƒ</h2><ul><li><code>/etc/kubernets/path</code> ì— <code>manifests</code> í´ë”ë¥¼ ìƒì„±í•˜ì—¬ í•´ê²°</li></ul><h2 id="ë…¸ë“œì—-node-kubernetes-io-unreachable-NoSchedule-Taint-ê°€-ê±¸ë ¤ìˆëŠ”-ê²½ìš°"><a href="#ë…¸ë“œì—-node-kubernetes-io-unreachable-NoSchedule-Taint-ê°€-ê±¸ë ¤ìˆëŠ”-ê²½ìš°" class="headerlink" title="ë…¸ë“œì— node.kubernetes.io/unreachable:NoSchedule Taint ê°€ ê±¸ë ¤ìˆëŠ” ê²½ìš°"></a>ë…¸ë“œì— node.kubernetes.io/unreachable:NoSchedule Taint ê°€ ê±¸ë ¤ìˆëŠ” ê²½ìš°</h2><ul><li>í•´ë‹¹ ë…¸ë“œê°€ Not Ready ì¸ ìƒíƒœ</li><li>ì´ëŸ° ê²½ìš°ì—ëŠ” ëŒ€ê²Œ ë…¸ë“œê°€ ì¬ë¶€íŒ… í›„ ìŠ¤ì™‘ ë©”ëª¨ë¦¬ê°€ ì¼œì ¸ ìˆì„ í™•ë¥ ì´ ë†’ë‹¤. <code>free</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ í™•ì¸í•œ ë‹¤ìŒ swap off ì´í›„ kubelet ì„ ì¬ê¸°ë™ í•œë‹¤.</li></ul><hr><p>2020.03.12 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud_orphaned_pod_error/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] R docker ì»¨í…Œì´ë„ˆì—ì„œ Hadoop HDFS ì—°ë™</title>
      <link>https://jx2lee.github.io/cloud-r_hadoop_connection/</link>
      <guid>https://jx2lee.github.io/cloud-r_hadoop_connection/</guid>
      <pubDate>Wed, 19 Feb 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” R Container ì—ì„œ Hadoop HDFS ë°ì´í„°ë¥¼ ì—°ë™í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë³¸ í¬ìŠ¤íŠ¸ì—ì„œëŠ” R Container ì—ì„œ Hadoop HDFS ë°ì´í„°ë¥¼ ì—°ë™í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><a id="more"></a><h1 id="R-Container-ê¸°ë™"><a href="#R-Container-ê¸°ë™" class="headerlink" title="R Container ê¸°ë™"></a>R Container ê¸°ë™</h1><h2 id="R-container-image-ë¥¼-ì´ìš©í•´-ì»¨í…Œì´ë„ˆë¥¼-ê¸°ë™í•œë‹¤"><a href="#R-container-image-ë¥¼-ì´ìš©í•´-ì»¨í…Œì´ë„ˆë¥¼-ê¸°ë™í•œë‹¤" class="headerlink" title="R container image ë¥¼ ì´ìš©í•´ ì»¨í…Œì´ë„ˆë¥¼ ê¸°ë™í•œë‹¤."></a>R container image ë¥¼ ì´ìš©í•´ ì»¨í…Œì´ë„ˆë¥¼ ê¸°ë™í•œë‹¤.</h2><ul><li><p><strong>docker run -d -p 8787:8787 -e PASSWORD=tmaxtmax rocker_with_java:latest</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># docker rename competent_dubinsky r-hadoop-test</span></span><br><span class="line">root@k8s-master:/app<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">aa91a42054dc        rocker_with_java:latest   <span class="string">&quot;/init&quot;</span>                  23 minutes ago      Up 23 minutes       0.0.0.0:8787-&gt;8787/tcp   r-hadoop-test</span><br></pre></td></tr></table></figure></li><li><p>http://{NODE_IP}:8787 ë¡œ ì ‘ì†í•˜ì—¬ rstudio/tmaxtmax ì…ë ¥í•˜ì—¬ Rstduio í™”ë©´ìœ¼ë¡œ ì´ë™í•œë‹¤.</p><p><img src="/image/rstudio-login.png" alt=""></p></li></ul><blockquote><p><em>rocker_with_java image ëŠ” rocker-rstudio ì´ë¯¸ì§€ ë³´ë‹¤ ìƒìœ„ ì´ë¯¸ì§€ì¸ rocker/tidyverse ë¥¼ ì‚¬ìš©í•œ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë‹¤. <a href="https://github.com/gadenbuie/docker-tidyverse-rjava/blob/master/Dockerfile">ì°¸ê³ </a></em></p></blockquote><h1 id="R-Container-í™˜ê²½ì„¤ì •"><a href="#R-Container-í™˜ê²½ì„¤ì •" class="headerlink" title="R Container í™˜ê²½ì„¤ì •"></a>R Container í™˜ê²½ì„¤ì •</h1><h2 id="Hadoop-ì—°ë™ì„-ìœ„í•œ-Hadoop-client-ì™€-java-ë¥¼-ì„¤ì¹˜í•œë‹¤"><a href="#Hadoop-ì—°ë™ì„-ìœ„í•œ-Hadoop-client-ì™€-java-ë¥¼-ì„¤ì¹˜í•œë‹¤" class="headerlink" title="Hadoop ì—°ë™ì„ ìœ„í•œ Hadoop client ì™€ java ë¥¼ ì„¤ì¹˜í•œë‹¤."></a>Hadoop ì—°ë™ì„ ìœ„í•œ Hadoop client ì™€ java ë¥¼ ì„¤ì¹˜í•œë‹¤.</h2><ul><li><p>ë¡œì»¬ì— ìˆëŠ” hadoop client ì™€ java tar íŒŒì¼ë“¤ì„ R container ë¡œ ì˜®ê¸´ë‹¤.</p><ul><li><strong>docker cp hadoop-client.tar r-hadoop-test:/root</strong></li><li><strong>docker cp jdk.tar r-hadoop-test:/root</strong></li></ul></li><li><p>R containerë¡œ ì ‘ì†í•˜ì—¬ hadoop client ë¥¼ ì„¤ì¹˜í•œë‹¤</p><ul><li><strong>docker exec -it r-hadoop-test /bin/bash</strong> ëª…ë ¹ì–´ ì´í›„ hadoop client ì„¤ì¹˜</li><li>ì„¤ì¹˜ í™•ì¸</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rstudio@4935816e695d:~$ java -version</span><br><span class="line">java version <span class="string">&quot;1.8.0_241&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_241-b07)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.241-b07, mixed mode)</span><br><span class="line">rstudio@aa91a42054dc:~$ hdfs version</span><br><span class="line">Hadoop 2.10.0</span><br><span class="line">Subversion ssh://git.corp.linkedin.com:29418/hadoop/hadoop.git -r e2f1f118e465e787d8567dfa6e2f3b72a0eb9194</span><br><span class="line">Compiled by jhung on 2019-10-22T19:10Z</span><br><span class="line">Compiled with protoc 2.5.0</span><br><span class="line">From <span class="built_in">source</span> with checksum 7b2d8877c5ce8c9a2cca5c7e81aa4026</span><br><span class="line">This <span class="built_in">command</span> was run using /app/hadoop/2.10.0/share/hadoop/common/hadoop-common-2.10.0.jar</span><br></pre></td></tr></table></figure><h1 id="Hadoop-ì—°ë™ì„-ìœ„í•œ-R-package-ì„¤ì¹˜"><a href="#Hadoop-ì—°ë™ì„-ìœ„í•œ-R-package-ì„¤ì¹˜" class="headerlink" title="Hadoop ì—°ë™ì„ ìœ„í•œ R package ì„¤ì¹˜"></a>Hadoop ì—°ë™ì„ ìœ„í•œ R package ì„¤ì¹˜</h1><p>Hadoop ì—°ë™ì„ ìœ„í•œ R íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤.</p><ul><li><p>R Studio ì—ì„œ ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì´ìš©í•´ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•œë‹¤. HADOOP_CMDì™€ JAVA_HOME ì€ ê° í™˜ê²½ì— ë§ëŠ” PATH ë¡œ ë³€ê²½í•˜ì—¬ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">library(devtools)</span><br><span class="line">library(rJava)</span><br><span class="line">install_github(<span class="built_in">c</span>(<span class="string">&quot;RevolutionAnalytics/rmr2/pkg&quot;</span>, <span class="string">&quot;RevolutionAnalytics/plyrmr2/pkg&quot;</span>))</span><br><span class="line"></span><br><span class="line">Sys.setenv(HADOOP_CMD=<span class="string">&quot;/app/hadoop/2.10.0/bin/hadoop&quot;</span>)</span><br><span class="line">Sys.setenv(JAVA_HOME=<span class="string">&quot;/usr/lib/jvm/java-8-openjdk-amd64&quot;</span>)</span><br><span class="line"></span><br><span class="line">install_github(<span class="string">&quot;RevolutionAnalytics/rhdfs/pkg&quot;</span>)</span><br></pre></td></tr></table></figure></li><li><p>Packeges ê´€ë¦¬ í™”ë©´ì— ì„¤ì¹˜ê°€ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p></li></ul><h1 id="R-Hadoop-ì—°ë™"><a href="#R-Hadoop-ì—°ë™" class="headerlink" title="R - Hadoop ì—°ë™"></a>R - Hadoop ì—°ë™</h1><p>R í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê³  HDFS ì— ì ‘ê·¼í•˜ì—¬ ëª©ë¡ê³¼ ë°ì´í„° ì¼ë¶€ë¥¼ í™•ì¸í•œë‹¤.</p><ul><li><p><code>rhdfs / rmr2</code> íŒ¨í‚¤ì§€ë¥¼ í™œì„±í™” ì‹œí‚¤ê³  hdfs ê°ì²´ë¥¼ ì´ˆê¸°í™”í•œë‹¤.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">library(rmr2)</span><br><span class="line">library(rhdfs)</span><br><span class="line"></span><br><span class="line">hdfs.init()</span><br></pre></td></tr></table></figure></li><li><p><strong>hdfs.ls / hdfs.cat</strong> í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë””ë ‰í† ë¦¬ ëª©ë¡ê³¼ ë°ì´í„° ì¼ë¶€ë¥¼ í™•ì¸í•œë‹¤.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hdfs.ls(<span class="string">&quot;/user/spark&quot;</span>)</span><br><span class="line">hdfs.cat(<span class="string">&quot;/user/spark/test.csv&quot;</span>)</span><br><span class="line"></span><br><span class="line">&gt; hdfs.ls(<span class="string">&quot;/user/spark&quot;</span>)</span><br><span class="line">  permission   owner      group   size          modtime                      file</span><br><span class="line">1 drwxr-xr-x   spark supergroup      <span class="number">0</span> <span class="number">2020</span>-<span class="number">02</span>-<span class="number">19</span> <span class="number">05</span>:<span class="number">02</span> /user/spark/.sparkStaging</span><br><span class="line">2 -rw-r--r-- rstudio supergroup <span class="number">970491</span> <span class="number">2020</span>-<span class="number">02</span>-<span class="number">19</span> <span class="number">09</span>:<span class="number">52</span>      /user/spark/test.csv</span><br></pre></td></tr></table></figure></li></ul><h1 id="ì°¸ê³ -R-Hadoop-ì—°ë™-REST-API-ë°©ì‹"><a href="#ì°¸ê³ -R-Hadoop-ì—°ë™-REST-API-ë°©ì‹" class="headerlink" title="(ì°¸ê³ ) R - Hadoop ì—°ë™ (REST API ë°©ì‹)"></a>(ì°¸ê³ ) R - Hadoop ì—°ë™ (REST API ë°©ì‹)</h1><p>ì´ì „ì˜ ë°©ë²•ì€ R container ì— hadoop client ë¥¼ ì´ìš©í•´ ì—°ë™í•˜ì˜€ë‹¤. ë˜ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œì¨ hadoop ì—ì„œ ì œê³µí•˜ëŠ” REST API ë¥¼ ì´ìš©í•´ Rê³¼ ì—°ë™í•˜ëŠ” ë°©ë²•ì´ë‹¤.</p><ul><li><p>R package <strong>httr</strong> ì„ ì„¤ì¹˜í•œë‹¤.</p><p><code>install.packages(&quot;httr&quot;)</code></p></li><li><p>hadoop URI ë³€ìˆ˜ë¥¼ ìƒì„±í•œë‹¤. í˜•íƒœëŠ” <code>http://namenodedns:port/webhdfs/v1/user/username/myfile.csv?user.name=MYUSERNAME&amp;op=OPEN</code> ìœ¼ë¡œ hadoop ì„¤ì •ì— ë§ê²Œë” ë³€ê²½í•œë‹¤.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hdfsUri=<span class="string">&quot;http://192.168.179.178:50070/webhdfs/v1&quot;</span></span><br><span class="line">fileUri=<span class="string">&quot;/user/spark/test.csv&quot;</span></span><br><span class="line">readParameter=<span class="string">&quot;?user.name=&quot;</span></span><br><span class="line">usernameParameter=<span class="string">&quot;spark&amp;&quot;</span></span><br><span class="line">optionnalParameters=<span class="string">&quot;op=OPEN&quot;</span></span><br><span class="line">uri &lt;- paste0(hdfsUri, fileUri, readParameter, usernameParameter, optionnalParameters)</span><br></pre></td></tr></table></figure></li><li><p>URI í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ìƒë‹¨ ë¶€ë¶„ <em>(head)</em> ì„ í™•ì¸í•œë‹¤.</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data = read.csv(uri)</span><br><span class="line">head(data))</span><br></pre></td></tr></table></figure></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://github.com/RevolutionAnalytics/RHadoop/wiki/Installing-RHadoop-on-RHEL">https://github.com/RevolutionAnalytics/RHadoop/wiki/Installing-RHadoop-on-RHEL</a></li><li><a href="https://niceguy1575.tistory.com/40">https://niceguy1575.tistory.com/40</a></li><li><a href="https://hub.docker.com/r/rocker/tidyverse">https://hub.docker.com/r/rocker/tidyverse</a></li><li><a href="https://github.com/gadenbuie/docker-tidyverse-rjava/blob/master/Dockerfile">https://github.com/gadenbuie/docker-tidyverse-rjava/blob/master/Dockerfile</a></li><li><a href="https://wikidocs.net/52630">https://wikidocs.net/52630</a></li></ul><hr><p>2020.02.20 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-r_hadoop_connection/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Elasticsearch ë°°í¬ on K8s</title>
      <link>https://jx2lee.github.io/cloud-deploy_es/</link>
      <guid>https://jx2lee.github.io/cloud-deploy_es/</guid>
      <pubDate>Thu, 06 Feb 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;toy projectë¥¼ ìœ„í•´ esë¥¼ êµ¬ì¶•í•˜ë ¤ë˜ ì°°ë‚˜, ì‚¬ë‚´ì— K8s clusterë¥¼ êµ¬ì¶•í•˜ì˜€ë‹¤. í´ë¼ìš°ë“œ ê³µë¶€ ê²¸ Elasticsearchì™€ kibanaë¥¼ K8sì— ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>toy projectë¥¼ ìœ„í•´ esë¥¼ êµ¬ì¶•í•˜ë ¤ë˜ ì°°ë‚˜, ì‚¬ë‚´ì— K8s clusterë¥¼ êµ¬ì¶•í•˜ì˜€ë‹¤. í´ë¼ìš°ë“œ ê³µë¶€ ê²¸ Elasticsearchì™€ kibanaë¥¼ K8sì— ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤</p><a id="more"></a><h1 id="Elasticsearch-ë°°í¬í•˜ê¸°"><a href="#Elasticsearch-ë°°í¬í•˜ê¸°" class="headerlink" title="Elasticsearch ë°°í¬í•˜ê¸°"></a>Elasticsearch ë°°í¬í•˜ê¸°</h1><h2 id="3-nodeë¡œ-êµ¬ì„±ëœ-elasticsearch-í´ëŸ¬ìŠ¤í„°ë¥¼-ë°°í¬í•œë‹¤-í•œ-ê°œì˜-ë…¸ë“œë¡œë§Œ-êµ¬ì„±ë -ê²½ìš°-ì¥ì• ê°€-ë°œìƒí•˜ë©´-ê³ ê°€ìš©ì„±ì„-í™•ë³´í• -ìˆ˜-ì—†ìœ¼ë¯€ë¡œ-ì´ì™€-ê°™ì´-3ê°œ-ë…¸ë“œë¡œ-êµ¬ì„±ëœ-í´ëŸ¬ìŠ¤íŠ¸ë¥¼-ë°°í¬í•¨ìœ¼ë¡œì¨-split-brainì„-í”¼í•˜ê³ ì-í•œë‹¤"><a href="#3-nodeë¡œ-êµ¬ì„±ëœ-elasticsearch-í´ëŸ¬ìŠ¤í„°ë¥¼-ë°°í¬í•œë‹¤-í•œ-ê°œì˜-ë…¸ë“œë¡œë§Œ-êµ¬ì„±ë -ê²½ìš°-ì¥ì• ê°€-ë°œìƒí•˜ë©´-ê³ ê°€ìš©ì„±ì„-í™•ë³´í• -ìˆ˜-ì—†ìœ¼ë¯€ë¡œ-ì´ì™€-ê°™ì´-3ê°œ-ë…¸ë“œë¡œ-êµ¬ì„±ëœ-í´ëŸ¬ìŠ¤íŠ¸ë¥¼-ë°°í¬í•¨ìœ¼ë¡œì¨-split-brainì„-í”¼í•˜ê³ ì-í•œë‹¤" class="headerlink" title="3-nodeë¡œ êµ¬ì„±ëœ elasticsearch í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•œë‹¤. í•œ ê°œì˜ ë…¸ë“œë¡œë§Œ êµ¬ì„±ë  ê²½ìš° ì¥ì• ê°€ ë°œìƒí•˜ë©´ ê³ ê°€ìš©ì„±ì„ í™•ë³´í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì´ì™€ ê°™ì´ 3ê°œ ë…¸ë“œë¡œ êµ¬ì„±ëœ í´ëŸ¬ìŠ¤íŠ¸ë¥¼ ë°°í¬í•¨ìœ¼ë¡œì¨ split-brainì„ í”¼í•˜ê³ ì í•œë‹¤."></a>3-nodeë¡œ êµ¬ì„±ëœ elasticsearch í´ëŸ¬ìŠ¤í„°ë¥¼ ë°°í¬í•œë‹¤. í•œ ê°œì˜ ë…¸ë“œë¡œë§Œ êµ¬ì„±ë  ê²½ìš° ì¥ì• ê°€ ë°œìƒí•˜ë©´ ê³ ê°€ìš©ì„±ì„ í™•ë³´í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì´ì™€ ê°™ì´ 3ê°œ ë…¸ë“œë¡œ êµ¬ì„±ëœ í´ëŸ¬ìŠ¤íŠ¸ë¥¼ ë°°í¬í•¨ìœ¼ë¡œì¨ <strong>split-brain</strong>ì„ í”¼í•˜ê³ ì í•œë‹¤.</h2><h2 id="Namespace-ìƒì„±"><a href="#Namespace-ìƒì„±" class="headerlink" title="Namespace ìƒì„±"></a>Namespace ìƒì„±</h2><p><em>elastic_ns.yaml</em>ì„ ì‘ì„±í•˜ê³  namespaceë¥¼ ìƒì„±í•œë‹¤</p><p><code>kubectl create -f elastic_ns.yaml</code></p><p><em>elastic_ns.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">elasticsearch</span></span><br></pre></td></tr></table></figure><h2 id="Service-ìƒì„±"><a href="#Service-ìƒì„±" class="headerlink" title="Service ìƒì„±"></a>Service ìƒì„±</h2><p><em>elastic_svc.yaml</em>ì„ ì‘ì„±í•˜ê³  serviceë¥¼ ìƒì„±í•œë‹¤</p><p><code>kubectl create -f  elastic_svc.yaml</code></p><p><em>elastic_svc.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">elastic-svc</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">elastic</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">elasticsearch</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">elasticsearch</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">9200</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">rest</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">9300</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">inter-node</span></span><br></pre></td></tr></table></figure><ul><li><p><code>kubectl get service -n &#123;namespace-name&#125;</code>ìœ¼ë¡œ ì„œë¹„ìŠ¤ ìƒì„±ì„ í™•ì¸í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~/jlee/elastic<span class="comment"># kg svc -n elastic</span></span><br><span class="line">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE</span><br><span class="line">elastic-svc NodePort 10.96.42.114 &lt;none&gt; 9200:30117/TCP,9300:30395/TCP 56m</span><br></pre></td></tr></table></figure></li></ul><div class="note ">            <p><em>ê¸°ì¡´ ì‚¬ì´íŠ¸ì—ì„œ ì†Œê°œí•œ serviceì™€ëŠ” ì¡°ê¸ˆ ë‹¤ë¥´ê²Œ ì‘ì„±í•˜ì˜€ë‹¤. í´ëŸ¬ìŠ¤í„°ì— ë°°ë³´ëœ es nodeì— ì ‘ì†í•˜ê¸° ìœ„í•´ì„œëŠ” serviceì˜ íƒ€ì…ì„ NodePortë¡œ ì„¤ì •í•˜ì˜€ë‹¤. NodePortë¡œ ì„¤ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì´í›„ì— curl í•˜ëŠ” ëª…ë ¹ì´ connected refused ë  ê²ƒì´ë‹¤, K8s Service ì •ë¦¬ê°€ í•„ìš”!</em></p>          </div><h2 id="StatefulSet-ìƒì„±"><a href="#StatefulSet-ìƒì„±" class="headerlink" title="StatefulSet ìƒì„±"></a>StatefulSet ìƒì„±</h2><p><em>elastic_statefulset.yaml</em>ì„ ì‘ì„±í•˜ê³  StatefulSetì„ ìƒì„±í•œë‹¤</p><div class="note ">            <p><em>StatefulSetì´ë€, ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆëŠ” Podë“¤ì„ ê´€ë¦¬í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ìˆœì„œë¥¼ ì§€ì •í•˜ì—¬ Podë¥¼ ì‹¤í–‰í•˜ê³  volumeì„ ì§€ì •í•˜ì—¬ Podê°€ ë‚´ë ¤ê°€ë„ ì •ë³´ë¥¼ ìƒì§€ ì•Šê²Œ í•œë‹¤</em></p>          </div><p><code>kubectl create -f elastic_statefulset.yaml</code></p><p><em>elastic_statefulset.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">StatefulSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">es-cluster</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">elastic</span> <span class="comment"># namepsace name for elasticsearch</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceName:</span> <span class="string">elasticsearch</span> <span class="comment"># service name for elasticsearch</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">elasticsearch</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">elasticsearch</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">elasticsearch</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.elastic.co/elasticsearch/elasticsearch:7.5.2</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">            <span class="attr">limits:</span></span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">1000m</span></span><br><span class="line">            <span class="attr">requests:</span></span><br><span class="line">              <span class="attr">cpu:</span> <span class="string">100m</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">9200</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">rest</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">9300</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">inter-node</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/usr/share/elasticsearch/data</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cluster.name</span></span><br><span class="line">            <span class="attr">value:</span> <span class="string">k8s-elastic</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">node.name</span></span><br><span class="line">            <span class="attr">valueFrom:</span></span><br><span class="line">              <span class="attr">fieldRef:</span></span><br><span class="line">                <span class="attr">fieldPath:</span> <span class="string">metadata.name</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">discovery.seed_hosts</span></span><br><span class="line">            <span class="attr">value:</span> <span class="string">&quot;es-cluster-0.elasticsearch,es-cluster-1.elasticsearch,es-cluster-2.elasticsearch&quot;</span> <span class="comment"># hostname for each container</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cluster.initial_master_nodes</span></span><br><span class="line">            <span class="attr">value:</span> <span class="string">&quot;es-cluster-0,es-cluster-1,es-cluster-2&quot;</span> <span class="comment"># node name in es-cluster</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ES_JAVA_OPTS</span></span><br><span class="line">            <span class="attr">value:</span> <span class="string">&quot;-Xms512m -Xmx512m&quot;</span></span><br><span class="line">      <span class="attr">initContainers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">fix-permissions</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">busybox</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;chown -R 1000:1000 /usr/share/elasticsearch/data&quot;</span>]</span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/usr/share/elasticsearch/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">increase-vm-max-map</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">busybox</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;sysctl&quot;</span>, <span class="string">&quot;-w&quot;</span>, <span class="string">&quot;vm.max_map_count=262144&quot;</span>]</span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">increase-fd-ulimit</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">busybox</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;ulimit -n 65536&quot;</span>]</span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">privileged:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">volumeClaimTemplates:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">data</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">elasticsearch</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">accessModes:</span> [ <span class="string">&quot;ReadWriteOnce&quot;</span> ]</span><br><span class="line">      <span class="attr">storageClassName:</span> <span class="string">rook-ceph-block</span> <span class="comment"># your storageclass</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">requests:</span></span><br><span class="line">          <span class="attr">storage:</span> <span class="string">10Gi</span></span><br></pre></td></tr></table></figure><ul><li><p><code>kubectl get pods -n elastic</code>ìœ¼ë¡œ ìƒì„±í•œ íŒŒë“œë¥¼ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~/jlee/elastic<span class="comment"># kgpo -n elastic</span></span><br><span class="line">NAME READY STATUS RESTARTS AGE</span><br><span class="line">es-cluster-0 1/1 Running 0 159m</span><br><span class="line">es-cluster-1 1/1 Running 0 158m</span><br><span class="line">es-cluster-2 1/1 Running 0 158m</span><br></pre></td></tr></table></figure></li></ul><h2 id="Check-Status"><a href="#Check-Status" class="headerlink" title="Check Status"></a>Check Status</h2><p>ì •ìƒì ìœ¼ë¡œ ES ë…¸ë“œê°€ ë°°í¬ë˜ì—ˆëŠ”ì§€ <code>kubectl get svc -n elastic</code>ì„ í†µí•´ í™•ì¸ëœ í¬íŠ¸ë¡œ <em>(9200ì— í¬íŠ¸í¬ì›Œë”© ëœ í¬íŠ¸ í™•ì¸)</em> curl ëª…ë ¹ì„ ìˆ˜í–‰í•œë‹¤.</p><p><code>curl http://&#123;ip&#125;:&#123;port&#125;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~/jlee/elastic<span class="comment"># curl http://192.168.179.172:30117</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span> : <span class="string">&quot;es-cluster-2&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;k8s-elastic&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;GqGwbyKYSfGZoEcqFumVzw&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span> : &#123;</span><br><span class="line">    <span class="string">&quot;number&quot;</span> : <span class="string">&quot;7.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_flavor&quot;</span> : <span class="string">&quot;default&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_type&quot;</span> : <span class="string">&quot;docker&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_hash&quot;</span> : <span class="string">&quot;508c38a&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_date&quot;</span> : <span class="string">&quot;2019-06-20T15:54:18.811730Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_snapshot&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;lucene_version&quot;</span> : <span class="string">&quot;8.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_wire_compatibility_version&quot;</span> : <span class="string">&quot;6.8.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_index_compatibility_version&quot;</span> : <span class="string">&quot;6.0.0-beta1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;tagline&quot;</span> : <span class="string">&quot;You Know, for Search&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Kibana-ë°°í¬í•˜ê¸°"><a href="#Kibana-ë°°í¬í•˜ê¸°" class="headerlink" title="Kibana ë°°í¬í•˜ê¸°"></a>Kibana ë°°í¬í•˜ê¸°</h1><h2 id="Kibana-ë°°í¬ì—-ê²½ìš°-Serviceì™€-Deploymentê°€-ëª…ì‹œëœ-yaml-íŒŒì¼ì„-ìƒì„±í•˜ê³ -ë°°í¬í•˜ë©´-ëœë‹¤-ìœ„ì™€-ê°™ì€-ì„œë¹„ìŠ¤-ë°©ì‹ì¸-NodePortë¡œ-ì„œë¹„ìŠ¤ë¥¼-ë°°í¬í•˜ê³ -í¬íŠ¸ë²ˆí˜¸-5601ë§Œ-ëª…ì‹œí•´ì£¼ë©´-ë…¸ë“œí¬íŠ¸-í˜•ì‹ì˜-ì„œë¹„ìŠ¤ê°€-í¬íŠ¸-í¬ì›Œë”©ì„-ìˆ˜í–‰í•˜ì—¬-ì›¹ì—ì„œ-ì ‘ì†í• -ìˆ˜-ìˆë‹¤"><a href="#Kibana-ë°°í¬ì—-ê²½ìš°-Serviceì™€-Deploymentê°€-ëª…ì‹œëœ-yaml-íŒŒì¼ì„-ìƒì„±í•˜ê³ -ë°°í¬í•˜ë©´-ëœë‹¤-ìœ„ì™€-ê°™ì€-ì„œë¹„ìŠ¤-ë°©ì‹ì¸-NodePortë¡œ-ì„œë¹„ìŠ¤ë¥¼-ë°°í¬í•˜ê³ -í¬íŠ¸ë²ˆí˜¸-5601ë§Œ-ëª…ì‹œí•´ì£¼ë©´-ë…¸ë“œí¬íŠ¸-í˜•ì‹ì˜-ì„œë¹„ìŠ¤ê°€-í¬íŠ¸-í¬ì›Œë”©ì„-ìˆ˜í–‰í•˜ì—¬-ì›¹ì—ì„œ-ì ‘ì†í• -ìˆ˜-ìˆë‹¤" class="headerlink" title="Kibana ë°°í¬ì— ê²½ìš° Serviceì™€ Deploymentê°€ ëª…ì‹œëœ yaml íŒŒì¼ì„ ìƒì„±í•˜ê³  ë°°í¬í•˜ë©´ ëœë‹¤. ìœ„ì™€ ê°™ì€ ì„œë¹„ìŠ¤ ë°©ì‹ì¸ NodePortë¡œ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê³  í¬íŠ¸ë²ˆí˜¸ 5601ë§Œ ëª…ì‹œí•´ì£¼ë©´ ë…¸ë“œí¬íŠ¸ í˜•ì‹ì˜ ì„œë¹„ìŠ¤ê°€ í¬íŠ¸ í¬ì›Œë”©ì„ ìˆ˜í–‰í•˜ì—¬ ì›¹ì—ì„œ ì ‘ì†í•  ìˆ˜ ìˆë‹¤."></a>Kibana ë°°í¬ì— ê²½ìš° Serviceì™€ Deploymentê°€ ëª…ì‹œëœ yaml íŒŒì¼ì„ ìƒì„±í•˜ê³  ë°°í¬í•˜ë©´ ëœë‹¤. ìœ„ì™€ ê°™ì€ ì„œë¹„ìŠ¤ ë°©ì‹ì¸ NodePortë¡œ ì„œë¹„ìŠ¤ë¥¼ ë°°í¬í•˜ê³  í¬íŠ¸ë²ˆí˜¸ 5601ë§Œ ëª…ì‹œí•´ì£¼ë©´ ë…¸ë“œí¬íŠ¸ í˜•ì‹ì˜ ì„œë¹„ìŠ¤ê°€ í¬íŠ¸ í¬ì›Œë”©ì„ ìˆ˜í–‰í•˜ì—¬ ì›¹ì—ì„œ ì ‘ì†í•  ìˆ˜ ìˆë‹¤.</h2><p><code>kubectl create -f kibana.yaml</code></p><p><em>kibana.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kibana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">elastic</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">kibana</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">5601</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">kibana</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kibana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">elastic</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">kibana</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">kibana</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">kibana</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">kibana</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.elastic.co/kibana/kibana:7.2.0</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="attr">limits:</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">1000m</span></span><br><span class="line">          <span class="attr">requests:</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">100m</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ELASTICSEARCH_URL</span></span><br><span class="line">            <span class="attr">value:</span> <span class="string">http://elasticsearch:9200</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">5601</span></span><br></pre></td></tr></table></figure><h2 id="Check-Status-1"><a href="#Check-Status-1" class="headerlink" title="Check Status"></a>Check Status</h2><p>ì •ìƒì ìœ¼ë¡œ Kibana ê°€ ë°°í¬ë˜ì—ˆëŠ”ì§€ <code>kubectl get svc -n elastic</code>ì„ í†µí•´ í™•ì¸ëœ í¬íŠ¸ë¡œ <em>(9200ì— í¬íŠ¸í¬ì›Œë”© ëœ í¬íŠ¸ í™•ì¸)</em> curl ëª…ë ¹ì„ ìˆ˜í–‰í•œë‹¤.</p><p><code>curl http://&#123;ip&#125;:&#123;port&#125;</code></p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-an-elasticsearch-fluentd-and-kibana-efk-logging-stack-on-kubernetes">How To Set Up an Elasticsearch, Fluentd and Kibana (EFK) Logging Stack on Kubernetes</a></li><li><a href="https://blog.voidmainvoid.net/153">Elasticsearchì™€ Kibana, filebeat ë¥¼ í™œìš©í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ë¡œê¹… ì•„í‚¤í…ì³</a></li></ul><hr><p>2020.02.06 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-deploy_es/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] rook-cephì„ ì´ìš©í•œ Ceph cluster êµ¬ì„±</title>
      <link>https://jx2lee.github.io/cloud-install_rook_ceph/</link>
      <guid>https://jx2lee.github.io/cloud-install_rook_ceph/</guid>
      <pubDate>Wed, 05 Feb 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;K8s í´ëŸ¬ìŠ¤í„° ë‚´ rook-cephì„ ì´ìš©í•œ Ceph clusterë¥¼ êµ¬ì„±í•œë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.03.30 : yaml íŒŒì¼ì´ í¬í•¨ëœ github ì£¼ì†Œ ì¶”ê°€&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>K8s í´ëŸ¬ìŠ¤í„° ë‚´ rook-cephì„ ì´ìš©í•œ Ceph clusterë¥¼ êµ¬ì„±í•œë‹¤.</p><p><strong>Update Note</strong></p><ul><li>2020.03.30 : yaml íŒŒì¼ì´ í¬í•¨ëœ github ì£¼ì†Œ ì¶”ê°€</li></ul><a id="more"></a><h1 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h1><p><img src="https://rook.io/docs/rook/v0.9/media/rook-architecture.png" alt=""></p><p>rook-cephì€ Ceph í´ëŸ¬ìŠ¤í„° ë° ë‹¤ë¥¸ componentë“¤ì„ CRD(Custom Resource Definition)ìœ¼ë¡œ ê´€ë¦¬í•˜ë©° CRDì˜ ë³€ê²½ì‚¬í•­ì„ Rook Operatorë¥¼ ì´ìš©í•´ ì¼ê´„ ì ìš©í•  ìˆ˜ ìˆë‹¤</p><h1 id="ì„¤ì¹˜-ìˆœì„œ"><a href="#ì„¤ì¹˜-ìˆœì„œ" class="headerlink" title="ì„¤ì¹˜ ìˆœì„œ"></a>ì„¤ì¹˜ ìˆœì„œ</h1><h2 id="ì•„ë˜-ìˆœì„œì™€-ê°™ì´-ì„¤ì¹˜ë¥¼-ì§„í–‰"><a href="#ì•„ë˜-ìˆœì„œì™€-ê°™ì´-ì„¤ì¹˜ë¥¼-ì§„í–‰" class="headerlink" title="ì•„ë˜ ìˆœì„œì™€ ê°™ì´ ì„¤ì¹˜ë¥¼ ì§„í–‰"></a>ì•„ë˜ ìˆœì„œì™€ ê°™ì´ ì„¤ì¹˜ë¥¼ ì§„í–‰</h2><ul><li><p>íŠ¹ì • ìœ„ì¹˜ì— git repositoryë¥¼ clone í•œë‹¤. ì´í›„ common.yaml, operator.yaml ì„ ì´ìš©í•´ rook-cephì—ì„œ ì œê³µí•˜ëŠ” CRDì™€ operatorë¥¼ ìƒì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/rook/rook.git</span><br><span class="line"><span class="built_in">cd</span> /rook/cluster/example/kubenetes/cephfs</span><br><span class="line">kubectl apply -f common.yamlkubectl apply -f operator.yaml</span><br></pre></td></tr></table></figure></li><li><p>ceph_config_override.yaml ê³¼ cluster.yaml ì„ ì´ìš©í•´ configmapì„ ìƒì„±í•˜ê³  clusterë¥¼ êµ¬ì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f ceph_config_override.yaml</span><br><span class="line">kubectl apply -f cluster.yaml</span><br></pre></td></tr></table></figure><p><em>ceph_config_override.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">rook-config-override</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">config:</span> <span class="string">|</span></span><br><span class="line">    [<span class="string">global</span>]</span><br><span class="line">    <span class="string">mon</span> <span class="string">osd</span> <span class="string">down</span> <span class="string">out</span> <span class="string">interval</span> <span class="string">=</span> &#123;<span class="string">osd_down_out_interval</span>&#125;</span><br><span class="line">    <span class="string">mon</span> <span class="string">clock</span> <span class="string">drift</span> <span class="string">allowed</span> <span class="string">=</span> <span class="number">0.2</span></span><br></pre></td></tr></table></figure><p><em>cluster.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">ceph.rook.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CephCluster</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">rook-ceph</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">cephVersion:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">ceph/ceph:v14.2.4-20190917</span></span><br><span class="line">    <span class="attr">allowUnsupported:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">dataDirHostPath:</span> <span class="string">/var/lib/rook</span></span><br><span class="line">  <span class="attr">skipUpgradeChecks:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">mon:</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">1</span>    <span class="comment"># Recommendation: Use odd numbers (ex. 3, 5)</span></span><br><span class="line">  <span class="attr">dashboard:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">ssl:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">monitoring:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span>  <span class="comment"># Require Prometheus to be pre-installed</span></span><br><span class="line">    <span class="attr">rulesNamespace:</span> <span class="string">rook-ceph</span></span><br><span class="line">  <span class="attr">network:</span></span><br><span class="line">    <span class="attr">hostNetwork:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">rbdMirroring:</span></span><br><span class="line">    <span class="attr">workers:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">mgr:</span></span><br><span class="line">    <span class="attr">modules:</span></span><br><span class="line">    <span class="comment"># The pg_autoscaler is only available on nautilus or newer. remove this if testing mimic.</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">pg_autoscaler</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">storage:</span></span><br><span class="line">    <span class="attr">useAllNodes:</span> <span class="literal">true</span>      <span class="comment"># Apply ceph-osd to all nodes.</span></span><br><span class="line">    <span class="attr">useAllDevices:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">deviceFilter:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">journalSizeMB:</span> <span class="string">&quot;1024&quot;</span>  <span class="comment"># This value can be removed for environments with normal sized disks (20 GB or larger)</span></span><br><span class="line">      <span class="attr">osdsPerDevice:</span> <span class="string">&quot;1&quot;</span>   <span class="comment"># This value can be overridden at the node or device level</span></span><br><span class="line">    <span class="attr">directories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/var/lib/rook</span></span><br></pre></td></tr></table></figure></li><li><p>toolbox.yaml ì„ ì´ìš©í•´ ceph í´ëŸ¬ìŠ¤í„° ì´ìš©ì„ ìœ„í•œ clientë¥¼ ì„¤ì¹˜í•œë‹¤</p><p><code>kubectl apply -f toolbox.yaml</code></p></li><li><p>block_pool.yaml  ê³¼ file_system.yamlì„ ì´ìš©í•´ block / file storage ë°°í¬ ì¤€ë¹„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f block_pool.yaml</span><br><span class="line">kubectl apply -f file_system.yaml</span><br></pre></td></tr></table></figure><p><em>block_pool.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">ceph.rook.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CephBlockPool</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">replicapool</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">failureDomain:</span> <span class="string">host</span></span><br><span class="line">  <span class="attr">replicated:</span></span><br><span class="line">    <span class="attr">size:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><p><em>file_system.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">ceph.rook.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CephFilesystem</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">myfs</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">metadataPool:</span></span><br><span class="line">  <span class="comment"># failureDomain - values are possible for &#x27;osd&#x27; and &#x27;host&#x27;</span></span><br><span class="line">    <span class="attr">failureDomain:</span> <span class="string">host</span>  <span class="comment"># ceph-osd must exist equal or more than replicated size</span></span><br><span class="line">    <span class="attr">replicated:</span></span><br><span class="line">      <span class="attr">size:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">dataPools:</span></span><br><span class="line">  <span class="comment"># failureDomain - values are possible for &#x27;osd&#x27; and &#x27;host&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">failureDomain:</span> <span class="string">host</span>  <span class="comment"># ceph-osd must exist equal or more than replicated size</span></span><br><span class="line">      <span class="attr">replicated:</span></span><br><span class="line">        <span class="attr">size:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">metadataServer:</span></span><br><span class="line">    <span class="attr">activeCount:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">activeStandby:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>ë§ˆì§€ë§‰ìœ¼ë¡œ block_sc.yaml ê³¼ file_sc.yamlì„ ì´ìš©í•´ ê° block / file storageclassë¥¼ ìƒì„±í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f block_sc.yaml</span><br><span class="line">kubectl apply -f file_sc.yaml</span><br></pre></td></tr></table></figure><p><em>block_sc.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">storage.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">StorageClass</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">   <span class="attr">name:</span> <span class="string">rook-ceph-block</span></span><br><span class="line"><span class="attr">provisioner:</span> <span class="string">rook-ceph.rbd.csi.ceph.com</span></span><br><span class="line"><span class="attr">parameters:</span></span><br><span class="line">    <span class="comment"># clusterID is the namespace where the rook cluster is running</span></span><br><span class="line">    <span class="comment"># If you change this namespace, also change the namespace below where the secret namespaces are defined</span></span><br><span class="line">    <span class="attr">clusterID:</span> <span class="string">rook-ceph</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Ceph pool into which the RBD image shall be created</span></span><br><span class="line">    <span class="attr">pool:</span> <span class="string">replicapool</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># RBD image format. Defaults to &quot;2&quot;.</span></span><br><span class="line">    <span class="attr">imageFormat:</span> <span class="string">&quot;2&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># RBD image features. Available for imageFormat: &quot;2&quot;. CSI RBD currently supports only `layering` feature.</span></span><br><span class="line">    <span class="attr">imageFeatures:</span> <span class="string">layering</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># The secrets contain Ceph admin credentials. These are generated automatically by the operator</span></span><br><span class="line">    <span class="comment"># in the same namespace as the cluster.</span></span><br><span class="line">    <span class="attr">csi.storage.k8s.io/provisioner-secret-name:</span> <span class="string">rook-csi-rbd-provisioner</span></span><br><span class="line">    <span class="attr">csi.storage.k8s.io/provisioner-secret-namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line">    <span class="attr">csi.storage.k8s.io/node-stage-secret-name:</span> <span class="string">rook-csi-rbd-node</span></span><br><span class="line">    <span class="attr">csi.storage.k8s.io/node-stage-secret-namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line">    <span class="comment"># Specify the filesystem type of the volume. If not specified, csi-provisioner</span></span><br><span class="line">    <span class="comment"># will set default as `ext4`.</span></span><br><span class="line">    <span class="attr">csi.storage.k8s.io/fstype:</span> <span class="string">ext4</span></span><br><span class="line"><span class="comment"># uncomment the following to use rbd-nbd as mounter on supported nodes</span></span><br></pre></td></tr></table></figure><p><em>file_sc.yaml</em></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">storage.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">StorageClass</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">csi-cephfs-sc</span></span><br><span class="line"><span class="attr">provisioner:</span> <span class="string">rook-ceph.cephfs.csi.ceph.com</span></span><br><span class="line"><span class="attr">parameters:</span></span><br><span class="line">  <span class="comment"># clusterID is the namespace where operator is deployed.</span></span><br><span class="line">  <span class="attr">clusterID:</span> <span class="string">rook-ceph</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># CephFS filesystem name into which the volume shall be created</span></span><br><span class="line">  <span class="attr">fsName:</span> <span class="string">myfs</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Ceph pool into which the volume shall be created</span></span><br><span class="line">  <span class="comment"># Required for provisionVolume: &quot;true&quot;</span></span><br><span class="line">  <span class="attr">pool:</span> <span class="string">myfs-data0</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Root path of an existing CephFS volume</span></span><br><span class="line">  <span class="comment"># Required for provisionVolume: &quot;false&quot;</span></span><br><span class="line">  <span class="comment"># rootPath: /absolute/path</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># The secrets contain Ceph admin credentials. These are generated automatically by the operator</span></span><br><span class="line">  <span class="comment"># in the same namespace as the cluster.</span></span><br><span class="line">  <span class="attr">csi.storage.k8s.io/provisioner-secret-name:</span> <span class="string">rook-csi-cephfs-provisioner</span></span><br><span class="line">  <span class="attr">csi.storage.k8s.io/provisioner-secret-namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line">  <span class="attr">csi.storage.k8s.io/node-stage-secret-name:</span> <span class="string">rook-csi-cephfs-node</span></span><br><span class="line">  <span class="attr">csi.storage.k8s.io/node-stage-secret-namespace:</span> <span class="string">rook-ceph</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># (optional) The driver can use either ceph-fuse (fuse) or ceph kernel client (kernel)</span></span><br><span class="line">  <span class="comment"># If omitted, default volume mounter will be used - this is determined by probing for ceph-fuse</span></span><br><span class="line">  <span class="comment"># or by setting the default mounter explicitly via --volumemounter command-line argument.</span></span><br><span class="line">  <span class="comment"># mounter: kernel</span></span><br><span class="line"><span class="attr">reclaimPolicy:</span> <span class="string">Delete</span></span><br><span class="line"><span class="attr">mountOptions:</span></span><br><span class="line">  <span class="comment"># uncomment the following line for debugging</span></span><br><span class="line">  <span class="comment">#- debug</span></span><br></pre></td></tr></table></figure></li></ul><p>ìœ„ ë‹¨ê³„ë¥¼ ê±°ì¹˜ê³  ë‚œ ë’¤ rook-ceph namespaceì˜ podì™€ storageclass ë¥¼ í™•ì¸í•œë‹¤</p><p><code>kubectl get pods -n rook-ceph</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~/jlee/rook-ceph-master<span class="comment"># kubectl get pods -n rook-ceph</span></span><br><span class="line">NAME                                           READY   STATUS      RESTARTS   AGE</span><br><span class="line">csi-cephfsplugin-7kz7v                         3/3     Running     0          4d19h</span><br><span class="line">csi-cephfsplugin-9rt7t                         3/3     Running     0          4d19h</span><br><span class="line">csi-cephfsplugin-dnggh                         3/3     Running     0          4d19h</span><br><span class="line">csi-cephfsplugin-provisioner-974b566d9-7k2rb   4/4     Running     0          4d19h</span><br><span class="line">csi-cephfsplugin-provisioner-974b566d9-kxg2f   4/4     Running     0          4d19h</span><br><span class="line">csi-cephfsplugin-xzt9b                         3/3     Running     0          4d19h</span><br><span class="line">csi-rbdplugin-2npvg                            3/3     Running     0          4d19h</span><br><span class="line">csi-rbdplugin-drzkp                            3/3     Running     0          4d19h</span><br><span class="line">csi-rbdplugin-hhsm5                            3/3     Running     0          4d19h</span><br><span class="line">csi-rbdplugin-provisioner-579c546f5-qprb8      5/5     Running     0          4d19h</span><br><span class="line">csi-rbdplugin-provisioner-579c546f5-svhlw      5/5     Running     0          4d19h</span><br><span class="line">csi-rbdplugin-qhsw6                            3/3     Running     0          4d19h</span><br><span class="line">rook-ceph-mds-myfs-a-58ddc89fc8-s4f44          1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-mds-myfs-b-85dc7c7cf4-x68lk          1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-mgr-a-69df8d6794-glbjb               1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-mon-a-7b9cb64846-zfbwf               1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-mon-b-7fc7c8fbb4-75j9j               1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-mon-c-6c59c89fbc-rn8nv               1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-operator-7985c4b57d-8qtht            1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-osd-0-55888686c-pf6wn                1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-osd-1-f56d885d4-tnrmv                1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-osd-2-68f99d999f-zlrl4               1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-osd-3-7545f4df9b-ng4tf               1/1     Running     0          4d19h</span><br><span class="line">rook-ceph-osd-prepare-k8s-node1-msfs9          0/1     Completed   0          4d19h</span><br><span class="line">rook-ceph-osd-prepare-k8s-node2-z858m          0/1     Completed   0          4d19h</span><br><span class="line">rook-ceph-osd-prepare-k8s-node3-lwh4c          0/1     Completed   0          4d19h</span><br><span class="line">rook-ceph-osd-prepare-k8s-node4-w8rfw          0/1     Completed   0          4d19h</span><br><span class="line">rook-ceph-tools-8648fbb998-5q7v2               1/1     Running     0          4d19h</span><br><span class="line">rook-discover-85fzl                            1/1     Running     0          4d19h</span><br><span class="line">rook-discover-djj97                            1/1     Running     0          4d19h</span><br><span class="line">rook-discover-p7cwx                            1/1     Running     0          4d19h</span><br><span class="line">rook-discover-zvn5f                            1/1     Running     0          4d19h</span><br></pre></td></tr></table></figure><p><code>kubectl get storageclass</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># kubectl get storageclass</span></span><br><span class="line">NAME                        PROVISIONER                     AGE</span><br><span class="line">csi-cephfs-sc               rook-ceph.cephfs.csi.ceph.com   16h</span><br><span class="line">rook-ceph-block             rook-ceph.rbd.csi.ceph.com      16h</span><br></pre></td></tr></table></figure><blockquote><p><em>ìœ„ ì–¸ê¸‰í•œ yaml íŒŒì¼ì€ github ì— ì˜¬ë ¤ ë‘ì—ˆë‹¤. <a href="https://github.com/jaejuning/rook-ceph-deploy">https://github.com/jaejuning/rook-ceph-deploy</a></em></p></blockquote><h1 id="Ceph-cluster-ìƒíƒœ-í™•ì¸"><a href="#Ceph-cluster-ìƒíƒœ-í™•ì¸" class="headerlink" title="Ceph cluster ìƒíƒœ í™•ì¸"></a>Ceph cluster ìƒíƒœ í™•ì¸</h1><h2 id="ì„¤ì¹˜ê°€-ì™„ë£Œë˜ì—ˆë‹¤ë©´-êµ¬ì¶•í•œ-ceph-clusterê°€-ì •ìƒ-êµ¬ë™ë˜ì—ˆëŠ”ì§€-í™•ì¸í•˜ì—¬ì•¼-í•œë‹¤-toolbox-pod-ë¥¼-í†µí•´-pod-ë„¤ì„ì„-í™•ì¸í•œë‹¤"><a href="#ì„¤ì¹˜ê°€-ì™„ë£Œë˜ì—ˆë‹¤ë©´-êµ¬ì¶•í•œ-ceph-clusterê°€-ì •ìƒ-êµ¬ë™ë˜ì—ˆëŠ”ì§€-í™•ì¸í•˜ì—¬ì•¼-í•œë‹¤-toolbox-pod-ë¥¼-í†µí•´-pod-ë„¤ì„ì„-í™•ì¸í•œë‹¤" class="headerlink" title="ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ êµ¬ì¶•í•œ ceph clusterê°€ ì •ìƒ êµ¬ë™ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì—¬ì•¼ í•œë‹¤. toolbox pod ë¥¼ í†µí•´ pod ë„¤ì„ì„ í™•ì¸í•œë‹¤"></a>ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ êµ¬ì¶•í•œ ceph clusterê°€ ì •ìƒ êµ¬ë™ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì—¬ì•¼ í•œë‹¤. toolbox pod ë¥¼ í†µí•´ pod ë„¤ì„ì„ í™•ì¸í•œë‹¤</h2><p><code>kubectl -n rook-ceph get pod -l &quot;app=rook-ceph-tools&quot;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># kubectl -n rook-ceph get pod -l &quot;app=rook-ceph-tools&quot;</span></span><br><span class="line">NAME                               READY   STATUS    RESTARTS   AGE</span><br><span class="line">rook-ceph-tools-8648fbb998-dzbbd   1/1     Running   0          15h</span><br></pre></td></tr></table></figure><ul><li><p>í™•ì¸ëœ pod ë„¤ì„ì„ í†µí•´ exec ëª…ë ¹ì–´ë¡œ í•´ë‹¹ ì»¨í…Œì´ë„ˆë¡œ ì ‘ì†</p><p><code>kubectl exec -it -n rook-ceph [ìœ„ ê²°ê³¼ë¡œ ë‚˜ì˜¨ pod NAME] -- /bin/bash</code></p></li></ul><h2 id="Ceph-cluster-ìƒíƒœ-í™•ì¸-1"><a href="#Ceph-cluster-ìƒíƒœ-í™•ì¸-1" class="headerlink" title="Ceph cluster ìƒíƒœ í™•ì¸"></a>Ceph cluster ìƒíƒœ í™•ì¸</h2><p><code>ceph -s</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-node3 /] ceph -s</span><br><span class="line">  cluster:</span><br><span class="line">    id:     9d3a534e-797f-4659-af8d-4bfb5f60f76c</span><br><span class="line">    health: HEALTH_OK</span><br><span class="line"></span><br><span class="line">  services:</span><br><span class="line">    mon: 1 daemons, quorum a (age 16h)</span><br><span class="line">    mgr: a(active, since 15h)</span><br><span class="line">    mds: myfs:1 &#123;0=myfs-a=up:active&#125; 1 up:standby-replay</span><br><span class="line">    osd: 2 osds: 2 up (since 15h), 2 <span class="keyword">in</span> (since 15h)</span><br><span class="line"></span><br><span class="line">  data:</span><br><span class="line">    pools:   3 pools, 24 pgs</span><br><span class="line">    objects: 537 objects, 1.4 GiB</span><br><span class="line">    usage:   53 GiB used, 45 GiB / 98 GiB avail</span><br><span class="line">    pgs:     24 active+clean</span><br></pre></td></tr></table></figure><h2 id="Ceph-cluster-disk-í™•ì¸"><a href="#Ceph-cluster-disk-í™•ì¸" class="headerlink" title="Ceph cluster disk í™•ì¸"></a>Ceph cluster disk í™•ì¸</h2><p><code>ceph df</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-node3 /] ceph df</span><br><span class="line">RAW STORAGE:</span><br><span class="line">    CLASS     SIZE       AVAIL      USED       RAW USED     %RAW USED </span><br><span class="line">    ssd       98 GiB     45 GiB     53 GiB       53 GiB         53.87 </span><br><span class="line">    TOTAL     98 GiB     45 GiB     53 GiB       53 GiB         53.87 </span><br><span class="line"></span><br><span class="line">POOLS:</span><br><span class="line">    POOL              ID     STORED      OBJECTS     USED        %USED     MAX AVAIL </span><br><span class="line">    replicapool        1     1.4 GiB         509     1.4 GiB      3.50        19 GiB </span><br><span class="line">    myfs-metadata      2     2.2 KiB          28     2.2 KiB         0        19 GiB </span><br><span class="line">    myfs-data0         3         0 B           0         0 B         0        19 GiB </span><br></pre></td></tr></table></figure><h2 id="RBD-image-ì‚¬ìš©ëŸ‰"><a href="#RBD-image-ì‚¬ìš©ëŸ‰" class="headerlink" title="RBD image ì‚¬ìš©ëŸ‰"></a>RBD image ì‚¬ìš©ëŸ‰</h2><p><code>rbd du -p replicapoll</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NAME                                         PROVISIONED USED    </span><br><span class="line">csi-vol-22712573-4815-11ea-9f90-aea9eb69a9f1      10 GiB 344 MiB </span><br><span class="line">csi-vol-6d1536b2-47fc-11ea-9f90-aea9eb69a9f1      10 GiB 300 MiB </span><br><span class="line">csi-vol-d38c964b-4814-11ea-9f90-aea9eb69a9f1      10 GiB 404 MiB </span><br><span class="line">csi-vol-d4745340-4814-11ea-9f90-aea9eb69a9f1      10 GiB 396 MiB </span><br><span class="line">csi-vol-d4937470-4814-11ea-9f90-aea9eb69a9f1      20 GiB 244 MiB </span><br><span class="line">csi-vol-d4a291d9-4814-11ea-9f90-aea9eb69a9f1      20 GiB 400 MiB </span><br><span class="line">&lt;TOTAL&gt;                                           80 GiB 2.0 GiB </span><br></pre></td></tr></table></figure><p>reclaimPolicyë¥¼ Retainìœ¼ë¡œ ì„¤ì •í•  ê²½ìš°, pvë¥¼ ì§€ì›Œë„ RBD imageê°€ ceph clusterì— ë‚¨ê²Œ ë˜ëŠ”ë°, ì´ ê²½ìš°ì—ëŠ” <code>rbd ls</code>, <code>rbd rm</code> ë“±ì„ í†µí•´ rbd ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•˜ê³  ì‚­ì œí•´ì•¼ í•œë‹¤.</p><h1 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h1><p>ë‚´ ê²½ìš° í´ëŸ¬ìŠ¤í„°ì˜ í•œ ë…¸ë“œì—ì„œ csi-rbdplugin podê°€ ìƒì„±ë˜ì§€ ì•Šê³  CrashLoopBack ì´ ê±¸ë¦¬ëŠ” í˜„ìƒì´ ë°œìƒí•˜ì˜€ë‹¤. ë…¸ë“œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ ëª»í•˜ì—¬ ìš°íšŒí•˜ëŠ” ë°©ì•ˆìœ¼ë¡œ <strong>í•´ë‹¹ ë…¸ë“œì— íŒŒë“œê°€ ì„¤ì •ë˜ì§€ ì•Šê²Œ taint ì¡°ê±´ì„ ì¶”ê°€</strong>í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤.</p><p><code>kubectl taint nodes &#123;csi-rbdplugin podë¥¼ ìƒì„±í•˜ì§€ ëª»í•˜ëŠ” ë…¸ë“œ&#125; key=value:NoSchedule-</code></p><p>ì´í›„ì— rook-ceph clusterë¥¼ ì¬ êµ¬ì¶•í•˜ë©´ csi-rbdpluginì´ ì •ìƒ ì‘ë™í•¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><hr><p>2020.02.06 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-install_rook_ceph/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Terminating Stateì— ë¹ ì§„ Namespace ì‚­ì œ</title>
      <link>https://jx2lee.github.io/cloud-delete_ns_at_terminating_state/</link>
      <guid>https://jx2lee.github.io/cloud-delete_ns_at_terminating_state/</guid>
      <pubDate>Mon, 03 Feb 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;K8s namespaceë¥¼ ì‚­ì œí•˜ë‹¤ë³´ë©´ stateê°€ &lt;code&gt;Terminating&lt;/code&gt;ì´ë©´ì„œ get namespace ê²°ê³¼ì— ê³„ì† ë‚¨ì•„ìˆëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ë°, ì´ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Updata Note&lt;/strong&gt;  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.03.13 : Advanced ì¶”ê°€ (shell script)&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>K8s namespaceë¥¼ ì‚­ì œí•˜ë‹¤ë³´ë©´ stateê°€ <code>Terminating</code>ì´ë©´ì„œ get namespace ê²°ê³¼ì— ê³„ì† ë‚¨ì•„ìˆëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ë°, ì´ë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¬ë‹¤.</p><p><strong>Updata Note</strong>  </p><ul><li>2020.03.13 : Advanced ì¶”ê°€ (shell script)</li></ul><a id="more"></a><h1 id="ë¬¸ì œ-ë°œìƒ"><a href="#ë¬¸ì œ-ë°œìƒ" class="headerlink" title="ë¬¸ì œ ë°œìƒ"></a>ë¬¸ì œ ë°œìƒ</h1><p><code>rook-ceph</code> ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ë‹¤ ì‚­ì œí•˜ë©´ì„œ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get ns</span><br><span class="line">NAME              STATUS        AGE</span><br><span class="line">default           Active        2d21h</span><br><span class="line">istio-system      Active        6h40m</span><br><span class="line">knative-serving   Active        6h40m</span><br><span class="line">kube-node-lease   Active        2d21h</span><br><span class="line">kube-public       Active        2d21h</span><br><span class="line">kube-system       Active        2d21h</span><br><span class="line">rook-ceph         Terminating   16m</span><br></pre></td></tr></table></figure><p>Terminating ì¤‘ì¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í•œ ë²ˆ ë” ì§€ìš°ëŠ” ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error from server (Conflict): Operation cannot be fulfilled on namespaces <span class="string">&quot;rook-ceph&quot;</span>: The system is ensuring all content is removed from this namespace.  Upon completion, this namespace will automatically be purged by the system.</span><br></pre></td></tr></table></figure><h1 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h1><p>í•´ë‹¹ Namespaceì˜ yaml íŒŒì¼ì„ ì‚´í´ë³´ë©´, <code>.spec/finalizers</code>  ë¶€ë¶„ì— Kubernetesë¼ ëª…ì‹œë˜ì–´ ìˆë‹¤. ì´ë¥¼ ë¹ˆ ê³µë°±ìœ¼ë¡œ ë°”ê¾¸ê³  ì ìš©í•˜ëŠ” ìˆœì„œë¡œ ì§„í–‰í•œë‹¤.</p><ul><li><code>jq</code> íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  <em>(apt get install jq)</em> ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œë‹¤.<br><code>kubectl get namespace $NAMESPACE -o json |jq &#39;.spec = &#123;&quot;finalizers&quot;:[]&#125;&#39; &gt; temp.json</code></li><li>ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œ ë””ë ‰í† ë¦¬ì— <code>temp.json</code>ì´ ìƒì„±ë˜ëŠ”ë°, ì´ë¥¼ yaml íŒŒì¼ë¡œ ì ìš©í•  ê²ƒì´ë‹¤. ì´ë•Œ í•„ìš”í•œ Ip/portë¥¼ ì•„ë˜ ëª…ë ¹ì–´ë¡œ í™•ì¸í•œë‹¤.<br><code>kubectl proxy &amp;</code></li><li>curl ëª…ë ¹ì–´ë¡œ ìˆ˜ì •ì‚¬í•­ì„ ë°˜ì˜í•œë‹¤.<br><code>curl -k -H &quot;Content-Type: application/json&quot; -X PUT --data-binary @temp.json http://127.0.0.1:8001/api/v1/namespaces/&#123;Namespace-name&#125;/finalize</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get namespaces</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   2d21h</span><br><span class="line">istio-system      Active   6h43m</span><br><span class="line">knative-serving   Active   6h43m</span><br><span class="line">kube-node-lease   Active   2d21h</span><br><span class="line">kube-public       Active   2d21h</span><br><span class="line">kube-system       Active   2d21h</span><br></pre></td></tr></table></figure><h1 id="Advanced-Shell-script"><a href="#Advanced-Shell-script" class="headerlink" title="(Advanced) Shell script"></a>(Advanced) Shell script</h1><p>ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ì¼ì¼ì´ ì°¾ê¸° ê·€ì°®ì•„ì„œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ê³µë¶€ë„ í•  ê²¸ <code>deleteNS.sh</code> ìŠ¤í¬ë¦½íŠ¸ë¥¼ êµ¬í˜„í•˜ì˜€ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="comment">#  delete namespaces</span></span><br><span class="line"></span><br><span class="line">NS=<span class="variable">$1</span></span><br><span class="line"></span><br><span class="line">kubectl get namespace <span class="variable">$NS</span> -o json |jq <span class="string">&#x27;.spec = &#123;&quot;finalizers&quot;:[]&#125;&#x27;</span> &gt; temp.json</span><br><span class="line">kubectl proxy &amp;</span><br><span class="line">curl -k -H <span class="string">&quot;Content-Type: application/json&quot;</span> -X PUT --data-binary @temp.json http://127.0.0.1:8001/api/v1/namespaces/<span class="variable">$NS</span>/finalize</span><br><span class="line"><span class="built_in">kill</span> %1 &amp;&amp; rm tmp.json <span class="comment"># proxy process ë¥¼ ë‹¤ìš´í•˜ê³  tmp.json íŒŒì¼ì„ ì‚­ì œ</span></span><br></pre></td></tr></table></figure><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://nasermirzaei89.net/2019/01/27/delete-namespace-stuck-at-terminating-state/">Delete Namespace Stuck At Terminating State, https://nasermirzaei89.net/2019/01/27/delete-namespace-stuck-at-terminating-state/</a></li></ul><hr><p>2020.02.04 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-delete_ns_at_terminating_state/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] K8s cluster node ì¶”ê°€ ë° ì‚­ì œ</title>
      <link>https://jx2lee.github.io/cloud-manage_node/</link>
      <guid>https://jx2lee.github.io/cloud-manage_node/</guid>
      <pubDate>Tue, 28 Jan 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;K8s í´ëŸ¬ìŠ¤í„°ì— ë…¸ë“œë¥¼ ì¶”ê°€ ë° ì‚­ì œí•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Node&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.03.10 : kubectl drain ì„¤ëª… ì¶”ê°€&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>K8s í´ëŸ¬ìŠ¤í„°ì— ë…¸ë“œë¥¼ ì¶”ê°€ ë° ì‚­ì œí•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><p><strong>Update Node</strong></p><ul><li>2020.03.10 : kubectl drain ì„¤ëª… ì¶”ê°€</li></ul><a id="more"></a><h1 id="ìƒíƒœ-í™•ì¸"><a href="#ìƒíƒœ-í™•ì¸" class="headerlink" title="ìƒíƒœ í™•ì¸"></a>ìƒíƒœ í™•ì¸</h1><p><code>kubectl get nodes</code>ë¡œ ë…¸ë“œ ìƒíƒœë¥¼ í™•ì¸í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># kubectl get nodes</span></span><br><span class="line">NAME          STATUS     ROLES    AGE     VERSION</span><br><span class="line">ai.bips       NotReady   &lt;none&gt;   11m     v1.15.3</span><br><span class="line">bigdata-svr   Ready      &lt;none&gt;   8m24s   v1.15.3</span><br><span class="line">k8s-master    Ready      master   6d17h   v1.15.3</span><br><span class="line">k8s-node1     Ready      master   6d17h   v1.15.3</span><br><span class="line">k8s-node2     Ready      master   6d17h   v1.15.3</span><br><span class="line">k8s-node3     Ready      &lt;none&gt;   4m14s   v1.15.3</span><br></pre></td></tr></table></figure><p><strong>k8s-node3</strong> ë…¸ë“œë¥¼ ì‚­ì œí•˜ê³  ì¶”ê°€í•´ë³´ë„ë¡ í•˜ì</p><h1 id="Delete-k8s-master-amp-Reset-k8s-node3"><a href="#Delete-k8s-master-amp-Reset-k8s-node3" class="headerlink" title="Delete (k8s-master) &amp; Reset (k8s-node3)"></a>Delete (k8s-master) &amp; Reset (k8s-node3)</h1><p>ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ <strong>k8s-node3</strong>ë¥¼ delete í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl delete node k8s-node3</span><br><span class="line">node <span class="string">&quot;k8s-node3&quot;</span> deleted</span><br></pre></td></tr></table></figure><blockquote><p><em>kubectl delete ë§ê³  kubectl drain {node_name} ì„ ìˆ˜í–‰í•˜ë©´ ì´ë¯¸ ë„ì›Œì ¸ìˆëŠ” í•´ë‹¹ ë…¸ë“œì˜ íŒŒë“œë“¤ì„ í´ëŸ¬ìŠ¤í„° ë‚´ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì´ë™ì‹œí‚¤ëŠ” ëª…ë ¹ì´ë‹¤. delete ë³´ë‹¤ drainì„ ìˆ˜í–‰í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì œì™¸ì‹œí‚¤ëŠ” ê²ƒì´ ê´€ë¦¬ì— ë” ìš©ì´í•  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</em></p></blockquote><p>ì´í›„, ì‚­ì œí•œ ë…¸ë“œì—ì„œ <code>kubeadm</code>ì„ í†µí•´ reset í•œë‹¤. resetì„ í•˜ê²Œë˜ë©´ ì´í›„ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ k8s-node3ê°€ ì‚­ì œë˜ì—ˆìŒì„ í™•ì¸í•œë‹¤</p><p><code>kubeadm reset</code></p><blockquote><p><em>reset í•˜ì§€ ì•Šìœ¼ë©´ ì´ì „ ì •ë³´ê°€ ë‚¨ì•„ìˆì–´ ì¶”í›„ì— join ìˆ˜í–‰ ì‹œ error ë°œìƒ</em></p></blockquote><h1 id="In-master-node"><a href="#In-master-node" class="headerlink" title="In master node,"></a>In master node,</h1><p>kubeadm init ì„ í†µí•´ ìƒì„±ëœ í† í°ì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ 3ê°œ ë§ˆìŠ¤í„° ì¤‘ í•œ ëŒ€ ë…¸ë“œì—ì„œ token ì„ í™•ì¸í•œë‹¤</p><p><code>kubeadm token list</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TOKEN                     TTL         EXPIRES                USAGES                   DESCRIPTION                                           EXTRA GROUPS</span><br><span class="line">4e3bad.gzp017frj86g4ngi   23h         2020-01-30T01:53:56Z   authentication,signing   &lt;none&gt;                                                system:bootstrappers:kubeadm:default-node-token</span><br><span class="line">eo7vb4.3ck3l5ja3ry78bef   &lt;invalid&gt;   2020-01-23T08:03:36Z   authentication,signing   &lt;none&gt;                                                system:bootstrappers:kubeadm:default-node-token</span><br><span class="line">m8470a.r8fo1tbwmdhb39eo   22h         2020-01-30T00:58:34Z   authentication,signing   &lt;none&gt;                                                system:bootstrappers:kubeadm:default-node-token</span><br><span class="line">sds92v.mk937ek75jygtrlo   &lt;invalid&gt;   2020-01-22T10:03:36Z   &lt;none&gt;                   Proxy <span class="keyword">for</span> managing TTL <span class="keyword">for</span> the kubeadm-certs secret   &lt;none&gt;</span><br></pre></td></tr></table></figure><p><em>EXPIERS</em> : invalid í•˜ì§€ ì•ŠëŠ” í† í°ì´ ì—†ëŠ” ê²½ìš°, <code>kubeadm token create(or generate)</code>ë¡œ í† í°ì„ ì„¤ì •í•œë‹¤. ë§Œì•½ expired ë˜ì§€ ì•Šì•˜ë‹¤ë©´, join ëª…ë ì–´ì˜ í† í°ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤</p><p>ì´í›„ hash ê°’ì´ í•„ìš”í•˜ë¯€ë¡œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ hash ê°’ì„ í™•ì¸í•œë‹¤</p><p><code>openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed &#39;s/^.* //&#39;</code></p><h1 id="In-k8s-node3"><a href="#In-k8s-node3" class="headerlink" title="In k8s-node3,"></a>In k8s-node3,</h1><p><strong>k8s-node3</strong>ì—ì„œ ìœ„ master ë…¸ë“œë¥¼ í†µí•´ í™•ì¸í•œ ê°’ìœ¼ë¡œ join ì„ ìˆ˜í–‰í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ kubeadm join 192.168.179.171:6443 --token 4e3bad.gzp017frj86g4ngi \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:b141f77ea7c5749767bd7a1dfc54f256ef374969b08f660f1c131453ebed7091</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">This node has joined the cluster:</span><br><span class="line">* Certificate signing request was sent to apiserver and a response was received.</span><br><span class="line">* The Kubelet was informed of the new secure connection details.</span><br></pre></td></tr></table></figure><blockquote><p><em>IPëŠ” ë§ˆìŠ¤í„° IP(ì£¼ì˜ : ì‚¼ì¤‘í™”ë¥¼ ì§„í–‰í•˜ì˜€ìœ¼ë¯€ë¡œ, 3ê°œ ë§ˆìŠ¤í„° í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” VIPë¡œ ì‘ì„±) portëŠ” 6443</em></p></blockquote><p>ì¶”ê°€ë¥¼ ì™„ë£Œí•˜ì˜€ë‹¤. ì´í›„ì— master ë…¸ë“œì—ì„œ <code>kubectl get nodes</code> ë¥¼ í•˜ë©´ í•˜ê¸° ì¶œë ¥ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NAME          STATUS   ROLES    AGE     VERSION</span><br><span class="line">bigdata-svr   Ready    &lt;none&gt;   23m     v1.15.3</span><br><span class="line">k8s-master    Ready    master   6d18h   v1.15.3</span><br><span class="line">k8s-node1     Ready    master   6d18h   v1.15.3</span><br><span class="line">k8s-node2     Ready    master   6d18h   v1.15.3</span><br><span class="line">k8s-node3     Ready    &lt;none&gt;   3m16s   v1.15.3 <span class="comment"># Check!</span></span><br></pre></td></tr></table></figure><h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h1><p>K8s clusterì— ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  ì‚­ì œí•˜ëŠ” ê³¼ì •ì„ ë‹¤ë¤˜ë‹¤. ë…¸ë“œë¥¼ ì‚­ì œí•˜ê³  ì‚­ì œí•œ ë…¸ë“œì—ì„œ ë¦¬ì…‹ì„ ì§„í–‰í•œ ë‹¤ìŒ, ë§ˆìŠ¤í„°ì—ì„œì˜ <code>token ë° hash value</code>ë¥¼ ì¶”ê°€ ë…¸ë“œì— joinì— ì´ìš©í•˜ì˜€ë‹¤</p><ul><li><p>ë…¸ë“œ ì‚­ì œ</p><p><code>kubectl delete node &#123;node-name&#125;</code></p></li><li><p>ë…¸ë“œ ë¦¬ì…‹</p><p><code>kubeadm reset</code></p></li><li><p>cluster token í™•ì¸</p><p><code>kubadm token list</code>, expired ëœ í† í° ë°œê²¬ ì‹œ <code>kubeadm token create</code>ë¡œ ìƒˆ í† í° ìƒì„±</p></li><li><p>hashê°’ í™•ì¸</p><p><code>openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed &#39;s/^.* //&#39;</code></p></li></ul><hr><p>2020.01.29 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-manage_node/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Shell] .DS_Store ì‚­ì œ script</title>
      <link>https://jx2lee.github.io/shell-delete_ds_store/</link>
      <guid>https://jx2lee.github.io/shell-delete_ds_store/</guid>
      <pubDate>Sun, 26 Jan 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Mac Finderë¡œ íŒŒì¼ì„ íƒìƒ‰í•˜ë‹¤ ë³´ë©´ &lt;code&gt;.DS_Store&lt;/code&gt; ì´ë¼ëŠ” íŒŒì¼ì´ ìƒì„±ëœë‹¤. ì„±ê°€ì‹œë‹¤! gitì„ ì‚¬ìš©í•  ë•Œí•­ìƒ .gitignoreë¡œ ëª…ì‹œë¥¼ í•´ì•¼ë˜ë©°, ëª¨ë“  í´ë”ì— ì ìš©í•˜ê³  push í•œ ê²½í—˜ì´ ìˆì„ê±°ë‹¤. ì‰˜ ê³µë¶€í•˜ë©´ì„œ ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œ ì‘ì„±í•´ë³¸ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.04.01 : ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì • (ë³€ìˆ˜ ì…ë ¥ ë° usage)&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Mac Finderë¡œ íŒŒì¼ì„ íƒìƒ‰í•˜ë‹¤ ë³´ë©´ <code>.DS_Store</code> ì´ë¼ëŠ” íŒŒì¼ì´ ìƒì„±ëœë‹¤. ì„±ê°€ì‹œë‹¤! gitì„ ì‚¬ìš©í•  ë•Œí•­ìƒ .gitignoreë¡œ ëª…ì‹œë¥¼ í•´ì•¼ë˜ë©°, ëª¨ë“  í´ë”ì— ì ìš©í•˜ê³  push í•œ ê²½í—˜ì´ ìˆì„ê±°ë‹¤. ì‰˜ ê³µë¶€í•˜ë©´ì„œ ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œ ì‘ì„±í•´ë³¸ë‹¤.</p><p><strong>Update Note</strong></p><ul><li>2020.04.01 : ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì • (ë³€ìˆ˜ ì…ë ¥ ë° usage)</li></ul><a id="more"></a><h1 id="DS-Store"><a href="#DS-Store" class="headerlink" title=".DS_Store?"></a>.DS_Store?</h1><p>DS_STORE íŒŒì¼ì´ë€ Desktop Services Storeì˜ ì•½ìë¡œ ì• í”Œì—ì„œ ì •ì˜í•œ íŒŒì¼ í¬ë§·ì´ë‹¤. ì• í”Œì˜ ë§¥ OS X ì‹œìŠ¤í…œì´ í´ë”ì— ì ‘ê·¼í•  ë•Œ ìƒê¸°ëŠ” í•´ë‹¹ í´ë”ì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” íŒŒì¼ì´ë‹¤. ìœˆë„ìš°ì˜ thumb.db íŒŒì¼ê³¼ ë¹„ìŠ·í•˜ë‹¤. ë¶„ì„í•´ë³´ë©´ í•´ë‹¹ ë””ë ‰í† ë¦¬ í¬ê¸°, ì•„ì´ì½˜ì˜ ìœ„ì¹˜, í´ë”ì˜ ë°°ê²½ì— ëŒ€í•œ ì •ë³´ë“¤ì„ ì–»ì„ ìˆ˜ ìˆë‹¤. ë§¥ OS í™˜ê²½ì—ì„œë§Œ ìƒì„± ë° ì‚¬ìš©ë˜ì§€ë§Œ,íŒŒì¼ì„ ê³µìœ í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ íŒŒì¼ë„ ê°™ì´ ê³µìœ ë˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. <a href="https://chp747.tistory.com/54">ì¶œì²˜</a></p><h1 id="Shell-script"><a href="#Shell-script" class="headerlink" title="Shell script"></a>Shell script</h1><p>ê°„ë‹¨í•œ í•œ ì¤„ ì§œë¦¬ ëª…ë ¹ìœ¼ë¡œ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¶€í„° ì‚­ì œí•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë‚˜ëŠ” ì´ê²Œ ê·€ì°®ì•˜ë‹¤. ê·¸ë¦¬ê³  Finderë¡œëŠ” <code>/</code> ë””ë ‰í† ë¦¬ê¹Œì§€ ê°ˆ ì¼ì´ ì—†ê³ , <code>/Users/jj</code> ì•„ë˜ í•˜ìœ„ ë””ë ‰í† ë¦¬ì— ìƒì„±ë˜ëŠ” DS_Store íŒŒì¼ì´ ê±°ìŠ¬ë ¸ë‹¤. hackerrank shell ë¬¸ì œë¥¼ í‘¸ëŠ” ë””ë ‰í† ë¦¬ì— <code>rm-ds-store.sh</code> íŒŒì¼ì„ ìƒì„±í•˜ê³  ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤</p><p>sudoì™€ findë¡œ ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤. ì‰˜ ì‹¤í–‰ ì‹œ <code>stdin</code>ìœ¼ë¡œ íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥ê°’ì„ ë°›ì•„ sudo ëª…ë ì„ ì‹¤í–‰í•˜ê³ , ì‚­ì œë˜ëŠ” ë‚´ì—­ì„ print í•œë‹¤. ë‚´ìš©ì€ í•˜ê¸°ì™€ ê°™ë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># delete all .DS_Store file from path</span></span><br><span class="line"><span class="comment"># Wed, 01.04.2020</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>  [ <span class="string">&quot;<span class="variable">$#</span>&quot;</span> -ne 1 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;usage   : <span class="variable">$0</span> &#123;path&#125;&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;example : <span class="variable">$0</span> /Users/jj&quot;</span></span><br><span class="line">        <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">path=<span class="variable">$1</span></span><br><span class="line">sudo --stdin find <span class="variable">$&#123;path&#125;</span> -name <span class="string">&quot;.DS_Store&quot;</span> -<span class="built_in">print</span> -delete</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;.DS_Store clear in <span class="variable">$&#123;path&#125;</span> !&quot;</span></span><br></pre></td></tr></table></figure><h1 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h1><p><code>./rm-ds-store.sh</code> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ Usage ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì •ë¦¬í•˜ê³ ì í•˜ëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì‚½ì…í•˜ë©´ ëœë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~/shell/custom</span><br><span class="line">â¯ ./rm-ds-store.sh</span><br><span class="line">usage   : ./rm-ds-store.sh &#123;path&#125;</span><br><span class="line">example : ./rm-ds-store.sh /Users/jj</span><br><span class="line"></span><br><span class="line">~/shell/custom</span><br><span class="line">â¯ ./rm-ds-store.sh /Users/jj</span><br><span class="line">Password:</span><br><span class="line">.DS_Store clear <span class="keyword">in</span> /Users/jj..!</span><br></pre></td></tr></table></figure><p><del>ì‚­ì œëœ ìœ„ì¹˜ê°€ í”„ë¦°íŠ¸í•˜ë©° ë™ì‹œì— ì‚­ì œí•˜ì—¬ ì™„ë£Œë¨ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì›ë˜ëŠ” <code>/</code> í•˜ìœ„ ë””ë ‰í† ë¦¬ ëª¨ë‘ ê²€ì‚¬í•˜ì˜€ì§€ë§Œ êµ³ì´ ê²€ì‚¬í•  í•„ìš”ê°€ ì—†ì—ˆë‹¤ <em>(ì´ìœ ëŠ” .DS_Store ì˜ ì •ì˜ë¥¼ ìƒê°í•˜ë©´ ëœë‹¤)</em>. ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ê³µë¶€í•˜ë©´ì„œ ì‹¤ì œë¡œ ì¨ë³¼ ìˆ˜ ìˆëŠ” toy project ì˜€ê³  ë” í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆì„ ê³ ë¯¼í•´ì•¼ê² ë‹¤.</del> ì¸ìê°’ì´ ì—†ìœ¼ë©´ Usage ë¥¼ ì¶œë ¥í•˜ê³  ì›í•˜ëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì¶”ê°€í•˜ì—¬ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¥¼ ëª¨ë‘ ê²€ìƒ‰í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¡œ ìˆ˜ì •í•˜ì˜€ë‹¤. ì¡°ê¸ˆì”© ë” í™œìš©í•  ë°©ì•ˆì„ ìƒê°í•˜ë©´ì„œ ìˆ˜ì •í•  ê³„íšì´ë‹¤.</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://chp747.tistory.com/54">.DS_STORE íŒŒì¼ì´ë€, https://chp747.tistory.com/54</a></li></ul><hr><p>2020.01.27 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/shell-delete_ds_store/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Kubeflow ì„¤ì¹˜</title>
      <link>https://jx2lee.github.io/cloud-install_kubeflow/</link>
      <guid>https://jx2lee.github.io/cloud-install_kubeflow/</guid>
      <pubDate>Wed, 22 Jan 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;K8s cluster ìœ„ Kubeflowë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. K8s cluster êµ¬ì¶•ì€ &lt;a href=&quot;https://jaejuning.github.io/2020/01/22/2020-01-22-cloud-k8s_cluster/&quot;&gt;í¬ìŠ¤íŠ¸&lt;/a&gt; ì°¸ê³ &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.02.25 : Trouble Shooting ì¶”ê°€&lt;/li&gt;
&lt;li&gt;2020.03.13 : Kubeflow ì‚­ì œ ì¶”ê°€, kfctl ë²„ì ¼ ëª…ì‹œ&lt;/li&gt;
&lt;li&gt;2020.03.18 : Dashboard UI ìˆ˜ì •&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>K8s cluster ìœ„ Kubeflowë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. K8s cluster êµ¬ì¶•ì€ <a href="https://jaejuning.github.io/2020/01/22/2020-01-22-cloud-k8s_cluster/">í¬ìŠ¤íŠ¸</a> ì°¸ê³ </p><p><strong>Update Note</strong></p><ul><li>2020.02.25 : Trouble Shooting ì¶”ê°€</li><li>2020.03.13 : Kubeflow ì‚­ì œ ì¶”ê°€, kfctl ë²„ì ¼ ëª…ì‹œ</li><li>2020.03.18 : Dashboard UI ìˆ˜ì •</li></ul><a id="more"></a><h1 id="K8s-í™˜ê²½"><a href="#K8s-í™˜ê²½" class="headerlink" title="K8s í™˜ê²½"></a>K8s í™˜ê²½</h1><h2 id="Storageclass-default-ì„¤ì •-í™•ì¸"><a href="#Storageclass-default-ì„¤ì •-í™•ì¸" class="headerlink" title="Storageclass default ì„¤ì • í™•ì¸"></a>Storageclass default ì„¤ì • í™•ì¸</h2><p>storage class name default ì„¤ì •ì„ ìœ„í•´ ì•„ë˜ ì»¤ë§¨ë“œë¼ì¸ì„ ìˆ˜í–‰</p><p><code>kubectl patch storageclass [storage class ëª…] -p &#39;&#123;&quot;metadata&quot;: &#123;&quot;annotations&quot;:&#123;&quot;storageclass.kubernetes.io/is-default-class&quot;:&quot;true&quot;&#125;&#125;&#125;&#39;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl get sc <span class="comment">#sc : storageclass</span></span><br><span class="line">NAME                        PROVISIONER                     AGE</span><br><span class="line">csi-cephfs-sc               rook-ceph.cephfs.csi.ceph.com   16h</span><br><span class="line">rook-ceph-block (default)   rook-ceph.rbd.csi.ceph.com      16h</span><br></pre></td></tr></table></figure><h1 id="Kubeflow-ì„¤ì¹˜-íŒŒì¼-ë‹¤ìš´"><a href="#Kubeflow-ì„¤ì¹˜-íŒŒì¼-ë‹¤ìš´" class="headerlink" title="Kubeflow ì„¤ì¹˜ íŒŒì¼ ë‹¤ìš´"></a>Kubeflow ì„¤ì¹˜ íŒŒì¼ ë‹¤ìš´</h1><p><a href="https://github.com/kubeflow/kubeflow/releases">https://github.com/kubeflow/kubeflow/releases</a>ì—ì„œ ìµœì‹  kfctl ë°”ì´ë„ˆë¦¬ë¥¼ ë‹¤ìš´ë°›ì•„ ì••ì¶•ì„ í•´ì œí•œë‹¤.</p><blockquote><p><em>ë³¸ì¸ì€ v1.0.1-0-gf3edb9b ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.</em></p></blockquote><h1 id="Kubeflow-í™˜ê²½-ì„¤ì •"><a href="#Kubeflow-í™˜ê²½-ì„¤ì •" class="headerlink" title="Kubeflow í™˜ê²½ ì„¤ì •"></a>Kubeflow í™˜ê²½ ì„¤ì •</h1><h2 id="bashrc"><a href="#bashrc" class="headerlink" title=".bashrc"></a>.bashrc</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> KF_NAME=my-kubeflow</span><br><span class="line"><span class="built_in">export</span> BASE_DIR=/root/kubeflow</span><br><span class="line"><span class="built_in">export</span> KF_DIR=<span class="variable">$&#123;BASE_DIR&#125;</span>/<span class="variable">$&#123;KF_NAME&#125;</span></span><br><span class="line"><span class="built_in">export</span> CONFIG_FILE=<span class="variable">$&#123;KF_DIR&#125;</span>/kfctl_k8s_istio.0.7.0.yaml</span><br><span class="line"><span class="built_in">export</span> CONFIG_URI=<span class="string">&quot;https://raw.githubusercontent.com/kubeflow/manifests/v0.7-branch/kfdef/kfctl_k8s_istio.0.7.0.yaml&quot;</span></span><br></pre></td></tr></table></figure><h2 id="kfctl-k8s-istio-0-7-0-yaml"><a href="#kfctl-k8s-istio-0-7-0-yaml" class="headerlink" title="kfctl_k8s_istio.0.7.0.yaml"></a>kfctl_k8s_istio.0.7.0.yaml</h2><p><code>wget -O kfctl_k8s_istio.0.7.0.yaml $CONFIG_URI</code></p><h1 id="Kubeflow-deploy"><a href="#Kubeflow-deploy" class="headerlink" title="Kubeflow deploy"></a>Kubeflow deploy</h1><h2 id="Binary-ì´ë™"><a href="#Binary-ì´ë™" class="headerlink" title="Binary ì´ë™"></a>Binary ì´ë™</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;BASE_DIR&#125;</span></span><br><span class="line">chmod 755 kfctl</span><br><span class="line">mv kfctl /usr/bin</span><br></pre></td></tr></table></figure><h2 id="ì„¤ì¹˜"><a href="#ì„¤ì¹˜" class="headerlink" title="ì„¤ì¹˜"></a>ì„¤ì¹˜</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$KF_DIR</span></span><br><span class="line">kfctl apply -V -f <span class="variable">$&#123;CONFIG_FILE&#125;</span></span><br></pre></td></tr></table></figure><h1 id="Access-Kubeflow-UI"><a href="#Access-Kubeflow-UI" class="headerlink" title="Access Kubeflow UI"></a>Access Kubeflow UI</h1><p><code>http://&#123;NODE_IP&#125;:31380</code>ë¡œ ì ‘ì†í•œë‹¤</p><p><img src="/image/kubeflow-login.png" alt=""></p><blockquote><p><em><del>Masterê°€ ë§ì€ ê²½ìš°ì— <strong>centraldashboard</strong> pod ë¥¼ í™•ì¸í•˜ì—¬, í•´ë‹¹ host ipë¥¼ ì‚¬ìš©í•˜ë©´ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤ (Master, Worker IPë¡œ ì ‘ì†ì´ ëª¨ë‘ ê°€ëŠ¥)</del></em></p><ul><li>Service ë¥¼ NodePort ë¡œ ì„¤ì •í•˜ì˜€ê¸°ë•Œë¬¸ì— í´ëŸ¬ìŠ¤í„° ë‚´ ëª¨ë“  ë…¸ë“œì˜ IPë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.</li></ul></blockquote><h1 id="Truuble-Shooting"><a href="#Truuble-Shooting" class="headerlink" title="Truuble Shooting"></a>Truuble Shooting</h1><h2 id="Artifacts-ë˜ëŠ”-Executions-íƒ­ì—ì„œ-error-mysql-query-failed-errno-2006"><a href="#Artifacts-ë˜ëŠ”-Executions-íƒ­ì—ì„œ-error-mysql-query-failed-errno-2006" class="headerlink" title="Artifacts ë˜ëŠ” Executions íƒ­ì—ì„œ error mysql_query failed errno 2006"></a>Artifacts ë˜ëŠ” Executions íƒ­ì—ì„œ error mysql_query failed errno 2006</h2><p>í•´ë‹¹ íƒ­ìœ¼ë¡œ ì´ë™í•˜ë©´ mysql_query failed ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì´ë•Œì—ëŠ” metadata-grpc-deployment pod ë¥¼ ì¬ì‹œì‘ í•˜ë©´ ëœë‹¤.</p><p><code>kubectl get pod &#123;pod_name&#125; -n kubeflow -o yaml | kubectl replace --force -f-</code> </p><h1 id="Kubeflow-ì‚­ì œ"><a href="#Kubeflow-ì‚­ì œ" class="headerlink" title="Kubeflow ì‚­ì œ"></a>Kubeflow ì‚­ì œ</h1><p>Kubeflow ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ <strong>kfctl delete</strong> ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;KF_DIR&#125;</span></span><br><span class="line">kfctl delete -f <span class="variable">$&#123;CONFIG_FILE&#125;</span></span><br></pre></td></tr></table></figure><ul><li><p>ëª…ë ¹ì–´ ìˆ˜í–‰ í›„ <strong>kubectl get all -n kubeflow</strong> ë¡œ ëª¨ë“  ë‚´ìš©ì´ ì‚­ì œë˜ì—ˆëŠ”-f ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  root@k8s-master:~/kubeflow/my-kubeflow<span class="comment"># kubectl get all -n kubeflow</span></span><br><span class="line">No resources found.</span><br></pre></td></tr></table></figure></li></ul><hr><p>2020.01.23 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-install_kubeflow/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] K8s cluster êµ¬ì¶•</title>
      <link>https://jx2lee.github.io/cloud-install_k8s/</link>
      <guid>https://jx2lee.github.io/cloud-install_k8s/</guid>
      <pubDate>Tue, 21 Jan 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;K8s clusterëŠ” Master 3ëŒ€&lt;em&gt;(k8s-master/k8s-node1/k8s-node2)&lt;/em&gt; / Worker 2ëŒ€&lt;em&gt;(k8s-node3/k8s-node4)&lt;/em&gt;ë¡œ êµ¬ì„±í•œë‹¤.&lt;/p&gt;
&lt;p&gt;k8sëŠ” 1.15.3 version ì´ë©° ì„œë²„ëŠ” ubuntu 18.04 ì´ë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update Note&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.02.25 : kubeadm init ì‹œ &lt;code&gt;--upload-certs&lt;/code&gt; ì˜µì…˜ ë¶€ê°€ ì„¤ëª…&lt;/li&gt;
&lt;li&gt;2020.03.12 : Calico CNI ì„¤ì • ì¶”ê°€&lt;/li&gt;
&lt;li&gt;2020.03.17 : Trouble shooting ì¶”ê°€ - Calico node not working &lt;/li&gt;
&lt;li&gt;2020.06.04 : Taint NoSchedule ë³€ê²½ (&lt;code&gt;/ to =&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;2020.09.26 : VIP í¬íŠ¸ ì¶”ê°€ ì„¤ëª…&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>K8s clusterëŠ” Master 3ëŒ€<em>(k8s-master/k8s-node1/k8s-node2)</em> / Worker 2ëŒ€<em>(k8s-node3/k8s-node4)</em>ë¡œ êµ¬ì„±í•œë‹¤.</p><p>k8sëŠ” 1.15.3 version ì´ë©° ì„œë²„ëŠ” ubuntu 18.04 ì´ë‹¤.</p><p><strong>Update Note</strong></p><ul><li>2020.02.25 : kubeadm init ì‹œ <code>--upload-certs</code> ì˜µì…˜ ë¶€ê°€ ì„¤ëª…</li><li>2020.03.12 : Calico CNI ì„¤ì • ì¶”ê°€</li><li>2020.03.17 : Trouble shooting ì¶”ê°€ - Calico node not working </li><li>2020.06.04 : Taint NoSchedule ë³€ê²½ (<code>/ to =</code>)</li><li>2020.09.26 : VIP í¬íŠ¸ ì¶”ê°€ ì„¤ëª…</li></ul><a id="more"></a><h1 id="ê³µí†µ"><a href="#ê³µí†µ" class="headerlink" title="ê³µí†µ"></a>ê³µí†µ</h1><p>ëª¨ë“  ë…¸ë“œì— ê³µí†µìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y apt-transport-https curl</span><br><span class="line">apt-get update</span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - <span class="comment"># Docker ê³µì‹ GPG key</span></span><br><span class="line">sudo apt-key fingerprint 0EBFCD88</span><br><span class="line">sudo add-apt-repository \</span><br><span class="line">    <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">    <span class="subst">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">    stable&quot;</span></span><br><span class="line">apt-get install -y docker-ce</span><br></pre></td></tr></table></figure><p>1.15.3 ë²„ì ¼ì— ë§ëŠ” kubelet / kubeadm / kubectl ë¥¼ ì„¤ì¹˜í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -</span><br><span class="line"><span class="built_in">echo</span> deb http://apt.kubernetes.io/ kubernetes-xenial main &gt; /etc/apt/sources.list.d/kubernetes.list</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install -y kubeadm=1.15.3-00 kubelet=1.15.3-00 kubectl=1.15.3-00</span><br></pre></td></tr></table></figure><p>KubernetsëŠ” swapë¥¼ offì‹œì¼œì•¼ ì‘ë™í•˜ë¯€ë¡œ swap ë©”ëª¨ë¦¬ë¥¼ ëˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">free</span><br><span class="line">swapoff -a</span><br><span class="line">vi /etc/fstab</span><br><span class="line"><span class="comment"># ì¬ë¶€íŒ…ì‹œ ìë™ìœ¼ë¡œ swapoff í•˜ë ¤ë©´ ìœ„ íŒŒì¼ì—ì„œ swap ë¶€ë¶„ ì£¼ì„ ì²˜ë¦¬</span></span><br></pre></td></tr></table></figure><p>ë°©í™”ë²½ì„ ë‚´ë ¤ì¤€ë‹¤ <em>(ubnut : ufw)</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop ufw </span><br><span class="line">systemctl <span class="built_in">disable</span> ufw</span><br></pre></td></tr></table></figure><p><strong>/etc/docker/daemon.json</strong> ì˜ íŒŒì¼ì„ ìˆ˜ì •í•˜ê³  ë„ì»¤ ë°ëª¬ì„ ì¬ì‹¤í–‰í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; /etc/docker/daemon.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">&quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;], &quot;log-driver&quot;: &quot;json-file&quot;,</span></span><br><span class="line"><span class="string">&quot;log-opts&quot;: &#123;</span></span><br><span class="line"><span class="string">&quot;max-size&quot;: &quot;100m&quot; &#125;,</span></span><br><span class="line"><span class="string">&quot;storage-driver&quot;: &quot;overlay2&quot;, &quot;insecure-registries&quot;: [&quot;192.168.179.185:5000&quot;]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><blockquote><ul><li><em>insecure-registries ëŠ” VIP(virtual ip)ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ë°, ì‚¼ì¤‘í™” í–ˆì„ ë•Œ ë§ˆìŠ¤í„° ê°„ í†µì‹ ì„ ìœ„í•œ ip. ë’¤ì— í¬íŠ¸ 5000ì€ í›„ì— ë§ˆìŠ¤í„° ë¶€ë¶„ì— ì„¤ì¹˜í•  keepalived ì—ì„œ ì‚¬ìš©í•œë‹¤</em></li><li>VIP Port: kubernetes API Server í†µì‹ ì— ì‚¬ìš©í•˜ëŠ” default port</li></ul></blockquote><p>ìœ„ ì»¤ë§¨ë“œ ë¼ì¸ì„ ì •ë¦¬í•œ scriptëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. í•´ë‹¹ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ 5ê°œ ë…¸ë“œì—ì„œ ëª¨ë‘ ì‹¤í–‰í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># install basic package &amp; docker-ce &amp; k8s utils</span></span><br><span class="line"></span><br><span class="line">apt-get install -y apt-transport-https curl</span><br><span class="line">apt-get update</span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - <span class="comment"># Docker ê³µì‹ GPG key</span></span><br><span class="line">sudo apt-key fingerprint 0EBFCD88</span><br><span class="line">sudo add-apt-repository \</span><br><span class="line">  <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">  <span class="subst">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">  stable&quot;</span></span><br><span class="line">apt-get install -y docker-ce</span><br><span class="line"></span><br><span class="line">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -</span><br><span class="line"><span class="built_in">echo</span> deb http://apt.kubernetes.io/ kubernetes-xenial main &gt; /etc/apt/sources.list.d/kubernetes.list</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install -y kubeadm=1.15.3-00 kubelet=1.15.3-00 kubectl=1.15.3-00</span><br><span class="line"></span><br><span class="line">free</span><br><span class="line">swapoff -a</span><br><span class="line"></span><br><span class="line">ufw <span class="built_in">disable</span></span><br><span class="line">ufw status</span><br><span class="line"></span><br><span class="line">cat &gt; /etc/docker/daemon.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">&quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;], &quot;log-driver&quot;: &quot;json-file&quot;,</span></span><br><span class="line"><span class="string">&quot;log-opts&quot;: &#123;</span></span><br><span class="line"><span class="string">&quot;max-size&quot;: &quot;100m&quot; &#125;,</span></span><br><span class="line"><span class="string">&quot;storage-driver&quot;: &quot;overlay2&quot;, &quot;insecure-registries&quot;: [&quot;192.168.179.185:5000&quot;]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">systemctl daemon-reload &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;restart docker-daemon&quot;</span></span><br><span class="line">systemctl restart docker &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;restart docker&quot;</span></span><br></pre></td></tr></table></figure><h1 id="Master-Node"><a href="#Master-Node" class="headerlink" title="Master Node"></a>Master Node</h1><h2 id="Keepalived-ì„¤ì¹˜"><a href="#Keepalived-ì„¤ì¹˜" class="headerlink" title="Keepalived ì„¤ì¹˜"></a>Keepalived ì„¤ì¹˜</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y keepalived</span><br><span class="line">vi /etc/keepalived/keepalived.conf</span><br></pre></td></tr></table></figure><p><code>keepalived.conf</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    interface enp0s8</span><br><span class="line">    virtual_router_id 50</span><br><span class="line">    priority 100 <span class="comment"># ì´í›„ ë§ˆìŠ¤í„°ë¶€í„° 1ì”© ê°ì†Œí•˜ì—¬ ìˆ˜ì •</span></span><br><span class="line">    advert_int 1</span><br><span class="line">    nopreempt</span><br><span class="line">    authentication &#123;</span><br><span class="line">        auth_type PASS</span><br><span class="line">        auth_pass $ place secure password here.</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.179.185</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>interface : ifconfig -aë¡œ í™•ì¸</li><li>priority : master ë§ˆë‹¤ ë‹¤ë¥¸ ê°’ ì„¤ì •<ul><li>priority ê°’ì´ ë†’ìœ¼ë©´ ìµœìš°ì„ ì ìœ¼ë¡œ master ì—­í•  ìˆ˜í–‰</li><li>100, 99, 98 ë¡œ ì„¤ì •</li></ul></li><li>virtual_ipaddress : ì•ì „ì— docker daemonì˜ vip ì£¼ì†Œ ê¸°ì…<ul><li>VIP ì´ì–´ë„ ì•„ë¬´ ipë‚˜ ì‚¬ìš©í•˜ë©´ í˜¹ì—¬ë‚˜ ì¶©ëŒì´ ì¼ì–´ë‚ ê¹Œë´ í• ë‹¹ë°›ì€ ip ì‚¬ìš©</li></ul></li></ul><p>keepalived ì„œë¹„ìŠ¤ ì¬ì‹œì‘ í›„ ìƒíƒœ(<code>$ ip addr</code>)ë¥¼ í™•ì¸í•œë‹¤</p><p><code>$ systemctl restart keepalived &amp;&amp; systemctl status keepalived</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">3: enp6s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000</span><br><span class="line">    link/ether 64:e5:99:fa:52:c1 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.179.172/24 brd 192.168.179.255 scope global enp6s0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet 192.168.179.185/32 scope global enp6s0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::66e5:99ff:fefa:52c1/64 scope link </span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure><blockquote><p><em>VIPë¡œ ì„¤ì •í•œ 192.168.179.171 ì´ ë³´ì´ëŠ” ê²ƒì„ í™•ì¸ // í•˜ë‚˜ì˜ masterì—ë§Œ ë³´ì„ (ë‚˜ë¨¸ì§€ëŠ” stand by)</em></p></blockquote><h2 id="K8s-ì„¤ì¹˜"><a href="#K8s-ì„¤ì¹˜" class="headerlink" title="K8s ì„¤ì¹˜"></a>K8s ì„¤ì¹˜</h2><p><strong>kubeadm-config.yaml</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: kubeadm.k8s.io/v1beta2</span><br><span class="line">kind: ClusterConfiguration</span><br><span class="line">kubernetesVersion: <span class="string">&quot;v1.15.3&quot;</span></span><br><span class="line">controlPlaneEndpoint: <span class="string">&quot;192.168.179.185:6443&quot;</span></span><br><span class="line">networking:</span><br><span class="line">    serviceSubnet: <span class="string">&quot;10.96.0.0/16&quot;</span></span><br><span class="line">    podSubnet: <span class="string">&quot;10.244.0.0/16&quot;</span></span><br><span class="line">apiServer:</span><br><span class="line">    extraArgs:</span><br><span class="line">        advertise-address: <span class="string">&quot;192.168.179.185â€</span></span><br></pre></td></tr></table></figure><ul><li>ìœ„ Yaml íŒŒì¼ì€ ì²« ë²ˆì§¸ masterì—ì„œë§Œ ì‘ì„± í›„ init ì„ ìˆ˜í–‰í•œë‹¤.</li><li>v1.15.3ìœ¼ë¡œ ì‘ì„±í•œë‹¤.</li></ul><blockquote><p><em>controlPlaneEndpointì™€ advertise-address ëŠ” VIPì´ê³  í¬íŠ¸ë¡œ 6443ìœ¼ë¡œ ì§€ì •</em></p></blockquote><p>Yaml íŒŒì¼ì„ ì´ìš©í•´ í´ëŸ¬ìŠ¤í„° ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•œë‹¤.</p><p><code>$ kubeadm init --config=kubeadm-config.yaml --upload-certs</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Your Kubernetes control-plane has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line"></span><br><span class="line">  mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  sudo cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  sudo chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run <span class="string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:</span><br><span class="line">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class="line"></span><br><span class="line">You can now join any number of the control-plane node running the following <span class="built_in">command</span> on each as root:</span><br><span class="line"></span><br><span class="line">  kubeadm join 192.168.179.185:6443 --token iicz2g.0a8b07vasikwuthz \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:249ee21a200d807f21dad0102eb638e50904102c7e7ae8f6388c1654f60ae1a0 \</span><br><span class="line">    --control-plane --certificate-key 553c75881e6825bf9e5f3887b2100de4a3d979777a313b70281c5bbe5ddeef80</span><br><span class="line"></span><br><span class="line">Please note that the certificate-key gives access to cluster sensitive data, keep it secret!</span><br><span class="line">As a safeguard, uploaded-certs will be deleted <span class="keyword">in</span> two hours; If necessary, you can use </span><br><span class="line"><span class="string">&quot;kubeadm init phase upload-certs --upload-certs&quot;</span> to reload certs afterward.</span><br><span class="line"></span><br><span class="line">Then you can join any number of worker nodes by running the following on each as root:</span><br><span class="line"></span><br><span class="line">kubeadm join 192.168.179.185:6443 --token iicz2g.0a8b07vasikwuthz \</span><br><span class="line">    --discovery-token-ca-cert-hash sha256:249ee21a200d807f21dad0102eb638e50904102c7e7ae8f6388c1654f60ae1a0 </span><br></pre></td></tr></table></figure><blockquote><p><strong>*â€“upload-certs</strong> ì˜µì…˜ì€ Master ì´ì¤‘í™” ì‹œ key ì¸ì¦ì„ init ëª…ë ¹ê³¼ ìˆ˜í–‰í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. ì´ ì˜µì…˜ì„ ì£¼ì§€ ì•Šìœ¼ë©´ ì´ì¤‘í™” ëŒ€ìƒ Master ì— key ì¸ì¦ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.*</p></blockquote><p>ì„œë²„ ì£¼ì†Œ ë° ì¸ì¦ì„œë¥¼ ë³µì‚¬í•˜ëŠ” ë‹¨ê³„ë¡œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure><p><code>$ kubectl get pods --all-namespaces</code> ëª…ë ¹ì–´ë¡œ ì•„ë˜ì™€ ê°™ì€ íŒŒë“œê°€ ìƒì„±ë˜ê¸° ê¸°ë‹¤ë¦°ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># kgpo --all-namespaces</span></span><br><span class="line">NAMESPACE     NAME                                 READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system   coredns-5c98db65d4-9fpzf             0/1     Pending   0          3m2s</span><br><span class="line">kube-system   coredns-5c98db65d4-vn8d5             0/1     Pending   0          3m2s</span><br><span class="line">kube-system   etcd-k8s-master                      1/1     Running   0          119s</span><br><span class="line">kube-system   kube-apiserver-k8s-master            1/1     Running   0          2m14s</span><br><span class="line">kube-system   kube-controller-manager-k8s-master   1/1     Running   0          2m21s</span><br><span class="line">kube-system   kube-proxy-c4cnn                     1/1     Running   0          3m1s</span><br><span class="line">kube-system   kube-scheduler-k8s-master            1/1     Running   0          2m7s</span><br></pre></td></tr></table></figure><blockquote><p><em>coredns ëŠ” CNIë¥¼ ì„¤ì¹˜í•´ì•¼ Running ìƒíƒœê°€ ëœë‹¤.</em></p></blockquote><p><a href="https://docs.projectcalico.org/v3.9/manifests/calico.yaml">calico yaml</a>ì„ ë‹¤ìš´ë°›ì•„ <strong>CALICO_IPV4POOL_CIDR</strong> ê°’ì„ 10.244.0.0/16 ìœ¼ë¡œ ë³€ê²½í•œ í›„ CNI ë¥¼ ì„¤ì¹˜í•œë‹¤.</p><p><code>$ kubectl apply -f kube-calico.yaml</code></p><blockquote><p><em>CALICO_IPV4POOL_CIDR ê°’ì„ 10.244.0.0/16 ìœ¼ë¡œ ë³€ê²½ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•œ í›„ ë°°í¬í•œë‹¤. í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•œ ë…¸ë“œ IP ëŒ€ì—­ê³¼ ê°™ìœ¼ë©´ ì¶©ëŒì´ ì¼ì–´ë‚œë‹¤ê³  í•œë‹¤.</em></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">root@k8s-master:~<span class="comment"># kgpo --all-namespaces</span></span><br><span class="line">NAMESPACE     NAME                                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system   calico-kube-controllers-56cd854695-65j42   1/1     Running   0          89s</span><br><span class="line">kube-system   calico-node-ptq8x                          1/1     Running   0          89s</span><br><span class="line">kube-system   coredns-5c98db65d4-9fpzf                   1/1     Running   0          7m29s</span><br><span class="line">kube-system   coredns-5c98db65d4-vn8d5                   1/1     Running   0          7m29s</span><br><span class="line">kube-system   etcd-k8s-master                            1/1     Running   0          6m26s</span><br><span class="line">kube-system   kube-apiserver-k8s-master                  1/1     Running   0          6m41s</span><br><span class="line">kube-system   kube-controller-manager-k8s-master         1/1     Running   0          6m48s</span><br><span class="line">kube-system   kube-proxy-c4cnn                           1/1     Running   0          7m28s</span><br><span class="line">kube-system   kube-scheduler-k8s-master                  1/1     Running   0          6m34s</span><br></pre></td></tr></table></figure><p>kubeadm init ì‹œ ìƒì„±ëœ ì»¤ë§¨ë“œë¥¼ ë‹¤ë¥¸ ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ì‹¤í–‰í•˜ì—¬ Join í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join 192.168.179.185:6443 --token iicz2g.0a8b07vasikwuthz \</span><br><span class="line"> --discovery-token-ca-cert-hash sha256:249ee21a200d807f21dad0102eb638e50904102c7e7ae8f6388c1654f60ae1a0 \</span><br><span class="line"> --control-plane --certificate-key 553c75881e6825bf9e5f3887b2100de4a3d979777a313b70281c5bbe5ddeef80</span><br></pre></td></tr></table></figure><p>ì„œë²„ ì£¼ì†Œ ë° ì¸ì¦ì„œë¥¼ ë³µì‚¬í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure><h1 id="Worker-Node"><a href="#Worker-Node" class="headerlink" title="Worker Node"></a>Worker Node</h1><p>kubeadm init ì‹œ ë‚˜ì˜¨ í† í°ê³¼ í•´ì‰¬ê°’ìœ¼ë¡œ ê° ì›Œì»¤ ë…¸ë“œì—ì„œ Join í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join 192.168.179.185:6443 --token iicz2g.0a8b07vasikwuthz \</span><br><span class="line"> --discovery-token-ca-cert-hash sha256:249ee21a200d807f21dad0102eb638e50904102c7e7ae8f6388c1654f60ae1a0</span><br></pre></td></tr></table></figure><h1 id="ì„¤ì¹˜-í™•ì¸"><a href="#ì„¤ì¹˜-í™•ì¸" class="headerlink" title="ì„¤ì¹˜ í™•ì¸"></a>ì„¤ì¹˜ í™•ì¸</h1><h2 id="Kubectl-get-nodes"><a href="#Kubectl-get-nodes" class="headerlink" title="Kubectl get nodes"></a>Kubectl get nodes</h2><p><code>kubectl get nodes -o wide</code><br>master nodeì—ì„œ í™•ì¸í•˜ë©´ í´ëŸ¬ìŠ¤í„°ì— í¬í•¨ëœ ë…¸ë“œë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NAME         STATUS   ROLES    AGE   VERSION   INTERNAL-IP       EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME</span><br><span class="line">k8s-master   Ready    master   44m   v1.15.3   192.168.179.172   &lt;none&gt;        Ubuntu 18.04.4 LTS   5.3.0-28-generic    docker://19.3.8</span><br><span class="line">k8s-node1    Ready    master   41m   v1.15.3   192.168.179.173   &lt;none&gt;        Ubuntu 18.04.3 LTS   4.15.0-88-generic   docker://19.3.6</span><br><span class="line">k8s-node2    Ready    master   40m   v1.15.3   192.168.179.174   &lt;none&gt;        Ubuntu 18.04.3 LTS   4.15.0-88-generic   docker://19.3.6</span><br><span class="line">k8s-node3    Ready    &lt;none&gt;   40m   v1.15.3   192.168.179.175   &lt;none&gt;        Ubuntu 18.04.3 LTS   4.15.0-88-generic   docker://19.3.8</span><br><span class="line">k8s-node4    Ready    &lt;none&gt;   40m   v1.15.3   192.168.179.176   &lt;none&gt;        Ubuntu 18.04.3 LTS   4.15.0-88-generic   docker://19.3.8</span><br></pre></td></tr></table></figure><h2 id="ì„ íƒì‚¬í•­-Master-nodeì—ë„-pod-ë°°í¬ê°€-ê°€ëŠ¥í•œ-ìƒíƒœë¡œ-ë³€í™˜"><a href="#ì„ íƒì‚¬í•­-Master-nodeì—ë„-pod-ë°°í¬ê°€-ê°€ëŠ¥í•œ-ìƒíƒœë¡œ-ë³€í™˜" class="headerlink" title="(ì„ íƒì‚¬í•­) Master nodeì—ë„ pod ë°°í¬ê°€ ê°€ëŠ¥í•œ ìƒíƒœë¡œ ë³€í™˜"></a>(ì„ íƒì‚¬í•­) Master nodeì—ë„ pod ë°°í¬ê°€ ê°€ëŠ¥í•œ ìƒíƒœë¡œ ë³€í™˜</h2><p>masterì— Podë¥¼ ë°°í¬í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ taint ì¡°ê±´ì„ í•´ì œí•œë‹¤.</p><p><code>kubectl taint nodes &#123;node-name&#125; node-role.kubernetes.io=master:NoSchedule-</code></p><blockquote><p><em>ë§Œì•½ ë…¸ë“œë¥¼ ë¦¬ìŠ¤ì¼€ì¥´ ë˜ì§€ ì•Šê²Œ ë³µêµ¬í•˜ë ¤ë©´ kubectl taint nodes {node-name} node-role.kubernetes.io/master:NoSchedule</em></p></blockquote><h1 id="Trouble-Shooting"><a href="#Trouble-Shooting" class="headerlink" title="Trouble-Shooting"></a>Trouble-Shooting</h1><h2 id="calico-node-ê°€-Running-ìƒíƒœì´ì§€ë§Œ-Unhealthy-ë¬¸ì œ"><a href="#calico-node-ê°€-Running-ìƒíƒœì´ì§€ë§Œ-Unhealthy-ë¬¸ì œ" class="headerlink" title="calico node ê°€ Running ìƒíƒœì´ì§€ë§Œ Unhealthy ë¬¸ì œ"></a>calico node ê°€ Running ìƒíƒœì´ì§€ë§Œ Unhealthy ë¬¸ì œ</h2><p><a href="https://github.com/projectcalico/calico/issues/2904">https://github.com/projectcalico/calico/issues/2904</a> ë¬¸ì œì™€ ê°™ë‹¤. calico-node ê°€ í´ëŸ¬ìŠ¤í„° ë‚´ ë…¸ë“œ ìˆ˜ë§Œí¼ ê¸°ë™í•˜ì§€ë§Œ 0/1 Running ìƒíƒœì˜€ë‹¤. ë¬¸ì œê°€ ìˆëŠ” íŒŒë“œë¥¼ describe í•´ë³¸ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Events:</span><br><span class="line">  Type     Reason          Age                   From                 Message</span><br><span class="line">  ----     ------          ----                  ----                 -------</span><br><span class="line">  Normal   Pulled          45m                   kubelet, k8s-master  Container image <span class="string">&quot;calico/cni:v3.9.5&quot;</span> already present on machine</span><br><span class="line">  Normal   Created         45m                   kubelet, k8s-master  Created container upgrade-ipam</span><br><span class="line">  Normal   Started         45m                   kubelet, k8s-master  Started container upgrade-ipam</span><br><span class="line">  Normal   Scheduled       45m                   default-scheduler    Successfully assigned kube-system/calico-node-v5rgk to k8s-master</span><br><span class="line">  Normal   Started         45m                   kubelet, k8s-master  Started container install-cni</span><br><span class="line">  Normal   Pulled          45m                   kubelet, k8s-master  Container image <span class="string">&quot;calico/cni:v3.9.5&quot;</span> already present on machine</span><br><span class="line">  Normal   Created         45m                   kubelet, k8s-master  Created container install-cni</span><br><span class="line">  Normal   Started         45m                   kubelet, k8s-master  Started container flexvol-driver</span><br><span class="line">  Normal   Pulled          45m                   kubelet, k8s-master  Container image <span class="string">&quot;calico/pod2daemon-flexvol:v3.9.5&quot;</span> already present on machine</span><br><span class="line">  Normal   Created         45m                   kubelet, k8s-master  Created container flexvol-driver</span><br><span class="line">  Normal   Pulled          45m                   kubelet, k8s-master  Container image <span class="string">&quot;calico/node:v3.9.5&quot;</span> already present on machine</span><br><span class="line">  Normal   Created         45m                   kubelet, k8s-master  Created container calico-node</span><br><span class="line">  Normal   Started         45m                   kubelet, k8s-master  Started container calico-node</span><br><span class="line">  Warning  Unhealthy       30m (x34 over 45m)    kubelet, k8s-master  Readiness probe failed: calico/node is not ready: felix is not ready: readiness probe reporting 503</span><br><span class="line">  Warning  Unhealthy       25m (x76 over 45m)    kubelet, k8s-master  Readiness probe failed: calico/node is not ready: felix is not ready: Get http://localhost:9099/readiness: dial tcp 127.0.0.1:9099: connect: connection refused</span><br><span class="line">  Warning  Unhealthy       15m (x116 over 45m)   kubelet, k8s-master  Liveness probe failed: calico/node is not ready: Felix is not live: Get http://localhost:9099/liveness: dial tcp 127.0.0.1:9099: connect: connection refused</span><br><span class="line">  Warning  FailedMount     12m                   kubelet, k8s-master  MountVolume.SetUp failed <span class="keyword">for</span> volume <span class="string">&quot;calico-node-token-9j8gt&quot;</span> : couldn<span class="string">&#x27;t propagate object cache: timed out waiting for the condition</span></span><br><span class="line"><span class="string">  Normal   SandboxChanged  12m                   kubelet, k8s-master  Pod sandbox changed, it will be killed and re-created.</span></span><br><span class="line"><span class="string">  Normal   Pulled          12m                   kubelet, k8s-master  Container image &quot;calico/cni:v3.9.5&quot; already present on machine</span></span><br><span class="line"><span class="string">  Normal   Started         12m                   kubelet, k8s-master  Started container upgrade-ipam</span></span><br><span class="line"><span class="string">  Normal   Created         12m                   kubelet, k8s-master  Created container upgrade-ipam</span></span><br><span class="line"><span class="string">  Normal   Started         12m (x2 over 12m)     kubelet, k8s-master  Started container install-cni</span></span><br><span class="line"><span class="string">  Normal   Pulled          12m (x2 over 12m)     kubelet, k8s-master  Container image &quot;calico/cni:v3.9.5&quot; already present on machine</span></span><br><span class="line"><span class="string">  Normal   Created         12m (x2 over 12m)     kubelet, k8s-master  Created container install-cni</span></span><br><span class="line"><span class="string">  Normal   Started         12m                   kubelet, k8s-master  Started container flexvol-driver</span></span><br><span class="line"><span class="string">  Normal   Pulled          12m                   kubelet, k8s-master  Container image &quot;calico/pod2daemon-flexvol:v3.9.5&quot; already present on machine</span></span><br><span class="line"><span class="string">  Normal   Created         12m                   kubelet, k8s-master  Created container flexvol-driver</span></span><br><span class="line"><span class="string">  Normal   Pulled          12m                   kubelet, k8s-master  Container image &quot;calico/node:v3.9.5&quot; already present on machine</span></span><br><span class="line"><span class="string">  Normal   Created         12m                   kubelet, k8s-master  Created container calico-node</span></span><br><span class="line"><span class="string">  Normal   Started         12m                   kubelet, k8s-master  Started container calico-node</span></span><br><span class="line"><span class="string">  Warning  Unhealthy       11m (x2 over 12m)     kubelet, k8s-master  Readiness probe failed: calico/node is not ready: felix is not ready: readiness probe reporting 503</span></span><br><span class="line"><span class="string">  Warning  Unhealthy       7m34s (x19 over 12m)  kubelet, k8s-master  Liveness probe failed: calico/node is not ready: Felix is not live: Get http://localhost:9099/liveness: dial tcp 127.0.0.1:9099: connect: connection refused</span></span><br><span class="line"><span class="string">  Warning  Unhealthy       2m30s (x38 over 12m)  kubelet, k8s-master  Readiness probe failed: calico/node is not ready: felix is not ready: Get http://localhost:9099/readiness: dial tcp 127.0.0.1:9099: connect: connection refused</span></span><br></pre></td></tr></table></figure><blockquote><p><em>ë„ˆë¬´ ê¸¸ì–´ Event ë¶€ë¶„ë§Œ ì‘ì„±í•˜ì˜€ë‹¤.</em></p></blockquote><p>ì¢€ ë” deep í•œ ë¡œê·¸ë¥¼ ì°¾ê³ ì í•´ë‹¹ íŒŒë“œ log ë¥¼ ì°¾ì•„ë³¸ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">2019-10-03 04:34:38.296 [WARNING][16449] int_dataplane.go 781: failed to wipe the XDP state error=failed to load BPF program (/tmp/felix-bpf-824808941): <span class="built_in">stat</span> /sys/fs/bpf/calico/xdp/prefilter_v1_calico_tmp_A: no such file or directory</span><br><span class="line">libbpf: Error <span class="keyword">in</span> bpf_object__probe_name():Operation not permitted(1). Couldn<span class="string">&#x27;t load basic &#x27;</span>r0 = 0<span class="string">&#x27; BPF program.</span></span><br><span class="line"><span class="string">libbpf: failed to load object &#x27;</span>/tmp/felix-bpf-824808941<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Error: failed to load object file</span></span><br></pre></td></tr></table></figure><p>ìœ„ ê¹ƒí—™ ì´ìŠˆ ë§í¬ë¥¼ í™•ì¸í•´ë³´ë©´ OS ì»¤ë„ë‹¨ì—ì„œ BPF ê´€ë ¨ ì˜¤ë¸Œì íŠ¸ë¥¼ ì½ì–´ë“œë¦¬ì§€ ëª»í•œ ìƒíƒœì˜€ë‹¤. ì´ìŠˆ ë‚´ìš©ë“¤ì„ ì‚´í´ë³´ë‹ˆ OS secure boot í•œ ê²½ìš° ìƒê¸¸ ìˆ˜ ìˆë‹¤í•˜ë©° <code>$ mokutil --disable-validation</code> ëª…ë ¹ì–´ë¡œ ì•ˆì „ ëª¨ë“œë¡œ ë¶€íŒ…í•˜ì§€ ëª»í•˜ê²Œ ì„¤ì •í•˜ê³  ì¬ë¶€íŒ… í•˜ì˜€ë‹¤. ì¬ë¶€íŒ… ì‹œ ëª…ë ¹ì–´ë¡œ ì„¤ì •í•œ íŒ¨ìŠ¤ì›Œë“œë¡œ secure-mode boot ì„ disabled ë¡œ ì„¤ì •í•˜ê³  ì¬ë¶€íŒ… í•˜ë‹ˆ calico node ê°€ ë¬¸ì œì—†ì´ ê¸°ë™ë¨ì„ í™•ì¸í•˜ì˜€ë‹¤.</p><hr><p>2020.01.22 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-install_k8s/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Kubeflow overview</title>
      <link>https://jx2lee.github.io/cloud-introduction_to_kubeflow/</link>
      <guid>https://jx2lee.github.io/cloud-introduction_to_kubeflow/</guid>
      <pubDate>Sun, 12 Jan 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Kubeflow ëŠ” &lt;em&gt;Kubernetes ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” ML toolkit&lt;/em&gt; ì´ì, ML íŒŒì´í”„ ë¼ì¸ì„ êµ¬ì¶•í•˜ê³  ì‹¤í—˜í•˜ëŠ” data scientistë¥¼ ìœ„í•œ í”Œë«í¼ì´ë‹¤. ë¨¸ì‹ ëŸ¬ë‹ ì‹œìŠ¤í…œ ê°œë°œ, í…ŒìŠ¤íŠ¸ ë° í”„ë¡œë•ì…˜ ìˆ˜ì¤€ì˜ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ ë‹¤ì–‘í•œ í™˜ê²½ì— ë°°í¬í•˜ë ¤ëŠ” &lt;em&gt;ë¨¸ì‹ ëŸ¬ë‹ ì—”ì§€ë‹ˆì–´&lt;/em&gt; ë° &lt;em&gt;ìš´ì˜ íŒ€&lt;/em&gt;ì„ ìœ„í•œ ê²ƒì´ë‹¤. í¬ìŠ¤íŠ¸ëŠ” Conceptual overview, ML workflow, Kuberflow Components, interface, example ìˆœì„œë¡œ ì‘ì„±í•˜ì˜€ë‹¤.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;kubeflow 0.7.0 version ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ë‹¤&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Kubeflow ëŠ” <em>Kubernetes ìœ„ì—ì„œ ë™ì‘í•˜ëŠ” ML toolkit</em> ì´ì, ML íŒŒì´í”„ ë¼ì¸ì„ êµ¬ì¶•í•˜ê³  ì‹¤í—˜í•˜ëŠ” data scientistë¥¼ ìœ„í•œ í”Œë«í¼ì´ë‹¤. ë¨¸ì‹ ëŸ¬ë‹ ì‹œìŠ¤í…œ ê°œë°œ, í…ŒìŠ¤íŠ¸ ë° í”„ë¡œë•ì…˜ ìˆ˜ì¤€ì˜ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ ë‹¤ì–‘í•œ í™˜ê²½ì— ë°°í¬í•˜ë ¤ëŠ” <em>ë¨¸ì‹ ëŸ¬ë‹ ì—”ì§€ë‹ˆì–´</em> ë° <em>ìš´ì˜ íŒ€</em>ì„ ìœ„í•œ ê²ƒì´ë‹¤. í¬ìŠ¤íŠ¸ëŠ” Conceptual overview, ML workflow, Kuberflow Components, interface, example ìˆœì„œë¡œ ì‘ì„±í•˜ì˜€ë‹¤.</p><blockquote><p><em>kubeflow 0.7.0 version ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ë‹¤</em></p></blockquote><a id="more"></a><h1 id="Conceptual-overview"><a href="#Conceptual-overview" class="headerlink" title="Conceptual overview"></a>Conceptual overview</h1><p>Kubernetes ìœ„ ML ì‹œìŠ¤í…œì˜ êµ¬ì„± ìš”ì†Œë¥¼ ë°°ì¹˜í•œ ê·¸ë¦¼ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><p><img src="https://www.kubeflow.org/docs/images/kubeflow-overview-platform-diagram.svg" alt=""></p><p>KubeflowëŠ” ML ì‹œìŠ¤í…œì„ ë°°í¬, í™•ì¥ ë° ê´€ë¦¬í•˜ê¸° ìœ„í•œ í”Œë«í¼ìœ¼ë¡œ Kubernetes ê¸°ë°˜ìœ¼ë¡œ êµ¬ì„±í•œë‹¤. Kubeflow interface ë¥¼ í†µí•´ ML toolsì„ ì§€ì •í•  ìˆ˜ ìˆê³  í´ë¼ìš°ë“œ ë¿ ì•„ë‹ˆë¼ on-premise ì— ë™ì¼í•œ worflowë¥¼ ë°°í¬í•  ìˆ˜ ìˆì–´ íŠ¹ì • í”Œë«í¼ì— ì¢…ì†ë˜ì§€ ì•ŠëŠ”ë‹¤. ê° êµ¬ì„± ìš”ì†Œë“¤ì´ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ”ì§€ëŠ” ë’¤ kubeflow Componentsì—ì„œ ì‚´í´ë³¸ë‹¤.</p><h1 id="ML-workflow"><a href="#ML-workflow" class="headerlink" title="ML workflow"></a>ML workflow</h1><p>ë§ì€ ì‚¬ëŒë“¤ì˜ ì„ ì…ê²¬ ì¤‘ í•˜ë‚˜ê°€ ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ ê°œë°œì´ ML ì‹œìŠ¤í…œì˜ ëŒ€ë¶€ë¶„ì„ ì°¨ì§€í•  ê²ƒì´ë¼ ìƒê°í•œë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ëª¨ë¸ì„ ê°œë°œí•˜ëŠ” ì‹œê°„ ë³´ë‹¤ ë°ì´í„° íƒìƒ‰ë¶€í„° ë°ì´í„° ë¶„ì„, ê·¸ë¦¬ê³  ê°œë°œëœ ëª¨ë¸ì„ ë°˜ë³µì ìœ¼ë¡œ í•™ìŠµí•˜ë©° íŠœë‹í•˜ëŠ” ì‹œê°„ì´ í›¨ì”¬ ê¸¸ë‹¤. </p><p>ì¦‰, ML ì‹œìŠ¤í…œ ê°œë°œì€ ë°˜ë³µì ì¸ í”„ë¡œì„¸ìŠ¤ë¡œ, workflowì˜ ê° ë‹¨ê³„ë¥¼ í‰ê°€í•˜ê³  ìµœê³ ì˜ í¼í¬ë¨¼ìŠ¤ë¥¼ ë‚¼ ìˆ˜ ìˆê²Œ ëª¨ë¸ ë° íŒŒë¼ë¯¸í„° ë³€ê²½ ì‚¬í•­ì„ ì ìš©í•´ì•¼ í•œë‹¤. ì•„ë˜ëŠ” ì‹¤í—˜ ë° ìƒì‚°<em>(ì‹¤ì œ ë°°í¬)</em> ê´€ì ì—ì„œì˜ workflowë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.</p><p><img src="https://www.kubeflow.org/docs/images/kubeflow-overview-workflow-diagram-1.svg" alt=""></p><p>ê° ë‹¨ê³„ë³„ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>Experimental phase : ì‹¤í—˜ ë‹¨ê³„<ul><li>Identify problem and collect and analyse data : ML ì‹œìŠ¤í…œìœ¼ë¡œ í•´ê²°í•˜ê³ ì í•˜ëŠ” ë¬¸ì œë¥¼ ì‹ë³„í•˜ê³  í•™ìŠµ í›ˆë ¨ì„ ìœ„í•œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¶„ì„í•œë‹¤</li><li>Choose an ML algorithm and code your model : ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ML Framework ë° ì•Œê³ ë¦¬ì¦˜ì„ ì„ ë³„í•˜ê³  ëª¨ë¸ ì´ˆê¸° ë²„ì ¼ì„ ì½”ë”©í•œë‹¤</li><li>Experiment with data and model training : ì•ì„œ ì¤€ë¹„ëœ ë°ì´í„°ì™€ ëª¨ë¸ ì½”ë“œë¥¼ í†µí•´ í•™ìŠµì„ ì§„í–‰í•œë‹¤</li><li>Tune the model hyperparameters : ëª¨ë¸ ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ëŠ” hyperparameterë¥¼ ì¡°ì •í•˜ë©° í•™ìŠµì„ ë°˜ë³µì ìœ¼ë¡œ ì§„í–‰í•œë‹¤ <em>(ì´í›„ì—ëŠ” ë°˜ë³µì ì¸ parameter íŠœë‹ê³¼ í•™ìŠµì„ ì§„í–‰í•œë‹¤)</em></li></ul></li><li>Production phase : ìƒì‚° ë‹¨ê³„<em>(ë°°í¬ ë‹¨ê³„)</em><ul><li>Transform data : í•™ìŠµê³¼ ì˜ˆì¸¡ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ë³€í™˜í•œë‹¤. ì´ë•Œ, ëª¨ë¸ ì •í•©ì„±ì„ ìœ„í•´ ìœ„ ì‹¤í—˜ ë‹¨ê³„ì—ì„œ ì§„í–‰í•œ ë°ì´í„°ì™€ ê°™ì€ í˜•íƒœë¡œ ë³€í™˜í•´ì•¼ í•¨ì„ ì£¼ì˜í•œë‹¤</li><li>Train model : ëª¨ë¸ì„ í•™ìŠµí•œë‹¤</li><li>Serve the model for online/batch prediction : ì˜¨ë¼ì¸ ë˜ëŠ” ë°°ì¹˜ ëª¨ë“œë¥¼ ìœ„í•œ ëª¨ë¸ì„ ì œê³µí•œë‹¤</li><li>Monitor the modelâ€™s performance : ëª¨ë¸ ì„±ëŠ¥ì„ ëª¨ë‹ˆí„°ë§í•œë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë¸ì„ ìˆ˜ì •í•˜ê³  ì¬ í•™ìŠµì„ ì§„í–‰í•˜ì—¬ ëª¨ë¸ ì„±ëŠ¥ì„ ë†’ì—¬ê°„ë‹¤</li></ul></li></ul><h1 id="Kubeflow-components-in-the-ML-workflow"><a href="#Kubeflow-components-in-the-ML-workflow" class="headerlink" title="Kubeflow components in the ML workflow"></a>Kubeflow components in the ML workflow</h1><p>ìœ„ì— ì„¤ëª…í•œ ML workflowì— Kubeflow ì»´í¬ë„ŒíŠ¸ë¥¼ ëŒ€ì…í•œ ê·¸ë¦¼ì´ë‹¤.</p><p><img src="https://www.kubeflow.org/docs/images/kubeflow-overview-workflow-diagram-2.svg" alt=""></p><p>ê° ì»´í¬ë„ŒíŠ¸ë“¤ì„ experiment/production ë³„ ë‚˜ëˆ„ì–´ ì„¤ëª…í•œë‹¤.</p><p><code>Experiment</code></p><ul><li>Pytorch / scikit-learn / Tensorflow / XGBoost : ML ì•Œê³ ë¦¬ì¦˜ì„ ì œê³µí•˜ëŠ” íŒ¨í‚¤ì§€. ê°€ì¥ ìœ ëª…í•œ Tensorflow ë¶€í„° ì†ì‰½ê²Œ ML ëª¨ë¸ì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” scikit-learn ê¹Œì§€, í˜„ì¬ ì§„í–‰í˜•ìœ¼ë¡œ ë‹¤ì–‘í•œ ML ì•Œê³ ë¦¬ì¦˜ íŒ¨í‚¤ì§€ë¥¼ ì§€ì›í•˜ê³  ìˆë‹¤.</li><li>Jupyter notebook / Fairing / pipelines<ul><li>Jupyter notebook : web ê¸°ë°˜ íŒŒì´ì„  ì¸í„°í”„ë¦¬í„°ë¡œ, ì¸í„°ë ‰í‹°ë¸Œí•œ í™˜ê²½ì„ ì œê³µí•˜ë©° ë°ì´í„° ë¶„ì„ì— ë§ì´ ì‚¬ìš©í•˜ëŠ” tool</li><li><a href="https://www.kubeflow.org/docs/fairing/fairing-overview/">Fairing</a> : Kubeflowì—ì„œ ML ëª¨ë¸ì„ ì‰½ê²Œ í•™ìŠµí•˜ê³  ë°°í¬í•  ìˆ˜ ìˆëŠ” Python íŒ¨í‚¤ì§€</li><li><a href="https://www.kubeflow.org/docs/pipelines/overview/pipelines-overview/">pipelines</a> : Kubeflowì˜ pipelineì€ ML workflowì˜ ëª¨ë“  êµ¬ì„± ìš”ì†Œë¥¼ ì„¤ëª…í•˜ëŠ” ê°œë…ì´ë‹¤. í—·ê°ˆë¦´ ìˆ˜ ìˆê² ì§€ë§Œ, ML workflowì˜ ëª¨ë“  ê³¼ì •ì„ ë‹´ì€ ê²ƒìœ¼ë¡œ ì¸ì§€í•˜ê³  workflowë¥¼ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ì…ë ¥ê°’ &amp; êµ¬ì„± ìš”ì†Œì˜ ëª¨ë“  ì…ì¶œë ¥ì— ëŒ€í•œ ì •ì˜ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤ <em>(ê³µì‹ Docì—ëŠ” pipelineì„ Kubeflow ì•ˆì˜ í”Œë«í¼ì´ë¼ í‘œí˜„í•œë‹¤)</em>. pipelineì€ ë‹¤ìŒ ê¸°ëŠ¥ë“¤ì„ í¬í•¨í•˜ê³  ìˆë‹¤.<ul><li>ML workflowì„ ì¶”ì í•˜ê³  ê´€ë¦¬í•˜ëŠ” UI</li><li>ë‹¤ì¤‘ ML workflow scheduling</li><li>ML workflowë¥¼ ì •ì˜í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ SDK <em>(python)</em></li><li>SDKë¥¼ ì´ìš©í•´ ML systemê³¼ ì—°ê²°í•˜ëŠ” Notebook</li></ul></li></ul></li></ul><p><img src="https://www.kubeflow.org/docs/images/pipelines-architecture.png" alt=""></p><p>[ì°¸ê³  - <a href="https://www.kubeflow.org/docs/images/pipelines-architecture.png">pipeline architecture</a>]</p><ul><li><a href="">Katib</a> : ML ëª¨ë¸ì˜ Hyper parameter ë° ì•„í‚¤í…ì³ë¥¼ ìë™ìœ¼ë¡œ íŠœë‹í•˜ëŠ” kubeflowì˜ ì»´í¬ë„ŒíŠ¸ <em>(Hyperparameterë€, ëª¨ë¸ í•™ìŠµ ê³¼ì •ì„ ì œì–´í•˜ëŠ” ë³€ìˆ˜ë¡œ learning rate / neural networkì˜ layer ìˆ˜ / layer ë‚´ node ìˆ˜ ë“±ì´ ìˆë‹¤)</em></li></ul><p><code>Prodiction</code></p><ul><li>Chainer / MPI MXNet / PyTorch / TFJob<ul><li><a href="https://v0-6.kubeflow.org/docs/components/training/chainer/">Chainer</a> : CUDA<em>(GPU)</em>, ë‹¤ì–‘í•œ ë”¥ëŸ¬ë‹ ì•„í‚¤í…ì³ë¥¼ ì§€ì›í•˜ëŠ” ìœ ì—°í•œ ë”¥ëŸ¬ë‹ í”„ë ˆì„ì›Œí¬ </li><li>MPI : ?</li><li>MXNet / Pytorch / TFJob : ì˜¤í”ˆì†ŒìŠ¤ ë”¥ëŸ¬ë‹ ì†Œí”„íŠ¸ì›¨ì–´ í”„ë ˆì„ì›Œí¬ë¡œ Deep Neural Networkë¥¼ í•™ìŠµ ë° ë°°í¬</li></ul></li><li>KFServing / NVDIA TensorRT / PyTorch / TFServing / Seldon : í•™ìŠµëœ ëª¨ë¸ì„ ì‹¤ì œ ë°°í¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¡œ, í¬ê²Œ KFServing ê³¼ Seldon ì„ ì´ìš©í•´ í”„ë ˆì„ì›Œí¬ë¥¼ ë°°í¬. ê° ì»´í¬ë„ŒíŠ¸ë“¤ì— ëŒ€í•œ ë‚´ìš©ì€ ë°©ëŒ€í•˜ì—¬ <a href="https://www.kubeflow.org/docs/components/serving/">ê³µì‹ Doc</a> ì°¸ì¡°</li><li>Metadata / TensorBoard<ul><li><a href="https://www.kubeflow.org/docs/components/misc/metadata/">Metadata</a> : ëª¨ë¸, ëª¨ë¸ ì‹¤í–‰, ë°ì´í„° ì…‹ ë“± ê¸°íƒ€ Artifactì— ëŒ€í•œ ì •ë³´ë¥¼ ì˜ë¯¸í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ <em>(Artifactë€, ML workflow êµ¬ì„± ìš”ì†Œì˜ input / outputì„ í˜•ì„±í•˜ëŠ” file ë˜ëŠ” ì˜¤ë¸Œì íŠ¸)</em></li><li><a href="https://www.kubeflow.org/docs/pipelines/sdk/output-viewer/#tensorboard">TensorBoard</a> : Tensorflowê°€ í¬í•¨í•˜ëŠ” graph visualization tool</li></ul></li></ul><p>#Kubeflow interface</p><p>KubeflowëŠ” ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì™€ ì»¤ë§¨ë“œë¼ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ëª¨ë‘ ì œê³µí•œë‹¤.</p><ul><li><p>User interface</p><p><img src="https://www.kubeflow.org/docs/images/central-ui.png" alt=""></p><p>ë°°í¬ëœ ì»´í¬ë„ŒíŠ¸ì— ì•¡ì„¸ìŠ¤í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëŒ€ì‹œ ë³´ë“œë¥¼ ì œê³µí•œë‹¤. <a href="https://www.kubeflow.org/docs/other-guides/accessing-uis/"><em>(ì°¸ê³ )</em></a></p></li><li><p>Command line interface</p><p><code>Kfctl</code> ì€ Kubeflowë¥¼ ì„¤ì¹˜ ë° êµ¬ì„±í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Kubeflow CLI. <a href="https://www.kubeflow.org/docs/other-guides/kustomize/"><em>(ì°¸ê³ )</em></a></p></li></ul><p>ê³µì‹ ë„íë¨¼íŠ¸ë¥¼ ì°¸ê³ í•´ ì „ì²´ì ì¸ ê°œë…ì„ ì‚´í´ë³´ì•˜ë‹¤. ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ëŠ” Kubernetes í´ëŸ¬ìŠ¤í„°ì— Kubeflowë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤.</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><p><a href="https://www.kubeflow.org/docs/about/kubeflow/">Kubeflow org, https://www.kubeflow.org/docs/about/kubeflow/</a></p></li><li><p><a href="https://bcho.tistory.com/1301">ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë°˜ì˜ End2End ë¨¸ì‹ ëŸ¬ë‹ í”Œë«í¼ Kubeflow #1 - ì†Œê°œ, https://bcho.tistory.com/1301</a></p></li></ul><hr><p>2020.01.13 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-introduction_to_kubeflow/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[ElasticSearch] Install ElasticSearch using Docker</title>
      <link>https://jx2lee.github.io/es-install_elasticsearch/</link>
      <guid>https://jx2lee.github.io/es-install_elasticsearch/</guid>
      <pubDate>Tue, 07 Jan 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë°ì´í„° ë§ˆíŠ¸ë¥¼ êµ¬ì¶•í•˜ê³  ì´ë¥¼ ì‹œê°í™”í•˜ëŠ” íŒŒì´í”„ë¼ì¸ êµ¬ì¶• pilotì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ElasticSearchë¥¼ ì„¤ì¹˜í•˜ê³ ì í•œë‹¤. ë‹¨ì¼ ì„œë²„ì— ì‹±ê¸€ ë…¸ë“œë¡œ êµ¬ì¶•í•˜ê³  binary ì„¤ì¹˜ë¥¼ í•˜ë ¤ê³  í–ˆì§€ë§Œ ìš”ì¦˜ ì¶”ì„¸ì— ë§ê²Œ(?) Container ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•í•˜ê³ ì Dockerë¥¼ ì´ìš©í•œë‹¤.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Updata Note&lt;/strong&gt;  &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2020.05.10 : Elasticsearch ìš©ì–´ ì •ë¦¬&lt;/li&gt;
&lt;li&gt;2021.02.01 : Elasticsearch ìš©ì–´ ì •ë¦¬ ì¶”ê°€ ì‘ì—…&lt;/li&gt;
&lt;/ul&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë°ì´í„° ë§ˆíŠ¸ë¥¼ êµ¬ì¶•í•˜ê³  ì´ë¥¼ ì‹œê°í™”í•˜ëŠ” íŒŒì´í”„ë¼ì¸ êµ¬ì¶• pilotì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ElasticSearchë¥¼ ì„¤ì¹˜í•˜ê³ ì í•œë‹¤. ë‹¨ì¼ ì„œë²„ì— ì‹±ê¸€ ë…¸ë“œë¡œ êµ¬ì¶•í•˜ê³  binary ì„¤ì¹˜ë¥¼ í•˜ë ¤ê³  í–ˆì§€ë§Œ ìš”ì¦˜ ì¶”ì„¸ì— ë§ê²Œ(?) Container ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•í•˜ê³ ì Dockerë¥¼ ì´ìš©í•œë‹¤.</p><p><strong>Updata Note</strong>  </p><ul><li>2020.05.10 : Elasticsearch ìš©ì–´ ì •ë¦¬</li><li>2021.02.01 : Elasticsearch ìš©ì–´ ì •ë¦¬ ì¶”ê°€ ì‘ì—…</li></ul><a id="more"></a><h1 id="Elasticsearch-ìš©ì–´"><a href="#Elasticsearch-ìš©ì–´" class="headerlink" title="Elasticsearch ìš©ì–´"></a>Elasticsearch ìš©ì–´</h1><h2 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h2><p>elasticsearch ë‚´ ë°ì´í„° ì €ì¥ì†Œë¡œ RDBMS ì˜ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìœ ì‚¬  </p><ul><li>ESëŠ” JSON ë¬¸ì„œë¡œ ë°ì´í„° ì €ì¥</li><li>í•˜ë‚˜ ë˜ëŠ” ì—¬ëŸ¬ ê°œ Document</li><li>í¬ê´„ì ì¸ ì˜ë¯¸ì˜ ìƒ‰ì¸ ë˜ëŠ” ìƒ‰ì¸ íŒŒì¼ <em>(ë²”ìš©ì ì¸ ì˜ë¯¸ë¡œ ì‚¬ìš©)</em><ul><li>indice: elasticsearch ë‚´ ë¬¼ë¦¬ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ìƒ‰ì¸ ë˜ëŠ” ìƒ‰ì¸ íŒŒì¼</li></ul></li><li>Index APIë¥¼ ì´ìš©í•´ ìƒ‰ì¸ì´ ì‹œì‘, ì´ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” íŠ¹ì • Index ì— JSON ë¬¸ì„œë¥¼ ì¶”ê°€ ë° ì—…ë°ì´íŠ¸</li></ul><h2 id="Shard"><a href="#Shard" class="headerlink" title="Shard"></a>Shard</h2><p>Lucene ì„ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰ì˜ ê¸°ë³¸ ë°ì´í„°ë² ì´ìŠ¤ê°€ ë˜ëŠ” ì¸ë±ìŠ¤  </p><ul><li>ë¶„ì‚° ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°œë…</li><li>í° í¬ê¸°ì˜ ì¸ë±ìŠ¤ -&gt; ì—¬ëŸ¬ ê°œ ì‘ì€ ì¸ë±ìŠ¤ë¡œ ë‚˜ëˆ„ì–´ ì €ì¥í•˜ëŠ” ê²ƒì„ ì˜ë¯¸</li><li>ë‹¨ì¼ ë…¸ë“œì—ì„œëŠ” ì €ì¥ì†Œ ì„œëŠ¥ì— ëŒ€í•œ í•œê³„ë¥¼ í•´ê²°, í´ëŸ¬ìŠ¤í„°ì—ì„œëŠ” ë¶„ì‚° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ë©° ë¹ ë¥¸ ê²°ê³¼ ìƒì„±</li></ul><p><strong>Primary Shard</strong>:<br>ìƒ‰ì¸ ì‹œ ê°€ì¥ ë¨¼ì € ìƒì„±ë˜ëŠ” ì¸ë±ìŠ¤ë¡œ ë³µì œì˜ ê¸°ë³¸ ì†ŒìŠ¤  </p><p><strong>Replica Shard</strong>:<br>ë ˆí”Œë¦¬ì¹´ ì„¤ì •ê°’ì— ë”°ë¼ Primary Shard ì„ ë³µì œí•˜ì—¬ ìƒì„±í•œ ìƒ¤ë“œë¥¼ ì¼ì»«ìŒ</p><h2 id="Replica"><a href="#Replica" class="headerlink" title="Replica"></a>Replica</h2><p>ë‹¨ì–´ ëœ»ëŒ€ë¡œ ë³µì œë³¸ìœ¼ë¡œ, ì¥ì•  ë°œìƒ ì‹œ ì§€ì†ì„± ë³´ì¥ê³¼ ê²€ìƒ‰ íš¨ìœ¨ì„±ì„ ìœ„í•´ ì‚¬ìš©  </p><ul><li>ë¶„ì‚°ëœ ë‹¤ë¥¸ ë…¸ë“œì— Shard ì™€ ê°™ì€ ë°ì´í„°ë¥¼ ë³µì œ <em>(ë³µì œëœ Shard ë¥¼ Replica ë¼ ìƒê°í•˜ì)</em></li><li>ìƒì„± ì ˆì°¨<ul><li>Primary Shard ìƒ‰ì¸</li><li>ê° ë…¸ë“œì—ì„œ async í•˜ê²Œ Shard ë³µì œ<ul><li>ê²€ìƒ‰ ì„±ëŠ¥ ì €í•˜ ìµœì†Œí™”</li></ul></li></ul></li></ul><h2 id="Document"><a href="#Document" class="headerlink" title="Document"></a>Document</h2><p>elasticsearch ì—ì„œ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ë°ì´í„° ë‹¨ìœ„  </p><ul><li>í•˜ë‚˜ì˜ item ë˜ëŠ” article</li><li>RDBMS ì˜ í…Œì´ë¸” ë‚´ í•˜ë‚˜ì˜ row ì— í•´ë‹¹<ul><li><code>Type</code> ì€ RDBMS í…Œì´ë¸”</li><li><code>Field</code> ëŠ” RDBMS í…Œì´ë¸”ì˜ í•˜ë‚˜ì˜ column</li></ul></li></ul><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><p>elasticsearch ë¥¼ êµ¬ì„±í•˜ëŠ” í•˜ë‚˜ì˜ ì„œë²„ ë˜ëŠ” ë°ëª¬  </p><ul><li>ë…ë¦½ì ìœ¼ë¡œ ë™ì‘ ê°€ëŠ¥í•œ ì„œë²„</li></ul><h2 id="Cluster"><a href="#Cluster" class="headerlink" title="Cluster"></a>Cluster</h2><p>standalone í•˜ê²Œ ë™ì‘í•˜ëŠ” ì—¬ëŸ¬ ë…¸ë“œë¥¼ í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ ë°ì´í„°ì˜ ë¶„ì‚°ê³¼ ê³µìœ ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì„±í•œ ê²ƒ</p><h1 id="pull-Docker-Image-for-ElasticSearch"><a href="#pull-Docker-Image-for-ElasticSearch" class="headerlink" title="pull Docker-Image for ElasticSearch"></a>pull Docker-Image for ElasticSearch</h1><p>ElasticSearch docker imageë¥¼ ì„œë²„ë¡œ ê°€ì ¸ì˜¤ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. í˜„ì¬ í¬ìŠ¤íŒ… ê¸°ì¤€ ìµœì‹  ë²„ì ¼ì€ 7.5.1 ì´ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ docker pull docker.elastic.co/elasticsearch/elasticsearch:7.5.1</span><br><span class="line"></span><br><span class="line">Trying to pull repository docker.elastic.co/elasticsearch/elasticsearch ... </span><br><span class="line">7.5.1: Pulling from docker.elastic.co/elasticsearch/elasticsearch</span><br><span class="line">c808caf183b6: Pull complete </span><br><span class="line">05ff3f896999: Pull complete </span><br><span class="line">82fb7fb0a94e: Pull complete </span><br><span class="line">c4d0024708f4: Pull complete </span><br><span class="line">136650a16cfe: Pull complete </span><br><span class="line">968db096c092: Pull complete </span><br><span class="line">42547e91692f: Pull complete </span><br><span class="line">Digest: sha256:b0960105e830085acbb1f9c8001f58626506ce118f33816ea5d38c772bfc7e6c</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> docker.elastic.co/elasticsearch/elasticsearch:7.5.1</span><br></pre></td></tr></table></figure><h1 id="Run-single-node-cluster"><a href="#Run-single-node-cluster" class="headerlink" title="Run single-node cluster"></a>Run single-node cluster</h1><p><code>docker run -i -t -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; docker.elastic.co/elasticsearch/elasticsearch:7.5.1</code></p><blockquote><p><em>docker container ì‹¤í–‰ ì‹œ ì™¸ë¶€ ì ‘ê·¼ì„ í—ˆìš©í•˜ê¸° ìœ„í•´ì„œ <strong>-p</strong> ì¸ìë¥¼ ì¶”ê°€í•˜ì—¬ port forwarding í•˜ê²Œë” ì„¤ì •í•œë‹¤. ë˜í•œ, ì¸í„°ë ‰í‹°ë¸Œí•œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ -i -p ì¸ìë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.</em></p></blockquote><h1 id="Check"><a href="#Check" class="headerlink" title="Check"></a>Check</h1><p>curl ì„ ì´ìš©í•´ elasticsearch ê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ curl -XGET [ì„¤ì¹˜í•œ ì„œë²„ ip]:9200</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span> : <span class="string">&quot;294fb8043230&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_name&quot;</span> : <span class="string">&quot;docker-cluster&quot;</span>,</span><br><span class="line">  <span class="string">&quot;cluster_uuid&quot;</span> : <span class="string">&quot;UOT6i7eIRjuan8ot89zNHw&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span> : &#123;</span><br><span class="line">    <span class="string">&quot;number&quot;</span> : <span class="string">&quot;7.5.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_flavor&quot;</span> : <span class="string">&quot;default&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_type&quot;</span> : <span class="string">&quot;docker&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_hash&quot;</span> : <span class="string">&quot;3ae9ac9a93c95bd0cdc054951cf95d88e1e18d96&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_date&quot;</span> : <span class="string">&quot;2019-12-16T22:57:37.835892Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build_snapshot&quot;</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">&quot;lucene_version&quot;</span> : <span class="string">&quot;8.3.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_wire_compatibility_version&quot;</span> : <span class="string">&quot;6.8.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;minimum_index_compatibility_version&quot;</span> : <span class="string">&quot;6.0.0-beta1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;tagline&quot;</span> : <span class="string">&quot;You Know, for Search&quot;</span></span><br></pre></td></tr></table></figure><p>ì„¤ì¹˜ë¥¼ ì™„ë£Œí•˜ì˜€ë‹¤.</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://velog.io/@pa324/elasticsearch-ì„¤ì¹˜-ë„ì»¤-2bk2h3gh7d">elasticsearch ì„¤ì¹˜ (ë„ì»¤), https://velog.io/@pa324/elasticsearch-ì„¤ì¹˜-ë„ì»¤-2bk2h3gh7d</a></li><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html">elasticsearch document, https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html</a></li></ul><hr><p>2020.01.08 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/es-install_elasticsearch/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[BI] Superset ì„¤ì¹˜</title>
      <link>https://jx2lee.github.io/bi-install_superset/</link>
      <guid>https://jx2lee.github.io/bi-install_superset/</guid>
      <pubDate>Mon, 06 Jan 2020 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Supersetì€ Web ê¸°ë°˜ BI íˆ´ë¡œì¨ Pythonìœ¼ë¡œ ê°œë°œë˜ì—ˆê³  ìˆ˜ì§‘-ì €ì¥-ì²˜ë¦¬ë¥¼ ê±°ì¹œ ë°ì´í„°ë¥¼ ë§ˆíŠ¸ì—ì„œ ì¶”ì¶œí•˜ì—¬ ê·¸ë˜í”„ë¡œ ì‹œê°í™”í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.&lt;/p&gt;
&lt;p&gt;ì œê³µ ê¸°ëŠ¥ìœ¼ë¡œëŠ” EDA, Dashboard ìƒì„± ë° ê³µìœ , ë³´ì•ˆ, ê¶Œí•œê³¼ ë‹¤ì–‘í•œ ì†ŒìŠ¤ ì—°ê²°ì„ ì§€ì›í•œë‹¤. ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ëŠ” Supersetì„ ì„¤ì¹˜í•´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Supersetì€ Web ê¸°ë°˜ BI íˆ´ë¡œì¨ Pythonìœ¼ë¡œ ê°œë°œë˜ì—ˆê³  ìˆ˜ì§‘-ì €ì¥-ì²˜ë¦¬ë¥¼ ê±°ì¹œ ë°ì´í„°ë¥¼ ë§ˆíŠ¸ì—ì„œ ì¶”ì¶œí•˜ì—¬ ê·¸ë˜í”„ë¡œ ì‹œê°í™”í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.</p><p>ì œê³µ ê¸°ëŠ¥ìœ¼ë¡œëŠ” EDA, Dashboard ìƒì„± ë° ê³µìœ , ë³´ì•ˆ, ê¶Œí•œê³¼ ë‹¤ì–‘í•œ ì†ŒìŠ¤ ì—°ê²°ì„ ì§€ì›í•œë‹¤. ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ëŠ” Supersetì„ ì„¤ì¹˜í•´ë³¸ë‹¤.</p><a id="more"></a><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><h2 id="VirtualenvWrapper"><a href="#VirtualenvWrapper" class="headerlink" title="VirtualenvWrapper"></a>VirtualenvWrapper</h2><p>python ê°€ìƒí™˜ê²½ì„ ê´€ë¦¬í•˜ëŠ” <code>VirtualenvWrapper</code>ì„ ì„¤ì¹˜í•˜ê³  <code>superset</code> í™˜ê²½ì„ ì…‹íŒ…í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv superset</span><br><span class="line">$ workon superset</span><br></pre></td></tr></table></figure><h2 id="Install-Superset-and-Initialization"><a href="#Install-Superset-and-Initialization" class="headerlink" title="Install Superset and Initialization"></a>Install Superset and Initialization</h2><p>virtualenv í™˜ê²½ì—ì„œ pip ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ ì„¤ì¹˜í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install apache-superset</span><br></pre></td></tr></table></figure><p>supersetì˜ databaseë¥¼ ì´ˆê¸°í™” í•˜ê³  admin userë¥¼ ìƒì„±í•œë‹¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ superset db upgrade</span><br><span class="line">$ flask fab create-admin</span><br><span class="line">Username [admin]: flask fab create-admin</span><br><span class="line">User first name [admin]: admin</span><br><span class="line">User last name [user]:</span><br><span class="line">Email [admin@fab.org]:</span><br><span class="line">Password:</span><br><span class="line">Repeat <span class="keyword">for</span> confirmation:</span><br><span class="line">2020-01-07 10:51:24,272:INFO:root:Configured event logger of <span class="built_in">type</span> &lt;class <span class="string">&#x27;superset.utils.log.DBEventLogger&#x27;</span>&gt;</span><br><span class="line">Recognized Database Authentications.</span><br><span class="line">Admin User flask fab create-admin created.</span><br></pre></td></tr></table></figure><p>ì´í›„ í…ŒìŠ¤íŠ¸ í•  ë°ì´í„°ë¥¼ importí•œë‹¤. ì´í›„ ê¶Œí•œ/í—ˆê°€ë“±ì„ ì´ˆê¸°í™”í•˜ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ UI í™”ë©´ì„ ë„ìš´ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ superset load_examples</span><br><span class="line">$ superset init</span><br><span class="line">$ superset run -p 8088 --with-threads --reload --debugger</span><br></pre></td></tr></table></figure><h1 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h1><p>ì„¤ì¹˜ ì¤‘ ë°œìƒí•œ ì—ëŸ¬ë¥¼ ì‚´í´ë³¸ë‹¤.</p><h2 id="install-error-python-geohash"><a href="#install-error-python-geohash" class="headerlink" title="install error : python-geohash"></a>install error : python-geohash</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ERROR: Command errored out with <span class="built_in">exit</span> status 1:</span><br><span class="line">     <span class="built_in">command</span>: /home/supset/.virtualenvs/superset/bin/python3 -u -c <span class="string">&#x27;import sys, setuptools, tokenize; sys.argv[0] = &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;/tmp/pip-install-onzf3pi1/python-geohash/setup.py&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;; __file__=&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;/tmp/pip-install-onzf3pi1/python-geohash/setup.py&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;;f=getattr(tokenize, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;open&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;, open)(__file__);code=f.read().replace(&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;\r\n&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;\n&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;);f.close();exec(compile(code, __file__, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;exec&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;))&#x27;</span> install --record /tmp/pip-record-oy48mkll/install-record.txt --single-version-externally-managed --compile --install-headers /home/supset/.virtualenvs/superset/include/site/python3.6/python-geohash</span><br><span class="line">         cwd: /tmp/pip-install-onzf3pi1/python-geohash/</span><br><span class="line">    Complete output (19 lines):</span><br><span class="line">    running install</span><br><span class="line">    running build</span><br><span class="line">    running build_py</span><br><span class="line">    creating build</span><br><span class="line">    creating build/lib.linux-x86_64-3.6</span><br><span class="line">    copying geohash.py -&gt; build/lib.linux-x86_64-3.6</span><br><span class="line">    copying quadtree.py -&gt; build/lib.linux-x86_64-3.6</span><br><span class="line">    copying jpgrid.py -&gt; build/lib.linux-x86_64-3.6</span><br><span class="line">    copying jpiarea.py -&gt; build/lib.linux-x86_64-3.6</span><br><span class="line">    running build_ext</span><br><span class="line">    building <span class="string">&#x27;_geohash&#x27;</span> extension</span><br><span class="line">    creating build/temp.linux-x86_64-3.6</span><br><span class="line">    creating build/temp.linux-x86_64-3.6/src</span><br><span class="line">    gcc -pthread -Wno-unused-result -Wsign-compare -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPYTHON_MODULE=1 -I/usr/include/python3.6m -c src/geohash.cpp -o build/temp.linux-x86_64-3.6/src/geohash.o</span><br><span class="line">    src/geohash.cpp:538:20: fatal error: Python.h: No such file or directory</span><br><span class="line">     <span class="comment">#include &lt;Python.h&gt;</span></span><br><span class="line">                        ^</span><br><span class="line">    compilation terminated.</span><br><span class="line">    error: <span class="built_in">command</span> <span class="string">&#x27;gcc&#x27;</span> failed with <span class="built_in">exit</span> status 1</span><br><span class="line">    ----------------------------------------</span><br><span class="line">ERROR: Command errored out with <span class="built_in">exit</span> status 1: /home/supset/.virtualenvs/superset/bin/python3 -u -c <span class="string">&#x27;import sys, setuptools, tokenize; sys.argv[0] = &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;/tmp/pip-install-onzf3pi1/python-geohash/setup.py&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;; __file__=&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;/tmp/pip-install-onzf3pi1/python-geohash/setup.py&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;;f=getattr(tokenize, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;open&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;, open)(__file__);code=f.read().replace(&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;\r\n&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;\n&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;);f.close();exec(compile(code, __file__, &#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;exec&#x27;</span><span class="string">&quot;&#x27;&quot;</span><span class="string">&#x27;))&#x27;</span> install --record /tmp/pip-record-oy48mkll/install-record.txt --single-version-externally-managed --compile --install-headers /home/supset/.virtualenvs/superset/include/site/python3.6/python-geohash Check the logs <span class="keyword">for</span> full <span class="built_in">command</span> output.</span><br></pre></td></tr></table></figure><p>python-geohash package ì„¤ì¹˜ ì‹œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì´ëŠ” ì„¤ì¹˜ ì‹œ í•„ìš”í•œ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ê°€ ë¯¸ì„¤ì¹˜ë˜ì–´ ë°œìƒí•œ ì—ëŸ¬ë¡œ, <code>sudo yum install gcc gcc-c++ python3-devel cyrus-sasl-devel</code> ì„ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤. í”„ë¡œê·¸ë¨ ì„¤ì¹˜ ì‹œ í™˜ê²½ ì„¤ì •ì´ ê¼­ í•„ìš”í•˜ë‹ˆ <a href="https://superset.incubator.apache.org/index.html#">ê³µì‹ documents</a>ë¥¼ ì°¸ê³ í•˜ì.</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://superset.incubator.apache.org/installation.html">Superset Document, https://superset.incubator.apache.org/installation.html</a></li></ul><hr><p>2020.01.07 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/bi-install_superset/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] í° ìˆ˜ ë§Œë“¤ê¸°</title>
      <link>https://jx2lee.github.io/programmers-large_number/</link>
      <guid>https://jx2lee.github.io/programmers-large_number/</guid>
      <pubDate>Mon, 16 Dec 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì£¼ì–´ì§„ ìˆ«ìì—ì„œ íŠ¹ì • ê°¯ìˆ˜ì˜ ìˆ«ìë§Œìœ¼ë¡œ ê°€ì¥ í° ìˆ˜ë¥¼ ë§Œë“œëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ì£¼ì–´ì§„ ìˆ«ìì—ì„œ íŠ¹ì • ê°¯ìˆ˜ì˜ ìˆ«ìë§Œìœ¼ë¡œ ê°€ì¥ í° ìˆ˜ë¥¼ ë§Œë“œëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤</p><a id="more"></a><h1 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h1><p>ì–´ë–¤ ìˆ«ìì—ì„œ kê°œì˜ ìˆ˜ë¥¼ ì œê±°í–ˆì„ ë•Œ ì–»ì„ ìˆ˜ ìˆëŠ” ê°€ì¥ í° ìˆ«ìë¥¼ êµ¬í•˜ë ¤ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìˆ«ì 1924ì—ì„œ ìˆ˜ ë‘ ê°œë¥¼ ì œê±°í•˜ë©´ [19, 12, 14, 92, 94, 24] ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¤‘ ê°€ì¥ í° ìˆ«ìëŠ” 94 ì…ë‹ˆë‹¤.</p><p>ë¬¸ìì—´ í˜•ì‹ìœ¼ë¡œ ìˆ«ì numberì™€ ì œê±°í•  ìˆ˜ì˜ ê°œìˆ˜ kê°€ solution í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§‘ë‹ˆë‹¤. numberì—ì„œ k ê°œì˜ ìˆ˜ë¥¼ ì œê±°í–ˆì„ ë•Œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìˆ˜ ì¤‘ ê°€ì¥ í° ìˆ«ìë¥¼ ë¬¸ìì—´ í˜•íƒœë¡œ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•˜ì„¸ìš”.</p><h2 id="ì œí•œ-ì¡°ê±´"><a href="#ì œí•œ-ì¡°ê±´" class="headerlink" title="ì œí•œ ì¡°ê±´"></a>ì œí•œ ì¡°ê±´</h2><p>numberëŠ” 1ìë¦¬ ì´ìƒ, 1,000,000ìë¦¬ ì´í•˜ì¸ ìˆ«ìì…ë‹ˆë‹¤. këŠ” 1 ì´ìƒ numberì˜ ìë¦¿ìˆ˜ ë¯¸ë§Œì¸ ìì—°ìˆ˜ì…ë‹ˆë‹¤.</p><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><table><thead><tr><th>number</th><th>k</th><th>return</th></tr></thead><tbody><tr><td>1924</td><td>2</td><td>94</td></tr><tr><td>1231234</td><td>3</td><td>3234</td></tr><tr><td>4177252841</td><td>4</td><td>775841</td></tr></tbody></table><h1 id="ë¬¸ì œ-í’€ì´"><a href="#ë¬¸ì œ-í’€ì´" class="headerlink" title="ë¬¸ì œ í’€ì´"></a>ë¬¸ì œ í’€ì´</h1><p>íƒìš•ë²•ìœ¼ë¡œ í’€ ìˆ˜ ìˆëŠ” ë¬¸ì œë¡œ, ìš°ì„  collected ë¼ëŠ” ê²°ê³¼ë¬¼ ì €ì¥ Listë¥¼ ì„ ì–¸í•œë‹¤. numberì˜ ìˆ«ìë¥¼ forë¬¸ìœ¼ë¡œ ëŒë©´ì„œ <u>collected ê¸¸ì´ &gt; 0</u> / <u>collectedì˜ ë§ˆì§€ë§‰ ìˆ«ì ë¹„êµ</u> / <u>k &gt; 0</u> ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´, ì›ì†Œ í•˜ë‚˜ë¥¼ ë¹¼ì£¼ê³  kë¥¼ ì°¨ê°í•œë‹¤.</p><p>ì´í›„ kê°€ 0ì´ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ëŠ” ê±¸ ë°©ì§€í•˜ê³ ì index iì´ìƒ ë§Œí¼ì˜ numberë¥¼ ë‹´ëŠ”ë‹¤. forë¬¸ì˜ ë§ˆì§€ë§‰ìœ¼ë¡œ ì¡°ê±´ì— ì•ˆê±¸ë¦¬ëŠ” numì€ collectedì— ë‹´ëŠ”ë‹¤. ì´í›„ kê°€ ìŒìˆ˜ì¼ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ -k ê¹Œì§€ sliceë¥¼ ìˆ˜í–‰í•˜ê³  ê²°ê³¼ë¬¼ì´ ë‹´ê¸´ collected Listë¥¼ joiní•˜ì—¬ ìˆ«ìë¡œ ë³€í™˜í•œë‹¤.</p><h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">number, k</span>):</span></span><br><span class="line">    collected = []</span><br><span class="line">    <span class="keyword">for</span> i, num <span class="keyword">in</span> <span class="built_in">enumerate</span>(number):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">len</span>(collected) &gt; <span class="number">0</span> <span class="keyword">and</span> collected[-<span class="number">1</span>] &lt; num <span class="keyword">and</span> k &gt; <span class="number">0</span>:</span><br><span class="line">            collected.pop()</span><br><span class="line">            k -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">0</span>:</span><br><span class="line">            collected += <span class="built_in">list</span>(number[i:])</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        collected.append(num)</span><br><span class="line"></span><br><span class="line">    collected = collected[:-k] <span class="keyword">if</span> k &gt; <span class="number">0</span> <span class="keyword">else</span> collected</span><br><span class="line">    answer = <span class="string">&#x27;&#x27;</span>.join(collected)</span><br><span class="line">    <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><hr><p>2019.12.17 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-large_number/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] ì´ë™í‰ê·  - Moving Average</title>
      <link>https://jx2lee.github.io/sql-moving_average/</link>
      <guid>https://jx2lee.github.io/sql-moving_average/</guid>
      <pubDate>Sun, 15 Dec 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ëª¨ ê¸°ì—… ì½”ë”©í…ŒìŠ¤íŠ¸ì— ë‚˜ì˜¨ ì´ë™ í‰ê· , Moving Average ë¥¼ SQLë¡œ í’€ì–´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ëª¨ ê¸°ì—… ì½”ë”©í…ŒìŠ¤íŠ¸ì— ë‚˜ì˜¨ ì´ë™ í‰ê· , Moving Average ë¥¼ SQLë¡œ í’€ì–´ë³¸ë‹¤</p><a id="more"></a><p>ì½”ë”©í…ŒìŠ¤íŠ¸ë¥¼ Hackerrank í”Œë«í¼ì„ ì´ìš©í–ˆë˜í„°ë¼ ë¬¸ì œ ë³µì›ì„ í•  ìˆ˜ ì—†ì—ˆë‹¤. ì´ì— <a href="https://www.sqlteam.com/articles/calculating-running-totals">(https://www.sqlteam.com/articles/calculating-running-totals)</a> ì—ì„œ ì œê³µí•œ create database scriptë¥¼ í™œìš©í•´ ìƒì„±í•œ ë°ì´í„°ë¡œ ì´ë™ í‰ê· ì„ êµ¬í•´ë³´ê³ ì í•œë‹¤.</p><p>ì‚¬ìš©í•œ ì¿¼ë¦¬ì™€ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">delimiter //</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> insert_row()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">DECLARE</span> DayCount <span class="built_in">smallint</span> <span class="keyword">default</span> <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">DECLARE</span> Sales <span class="built_in">bigint</span> <span class="keyword">default</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    WHILE DayCount &lt;= 5000 DO</span><br><span class="line">        <span class="keyword">INSERT</span> <span class="keyword">INTO</span> Sales <span class="keyword">values</span> (DayCount, Sales);</span><br><span class="line">        <span class="keyword">SET</span> DayCount = DayCount + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">SET</span> Sales = Sales + <span class="number">15</span>;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">WHILE</span>;</span><br><span class="line"><span class="keyword">END</span>//</span><br><span class="line"></span><br><span class="line">delimiter;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql root@localhost:practice&gt; select count(*) from Sales;                                                                                                                                                      </span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">| count(*) |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">| 5000     |</span><br><span class="line">+<span class="comment">----------+</span></span><br><span class="line">1 row in <span class="keyword">set</span></span><br><span class="line"><span class="built_in">Time</span>: <span class="number">0.010</span>s</span><br></pre></td></tr></table></figure><h1 id="ì´ë™í‰ê· -êµ¬í•˜ê¸°"><a href="#ì´ë™í‰ê· -êµ¬í•˜ê¸°" class="headerlink" title="ì´ë™í‰ê·  êµ¬í•˜ê¸°"></a>ì´ë™í‰ê·  êµ¬í•˜ê¸°</h1><p><code>ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬</code>ë¥¼ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤. average í•¨ìˆ˜ë¥¼ ì´ìš©í•´ í‰ê·  Sales ê°’ì„ êµ¬í•˜ëŠ”ë°, ìŠ¤ì¹¼ë¼ ì„œë¸Œì¿¼ë¦¬ ë‚´ ì„œë¸Œì¿¼ë¦¬<em>(Count ì ˆ)</em>ë¥¼ ì‘ì„±í•˜ì—¬ countê°€ 1ê³¼ 3ì‚¬ì´ì— ìˆì„ë•Œ í‰ê· ì„ êµ¬í•˜ëŠ” ì¹¼ëŸ¼(MvAvg)ì„ ì¡°íšŒí•˜ì˜€ë‹¤.</p><blockquote><p><em>ë¬¸ì œë¥¼ í’€ë‹¤ë³´ë‹ˆ SQL ì‹¤í–‰ìˆœì„œë‚˜ ê³„íš ë“±ì— ëŒ€í•œ ì§€ì‹ì´ ë¶€ì¡±í•œ ê²ƒ ê°™ë‹¤. ì±…ì„ í•œ ê¶Œ êµ¬ë¹„í•˜ì—¬ ê³µë¶€í•˜ëŠ”ê²Œ ì¢‹ì„ ë“¯ í•˜ë‹¤.</em></p></blockquote><h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    DayCount,</span><br><span class="line">    Sales,</span><br><span class="line">    (<span class="keyword">select</span></span><br><span class="line">        <span class="keyword">avg</span>(Sales) <span class="keyword">as</span> moving_average</span><br><span class="line">     <span class="keyword">from</span> Sales b</span><br><span class="line">     <span class="keyword">where</span> (<span class="keyword">select</span></span><br><span class="line">                <span class="keyword">count</span>(*)</span><br><span class="line">            <span class="keyword">from</span> Sales c</span><br><span class="line">            <span class="keyword">where</span> DayCount <span class="keyword">between</span> b.DayCount <span class="keyword">and</span> a.DayCount</span><br><span class="line">            ) <span class="keyword">between</span> <span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span> </span><br><span class="line">    ) <span class="keyword">as</span> MvAvg </span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    Sales a</span><br><span class="line">;</span><br></pre></td></tr></table></figure><hr><p>2019.12.16 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/sql-moving_average/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Install Spark</title>
      <link>https://jx2lee.github.io/hadoop-install_spark/</link>
      <guid>https://jx2lee.github.io/hadoop-install_spark/</guid>
      <pubDate>Thu, 12 Dec 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Sparkë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. binaryë¥¼ ë‹¤ìš´ë°›ì•„ í’€ê³  configë¥¼ ìˆ˜ì •í•˜ë©´ ì‰½ê²Œ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì´ í¬ìŠ¤íŠ¸ì—ëŠ” standalone ëª¨ë“œë¡œ sparkë¥¼ ì‹¤í–‰í•œë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Sparkë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. binaryë¥¼ ë‹¤ìš´ë°›ì•„ í’€ê³  configë¥¼ ìˆ˜ì •í•˜ë©´ ì‰½ê²Œ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. ì´ í¬ìŠ¤íŠ¸ì—ëŠ” standalone ëª¨ë“œë¡œ sparkë¥¼ ì‹¤í–‰í•œë‹¤</p><a id="more"></a><h1 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h1><h2 id="Hadoop-Version"><a href="#Hadoop-Version" class="headerlink" title="Hadoop Version"></a>Hadoop Version</h2><p><code>hadoop version</code> ëª…ë ¹ì–´ë¥¼ í†µí•´ Hadoopì˜ ë²„ì ¼ì„ ì²´í¬í•œë‹¤. ì´ ë§ì¸ ì¦‰ìŠ¨, Hadoop Clientê°€ Sparkë¥¼ ì‚¬ìš©í•  ê³„ì •ì— ì¤€ë¹„ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Hadoop 2.9.2</span><br><span class="line">Subversion https://git-wip-us.apache.org/repos/asf/hadoop.git -r 826afbeae31ca687bc2f8471dc841b66ed2c6704</span><br><span class="line">Compiled by ajisaka on 2018-11-13T12:42Z</span><br><span class="line">Compiled with protoc 2.5.0</span><br><span class="line">From <span class="built_in">source</span> with checksum 3a9939967262218aa556c684d107985</span><br><span class="line">This <span class="built_in">command</span> was run using /app/hadoop/2.9.2/share/hadoop/common/hadoop-common-2.9.2.jar</span><br></pre></td></tr></table></figure><blockquote><p><em>Hadoop ClientëŠ” ì„¤ì¹˜ê°€ í•„ìš”ì—†ê³  ì´ë¯¸ êµ¬ì¶•ëœ í•˜ë‘¡ í´ëŸ¬ìŠ¤í„°ì—ì„œ hadoop ë°”ì´ë„ˆë¦¬ë§Œ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ì¦‰, ë‹¤ë¥¸ ì„œë²„ì—ì„œ í•˜ë‘¡ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë”ë§Œ ì„¤ì •í•´ë†“ì.</em></p></blockquote><h2 id="Download-binary"><a href="#Download-binary" class="headerlink" title="Download binary"></a>Download binary</h2><p><a href="https://spark.apache.org/downloads.html">Spark Documents</a>ë¡œ ì ‘ì†í•˜ì—¬ binaryë¥¼ ë‹¤ìš´ë¡œë“œ í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@node2 app]<span class="comment"># wget http://mirror.apache-kr.org/spark/spark-2.4.4/spark-2.4.4-bin-hadoop2.7.tgz</span></span><br><span class="line">--2019-12-10 17:41:49--  http://mirror.apache-kr.org/spark/spark-2.4.4/spark-2.4.4-bin-hadoop2.7.tgz</span><br><span class="line">Resolving mirror.apache-kr.org (mirror.apache-kr.org)... 1.201.139.179</span><br><span class="line">Connecting to mirror.apache-kr.org (mirror.apache-kr.org)|1.201.139.179|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 230091034 (219M) [application/x-gzip]</span><br><span class="line">Saving to: â€˜spark-2.4.4-bin-hadoop2.7.tgzâ€™</span><br></pre></td></tr></table></figure><p>Spark ìœ ì €ë¥¼ ìƒì„±í•˜ê³  Spark Home ë””ë ‰í† ë¦¬ì— ë‹¤ìš´ë°›ì€ binaryë¥¼ í’€ì–´ì¤€ë‹¤.</p><h1 id="Set-config"><a href="#Set-config" class="headerlink" title="Set config"></a>Set config</h1><h2 id="bash-profile"><a href="#bash-profile" class="headerlink" title="~/.bash_profile"></a>~/.bash_profile</h2><p>JAVA, HADOOP í™˜ê²½ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê³  SPARK í™˜ê²½ë³€ìˆ˜ë¥¼ ìƒˆë¡œ ì‘ì„±í•˜ê³  update í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#JAVA ENV</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/app/java/jdk1.8.0_181</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#SPARK ENV</span></span><br><span class="line">SPARK_HOME=/app/spark</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$SPARK_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#HADOOP ENV</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/app/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HADOOP_HOME</span>/bin:<span class="variable">$HADOOP_HOME</span>/sbin</span><br></pre></td></tr></table></figure><h1 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h1><p><code>$SPARK_HOME/bin</code> í´ë”ì— <code>pypark</code>ë¥¼ ì‹¤í–‰í•œë‹¤.</p><blockquote><p>*</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[spark@node2 bin]$ ./pyspark </span><br><span class="line">Python 3.6.8 (default, Aug  7 2019, 17:28:10) </span><br><span class="line">[GCC 4.8.5 20150623 (Red Hat 4.8.5-39)] on linux</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">Welcome to</span><br><span class="line">      ____              __</span><br><span class="line">     / __/__  ___ _____/ /__</span><br><span class="line">    _\ \/ _ \/ _ `/ __/  <span class="string">&#x27;_/</span></span><br><span class="line"><span class="string">   /__ / .__/\_,_/_/ /_/\_\   version 2.4.4</span></span><br><span class="line"><span class="string">      /_/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Using Python version 3.6.8 (default, Aug  7 2019 17:28:10)</span></span><br><span class="line"><span class="string">SparkSession available as &#x27;</span>spark<span class="string">&#x27;.</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; </span></span><br></pre></td></tr></table></figure><p>ê°„ë‹¨í•œ RDDë¥¼ ìƒì„±í•˜ì—¬ README.md ì— í¬í•¨í•œ ë¼ì¸ì„ ì„¸ë³´ë„ë¡ í•œë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; lines &#x3D; sc.textFile(&#39;README.md&#39;)</span><br><span class="line">&gt;&gt;&gt; lines.count()</span><br><span class="line">105</span><br></pre></td></tr></table></figure><blockquote><p><em>sc.textFileë¡œ ê²½ë¡œë¥¼ ë¬´ì‹œí•˜ê²Œë˜ë©´ ìë™ìœ¼ë¡œ hdfs ê²½ë¡œë¥¼ ì½ì–´ë“¤ì¸ë‹¤. ë§Œì•½ì— ë¡œì»¬ íŒŒì¼ì„ ì½ê³  ì‹¶ë‹¤ë©´, <code>file://[file path]/[file name]</code>ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ë¡œì»¬ íŒŒì¼ì„ ì½ì–´ë“¤ì¸ë‹¤.</em></p></blockquote><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://spark.apache.org/docs/latest/index.html">Spark Documents</a></li></ul><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-install_spark/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë‹¤ë¦¬ë¥¼ ì§€ë‚˜ëŠ” íŠ¸ëŸ­</title>
      <link>https://jx2lee.github.io/programmers-truck/</link>
      <guid>https://jx2lee.github.io/programmers-truck/</guid>
      <pubDate>Mon, 02 Dec 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ìµœëŒ€ ìš©ëŸ‰ì„ ê°€ì§„ ë‹¤ë¦¬ë¥¼ íŠ¸ëŸ­ì´ ëª¨ë‘ ì§€ë‚˜ëŠ” ì‹œê°„ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ìµœëŒ€ ìš©ëŸ‰ì„ ê°€ì§„ ë‹¤ë¦¬ë¥¼ íŠ¸ëŸ­ì´ ëª¨ë‘ ì§€ë‚˜ëŠ” ì‹œê°„ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h1><p>íŠ¸ëŸ­ ì—¬ëŸ¬ ëŒ€ê°€ ê°•ì„ ê°€ë¡œì§€ë¥´ëŠ” ì¼ ì°¨ì„  ë‹¤ë¦¬ë¥¼ ì •í•´ì§„ ìˆœìœ¼ë¡œ ê±´ë„ˆë ¤ í•©ë‹ˆë‹¤. ëª¨ë“  íŠ¸ëŸ­ì´ ë‹¤ë¦¬ë¥¼ ê±´ë„ˆë ¤ë©´ ìµœì†Œ ëª‡ ì´ˆê°€ ê±¸ë¦¬ëŠ”ì§€ ì•Œì•„ë‚´ì•¼ í•©ë‹ˆë‹¤. íŠ¸ëŸ­ì€ 1ì´ˆì— 1ë§Œí¼ ì›€ì§ì´ë©°, ë‹¤ë¦¬ ê¸¸ì´ëŠ” bridge_lengthì´ê³  ë‹¤ë¦¬ëŠ” ë¬´ê²Œ weightê¹Œì§€ ê²¬ë”¥ë‹ˆë‹¤.<br>â€» íŠ¸ëŸ­ì´ ë‹¤ë¦¬ì— ì™„ì „íˆ ì˜¤ë¥´ì§€ ì•Šì€ ê²½ìš°, ì´ íŠ¸ëŸ­ì˜ ë¬´ê²ŒëŠ” ê³ ë ¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p><p>ì˜ˆë¥¼ ë“¤ì–´, ê¸¸ì´ê°€ 2ì´ê³  10kg ë¬´ê²Œë¥¼ ê²¬ë””ëŠ” ë‹¤ë¦¬ê°€ ìˆìŠµë‹ˆë‹¤. ë¬´ê²Œê°€ [7, 4, 5, 6]kgì¸ íŠ¸ëŸ­ì´ ìˆœì„œëŒ€ë¡œ ìµœë‹¨ ì‹œê°„ ì•ˆì— ë‹¤ë¦¬ë¥¼ ê±´ë„ˆë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ê±´ë„ˆì•¼ í•©ë‹ˆë‹¤.</p><table><thead><tr><th>ê²½ê³¼ ì‹œê°„</th><th>ë‹¤ë¦¬ë¥¼ ì§€ë‚œ íŠ¸ëŸ­</th><th>ë‹¤ë¦¬ë¥¼ ê±´ë„ˆëŠ” íŠ¸ëŸ­</th><th>ëŒ€ê¸° íŠ¸ëŸ­</th></tr></thead><tbody><tr><td>0</td><td>[]</td><td>[]</td><td>[7,4,5,6]</td></tr><tr><td>1~2</td><td>[]</td><td>[7]</td><td>[4,5,6]</td></tr><tr><td>3</td><td>[7]</td><td>[4]</td><td>[5,6]</td></tr><tr><td>4</td><td>[7]</td><td>[4,5]</td><td>[6]</td></tr><tr><td>5</td><td>[7,4]</td><td>[5]</td><td>[6]</td></tr><tr><td>6~7</td><td>[7,4,5]</td><td>[6]</td><td>[]</td></tr><tr><td>8</td><td>[7,4,5,6]</td><td>[]</td><td>[]</td></tr></tbody></table><p>ë”°ë¼ì„œ, ëª¨ë“  íŠ¸ëŸ­ì´ ë‹¤ë¦¬ë¥¼ ì§€ë‚˜ë ¤ë©´ ìµœì†Œ 8ì´ˆê°€ ê±¸ë¦½ë‹ˆë‹¤.</p><p>solution í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë‹¤ë¦¬ ê¸¸ì´ bridge_length, ë‹¤ë¦¬ê°€ ê²¬ë”œ ìˆ˜ ìˆëŠ” ë¬´ê²Œ weight, íŠ¸ëŸ­ë³„ ë¬´ê²Œ truck_weightsê°€ ì£¼ì–´ì§‘ë‹ˆë‹¤. ì´ë•Œ ëª¨ë“  íŠ¸ëŸ­ì´ ë‹¤ë¦¬ë¥¼ ê±´ë„ˆë ¤ë©´ ìµœì†Œ ëª‡ ì´ˆê°€ ê±¸ë¦¬ëŠ”ì§€ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•˜ì„¸ìš”.</p><h2 id="ì œí•œ-ì¡°ê±´"><a href="#ì œí•œ-ì¡°ê±´" class="headerlink" title="ì œí•œ ì¡°ê±´"></a>ì œí•œ ì¡°ê±´</h2><ul><li>bridge_lengthëŠ” 1 ì´ìƒ 10,000 ì´í•˜ì…ë‹ˆë‹¤.</li><li>weightëŠ” 1 ì´ìƒ 10,000 ì´í•˜ì…ë‹ˆë‹¤.</li><li>truck_weightsì˜ ê¸¸ì´ëŠ” 1 ì´ìƒ 10,000 ì´í•˜ì…ë‹ˆë‹¤.</li><li>ëª¨ë“  íŠ¸ëŸ­ì˜ ë¬´ê²ŒëŠ” 1 ì´ìƒ weight ì´í•˜ì…ë‹ˆë‹¤.</li></ul><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><table><thead><tr><th>bridge_length</th><th>weight</th><th>truck_weights</th><th>return</th></tr></thead><tbody><tr><td>2</td><td>10</td><td>[7,4,5,6]</td><td>8</td></tr><tr><td>100</td><td>100</td><td>[10]</td><td>101</td></tr><tr><td>100</td><td>100</td><td>[10,10,10,10,10,10,10,10,10,10]</td><td>110</td></tr></tbody></table><h1 id="ë¬¸ì œ-í’€ì´"><a href="#ë¬¸ì œ-í’€ì´" class="headerlink" title="ë¬¸ì œ í’€ì´"></a>ë¬¸ì œ í’€ì´</h1><p>ë°°ì—´ì„ listë¡œ í’€ë©´ í•˜ë‚˜ì˜ ì¼€ì´ìŠ¤ê°€ ì‹œê°„ì´ˆê³¼ê°€ ë°œìƒí•œë‹¤. popì™€ append ì‹œ indexë¥¼ ì¬ë°°ì—´í•˜ë¯€ë¡œ ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´, <code>collections</code> íŒ¨í‚¤ì§€ì˜ <code>deque</code> ë°°ì—´ì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•˜ì˜€ë‹¤.</p><p><code>queue</code> ë³€ìˆ˜ëŠ” ë‹¤ë¦¬ë¥¼ ì§€ë‚˜ê°€ê³  ìˆëŠ” íŠ¸ëŸ­ë“¤ì„ ë‚˜íƒ€ë‚¸ë‹¤. truck_weights ì˜ ëª¨ë“  íŠ¸ëŸ­ë“¤ì„ í•˜ë‚˜ì”© ë½‘ì•„ while ë¬¸ì„ ì‹¤í–‰í•œë‹¤.</p><p>queue ë°°ì—´ ê¸¸ì´ê°€ bridge_lengthì™€ ê°™ë‹¤ë©´ queueì—ì„œ popì„ ì‹¤í–‰í•˜ê³ , ë§Œì•½ ì„ íƒëœ íŠ¸ëŸ­ì˜ ë¬´ê²Œë¥¼ ë”í•´ë„ ë²„í‹¸ ìˆ˜ ìˆë‹¤ë©´ <em>(sum(queue) + truck &lt;= weight)</em> queueì— íŠ¸ëŸ­ì„ ì¶”ê°€í•˜ê³  whileë¬¸ì„ ë¹ ì ¸ë‚˜ì˜¨ë‹¤. ë§Œì•½ ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ queueì— 0ì„ ì™¼ìª½ì— ì¶”ê°€í•˜ê³  ì‹œê°„ì„ +1 í•œë‹¤.</p><p>ìœ„ë¥¼ ë°˜ë³µí•˜ê³  ë§ˆì§€ë§‰ì— ë“¤ì–´ê°„ íŠ¸ëŸ­ì˜ ì†Œìš”ì‹œê°„ì„ êµ¬í•˜ê¸° ìœ„í•´ bridge_lengthë¥¼ ë”í•˜ê³  ë¬¸ì œë¥¼ ë§ˆë¬´ë¦¬í•œë‹¤.</p><h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">bridge_length, weight, truck_weights</span>):</span></span><br><span class="line"></span><br><span class="line">    answer = <span class="number">0</span></span><br><span class="line">    queue = deque([])</span><br><span class="line">    truck_weights = deque(truck_weights)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> truck <span class="keyword">in</span> truck_weights:</span><br><span class="line">        <span class="keyword">while</span> truck:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(queue) == bridge_length:</span><br><span class="line">                queue.pop()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">sum</span>(queue) + truck &lt;= weight:</span><br><span class="line">                queue.appendleft(truck)</span><br><span class="line">                truck = <span class="number">0</span></span><br><span class="line">                answer += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                queue.appendleft(<span class="number">0</span>)</span><br><span class="line">                answer += <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">    answer += bridge_length    </span><br><span class="line">    <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><blockquote><p><em>Python ì˜ List íƒ€ì…ì˜ ê²½ìš° pop(0)ì„ ìˆ˜í–‰í•  ë•Œ ì¸ë±ìŠ¤ë¥¼ ì¬ë°°ì—´í•˜ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ë‹¤. ì¦‰, queueë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” Listë³´ë‹¤ Collections íŒ¨í‚¤ì§€ì˜ dequeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì‹œê°„ì´ˆê³¼ë¥¼ í”¼í•  ìˆ˜ ìˆë‹¤</em> </p></blockquote><hr><p>2019.12.03 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-truck/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Tibero ê³„ì •ì˜ ëª¨ë“  tableì„ HDFSë¡œ ì €ì¥</title>
      <link>https://jx2lee.github.io/hadoop-tables_to_hdfs_using_sqoop/</link>
      <guid>https://jx2lee.github.io/hadoop-tables_to_hdfs_using_sqoop/</guid>
      <pubDate>Tue, 26 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;Sqoop&lt;/code&gt;ì„ ì´ìš©í•´ RDB íŠ¹ì • ê³„ì •ì˜ ëª¨ë“  Tableì„ Import í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>Sqoop</code>ì„ ì´ìš©í•´ RDB íŠ¹ì • ê³„ì •ì˜ ëª¨ë“  Tableì„ Import í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤</p><a id="more"></a><p>Tiberoì˜ ERP ê³„ì •ì˜ ëª¨ë“  Tableì„ HDFSë¡œ ì €ì¥í•˜ê³  ë™ì‹œì— Hive Tableë¡œ ìƒì„±í•œë‹¤. <code>sqoop import-all-tables</code>ì„ ì´ìš©í•˜ë©° íŠ¹ì • ìŠ¤í‚¤ë§ˆê°€ ì—†ëŠ” í…Œì´ë¸”ì€ ì œì™¸í•˜ì˜€ë‹¤. êµ¬ë¬¸ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sqoop import-all-tables \</span><br><span class="line">--connect jdbc:tibero:thin:@[ip]:[port]:[DB SID] \</span><br><span class="line">--driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">--username [user] --password [passowrd] \</span><br><span class="line">--warehouse-dir [hdfs dir] \</span><br><span class="line">--hive-import --hive-overwrite --hive-database [metastore db name] \</span><br><span class="line">--exclude-tables SM_GROUP,SM_GROUP_PERMISSION,SM_PERMISSION,SM_PROJECT_GROUP_AUTH,SM_ROLE,SM_USER,SM_USER_GROUP \</span><br><span class="line">--m 1</span><br></pre></td></tr></table></figure><ul><li><em>â€“connect</em> : ì ‘ì†í•  DB ì •ë³´</li><li><em>â€“driver</em> : ì ‘ì†í•  DB Driver</li><li><em>â€“username &amp; â€“password</em> : ê³„ì • ID/Password</li><li><em>â€“warehouse-dir</em> : HDFS ìœ„ì¹˜</li><li><em>â€“hive-import â€“hive-overwrite â€“hive-database</em> : HDFSë¡œ ì €ì¥í•¨ê³¼ ë™ì‹œì— Hive tableë¡œ import. hive-databaseëŠ” MetaStoreì˜ database</li><li><em>â€“exclude-table</em> : Import ì‹œ ì œì™¸í•  Table</li><li><em>â€“m</em> : number of mappers</li></ul><blockquote><p><em>ì œì™¸í•  í…Œì´ë¸” ëª…ì„ ëª…ì‹œí•  ë–„ ì½¤ë§ˆ ì´í›„ì— ë¬´ì¡°ê±´ ë¶™ì—¬ì¤˜ì•¼ argumentë¥¼ ì¸ì‹í•œë‹¤</em></p></blockquote><p>ìƒê°ë³´ë‹¤ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë ¸ë‹¤. ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ beeline</span><br><span class="line">$ !connect jdbc:hive2://[ip]:[port] user password</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> tims;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"></span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">|       tab_name        |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">| aactv00t              |</span><br><span class="line">| aactv01t              |</span><br><span class="line">| aactv10t              |</span><br><span class="line">| aactv20t              |</span><br><span class="line">| aactv24t              |</span><br><span class="line">| aactv25t              |</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">| satch00t_03           |</span><br><span class="line">| sbms_common_code      |</span><br><span class="line">| sbms_document_data    |</span><br><span class="line">| sbms_error_log        |</span><br><span class="line">+<span class="comment">-----------------------+</span></span><br><span class="line">595 rows selected (0.183 seconds)</span><br></pre></td></tr></table></figure><hr><p>2019.11.27 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-tables_to_hdfs_using_sqoop/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë¬¸ìì—´ ì••ì¶•</title>
      <link>https://jx2lee.github.io/programmers-compress_char/</link>
      <guid>https://jx2lee.github.io/programmers-compress_char/</guid>
      <pubDate>Mon, 25 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì£¼ì–´ì§„ ë¬¸ìì—´ì„ ê°€ì¥ ì§§ê²Œ ì••ì¶•í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤ (2020 ì¹´ì¹´ì˜¤ 1ì°¨ ì½”ë”©í…ŒìŠ¤íŠ¸)&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ì£¼ì–´ì§„ ë¬¸ìì—´ì„ ê°€ì¥ ì§§ê²Œ ì••ì¶•í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤ (2020 ì¹´ì¹´ì˜¤ 1ì°¨ ì½”ë”©í…ŒìŠ¤íŠ¸)</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>ë°ì´í„° ì²˜ë¦¬ ì „ë¬¸ê°€ê°€ ë˜ê³  ì‹¶ì€ â€œì–´í”¼ì¹˜â€ëŠ” ë¬¸ìì—´ì„ ì••ì¶•í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ê³µë¶€ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ìµœê·¼ì— ëŒ€ëŸ‰ì˜ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ë¹„ì†ì‹¤ ì••ì¶• ë°©ë²•ì— ëŒ€í•´ ê³µë¶€ë¥¼ í•˜ê³  ìˆëŠ”ë°, ë¬¸ìì—´ì—ì„œ ê°™ì€ ê°’ì´ ì—°ì†í•´ì„œ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì„ ê·¸ ë¬¸ìì˜ ê°œìˆ˜ì™€ ë°˜ë³µë˜ëŠ” ê°’ìœ¼ë¡œ í‘œí˜„í•˜ì—¬ ë” ì§§ì€ ë¬¸ìì—´ë¡œ ì¤„ì—¬ì„œ í‘œí˜„í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ê³µë¶€í•˜ê³  ìˆìŠµë‹ˆë‹¤.<br>ê°„ë‹¨í•œ ì˜ˆë¡œ â€œaabbacccâ€ì˜ ê²½ìš° â€œ2a2ba3câ€(ë¬¸ìê°€ ë°˜ë³µë˜ì§€ ì•Šì•„ í•œë²ˆë§Œ ë‚˜íƒ€ë‚œ ê²½ìš° 1ì€ ìƒëµí•¨)ì™€ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ë°, ì´ëŸ¬í•œ ë°©ì‹ì€ ë°˜ë³µë˜ëŠ” ë¬¸ìê°€ ì ì€ ê²½ìš° ì••ì¶•ë¥ ì´ ë‚®ë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ë©´, â€œabcabcdedeâ€ì™€ ê°™ì€ ë¬¸ìì—´ì€ ì „í˜€ ì••ì¶•ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. â€œì–´í”¼ì¹˜â€ëŠ” ì´ëŸ¬í•œ ë‹¨ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë¬¸ìì—´ì„ 1ê°œ ì´ìƒì˜ ë‹¨ìœ„ë¡œ ì˜ë¼ì„œ ì••ì¶•í•˜ì—¬ ë” ì§§ì€ ë¬¸ìì—´ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ì§€ ë°©ë²•ì„ ì°¾ì•„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.<br><br>ì˜ˆë¥¼ ë“¤ì–´, â€œababcdcdababcdcdâ€ì˜ ê²½ìš° ë¬¸ìë¥¼ 1ê°œ ë‹¨ìœ„ë¡œ ìë¥´ë©´ ì „í˜€ ì••ì¶•ë˜ì§€ ì•Šì§€ë§Œ, 2ê°œ ë‹¨ìœ„ë¡œ ì˜ë¼ì„œ ì••ì¶•í•œë‹¤ë©´ â€œ2ab2cd2ab2cdâ€ë¡œ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ 8ê°œ ë‹¨ìœ„ë¡œ ì˜ë¼ì„œ ì••ì¶•í•œë‹¤ë©´ â€œ2ababcdcdâ€ë¡œ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë©°, ì´ë•Œê°€ ê°€ì¥ ì§§ê²Œ ì••ì¶•í•˜ì—¬ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì…ë‹ˆë‹¤.<br>ë‹¤ë¥¸ ì˜ˆë¡œ, â€œabcabcdedeâ€ì™€ ê°™ì€ ê²½ìš°, ë¬¸ìë¥¼ 2ê°œ ë‹¨ìœ„ë¡œ ì˜ë¼ì„œ ì••ì¶•í•˜ë©´ â€œabcabc2deâ€ê°€ ë˜ì§€ë§Œ, 3ê°œ ë‹¨ìœ„ë¡œ ìë¥¸ë‹¤ë©´ â€œ2abcdedeâ€ê°€ ë˜ì–´ 3ê°œ ë‹¨ìœ„ê°€ ê°€ì¥ ì§§ì€ ì••ì¶• ë°©ë²•ì´ ë©ë‹ˆë‹¤. ì´ë•Œ 3ê°œ ë‹¨ìœ„ë¡œ ìë¥´ê³  ë§ˆì§€ë§‰ì— ë‚¨ëŠ” ë¬¸ìì—´ì€ ê·¸ëŒ€ë¡œ ë¶™ì—¬ì£¼ë©´ ë©ë‹ˆë‹¤.<br>ì••ì¶•í•  ë¬¸ìì—´ sê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ìœ„ì— ì„¤ëª…í•œ ë°©ë²•ìœ¼ë¡œ 1ê°œ ì´ìƒ ë‹¨ìœ„ë¡œ ë¬¸ìì—´ì„ ì˜ë¼ ì••ì¶•í•˜ì—¬ í‘œí˜„í•œ ë¬¸ìì—´ ì¤‘ ê°€ì¥ ì§§ì€ ê²ƒì˜ ê¸¸ì´ë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•´ì£¼ì„¸ìš”.<br></p><h2 id="ì œí•œì‚¬í•­"><a href="#ì œí•œì‚¬í•­" class="headerlink" title="ì œí•œì‚¬í•­"></a>ì œí•œì‚¬í•­</h2><ul><li>sì˜ ê¸¸ì´ëŠ” 1 ì´ìƒ 1,000 ì´í•˜ì…ë‹ˆë‹¤.</li><li>sëŠ” ì•ŒíŒŒë²³ ì†Œë¬¸ìë¡œë§Œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</li></ul><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">     s                       result</span><br><span class="line">&quot;aabbaccc&quot;                     7</span><br><span class="line">&quot;ababcdcdababcdcd&quot;             9</span><br><span class="line">&quot;abcabcdede&quot;                   8</span><br><span class="line">&quot;abcabcabcabcdededededede&quot;    14</span><br><span class="line">&quot;xababcdcdababcdcd&quot;           17</span><br></pre></td></tr></table></figure><h2 id="ì…ì¶œë ¥-ì˜ˆì—-ëŒ€í•œ-ì„¤ëª…"><a href="#ì…ì¶œë ¥-ì˜ˆì—-ëŒ€í•œ-ì„¤ëª…" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆì— ëŒ€í•œ ì„¤ëª…"></a>ì…ì¶œë ¥ ì˜ˆì— ëŒ€í•œ ì„¤ëª…</h2><ul><li>ì…ì¶œë ¥ ì˜ˆ #1<ul><li>ë¬¸ìì—´ì„ 1ê°œ ë‹¨ìœ„ë¡œ ì˜ë¼ ì••ì¶•í–ˆì„ ë•Œ ê°€ì¥ ì§§ìŠµë‹ˆë‹¤.</li></ul></li><li>ì…ì¶œë ¥ ì˜ˆ #2<ul><li>ë¬¸ìì—´ì„ 8ê°œ ë‹¨ìœ„ë¡œ ì˜ë¼ ì••ì¶•í–ˆì„ ë•Œ ê°€ì¥ ì§§ìŠµë‹ˆë‹¤.</li></ul></li><li>ì…ì¶œë ¥ ì˜ˆ #3<ul><li>ë¬¸ìì—´ì„ 3ê°œ ë‹¨ìœ„ë¡œ ì˜ë¼ ì••ì¶•í–ˆì„ ë•Œ ê°€ì¥ ì§§ìŠµë‹ˆë‹¤.</li></ul></li><li>ì…ì¶œë ¥ ì˜ˆ #4<ul><li>ë¬¸ìì—´ì„ 2ê°œ ë‹¨ìœ„ë¡œ ìë¥´ë©´ â€œabcabcabcabc6deâ€ ê°€ ë©ë‹ˆë‹¤.</li><li>ë¬¸ìì—´ì„ 3ê°œ ë‹¨ìœ„ë¡œ ìë¥´ë©´ â€œ4abcdedededededeâ€ ê°€ ë©ë‹ˆë‹¤.</li><li>ë¬¸ìì—´ì„ 4ê°œ ë‹¨ìœ„ë¡œ ìë¥´ë©´ â€œabcabcabcabc3dedeâ€ ê°€ ë©ë‹ˆë‹¤.</li><li>ë¬¸ìì—´ì„ 6ê°œ ë‹¨ìœ„ë¡œ ìë¥¼ ê²½ìš° â€œ2abcabc2dededeâ€ê°€ ë˜ë©°, ì´ë•Œì˜ ê¸¸ì´ê°€ 14ë¡œ ê°€ì¥ ì§§ìŠµë‹ˆë‹¤.</li></ul></li><li>ì…ì¶œë ¥ ì˜ˆ #5<ul><li>ë¬¸ìì—´ì€ ì œì¼ ì•ë¶€í„° ì •í•´ì§„ ê¸¸ì´ë§Œí¼ ì˜ë¼ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì£¼ì–´ì§„ ë¬¸ìì—´ì„ x / ababcdcd / ababcdcd ë¡œ ìë¥´ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥ í•©ë‹ˆë‹¤. ì´ ê²½ìš° ì–´ë–»ê²Œ ë¬¸ìì—´ì„ ì˜ë¼ë„ ì••ì¶•ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ê°€ì¥ ì§§ì€ ê¸¸ì´ëŠ” ì´ ë©ë‹ˆë‹¤.</li></ul></li></ul><h1 id="ë¬¸ì œ-í’€ì´"><a href="#ë¬¸ì œ-í’€ì´" class="headerlink" title="ë¬¸ì œ í’€ì´"></a>ë¬¸ì œ í’€ì´</h1><p>ë”±íˆ ì‚¬ìš©í•œ ì•Œê³ ë¦¬ì¦˜ì€ ì—†ëŠ” ê²ƒ ê°™ë‹¤ <del>(êµ³ì´ ì„ íƒí•˜ë©´ ë¸Œë£¨íŠ¸í¬ìŠ¤?)</del>. ë°˜ë³µí•˜ëŠ” ë¬¸ìì—´ ê¸¸ì´ì— ë”°ë¼ ëª¨ë“  ë¬¸ìì—´ì„ ì••ì¶•í•˜ê³ , ì´ì— ëŒ€í•œ ê¸¸ì´ë¥¼ res ë¦¬ìŠ¤íŠ¸ì— ë‹´ì•„ ìµœì†Ÿê°’ì„ ì¶œë ¥í•´ë‚¸ë‹¤.</p><h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">s</span>):</span></span><br><span class="line">    result = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    cnt = <span class="number">1</span></span><br><span class="line">    res = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(s)+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(s), n):</span><br><span class="line">            <span class="keyword">if</span> s[i:i+n] == s[i+n:i+<span class="number">2</span>*n]:</span><br><span class="line">                cnt += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> cnt &gt; <span class="number">1</span>:</span><br><span class="line">                    result += <span class="built_in">str</span>(cnt) + s[i:i+n]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    result += s[i:i+n]</span><br><span class="line">                cnt = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> i == <span class="built_in">len</span>(s) - n:</span><br><span class="line">                <span class="keyword">if</span> cnt &gt; <span class="number">1</span>:</span><br><span class="line">                    result += <span class="built_in">str</span>(cnt) + s[i+n:i+<span class="number">2</span>*n]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    result += s[i+n:i+<span class="number">2</span>*n]</span><br><span class="line"></span><br><span class="line">        res.append(<span class="built_in">len</span>(result))</span><br><span class="line">        result = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        cnt = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(res)</span><br></pre></td></tr></table></figure><hr><p>2019.11.26 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-compress_char/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ìë¬¼ì‡ ì™€ ì—´ì‡ </title>
      <link>https://jx2lee.github.io/programmers-unlock/</link>
      <guid>https://jx2lee.github.io/programmers-unlock/</guid>
      <pubDate>Mon, 25 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;keyë¥¼ ì´ìš©í•´ ìë¬¼ì‡ ë¥¼ ì—¬ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤ (2020 ì¹´ì¹´ì˜¤ 1ì°¨ ì½”ë”©í…ŒìŠ¤íŠ¸)&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>keyë¥¼ ì´ìš©í•´ ìë¬¼ì‡ ë¥¼ ì—¬ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤ (2020 ì¹´ì¹´ì˜¤ 1ì°¨ ì½”ë”©í…ŒìŠ¤íŠ¸)</p><a id="more"></a><h1 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h1><p>ê³ ê³ í•™ìì¸ íŠœë¸ŒëŠ” ê³ ëŒ€ ìœ ì ì§€ì—ì„œ ë³´ë¬¼ê³¼ ìœ ì ì´ ê°€ë“í•  ê²ƒìœ¼ë¡œ ì¶”ì •ë˜ëŠ” ë¹„ë°€ì˜ ë¬¸ì„ ë°œê²¬í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ë¬¸ì„ ì—´ë ¤ê³  ì‚´í´ë³´ë‹ˆ íŠ¹ì´í•œ í˜•íƒœì˜ ìë¬¼ì‡ ë¡œ ì ê²¨ ìˆì—ˆê³  ë¬¸ ì•ì—ëŠ” íŠ¹ì´í•œ í˜•íƒœì˜ ì—´ì‡ ì™€ í•¨ê»˜ ìë¬¼ì‡ ë¥¼ í‘¸ëŠ” ë°©ë²•ì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•´ ì£¼ëŠ” ì¢…ì´ê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p>ì ê²¨ìˆëŠ” ìë¬¼ì‡ ëŠ” ê²©ì í•œ ì¹¸ì˜ í¬ê¸°ê°€ 1 x 1ì¸ N x N í¬ê¸°ì˜ ì •ì‚¬ê° ê²©ì í˜•íƒœì´ê³  íŠ¹ì´í•œ ëª¨ì–‘ì˜ ì—´ì‡ ëŠ” M x M í¬ê¸°ì¸ ì •ì‚¬ê° ê²©ì í˜•íƒœë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p><p>ìë¬¼ì‡ ì—ëŠ” í™ˆì´ íŒŒì—¬ ìˆê³  ì—´ì‡  ë˜í•œ í™ˆê³¼ ëŒê¸° ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ì—´ì‡ ëŠ” íšŒì „ê³¼ ì´ë™ì´ ê°€ëŠ¥í•˜ë©° ì—´ì‡ ì˜ ëŒê¸° ë¶€ë¶„ì„ ìë¬¼ì‡ ì˜ í™ˆ ë¶€ë¶„ì— ë”± ë§ê²Œ ì±„ìš°ë©´ ìë¬¼ì‡ ê°€ ì—´ë¦¬ê²Œ ë˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. ìë¬¼ì‡  ì˜ì—­ì„ ë²—ì–´ë‚œ ë¶€ë¶„ì— ìˆëŠ” ì—´ì‡ ì˜ í™ˆê³¼ ëŒê¸°ëŠ” ìë¬¼ì‡ ë¥¼ ì—¬ëŠ” ë° ì˜í–¥ì„ ì£¼ì§€ ì•Šì§€ë§Œ, ìë¬¼ì‡  ì˜ì—­ ë‚´ì—ì„œëŠ” ì—´ì‡ ì˜ ëŒê¸° ë¶€ë¶„ê³¼ ìë¬¼ì‡ ì˜ í™ˆ ë¶€ë¶„ì´ ì •í™•íˆ ì¼ì¹˜í•´ì•¼ í•˜ë©° ì—´ì‡ ì˜ ëŒê¸°ì™€ ìë¬¼ì‡ ì˜ ëŒê¸°ê°€ ë§Œë‚˜ì„œëŠ” ì•ˆë©ë‹ˆë‹¤. ë˜í•œ ìë¬¼ì‡ ì˜ ëª¨ë“  í™ˆì„ ì±„ì›Œ ë¹„ì–´ìˆëŠ” ê³³ì´ ì—†ì–´ì•¼ ìë¬¼ì‡ ë¥¼ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì—´ì‡ ë¥¼ ë‚˜íƒ€ë‚´ëŠ” 2ì°¨ì› ë°°ì—´ keyì™€ ìë¬¼ì‡ ë¥¼ ë‚˜íƒ€ë‚´ëŠ” 2ì°¨ì› ë°°ì—´ lockì´ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ì—´ì‡ ë¡œ ìë¬¼ì‡ ë¥¼ ì—´ìˆ˜ ìˆìœ¼ë©´ trueë¥¼, ì—´ ìˆ˜ ì—†ìœ¼ë©´ falseë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•´ì£¼ì„¸ìš”.</p><h2 id="ì œí•œì‚¬í•­"><a href="#ì œí•œì‚¬í•­" class="headerlink" title="ì œí•œì‚¬í•­"></a>ì œí•œì‚¬í•­</h2><ul><li>keyëŠ” M x M(3 â‰¤ M â‰¤ 20, Mì€ ìì—°ìˆ˜)í¬ê¸° 2ì°¨ì› ë°°ì—´ì…ë‹ˆë‹¤.</li><li>lockì€ N x N(3 â‰¤ N â‰¤ 20, Nì€ ìì—°ìˆ˜)í¬ê¸° 2ì°¨ì› ë°°ì—´ì…ë‹ˆë‹¤.</li><li>Mì€ í•­ìƒ N ì´í•˜ì…ë‹ˆë‹¤.</li><li>keyì™€ lockì˜ ì›ì†ŒëŠ” 0 ë˜ëŠ” 1ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</li><li>0ì€ í™ˆ ë¶€ë¶„, 1ì€ ëŒê¸° ë¶€ë¶„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li></ul><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><p>| key | lock | result |<br>| â€”â€“ | â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€” |<br>| [[0, 0, 0], [1, 0, 0], [0, 1, 1]]   | [[1, 1, 1], [1, 1, 0], [1, 0, 1]]    | true |</p><h2 id="ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…"><a href="#ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…"></a>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</h2><p><img src="https://grepp-programmers.s3.amazonaws.com/files/production/469703690b/79f2f473-5d13-47b9-96e0-a10e17b7d49a.jpg" alt="https://grepp-programmers.s3.amazonaws.com/files/production/469703690b/79f2f473-5d13-47b9-96e0-a10e17b7d49a.jpg"></p><p>keyë¥¼ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ 90ë„ íšŒì „í•˜ê³ , ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•œ ì¹¸, ì•„ë˜ë¡œ í•œ ì¹¸ ì´ë™í•˜ë©´ lockì˜ í™ˆ ë¶€ë¶„ì„ ì •í™•íˆ ëª¨ë‘ ì±„ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h1 id="ë¬¸ì œ-í’€ì´"><a href="#ë¬¸ì œ-í’€ì´" class="headerlink" title="ë¬¸ì œ í’€ì´"></a>ë¬¸ì œ í’€ì´</h1><p>í•œ ì¤„ë¡œ ë¬¸ì œë¥¼ í’€ì–´ë³´ë©´, <strong>lockì„ í™•ëŒ€í•˜ê³  keyë¥¼ í•˜ë‚˜ì”© ëŒ€ì…í•´ë³´ë©´ì„œ ëª¨ë“  ë¶€ë¶„ì´ 1ì¸ ê²½ìš°</strong>ë¥¼ ì°¾ìœ¼ë©´ ëœë‹¤. í¬ê²Œ ì„¸ ê°€ì§€ í•¨ìˆ˜ë¡œ êµ¬í˜„í•˜ì˜€ë‹¤.</p><p><code>rotate_key</code>ëŠ” ë§ê·¸ë˜ë„ ì…ë ¥í•œ key ë¥¼ ì‹œê³„ ë°©í–¥ 90ë„ë¡œ íšŒì „í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ì…ë ¥ì€ keyì™€ keyì˜ ê¸¸ì´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rotate_key</span>(<span class="params">key, M</span>):</span></span><br><span class="line">    res = [[<span class="number">0</span> * n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(M)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(M)]</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">            res[x][M - y - <span class="number">1</span>] = key[y][x]</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><p><code>expand_lock</code>ì€ lockì„ keyì™€ ëŒ€ì¡°í•˜ê¸° ìœ„í•´ í™•ì¥í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. <em>n+2 X (m-1)</em> ë§Œí¼ í™•ì¥í•œë‹¤. Nì€ lockì˜ ê¸¸ì´, Mì€ ì—´ì‡ ì˜ ê¸¸ì´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">expand_lock</span>(<span class="params">lock, N, M, K</span>):</span></span><br><span class="line">    res = [[<span class="number">0</span> * i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(K)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(K)]</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">            res[y + M - <span class="number">1</span>][x + M - <span class="number">1</span>] = lock[y][x]</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><p><code>is_open</code>ì€ í™•ì¥ëœ lockê³¼ keyë¥¼ ì´ìš©í•´ ê° êµ¬ë© valueë¥¼ ë”í•´ 1ì´ ì•„ë‹ˆë©´ ê²½ìš°ëŠ” False, 1ì¸ ê²½ìš°ì—ëŠ” Trueë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ì´ í•¨ìˆ˜ëŠ” í™•ì¥ëœ lockì„ ê²¹ì¹˜ëŠ” ë¶€ë¶„ë¶€í„° ëê¹Œì§€ keyë¥¼ forë¬¸ìœ¼ë¡œ ëŒë ¤ê°€ë©° í™•ì¸í•œë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_open</span>(<span class="params">_y, _x, key, lock, N, M</span>):</span></span><br><span class="line">    _lock = copy.deepcopy(lock)</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">            _lock[_y + y][_x + x] += key[y][x]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">            <span class="keyword">if</span> _lock[y + M - <span class="number">1</span>][x + M - <span class="number">1</span>] != <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>ë§ˆì§€ë§‰ <code>solution</code>í•¨ìˆ˜ëŠ” í•˜ë‚˜í•˜ë‚˜ í‚¤ë¥¼ ëŒë ¤ê°€ë©° ëª¨ë“  ê°’ë“¤ì´ 1ì¸ì§€ë¥¼ íŒë‹¨í•˜ê³ , ì•„ë‹ˆë©´ keyë¥¼ ëŒë ¤ê°€ë©° í™•ì¸í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">key, lock</span>):</span></span><br><span class="line"></span><br><span class="line">    n, m = <span class="built_in">len</span>(lock), <span class="built_in">len</span>(key)</span><br><span class="line">    k = n + <span class="number">2</span> * (m - <span class="number">1</span>)</span><br><span class="line">    lock = expand_lock(lock, n, m, k)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(k - m +<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(k - m +<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">                <span class="keyword">if</span> is_open(y, x, key, lock, n, m):</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">                key = rotate_key(key, m)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rotate_key</span>(<span class="params">key, M</span>):</span></span><br><span class="line">    res = [[<span class="number">0</span> * n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(M)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(M)]</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">            res[x][M - y - <span class="number">1</span>] = key[y][x]</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">expand_lock</span>(<span class="params">lock, N, M, K</span>):</span></span><br><span class="line">    res = [[<span class="number">0</span> * i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(K)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(K)]</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">            res[y + M - <span class="number">1</span>][x + M - <span class="number">1</span>] = lock[y][x]</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_open</span>(<span class="params">_y, _x, key, lock, N, M</span>):</span></span><br><span class="line">    _lock = copy.deepcopy(lock)</span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(M):</span><br><span class="line">            _lock[_y + y][_x + x] += key[y][x]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(N):</span><br><span class="line">            <span class="keyword">if</span> _lock[y + M - <span class="number">1</span>][x + M - <span class="number">1</span>] != <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">key, lock</span>):</span></span><br><span class="line">    answer = <span class="literal">True</span></span><br><span class="line">    n, m = <span class="built_in">len</span>(lock), <span class="built_in">len</span>(key)</span><br><span class="line">    k = n + <span class="number">2</span> * (m - <span class="number">1</span>)</span><br><span class="line">    lock = expand_lock(lock, n, m, k)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">range</span>(k - m +<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(k - m +<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">                <span class="keyword">if</span> is_open(y, x, key, lock, n, m):</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">                key = rotate_key(key, m)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><hr><p>2019.11.26 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-unlock/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Database] MySQL ìœ ì € ê´€ë¦¬</title>
      <link>https://jx2lee.github.io/database-manage_user_in_mysql/</link>
      <guid>https://jx2lee.github.io/database-manage_user_in_mysql/</guid>
      <pubDate>Sun, 24 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;MySQLì˜ ìœ ì €ë¥¼ ê´€ë¦¬í•´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>MySQLì˜ ìœ ì €ë¥¼ ê´€ë¦¬í•´ë³¸ë‹¤</p><a id="more"></a><h1 id="User-table"><a href="#User-table" class="headerlink" title="User table"></a>User table</h1><p>MySQLì—ì„œ ê´€ë¦¬í•˜ëŠ” ìœ ì €ë¥¼ ì¡°íšŒí•´ë³´ì. ìš°ì„ , ê¸°ë³¸ì ìœ¼ë¡œ mysql databaseì— user í…Œì´ë¸”ì—ì„œ ê´€ë¦¬í•œë‹¤. mysql databaseë¥¼ ì„ íƒí•˜ê³  user tableì˜ host, userë¥¼ ì¡°íšŒí•´ë³´ì.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| hive               |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">use</span> mysql;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; select host, user from user;</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">| host      | user             |</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">| %         | hive             |</span><br><span class="line">| localhost | mysql.infoschema |</span><br><span class="line">| localhost | mysql.session    |</span><br><span class="line">| localhost | mysql.sys        |</span><br><span class="line">| localhost | root             |</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><h1 id="Create-User-amp-Database"><a href="#Create-User-amp-Database" class="headerlink" title="Create User &amp; Database"></a>Create User &amp; Database</h1><h2 id="User"><a href="#User" class="headerlink" title="User"></a>User</h2><p>Sqoopë¥¼ ì´ìš©í•´ hdfs ë°ì´í„°ë¥¼ MySQL tableì„ ì €ì¥í•˜ê¸° ìœ„í•œ ê³„ì •ì„ ìƒì„±í•œë‹¤. <del>(Sqoop exportë¥¼ ìœ„í•´ì„œëŠ” í•´ë‹¹ RDBì— í…Œì´ë¸”ì´ ì¡´ì¬í•´ì•¼í•œë‹¤. êµ³ì´ ì´ê´€í•˜ëŠ” ê²ƒ ê¹Œì§„ í•„ìš”ì—†ì„ ê²ƒ ê°™ì•„, ì´ë²ˆ í¬ìŠ¤íŒ…ì—ëŠ” ìœ ì €ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë°©ë²•ë§Œ ë‹¤ë£¬ë‹¤)</del></p><p><code>create user [user name]@[ip] identified by [password];</code></p><ul><li>user name : ìƒì„±í•  ê³„ì •ëª…</li><li>ip : ì ‘ì†ê°€ëŠ¥ ipë¡œ ë¡œì»¬ ê³„ì •ì—ì„œë§Œ ì ‘ì†ì„ í—ˆìš©í•  ê²ƒì´ë©´ localhost, ë³¸ì¸ê³¼ ê°™ì´ ëª¨ë“  ì™¸ë¶€ IPì—ì„œ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ê²Œ í•˜ë ¤ë©´ <strong>%</strong></li><li>password : ìƒì„±í•  ê³„ì •ì˜ ë¹„ë°€ë²ˆí˜¸</li></ul><blockquote><p><em>ipì˜ ê²½ìš°, grant ëª…ë ¹ì–´ë¡œ ìˆ˜ì •ì´ ê°€ëŠ¥í•¨</em></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &#x27;tims&#x27;@&#x27;%&#x27; identified by &#x27;****&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select host, user from user;</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">| host      | user             |</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">| %         | hive             |</span><br><span class="line">| %         | tims             |</span><br><span class="line">| localhost | mysql.infoschema |</span><br><span class="line">| localhost | mysql.session    |</span><br><span class="line">| localhost | mysql.sys        |</span><br><span class="line">| localhost | root             |</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure><h2 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h2><p>ìƒì„±í•œ timsê³„ì •ì—ì„œ ì‚¬ìš©í•  databaseë¥¼ ìƒì„±í•œë‹¤.</p><p><code>create database [database name]</code></p><ul><li>database name : ìƒì„±í•  database ì´ë¦„</li></ul><p><code>grank all privileges on [database name].[schema] to [user name]@[ip]</code></p><ul><li>database naem : ìƒì„±í•œ database ì´ë¦„</li><li>schema : ìƒì„±í•œ database ë‚´ ìŠ¤í‚¤ë§ˆ</li><li>user name : ê¶Œí•œì„ ì¤„ ê³„ì •ëª…</li><li>ip : ì ‘ì† ip</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database tims;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; grant all privileges on tims.* to &#x27;tims&#x27;@&#x27;%&#x27;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure><p>í…ŒìŠ¤íŠ¸í•´ë³´ì. <code>show tables</code> ë¥¼ ì¹˜ê²Œë˜ë©´ ì•„ë¬´ í…Œì´ë¸”ì´ í‘œì‹œë˜ì§€ ì•Šì„ ê²ƒì´ë‹¤. <em>(ë‹¹ì—°)</em></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[mysql@node2 ~]$ mysql -u tims -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands <span class="keyword">end</span> <span class="keyword">with</span> ; or \g.</span><br><span class="line">Your MySQL connection id is 6820</span><br><span class="line">Server version: 8.0.18 Source distribution</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type &#x27;<span class="keyword">help</span>;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| information_schema |</span><br><span class="line">| tims               |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">use</span> tims;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">Empty <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><blockquote><p><em>ERROR 1045 (28000): Access denied for user â€˜hiveâ€™@â€™localhostâ€™ (using password: NO) ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì´ë•ŒëŠ” í•´ë‹¹ ê³„ì •ìœ¼ë¡œ Login í•  ë•Œ -p opitonì„ ë¶™ì—¬ì¤€ë‹¤</em></p></blockquote><hr><p>2019.11.25 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/database-manage_user_in_mysql/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Install Zeppelin and Connect to RDBMS &amp; Hive</title>
      <link>https://jx2lee.github.io/hadoop-install_zeppelin/</link>
      <guid>https://jx2lee.github.io/hadoop-install_zeppelin/</guid>
      <pubDate>Sun, 17 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;Apache Zeppelin&lt;/code&gt;ì„ ì„¤ì¹˜í•˜ê³  &lt;code&gt;Tibero&lt;/code&gt;ì™€ &lt;code&gt;Hive&lt;/code&gt;ì— ì—°ë™í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>Apache Zeppelin</code>ì„ ì„¤ì¹˜í•˜ê³  <code>Tibero</code>ì™€ <code>Hive</code>ì— ì—°ë™í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤</p><a id="more"></a><h1 id="Install-Apache-Zeppelin"><a href="#Install-Apache-Zeppelin" class="headerlink" title="Install Apache Zeppelin"></a>Install Apache Zeppelin</h1><p><code>Zeppelin</code> userë¥¼ ìƒì„±í•˜ê³  ì„¤ì¹˜íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ adduser zepp --gid 1000 <span class="comment"># bigdata</span></span><br><span class="line">$ wget http://apache.mirror.cdnetworks.com/zeppelin/zeppelin-0.8.2/zeppelin-0.8.2-bin-all.tgz</span><br><span class="line">$ <span class="built_in">cd</span> /app &amp;&amp; tar -xvzf zeppelin-0.8.2-bin-all.tgz</span><br></pre></td></tr></table></figure><p><code>$ZEPPELIN_HOME/conf/zeppelin-site.xml</code> íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.server.addr&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;192.xxx.xxx.xx&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;Server binding address, Server IP&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.server.port&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;8001&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;Server port.&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.server.ssl.port&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;8443&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;Server ssl port. (used when ssl property is <span class="built_in">set</span> to <span class="literal">true</span>)&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.server.context.path&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;/&lt;/value&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.server.context.path&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;/&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;Context Path of the Web Application&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.war.tempdir&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;webapps&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;Location of jetty temporary directory&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.notebook.dir&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;notebook&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;path or URI <span class="keyword">for</span> notebook persist&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.notebook.homescreen&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;id of notebook to be displayed <span class="keyword">in</span> homescreen. ex) 2A94M5J1Z Empty value displays default home screen&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;zeppelin.notebook.homescreen.hide&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;<span class="literal">false</span>&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;hide homescreen notebook from list when this value <span class="built_in">set</span> to <span class="literal">true</span>&lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><em>ì´ë¯¸ 8080í¬íŠ¸ê°€ ì‚¬ìš©ì¤‘ì´ë¯€ë¡œ portë¥¼ 8001ë¡œ ìˆ˜ì •í•˜ì˜€ë‹¤.</em></p></blockquote><p>zeppelin í´ë” ì´ìš© ê¶Œí•œì„ <code>zepp</code>ì—ê²Œ ì£¼ê³  daemonì„ ì‹¤í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ chown -R zepp:bigdata zeppelin/</span><br><span class="line">$ su - zepp</span><br><span class="line">$ bin/zeppelin-daemon.sh start</span><br><span class="line">Zeppelin start                                             [  OK  ]</span><br></pre></td></tr></table></figure><p><a href="http://localhost:8080">http://localhost:8080</a> ìœ¼ë¡œ ì ‘ì†í•œë‹¤.</p><p><img src="/image/zeppelin-home.png" alt=""></p><h1 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h1><h2 id="Tibero-Connection"><a href="#Tibero-Connection" class="headerlink" title="Tibero Connection"></a>Tibero Connection</h2><p>Tiberoì™€ ì—°ë™í•˜ëŠ” ë°©ë²•ì€ ê°„ë‹¨í•˜ë‹¤. <code>$ZEPPELIN_HOME/interpreter/jdbc</code> ì•ˆì— <code>tibero6-jdbc.jar</code> íŒŒì¼ì„ ë³µì‚¬í•œë‹¤</p><p><code>$ cp tibero6-jdbc.jar $ZEPPELIN_HOME/interpreter/jdbc/tibero6-jdbc.jar</code></p><p>ì´í›„ <code>$ZEPPELIN/conf/interpreter.json</code> ë‚´ <code>jdbc</code> ë¶€ë¶„ì— importí•  DB ì •ë³´ë¥¼ ì‘ì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;jdbc&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;id&quot;</span>: <span class="string">&quot;jdbc&quot;</span>,</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;jdbc&quot;</span>,</span><br><span class="line">  <span class="string">&quot;group&quot;</span>: <span class="string">&quot;jdbc&quot;</span>,</span><br><span class="line">  <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;default.url&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.url&quot;</span>,</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="string">&quot;jdbc:tibero:thin:@192.168.xxx.xxx:xxxx:tibero&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;default.driver&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.driver&quot;</span>,</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="string">&quot;com.tmax.tibero.jdbc.TbDriver&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;default.password&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.password&quot;</span>,</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="string">&quot;xxxxx&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;password&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;default.user&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.user&quot;</span>,</span><br><span class="line">      <span class="string">&quot;value&quot;</span>: <span class="string">&quot;xxx&quot;</span>,</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p><em><code>properties</code> ì•ˆì— default.url, default.driver, default.password/user ë¥¼ í•´ë‹¹ DB ì •ë³´ë¥¼ ì‘ì„±í•œë‹¤. ë‚˜ë¨¸ì§€ëŠ” ì„¸ë¶€ì ì¸ ì‚¬í•­ì´ë¯€ë¡œ <a href="https://zeppelin.apache.org/docs/0.8.0/interpreter/jdbc.html">https://zeppelin.apache.org/docs/0.8.0/interpreter/jdbc.html</a>ë¥¼ í™•ì¸í•´ í•„ìš”í•˜ë©´ ìˆ˜ì •í•˜ë„ë¡ í•œë‹¤.</em></p></blockquote><p><code>Zeppelin</code>ì„ ì¬ì‹¤í–‰í•œë‹¤. Notebookì„ ìƒì„±í•˜ê³  <code>%jdbc \n select * from tab</code>ì„ ì‹¤í–‰í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$ZEPPELIN_HOME</span>/bin/zeppelin-daemon.sh restart</span><br><span class="line"></span><br><span class="line">%jdbc</span><br><span class="line">select * from tab</span><br></pre></td></tr></table></figure><p><img src="/image/zeppelin-jdbc.png" alt=""></p><h2 id="Hive-Connection"><a href="#Hive-Connection" class="headerlink" title="Hive Connection"></a>Hive Connection</h2><p><code>Hive</code>ì™€ì˜ ì—°ë™ë„ ë§ˆì°¬ê°€ì§€ë¡œ <code>$ZEPPELIN/conf/interpreter.json</code> ë‚´ <code>interpreterSettings</code> ë¶€ë¶„ì— Hive ì •ë³´ë¥¼ ì‘ì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;interpreterSettings&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;hive&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;id&quot;</span>: <span class="string">&quot;hive&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;hive&quot;</span>,</span><br><span class="line">      <span class="string">&quot;group&quot;</span>: <span class="string">&quot;jdbc&quot;</span>,</span><br><span class="line">      <span class="string">&quot;properties&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;default.url&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.url&quot;</span>,</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: <span class="string">&quot;jdbc:hive2://localhost:10000/project&quot;</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;default.driver&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.driver&quot;</span>,</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: <span class="string">&quot;org.apache.hive.jdbc.HiveDriver&quot;</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">        <span class="string">&quot;default.password&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.password&quot;</span>,</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: <span class="string">&quot;hive&quot;</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;password&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&quot;default.user&quot;</span>: &#123;</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;default.user&quot;</span>,</span><br><span class="line">          <span class="string">&quot;value&quot;</span>: <span class="string">&quot;hive&quot;</span>,</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;string&quot;</span></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">      <span class="string">&quot;dependencies&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;groupArtifactVersion&quot;</span>: <span class="string">&quot;org.apache.hive:hive-jdbc:2.3.6&quot;</span>,</span><br><span class="line">          <span class="string">&quot;local&quot;</span>: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;groupArtifactVersion&quot;</span>: <span class="string">&quot;org.apache.hadoop:hadoop-common:2.6.0&quot;</span>,</span><br><span class="line">          <span class="string">&quot;local&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="string">&quot;exclusions&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;option&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;remote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;port&quot;</span>: -1,</span><br></pre></td></tr></table></figure><blockquote><p><em>templeteì„ ì´ìš©í•´ êµ³ì´ ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. Zeppelin ì›¹ì—ì„œ interpreterë¥¼ ìƒì„±í•œ í›„ <strong>default.driver, default.password, default.url, default.user, Dependencies 2ê°œ</strong>ë¥¼ ì‘ì„±í•œ í›„ ìƒì„±í•˜ë©´ ìë™ìœ¼ë¡œ interpreter.jsonì— ì¶”ê°€ëœë‹¤. ì£¼ì˜í•  ì ì€, HiveServer2 ë¡œ ì ‘ê·¼ì´ ê°€ëŠ¥í•œ ìƒíƒœì„ì„ ì²´í¬í•´ì£¼ì–´ì•¼ í•œë‹¤.</em></p></blockquote><p><code>Zeppelin</code>ì„ ì¬ì‹¤í–‰í•œë‹¤. Notebookì„ ìƒì„±í•˜ê³  <code>%jdbc \n show tables</code>ì„ ì‹¤í–‰í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$ZEPPELIN_HOME</span>/bin/zeppelin-daemon.sh restart</span><br><span class="line"></span><br><span class="line">%hive</span><br><span class="line">show tables</span><br></pre></td></tr></table></figure><p><img src="/image/zeppelin-hive.png" alt=""></p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><a href="https://zeppelin.apache.org/docs/0.8.0/interpreter/hive.html#dependencies">Zeppelin Documents, https://zeppelin.apache.org/docs/0.8.0/interpreter/hive.html#dependencies </a></li></ol><hr><p>2019.11.18 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-install_zeppelin/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Install Presto</title>
      <link>https://jx2lee.github.io/hadoop-install_presto/</link>
      <guid>https://jx2lee.github.io/hadoop-install_presto/</guid>
      <pubDate>Mon, 11 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;Presto&lt;/code&gt;ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>Presto</code>ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤</p><a id="more"></a><h1 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h1><h2 id="Add-user-amp-Download"><a href="#Add-user-amp-Download" class="headerlink" title="Add user &amp; Download"></a>Add user &amp; Download</h2><p><code>Presto</code> userë¥¼ ìƒì„±í•˜ê³  hdclient ê·¸ë£¹ì— í¬í•¨í•œë‹¤. ì´í›„ ì„¤ì¹˜íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ adduser presto --gid 8630 <span class="comment"># hdclient</span></span><br><span class="line">$ wget https://repo1.maven.org/maven2/com/facebook/presto/presto-server/0.228/presto-server-0.228.tar.gz</span><br></pre></td></tr></table></figure><h2 id="bash-profile"><a href="#bash-profile" class="headerlink" title=".bash_profile"></a>.bash_profile</h2><p><code>.bash_profile</code>ì— <code>Hadoop</code> ë° <code>Presto</code> Envë¥¼ ì¶”ê°€í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hadoop Env</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/app/jdk</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/app/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:\</span><br><span class="line"><span class="variable">$HADOOP_HOME</span>/bin:\</span><br><span class="line"><span class="variable">$HADOOP_HOME</span>/sbin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HADOOP_PREFIX=/app/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_COMMON_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=<span class="variable">$HADOOP_PREFIX</span>/etc/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_HDFS_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_MAPRED_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_YARN_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> YARN_CONF_DIR=<span class="variable">$HADOOP_PREFIX</span>/etc/hadoop</span><br><span class="line"></span><br><span class="line"><span class="comment"># Presto Env</span></span><br><span class="line"><span class="built_in">export</span> PRESTO_HOME=/app/presto</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$HIVE_HOME</span>/bin</span><br></pre></td></tr></table></figure><h1 id="Configuring-Presto"><a href="#Configuring-Presto" class="headerlink" title="Configuring Presto"></a>Configuring Presto</h1><p>ì„¸ ê°œì˜ ì„¤ì •íŒŒì¼ì„ <code>$PRESTO_HOME/etc</code> í´ë”ì— ìƒì„±í•œë‹¤.</p><h2 id="etc-node-properties"><a href="#etc-node-properties" class="headerlink" title="/etc/node.properties"></a>/etc/node.properties</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node.environment=production</span><br><span class="line">node.id=ffffffff-ffff-ffff-ffff-ffffffffffff</span><br><span class="line">node.data-dir=/app/presto/data</span><br></pre></td></tr></table></figure><h2 id="etc-jvm-confing"><a href="#etc-jvm-confing" class="headerlink" title="/etc/jvm.confing"></a>/etc/jvm.confing</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-server</span><br><span class="line">-Xmx16G</span><br><span class="line">-XX:+UseG1GC</span><br><span class="line">-XX:G1HeapRegionSize=32M</span><br><span class="line">-XX:+UseGCOverheadLimit</span><br><span class="line">-XX:+ExplicitGCInvokesConcurrent</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">-XX:+ExitOnOutOfMemoryError</span><br></pre></td></tr></table></figure><h2 id="etc-config-properties"><a href="#etc-config-properties" class="headerlink" title="/etc/config.properties"></a>/etc/config.properties</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">coordinator=<span class="literal">true</span></span><br><span class="line">node-scheduler.include-coordinator=<span class="literal">true</span></span><br><span class="line">http-server.http.port=8000</span><br><span class="line">query.max-memory=5GB</span><br><span class="line">query.max-memory-per-node=1GB</span><br><span class="line">query.max-total-memory-per-node=2GB</span><br><span class="line">discovery-server.enabled=<span class="literal">true</span></span><br><span class="line">discovery.uri=http://192.168.xxx.xxx:8000</span><br></pre></td></tr></table></figure><blockquote><ul><li><code>http-server.htt.port</code> : <em>PrestoëŠ” ë‚´ë¶€ ë° ì™¸ë¶€ ëª¨ë“  í†µì‹ ì— HTTPë¥¼ ì‚¬ìš©í•˜ë©°, ë‚´ ê²½ìš° 8000ë²ˆ í¬íŠ¸ë¥¼ open, ì´ë¥¼ í†µí•´ í†µì‹ </em></li><li><code>discovery.uri</code> : <em>Presto instanceëŠ” ì‹œì‘ ì‹œ Discovery serviceì— ë“±ë¡ë˜ëŠ” URIë¡œ Presto êµ¬ë™ ì„œë²„ì˜ IPì™€ port (ìœ„ì™€ ê°™ì€ ê²½ìš°ëŠ” 8000 port) ë¡œ ì‘ì„±</em></li></ul></blockquote><h2 id="etc-catalog-hive-properties"><a href="#etc-catalog-hive-properties" class="headerlink" title="/etc/catalog/hive.properties"></a>/etc/catalog/hive.properties</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">connector.name=hive-hadoop2</span><br><span class="line">hive.metastore.uri=thrift://localhost:9083</span><br></pre></td></tr></table></figure><blockquote><p><em>Hive MetaStore ì˜ default portëŠ” *</em>9083***</p></blockquote><p>ìœ„ì— ìƒì„±í•œ íŒŒì¼ë“¤ì„ treeë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tree .</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ catalog</span><br><span class="line">â”‚Â Â  â””â”€â”€ hive.properties</span><br><span class="line">â”œâ”€â”€ config.properties</span><br><span class="line">â”œâ”€â”€ jvm.config</span><br><span class="line">â””â”€â”€ node.properties</span><br><span class="line"></span><br><span class="line">1 directory, 4 files</span><br></pre></td></tr></table></figure><h1 id="Start-Presto-Server"><a href="#Start-Presto-Server" class="headerlink" title="Start Presto Server"></a>Start Presto Server</h1><p><code>$PRESTO_HOME/bin</code> í´ë”ì— <code>launcher</code> íŒŒì¼ì„ ì‹¤í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ./launcher start</span><br><span class="line">Started as 25072</span><br><span class="line"><span class="comment"># $PRESTO_HOME/data/var/log/launcher.log</span></span><br><span class="line">2019-11-12T14:56:02.306+0900INFOmainio.airlift.log.LoggingLogging to stderr</span><br><span class="line">2019-11-12T14:56:02.308+0900INFOmainBootstrapLoading configuration</span><br><span class="line">2019-11-12T14:56:02.404+0900INFOmainBootstrapInitializing logging</span><br><span class="line">2019-11-12T14:56:02.447+0900INFOmainio.airlift.log.LoggingLogging to /app/presto/data/var/<span class="built_in">log</span>/server.log</span><br><span class="line">2019-11-12T14:56:02.497+0900INFOmainio.airlift.log.LoggingDisabling stderr output</span><br></pre></td></tr></table></figure><p>Presto CLI ì„ <code>wget</code>ì„ ì´ìš©í•´ ë‹¤ìš´ë¡œë“œ í•œë‹¤. ì´í›„ ì‹¤í–‰ê¶Œí•œì„ ì£¼ê³  CLI ë¥¼ ì‹¤í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://repo1.maven.org/maven2/com/facebook/presto/presto-cli/0.228/presto-cli-0.228-executable.jar &amp;&amp; mv presto-cli-0.228-executable.jar presto</span><br><span class="line">$ chmod +x presto</span><br><span class="line">$ ./presto --server 192.168.154.156:8000 --catalog hive --schema project</span><br></pre></td></tr></table></figure><blockquote><p><em>Presto CLI ëª…ë ¹ì–´ arguments</em></p><ul><li><code>server</code> : <em>discovery.uri</em></li><li><code>catalog</code> : <em>Hive MetaStore</em></li><li><code>schema</code> : <em>Hive metaStore</em> ì¤‘ <em>project db **</em></li></ul></blockquote><p>í…Œì´ë¸”ì„ ì¡°íšŒí•´ë³´ì.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">presto:project&gt; show tables;</span><br><span class="line">  Table   </span><br><span class="line"><span class="comment">----------</span></span><br><span class="line"> binvt00t </span><br><span class="line"> bprjt00t </span><br><span class="line"> ccomp00t </span><br><span class="line"> iprsn00t </span><br><span class="line">(4 rows)</span><br><span class="line"></span><br><span class="line">Query 20191112_060524_00002_bgi94, FINISHED, 1 node</span><br><span class="line">Splits: 19 total, 19 done (100.00%)</span><br><span class="line">0:02 [4 rows, 100B] [1 rows/s, 43B/s]</span><br></pre></td></tr></table></figure><p><strong>êµ¬ì¶• ì™„ë£Œ!</strong></p><h1 id="Query-ì†ë„-ë¹„êµ"><a href="#Query-ì†ë„-ë¹„êµ" class="headerlink" title="Query ì†ë„ ë¹„êµ"></a>Query ì†ë„ ë¹„êµ</h1><p>í…Œì´ë¸”ì˜ row ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ì¿¼ë¦¬ë¬¸ì„ <code>Presto</code>ì™€ <code>Hive</code>ì—ì„œ ìˆ˜í–‰í•´ë³¸ë‹¤.</p><ul><li><code>Presto</code></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">presto:project&gt; select count(*) from bprjt00t;</span><br><span class="line"> _col0 </span><br><span class="line"><span class="comment">-------</span></span><br><span class="line"> 65355 </span><br><span class="line">(1 row)</span><br><span class="line"></span><br><span class="line">Query 20191112_061041_00004_bgi94, FINISHED, 1 node</span><br><span class="line">Splits: 23 total, 23 done (100.00%)</span><br><span class="line">0:04 [65.4K rows, 9.29MB] [15.9K rows/s, 2.26MB/s]</span><br></pre></td></tr></table></figure><ul><li><code>Hive</code></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select count(*)</span><br><span class="line">    &gt; from bprjt00t;</span><br><span class="line">WARNING: Hive-on-MR is deprecated in Hive 2 and may not be available in the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">Query ID = hive_20191112151209_8598d146-fed8-4b55-8a2b-e1ed186a82d0</span><br><span class="line">Total jobs = 1</span><br><span class="line">Launching Job 1 out of 1</span><br><span class="line">Number of reduce tasks determined at compile time: 1</span><br><span class="line">In order to <span class="keyword">change</span> the average <span class="keyword">load</span> <span class="keyword">for</span> a reducer (<span class="keyword">in</span> <span class="keyword">bytes</span>):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer=&lt;<span class="built_in">number</span>&gt;</span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">limit</span> the maximum <span class="built_in">number</span> <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max=&lt;<span class="built_in">number</span>&gt;</span><br><span class="line"><span class="keyword">In</span> <span class="keyword">order</span> <span class="keyword">to</span> <span class="keyword">set</span> a <span class="keyword">constant</span> <span class="built_in">number</span> <span class="keyword">of</span> reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces=&lt;<span class="built_in">number</span>&gt;</span><br><span class="line"><span class="keyword">Starting</span> Job = job_1567153359966_0111, <span class="keyword">Tracking</span> <span class="keyword">URL</span> = <span class="keyword">http</span>://node5.dat:<span class="number">8088</span>/proxy/application_1567153359966_0111/</span><br><span class="line"><span class="keyword">Kill</span> Command = /app/hadoop/<span class="keyword">bin</span>/hadoop job  -<span class="keyword">kill</span> job_1567153359966_0111</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: <span class="built_in">number</span> <span class="keyword">of</span> mappers: <span class="number">2</span>; number of reducers: 1</span><br><span class="line">2019-11-12 15:12:19,615 Stage-1 map = 0%,  reduce = 0%</span><br><span class="line">2019-11-12 15:12:23,860 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 4.1 sec</span><br><span class="line">2019-11-12 15:12:27,986 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 5.98 sec</span><br><span class="line">MapReduce Total cumulative CPU time: 5 seconds 980 msec</span><br><span class="line">Ended Job = job_1567153359966_0111</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-Stage-1: Map: 2  Reduce: 1   Cumulative CPU: 5.98 sec   HDFS Read: 9754283 HDFS Write: 105 SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: 5 seconds 980 msec</span><br><span class="line">OK</span><br><span class="line">65355</span><br><span class="line">Time taken: 20.718 seconds, Fetched: 1 row(s)</span><br></pre></td></tr></table></figure><blockquote><p><em>ëŒ€ëµ Prestoê°€ Hive ëŒ€ë¹„ ì¿¼ë¦¬ì†ë„ê°€ *</em>20ë°° ê°€ëŸ‰ ë¹ ë¥´ë‹¤***</p></blockquote><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><a href="https://prestodb.io/docs/current/index.html">Presto Documents</a></li><li><a href="https://medium.com/@nil.me/a-single-node-installation-of-presto-and-simple-benchmarks-3271bc738ed1">A Single-node Installation of Presto and Simple Benchmarks</a></li></ol><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-install_presto/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Sqoopì„ ì´ìš©í•œ Table ì¡°íšŒ</title>
      <link>https://jx2lee.github.io/hadoop-sqoop_example/</link>
      <guid>https://jx2lee.github.io/hadoop-sqoop_example/</guid>
      <pubDate>Wed, 06 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Tibero Tableì„ &lt;code&gt;Sqoop&lt;/code&gt; ì„ ì´ìš©í•´ HDFSì— ì €ì¥í•¨ê³¼ ë™ì‹œì—, &lt;code&gt;Hive&lt;/code&gt; ë¡œ ì¡°íšŒí•˜ëŠ” ì˜ˆì œë¥¼ ì‚´í´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Tibero Tableì„ <code>Sqoop</code> ì„ ì´ìš©í•´ HDFSì— ì €ì¥í•¨ê³¼ ë™ì‹œì—, <code>Hive</code> ë¡œ ì¡°íšŒí•˜ëŠ” ì˜ˆì œë¥¼ ì‚´í´ë³¸ë‹¤.</p><a id="more"></a><h1 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h1><h2 id="RDBMS-Table"><a href="#RDBMS-Table" class="headerlink" title="RDBMS Table"></a>RDBMS Table</h2><p>BPRJT00T í…Œì´ë¸”ì„ í™•ì¸í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">$ DESC BPRJT00T;</span><br><span class="line">COLUMN_NAME                              TYPE               CONSTRAINT          </span><br><span class="line"><span class="comment">---------------------------------------- ------------------ --------------------</span></span><br><span class="line">PRJT_CD                                  VARCHAR(10)        PRIMARY KEY</span><br><span class="line">PRJT_NM                                  VARCHAR(1000)      </span><br><span class="line">COMP_CD                                  VARCHAR(10)        </span><br><span class="line">CUST_CD                                  VARCHAR(10)        </span><br><span class="line">PRJT_ENV                                 VARCHAR(3000)      </span><br><span class="line">BUSI_AMT                                 NUMBER(13)         </span><br><span class="line">ATTACH_NO_ORG                            VARCHAR(20)        </span><br><span class="line">IMPORTANT_CLS                            VARCHAR(1)         NOT NULL</span><br><span class="line">MA_PRJT_CLS                              VARCHAR(1)         NOT NULL</span><br><span class="line">REPORT_CLS                               VARCHAR(4)         NOT NULL</span><br><span class="line">PRIORITY_CD                              VARCHAR(4)         NOT NULL</span><br><span class="line">PRJT_STATUS                              VARCHAR(4)         NOT NULL</span><br><span class="line">SALE_EMP                                 VARCHAR(7)         </span><br><span class="line">REMARK                                   VARCHAR(4000)      </span><br><span class="line">REG_EMP                                  VARCHAR(7)         </span><br><span class="line">REG_DATE                                 VARCHAR(8)         </span><br><span class="line">MOD_EMP                                  VARCHAR(7)         </span><br><span class="line">MOD_DATE                                 VARCHAR(8)         </span><br><span class="line">LOSS_PROD                                VARCHAR(200)       </span><br><span class="line">CURRENCY_KIND                            VARCHAR(4)         NOT NULL</span><br><span class="line">RECNTR_YN                                VARCHAR(1)         NOT NULL</span><br><span class="line">RECNTR_STATUS                            VARCHAR(4)         </span><br><span class="line">DIST_PATH                                VARCHAR(100)       </span><br><span class="line">DISTRIB_YN                               VARCHAR(1)         NOT NULL</span><br><span class="line">DISTRIB_PRJTCD                           VARCHAR(10)        </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INDEX_NAME                       TYPE                     COLUMN_NAME           </span><br><span class="line"><span class="comment">-------------------------------- ------------------------ ----------------------</span></span><br><span class="line">BPRJT00T_IDX01                   NORMAL                   SALE_EMP</span><br><span class="line">BPRJT00T_IDX02                   NORMAL                   COMP_CD</span><br><span class="line">BPRJT00T_PK                      NORMAL                   PRJT_CD</span><br><span class="line">$ <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> BPRJT00T;</span><br><span class="line">  COUNT(*)</span><br><span class="line"><span class="comment">----------</span></span><br><span class="line">     56125</span><br></pre></td></tr></table></figure><h2 id="Sqoop-eval"><a href="#Sqoop-eval" class="headerlink" title="Sqoop eval"></a>Sqoop eval</h2><p><code>Sqoop</code>ì„ ì´ìš©í•´ í…Œì´ë¸” ì ‘ê·¼ì´ ê°€ëŠ¥í•œì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">eval</span> \</span><br><span class="line">-connect jdbc:tibero:thin:@[ip]:[port]:[DB SID]] \</span><br><span class="line">-driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">-username XXX -password XXX \</span><br><span class="line">-e <span class="string">&quot;select * from BPRJT00T where rownum &lt; 10&quot;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p><em>ë³´ì•ˆìƒ ì¡°íšŒ ê²°ê³¼ëŠ” ìƒëµí•˜ì˜€ë‹¤</em></p></blockquote><h1 id="RDMBS-to-HDFS"><a href="#RDMBS-to-HDFS" class="headerlink" title="RDMBS to HDFS"></a>RDMBS to HDFS</h1><p>í™•ì¸ì´ ëë‚¬ë‹¤ë©´, ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ <code>Sqoop</code>ìœ¼ë¡œ HDFSì— ì €ì¥í•˜ê³  ë™ì‹œì— <code>Hive</code>ë¡œ Import í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sqoop import <span class="string">&quot;-Dorg.apache.sqoop.splitter.allow_text_splitter=true&quot;</span> \</span><br><span class="line">--connect jdbc:tibero:thin:@[ip]:[port]:[DB SID] \</span><br><span class="line">--driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">--target-dir /project/BPRJT00T \</span><br><span class="line">--username XXX --password XXX \</span><br><span class="line">--table BPRJT00T \</span><br><span class="line">--fields-terminated-by <span class="string">&quot;,&quot;</span> \</span><br><span class="line">--hive-import \</span><br><span class="line">--create-hive-table \</span><br><span class="line">--hive-table project.BPRJT00T</span><br></pre></td></tr></table></figure><blockquote><p><em>Hiveë¡œ Import í•˜ê¸° ìœ„í•´ì„œëŠ” ë¯¸ë¦¬ Databaseê°€ êµ¬ì„±ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. (ë‚˜ì˜ ê²½ìš° DB Nameì€ project)</em></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">19/11/07 16:28:43 INFO hive.HiveImport: OK</span><br><span class="line">19/11/07 16:28:43 INFO hive.HiveImport: Time taken: 4.162 seconds</span><br><span class="line">19/11/07 16:28:44 INFO hive.HiveImport: Loading data to table project.bprjt00t</span><br><span class="line">19/11/07 16:28:44 INFO hive.HiveImport: OK</span><br><span class="line">19/11/07 16:28:44 INFO hive.HiveImport: Time taken: 0.611 seconds</span><br><span class="line">19/11/07 16:28:45 INFO hive.HiveImport: Hive import complete.</span><br><span class="line">19/11/07 16:28:45 INFO hive.HiveImport: Export directory is contains the _SUCCESS file only, removing the directory.</span><br></pre></td></tr></table></figure><h1 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h1><p>ìš°ì„ , <code>Hive</code>ë¡œ Import í•œ í…Œì´ë¸”ì„ hdfs ëª…ë ì–´ë¡œ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -ls /user/hive/warehouse</span><br><span class="line">Found 1 items</span><br><span class="line">drwxrwxrwx   - hive supergroup          0 2019-11-07 16:27 /user/hive/warehouse/project.db</span><br><span class="line">$ hdfs dfs -ls /user/hive/warehouse/project.db/</span><br><span class="line">Found 1 items</span><br><span class="line">drwxrwxrwx   - hive supergroup          0 2019-11-07 16:28 /user/hive/warehouse/project.db/bprjt00t</span><br></pre></td></tr></table></figure><blockquote><p><em>ì˜ ë“¤ì–´ê°”ë‹¤.</em></p></blockquote><p>ê·¸ëŸ¼ <code>Hive</code> ì½˜ì†”ë¡œ ì ‘ì†í•˜ì—¬ BPRJT00T í…Œì´ë¸”ì„ ì¡°íšŒí•´ë³´ì.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ hive</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding <span class="keyword">in</span> [jar:file:/app/hive/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding <span class="keyword">in</span> [jar:file:/app/hadoop/2.9.2/share/hadoop/common/lib/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html<span class="comment">#multiple_bindings for an explanation.</span></span><br><span class="line">SLF4J: Actual binding is of <span class="built_in">type</span> [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line"></span><br><span class="line">Logging initialized using configuration <span class="keyword">in</span> jar:file:/app/hive/lib/hive-common-2.3.6.jar!/hive-log4j2.properties Async: <span class="literal">true</span></span><br><span class="line">Hive-on-MR is deprecated <span class="keyword">in</span> Hive 2 and may not be available <span class="keyword">in</span> the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.</span><br><span class="line">hive&gt; $ use project;</span><br><span class="line">OK</span><br><span class="line">Time taken: 2.963 seconds</span><br><span class="line">hive&gt; $ select * from bprjt00t <span class="built_in">limit</span> 10;</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><blockquote><p><em>ì´ë˜í•œ, ì¡°íšŒê²°ê³¼ëŠ” ìƒëµ</em></p></blockquote><hr><p>2019.11.07 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-sqoop_example/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Hive Import ì‹œ Could not initialize class org.apache.derby.jdbc.EmbeddedDriver ë¬¸ì œí•´ê²°</title>
      <link>https://jx2lee.github.io/hadoop-sqoop_import_error/</link>
      <guid>https://jx2lee.github.io/hadoop-sqoop_import_error/</guid>
      <pubDate>Wed, 06 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;Hive&lt;/code&gt; ì— RDMS í…Œì´ë¸”ì„ import í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>Hive</code> ì— RDMS í…Œì´ë¸”ì„ import í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤</p><a id="more"></a><h1 id="Status"><a href="#Status" class="headerlink" title="Status"></a>Status</h1><p>ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ Tibero í…Œì´ë¸” <em>BPRJT00T</em>ë¥¼ <code>Sqoop</code>ìœ¼ë¡œ ë•¡ê²¨ì˜¤ê³  <code>Hive</code>ë¡œ Import í•˜ê³ ì í–ˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sqoop import <span class="string">&quot;-Dorg.apache.sqoop.splitter.allow_text_splitter=true&quot;</span> \</span><br><span class="line">--connect jdbc:tibero:thin:@192.168.154.xxx:xxxx:tibero \</span><br><span class="line">--driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">--target-dir /project/BPRJT00T \</span><br><span class="line">--username ERP --password xxxx \</span><br><span class="line">--table BPRJT00T \</span><br><span class="line">--fields-terminated-by <span class="string">&quot;,&quot;</span> \</span><br><span class="line">--hive-import \</span><br><span class="line">--create-hive-table \</span><br><span class="line">--hive-table project.BPRJT00T</span><br></pre></td></tr></table></figure><h1 id="Error-Message"><a href="#Error-Message" class="headerlink" title="Error Message"></a>Error Message</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Could not initialize class org.apache.derby.jdbc.EmbeddedDriver...</span><br><span class="line">...</span><br><span class="line">... 12 more</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>ë¶„ëª… <code>Hive</code>ì˜ MetaStoreë¥¼ <strong>MySQL</strong>ë¡œ ì„¤ì •í•˜ì˜€ëŠ”ë°<em>(ì´ˆê¸°í™”ê¹Œì§€ ì™„ë£Œí•œ ìƒíƒœ)</em> ìê¾¸ Derby Driverë¥¼ ëª»ì°¾ì•˜ë‹¤ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì´ëŠ”, <strong>hive-site.xmlì´ Hiveê°€ ì¸ì‹ì„ ëª»í•´ Default Databaseë¡œ Derby</strong>ë¥¼ ì‚¬ìš©í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŠ” <strong>.bash_profile ë˜ëŠ” .profile ë‚´ HADOOP_CLASSPATHë¥¼ ì¶”ê°€</strong>í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p><blockquote><p><em>ë§Œì•½ ë‚˜ì²˜ëŸ¼ MetaStoreë¥¼ MySQLì´ ì•„ë‹Œ Derbyë¡œ ì„¤ì •í–ˆëŠ”ë° ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´, $HIVE_HOME/lib ì•ˆì— connector íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ì—†ë‹¤ë©´ copy &amp; paste í•˜ì</em></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vi ~/.profile</span><br><span class="line"><span class="built_in">export</span> HADOOP_CLASSPATH=<span class="variable">$HIVE_HOME</span>/conf:<span class="variable">$HIVE_HOME</span>/lib</span><br><span class="line">$ . ~/.profile</span><br></pre></td></tr></table></figure><p>ì´í›„ Statusì—ì„œ ì‘ì„±í•œ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ë©´ <code>Hive</code>ì— ë¯¸ë¦¬ ìƒì„±í•´ë†“ì€ Databaseì— í…Œì´ë¸”ì´ ìƒì„±í•œ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -ls /user/hive/warehouse</span><br><span class="line">Found 1 items</span><br><span class="line">drwxrwxrwx   - hive supergroup          0 2019-11-07 15:41 /user/hive/warehouse/project.db</span><br></pre></td></tr></table></figure><blockquote><p><em>MySQL hive ìœ ì €ì˜ proejct DBì— bprjt00t í…Œì´ë¸”ì´ ë“¤ì–´ê°€ ìˆìŒì„ í™•ì¸</em></p></blockquote><hr><p>2019.11.07 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-sqoop_import_error/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Database] Install MySQL 8.0</title>
      <link>https://jx2lee.github.io/database-install_mysql/</link>
      <guid>https://jx2lee.github.io/database-install_mysql/</guid>
      <pubDate>Tue, 05 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Hiveì˜ Meta Storeë¡œ MySQLë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„¤ì¹˜í•˜ê³ , ì´ë¥¼ ì •ë¦¬í•œë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Hiveì˜ Meta Storeë¡œ MySQLë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì„¤ì¹˜í•˜ê³ , ì´ë¥¼ ì •ë¦¬í•œë‹¤</p><a id="more"></a><h1 id="Setting-Environment"><a href="#Setting-Environment" class="headerlink" title="Setting Environment"></a>Setting Environment</h1><p>ì„¤ì¹˜ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ versionì„ ë§ì¶°ì¤„ í•„ìš”ê°€ ìˆë‹¤.</p><h2 id="Version-Up-CMake"><a href="#Version-Up-CMake" class="headerlink" title="Version Up CMake"></a>Version Up CMake</h2><p><code>CMake</code> ì´ í•˜ìœ„ versionì´ë¼ë©´ ì˜¬ë ¤ë³´ë„ë¡ í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xvzf cmake-3.16.0-rc3.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> cmake-3.16.0-rc3.tar.gz</span><br><span class="line">$ ./bootstrap</span><br><span class="line">$ make</span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure><h2 id="Version-up-gcc"><a href="#Version-up-gcc" class="headerlink" title="Version up gcc"></a>Version up gcc</h2><p>ë§ˆì°¬ê°€ì§€ë¡œ <code>gcc</code> versionì´ í•˜ìœ„ ë²„ì ¼ì´ë©´ ì˜¬ë ¤ë³´ë„ë¡ í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install centos-release-scl</span><br><span class="line">$ sudo yum install devtoolset-7-gcc*</span><br><span class="line">$ scl <span class="built_in">enable</span> devtoolset-7 bash</span><br><span class="line">$ <span class="built_in">which</span> gcc</span><br><span class="line">$ gcc --version</span><br><span class="line">gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)</span><br><span class="line">Copyright (C) 2015 Free Software Foundation, Inc.</span><br><span class="line">This is free software; see the <span class="built_in">source</span> <span class="keyword">for</span> copying conditions.  There is NO</span><br><span class="line">warranty; not even <span class="keyword">for</span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</span><br></pre></td></tr></table></figure><h1 id="Make"><a href="#Make" class="headerlink" title="Make"></a>Make</h1><p><code>wget</code>ì„ ì´ìš©í•´ binary íŒŒì¼ì„ ë‹¤ìš´ë°›ê³  <code>CMake</code>ì„ ì´ìš©í•´ ì„¤ì¹˜í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /app/</span><br><span class="line">$ wget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.18.tar.gz</span><br><span class="line">$ tar xvfz mysql-8.0.18.tar.gz</span><br><span class="line">$ <span class="built_in">cd</span> mysql-8.0.18</span><br><span class="line">$ cmake \</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=/app/mysql \</span><br><span class="line">-DMYSQL_DATADIR=/home/mysql/data \</span><br><span class="line">-DSYSCONFDIR=/app/mysql \</span><br><span class="line">-DMYSQL_USER=mysql \</span><br><span class="line">-DWITH_MYISAM_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_PARTITION_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_MEMORY_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_READLINE=1 \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/app/mysql/mysql.sock \</span><br><span class="line">-DMYSOL_TCP_PORT=3306 \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DENABLE_DOWNLOADS=1 \</span><br><span class="line">-DWITH_EXTRA_CHARSETS=all \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_DEBUG=0 \</span><br><span class="line">-DMYSQL_MAINTAINER_MODE=0 \</span><br><span class="line">-DDOWNLOAD_BOOST=1 \</span><br><span class="line">-DDOWNLOAD_BOOST=1 -DWITH_BOOST=/app/mysql-8.0.18</span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure><h1 id="Add-Servcie"><a href="#Add-Servcie" class="headerlink" title="Add Servcie"></a>Add Servcie</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cp mysql.server /etc/rc.d/init.d/mysql</span><br><span class="line">$ ln -s /etc/rc.d/init.d/mysql /etc/rc.d/rc3.d/S97mysql </span><br><span class="line">$ vi /usr/lib/systemd/system/mysql.service</span><br></pre></td></tr></table></figure><h1 id="etc-my-cnf"><a href="#etc-my-cnf" class="headerlink" title="/etc/my.cnf"></a>/etc/my.cnf</h1><p>/etc ì— <code>my.cnf</code> config íŒŒì¼ì„ ìƒì„±í•œë‹¤. <code>my.cnf</code>ëŠ” <strong>MySQL</strong>ì˜ configë¥¼ ì„¤ì •í•˜ëŠ” íŒŒì¼ì´ë©°, ë³¸ ì„¤ì¹˜ì—ì„œëŠ” DB Engineìœ¼ë¡œ <strong>InnoDB</strong>ë¥¼ ì‚¬ìš©í•œë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set &#x3D; utf8</span><br><span class="line">port &#x3D; 3306</span><br><span class="line">socket &#x3D; &#x2F;tmp&#x2F;mysql.sock</span><br><span class="line">default-character-set &#x3D; utf8</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line">socket&#x3D;&#x2F;app&#x2F;mysql&#x2F;mysql.sock</span><br><span class="line">datadir&#x3D;&#x2F;home&#x2F;mysql&#x2F;data</span><br><span class="line">basedir &#x3D; &#x2F;app&#x2F;mysql</span><br><span class="line">#user &#x3D; mysql</span><br><span class="line">#bind-address &#x3D; 0.0.0.0</span><br><span class="line"></span><br><span class="line">skip-external-locking</span><br><span class="line">key_buffer_size &#x3D; 384M</span><br><span class="line">max_allowed_packet &#x3D; 16M</span><br><span class="line">table_open_cache &#x3D; 2048</span><br><span class="line">sort_buffer_size &#x3D; 2M</span><br><span class="line">read_buffer_size &#x3D; 2M</span><br><span class="line">read_rnd_buffer_size &#x3D; 8M</span><br><span class="line">myisam_sort_buffer_size &#x3D; 64M</span><br><span class="line">thread_cache_size &#x3D; 8</span><br><span class="line"> </span><br><span class="line">#dns query</span><br><span class="line">skip-name-resolve</span><br><span class="line"> </span><br><span class="line">#connection</span><br><span class="line">max_connections &#x3D; 1000</span><br><span class="line">max_connect_errors &#x3D; 1000</span><br><span class="line">wait_timeout&#x3D; 60</span><br><span class="line"> </span><br><span class="line">#slow-queries</span><br><span class="line">#slow_query_log &#x3D; &#x2F;home&#x2F;mysql_data&#x2F;slow-queries.log</span><br><span class="line">#long_query_time &#x3D; 3</span><br><span class="line">#log-slow-queries &#x3D; &#x2F;home&#x2F;mysql_data&#x2F;mysql-slow-queries.log</span><br><span class="line"> </span><br><span class="line">##timestamp</span><br><span class="line">explicit_defaults_for_timestamp</span><br><span class="line">symbolic-links&#x3D;0</span><br><span class="line"></span><br><span class="line">### log</span><br><span class="line">log-error&#x3D;&#x2F;home&#x2F;mysql&#x2F;data&#x2F;mysqld.log</span><br><span class="line">pid-file&#x3D;&#x2F;home&#x2F;mysql&#x2F;mysqld.pid</span><br><span class="line"> </span><br><span class="line">###chracter</span><br><span class="line">character-set-client-handshake&#x3D;FALSE</span><br><span class="line">init_connect &#x3D; SET collation_connection &#x3D; utf8_general_ci</span><br><span class="line">init_connect &#x3D; SET NAMES utf8</span><br><span class="line">character-set-server &#x3D; utf8</span><br><span class="line">collation-server &#x3D; utf8_general_ci</span><br><span class="line">symbolic-links&#x3D;0</span><br><span class="line"></span><br><span class="line">##Password Policy</span><br><span class="line">#validate_password_policy&#x3D;LOW</span><br><span class="line">#validate_password_policy&#x3D;MEDIUM</span><br><span class="line"> </span><br><span class="line">### MyISAM Spectific options</span><br><span class="line">#default-storage-engine &#x3D; myisam</span><br><span class="line">key_buffer_size &#x3D; 32M</span><br><span class="line">bulk_insert_buffer_size &#x3D; 64M</span><br><span class="line">myisam_sort_buffer_size &#x3D; 128M</span><br><span class="line">myisam_max_sort_file_size &#x3D; 10G</span><br><span class="line">myisam_repair_threads &#x3D; 1</span><br><span class="line"> </span><br><span class="line">### INNODB Spectific options</span><br><span class="line">default-storage-engine &#x3D; InnoDB</span><br><span class="line">#skip-innodb</span><br><span class="line">#innodb_additional_mem_pool_size &#x3D; 16M</span><br><span class="line">innodb_buffer_pool_size &#x3D; 1024MB</span><br><span class="line">innodb_data_file_path &#x3D; ibdata1:10M:autoextend</span><br><span class="line">innodb_write_io_threads &#x3D; 8</span><br><span class="line">innodb_read_io_threads &#x3D; 8</span><br><span class="line">innodb_thread_concurrency &#x3D; 16</span><br><span class="line">innodb_flush_log_at_trx_commit &#x3D; 1</span><br><span class="line">innodb_log_buffer_size &#x3D; 8M</span><br><span class="line">innodb_log_file_size &#x3D; 128M</span><br><span class="line">innodb_log_files_in_group &#x3D; 3</span><br><span class="line">innodb_max_dirty_pages_pct &#x3D; 90</span><br><span class="line">innodb_lock_wait_timeout &#x3D; 120</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">[mysqldump]</span><br><span class="line">default-character-set &#x3D; utf8</span><br><span class="line">max_allowed_packet &#x3D; 512M</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">[mysql]</span><br><span class="line">#no-auto-rehash</span><br><span class="line">default-character-set &#x3D; utf8</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">[myisamchk]</span><br><span class="line">key_buffer_size &#x3D; 512M</span><br><span class="line">sort_buffer_size &#x3D; 512M</span><br><span class="line">read_buffer &#x3D; 8M</span><br><span class="line">write_buffer &#x3D; 8M</span><br></pre></td></tr></table></figure><h1 id="Initialize-Database"><a href="#Initialize-Database" class="headerlink" title="Initialize Database"></a>Initialize Database</h1><p>Databaseë¥¼ mysql userë¡œ ì´ˆê¸°í™” í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ /app/mysql/bin/mysqld --initialize-insecure --basedir=/app/mysql --datadir=/home/mysql/data --user=mysql</span><br><span class="line">$ ll /home/mysql/data/</span><br><span class="line">total 448572</span><br><span class="line">-rw-r----- 1 mysql mysql        56 Nov  5 17:19 auto.cnf</span><br><span class="line">-rw------- 1 mysql mysql      1680 Nov  5 17:19 ca-key.pem</span><br><span class="line">-rw-r--r-- 1 mysql mysql      1112 Nov  5 17:19 ca.pem</span><br><span class="line">-rw-r--r-- 1 mysql mysql      1112 Nov  5 17:19 client-cert.pem</span><br><span class="line">-rw------- 1 mysql mysql      1676 Nov  5 17:19 client-key.pem</span><br><span class="line">-rw-r----- 1 mysql mysql      6100 Nov  5 17:19 ib_buffer_pool</span><br><span class="line">-rw-r----- 1 mysql mysql  10485760 Nov  5 17:19 ibdata1</span><br><span class="line">-rw-r----- 1 mysql mysql 134217728 Nov  5 17:19 ib_logfile0</span><br><span class="line">-rw-r----- 1 mysql mysql 134217728 Nov  5 17:19 ib_logfile1</span><br><span class="line">-rw-r----- 1 mysql mysql 134217728 Nov  5 17:19 ib_logfile2</span><br><span class="line">drwxr-x--- 2 mysql mysql         6 Nov  5 17:19 <span class="comment">#innodb_temp</span></span><br><span class="line">drwxr-x--- 2 mysql mysql       143 Nov  5 17:19 mysql</span><br><span class="line">-rw-r----- 1 mysql mysql      1301 Nov  5 17:19 mysqld.log</span><br><span class="line">-rw-r----- 1 mysql mysql  25165824 Nov  5 17:19 mysql.ibd</span><br><span class="line">drwxr-x--- 2 mysql mysql      8192 Nov  5 17:19 performance_schema</span><br><span class="line">-rw------- 1 mysql mysql      1680 Nov  5 17:19 private_key.pem</span><br><span class="line">-rw-r--r-- 1 mysql mysql       452 Nov  5 17:19 public_key.pem</span><br><span class="line">-rw-r--r-- 1 mysql mysql      1112 Nov  5 17:19 server-cert.pem</span><br><span class="line">-rw------- 1 mysql mysql      1676 Nov  5 17:19 server-key.pem</span><br><span class="line">drwxr-x--- 2 mysql mysql        28 Nov  5 17:19 sys</span><br><span class="line">-rw-r----- 1 mysql mysql  10485760 Nov  5 17:19 undo_001</span><br><span class="line">-rw-r----- 1 mysql mysql  10485760 Nov  5 17:19 undo_002</span><br></pre></td></tr></table></figure><h1 id="Restart-Service-amp-Checking"><a href="#Restart-Service-amp-Checking" class="headerlink" title="Restart Service &amp; Checking"></a>Restart Service &amp; Checking</h1><p>Service ì¬ê¸°ë™ í›„ <strong>MySQL</strong>ì´ ì œëŒ€ë¡œ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl stop mysql</span><br><span class="line">$ systemctl start mysql</span><br><span class="line">$ /app/mysql/bin/mysql -u root -p</span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection id is 8</span><br><span class="line">Server version: 8.0.18 Source distribution</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; </span><br><span class="line">mysql&gt; </span><br><span class="line">mysql&gt; </span><br><span class="line">mysql&gt; \s</span><br><span class="line">--------------</span><br><span class="line">/app/mysql/bin/mysql  Ver 8.0.18 <span class="keyword">for</span> Linux on x86_64 (Source distribution)</span><br><span class="line"></span><br><span class="line">Connection id:8</span><br><span class="line">Current database:</span><br><span class="line">Current user:root@localhost</span><br><span class="line">SSL:Not <span class="keyword">in</span> use</span><br><span class="line">Current pager:stdout</span><br><span class="line">Using outfile:<span class="string">&#x27;&#x27;</span></span><br><span class="line">Using delimiter:;</span><br><span class="line">Server version:8.0.18 Source distribution</span><br><span class="line">Protocol version:10</span><br><span class="line">Connection:Localhost via UNIX socket</span><br><span class="line">Server characterset:utf8</span><br><span class="line">Db     characterset:utf8</span><br><span class="line">Client characterset:utf8</span><br><span class="line">Conn.  characterset:utf8</span><br><span class="line">UNIX socket:/tmp/mysql.sock</span><br><span class="line">Uptime:17 min 25 sec</span><br><span class="line"></span><br><span class="line">Threads: 2  Questions: 6  Slow queries: 0  Opens: 115  Flush tables: 3  Open tables: 35  Queries per second avg: 0.005</span><br><span class="line">--------------</span><br></pre></td></tr></table></figure><blockquote><p><em>MySQL ì‹œì‘ ì‹œ /tmp/mysql.sock ì´ ì—†ë‹¤ê³  failì´ ë‚  ìˆ˜ ìˆë‹¤. ì´ë•ŒëŠ” tmp í´ë”ì•ˆì— mysql.sockì´ ìˆëŠ” pathë¡œ ë§í¬ë¥¼ ìƒì„±í•˜ë©´ëœë‹¤. (ì´ˆê¸° ì„¤ì •ë¶€í„° /tmpì— ì•ˆë“¤ì–´ê°€ê²Œë” ì–´ë–»ê²Œ ì„¤ì •í•˜ì§€..? ì´ê±´ ë‚´ì¼í•˜ì!)</em></p></blockquote><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ol><li><a href="https://xinet.kr/?p=2149">MYSQL 8.0 INSTALL ( mysql 8.0.17 ) / Centos 7</a></li><li><a href="https://idchowto.com/?p=43760">CentOS7ì—ì„œ Mysql 8.0 ì†ŒìŠ¤ ì„¤ì¹˜</a></li><li><a href="https://dev.mysql.com/doc/refman/8.0/en/installing.html">MySQL Documents</a></li></ol><hr><p>2019.11.06 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/database-install_mysql/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Install Hive</title>
      <link>https://jx2lee.github.io/hadoop-install_hive/</link>
      <guid>https://jx2lee.github.io/hadoop-install_hive/</guid>
      <pubDate>Tue, 05 Nov 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Hiveë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Hiveë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤</p><a id="more"></a><h1 id="Preliminaries"><a href="#Preliminaries" class="headerlink" title="Preliminaries"></a>Preliminaries</h1><h2 id="Add-user-amp-group"><a href="#Add-user-amp-group" class="headerlink" title="Add user &amp; group"></a>Add user &amp; group</h2><p><code>Hive</code> userë¥¼ ìƒì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ groupadd hdclient</span><br><span class="line">$ usermod -g hdclient sqoop </span><br><span class="line">$ adduser hive --gid 8630 <span class="comment"># hdclient</span></span><br></pre></td></tr></table></figure><h2 id="bash-profile"><a href="#bash-profile" class="headerlink" title=".bash_profile"></a>.bash_profile</h2><p><code>.bash_profile</code>ì— <code>Hadoop</code> ë° <code>Hive</code> ENVë¥¼ ì¶”ê°€í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hadoop</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/app/jdk</span><br><span class="line"><span class="built_in">export</span> HADOOP_HOME=/app/hadoop</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:\</span><br><span class="line"><span class="variable">$HADOOP_HOME</span>/bin:\</span><br><span class="line"><span class="variable">$HADOOP_HOME</span>/sbin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> HADOOP_PREFIX=/app/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_COMMON_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=<span class="variable">$HADOOP_PREFIX</span>/etc/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_HDFS_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_MAPRED_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> HADOOP_YARN_HOME=<span class="variable">$HADOOP_PREFIX</span></span><br><span class="line"><span class="built_in">export</span> YARN_CONF_DIR=<span class="variable">$HADOOP_PREFIX</span>/etc/hadoop</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hive</span></span><br><span class="line"><span class="built_in">export</span> HIVE_HOME=/app/hive</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$HIVE_HOME</span>/bin</span><br></pre></td></tr></table></figure><h2 id="Setting-MySQL-for-Hive-MetaStore"><a href="#Setting-MySQL-for-Hive-MetaStore" class="headerlink" title="Setting MySQL for Hive MetaStore"></a>Setting MySQL for Hive MetaStore</h2><p><code>Hive</code> MetaStoreë¥¼ MySQLë¡œ ì‚¬ìš©í•˜ê¸°ìœ„í•´ ìƒˆë¡œìš´ databaseì™€ <code>hive</code> userë¥¼ ìƒì„±í•œë‹¤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">create</span> <span class="keyword">database</span> hive;</span><br><span class="line">$ <span class="keyword">create</span> <span class="keyword">user</span> hive@<span class="string">&#x27;%&#x27;</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">&#x27;hive&#x27;</span>;</span><br><span class="line">$ <span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> hive.* <span class="keyword">to</span> hive@<span class="string">&#x27;%&#x27;</span>;</span><br><span class="line">$ <span class="keyword">use</span> mysql;</span><br><span class="line">$ <span class="keyword">select</span> host, <span class="keyword">user</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">| host      | user             |</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">| %         | hive             |</span><br><span class="line">| localhost | mysql.infoschema |</span><br><span class="line">| localhost | mysql.session    |</span><br><span class="line">| localhost | mysql.sys        |</span><br><span class="line">| localhost | root             |</span><br><span class="line">+<span class="comment">-----------+------------------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><blockquote><p><em>userë¥¼ ìƒì„±í•  ë•Œ ê³¨ë±…ì´ ë’¤ %ëŠ” ëª¨ë“  ì™¸ë¶€ ipì˜ ì ‘ê·¼ì„ í—ˆìš©í•œë‹¤ëŠ” ëœ»ì´ë‹¤.</em></p></blockquote><h2 id="jdbc-to-HIVE-HOME-lib"><a href="#jdbc-to-HIVE-HOME-lib" class="headerlink" title="jdbc to $HIVE_HOME/lib/"></a>jdbc to $HIVE_HOME/lib/</h2><p>MySQL Driverë¥¼ í•´ë‹¹ PATHë¡œ ë³µì‚¬í•œë‹¤.</p><p><code>$ cp tibero6-jdbc.jar /app/hive/lib/</code></p><blockquote><p><em>Driver URL : <a href="https://dev.mysql.com/downloads/connector/j/8.0.html">https://dev.mysql.com/downloads/connector/j/8.0.html</a></em></p></blockquote><h1 id="Hive-Configurations"><a href="#Hive-Configurations" class="headerlink" title="Hive Configurations"></a>Hive Configurations</h1><h2 id="hive-env-sh"><a href="#hive-env-sh" class="headerlink" title="hive-env.sh"></a>hive-env.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cp <span class="variable">$HIVE_HOME</span>/conf/hive-env.sh.template <span class="variable">$HIVE_HOME</span>/conf/hive-env.sh`</span><br><span class="line">$ vi <span class="variable">$HIVE_HOME</span>/conf/hive-env.sh</span><br><span class="line">HADOOP_HOME=/app/hadoop</span><br></pre></td></tr></table></figure><h2 id="hive-site-xml"><a href="#hive-site-xml" class="headerlink" title="hive-site.xml"></a>hive-site.xml</h2><p><code>hive-site.xml</code>ì„ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤. <code>Hive</code>ì˜ MetaStoreë¥¼ ì™¸ë¶€ ì„œë²„ì˜ MySQLë¥¼ ì´ìš©í•  ì˜ˆì •ì´ë‹¤. <em>(Hive ì„¤ì¹˜ëœ ì„œë²„ì™€ ë³„ê°œì˜ ì„œë²„ì´ë‹¤. ë§Œì•½ ê°™ì€ ì„œë²„ë¼ë©´, javax.jdo.option.ConnectionURLì˜ ip:portê°’ì€ localhost:portë¡œ ì‘ì„±í•œë‹¤.)</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.local<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://ip:port/hive?serverTimezone=UTC<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>hive<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.urls<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>thrift://node5.dat:10000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><em>javax.jdo.option.ConnectionURLì˜ port ë’¤ hiveëŠ” MetaStoreë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ MySQL DB nameì´ë‹¤. ë’¤ì— serverTimezone argë¥¼ ì¶”ê°€í•œ ì´ìœ ëŠ” ì¶”ê°€í•˜ì§€ ì•Šìœ¼ë©´ SchemaTool ì´ˆê¸°í™” ì‹œ ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ëœ¬ë‹¤. ê²°êµ­ì—” ì‹œê°„ í˜•ì‹ì´ ë§ì§€ ì•Šì•„ ìƒê¸°ëŠ” ë¬¸ì œì´ë¯€ë¡œ argë¥¼ ì¶”ê°€í•œë‹¤</em></p></blockquote><h2 id="Create-MetaStore-Schema"><a href="#Create-MetaStore-Schema" class="headerlink" title="Create MetaStore Schema"></a>Create MetaStore Schema</h2><p><code>schematool -initSchema -dbType mysql --verbose</code> ì„ í†µí•´ <code>Hive</code>ì˜ MetaStoreë¥¼ ì´ˆê¸°í™” í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">$ schematool -initSchema -dbType mysql --verbose</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">beeline&gt; Initialization script completed</span><br><span class="line">schemaTool completed</span><br><span class="line">$ mysql -u hive -p</span><br><span class="line">mysql&gt; use hive;</span><br><span class="line">Reading table information <span class="keyword">for</span> completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+---------------------------+</span><br><span class="line">| Tables_in_hive            |</span><br><span class="line">+---------------------------+</span><br><span class="line">| AUX_TABLE                 |</span><br><span class="line">| BUCKETING_COLS            |</span><br><span class="line">| CDS                       |</span><br><span class="line">| COLUMNS_V2                |</span><br><span class="line">| COMPACTION_QUEUE          |</span><br><span class="line">| COMPLETED_COMPACTIONS     |</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">| SERDE_PARAMS              |</span><br><span class="line">| TYPES                     |</span><br><span class="line">| TYPE_FIELDS               |</span><br><span class="line">| VERSION                   |</span><br><span class="line">| WRITE_SET                 |</span><br><span class="line">+---------------------------+</span><br><span class="line">57 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><h1 id="Run-HiveServer-amp-MetaStore"><a href="#Run-HiveServer-amp-MetaStore" class="headerlink" title="Run HiveServer &amp; MetaStore"></a>Run HiveServer &amp; MetaStore</h1><p><code>hiveserver2</code>ì™€ <code>metastore</code>ë¥¼ ê¸°ë™í•´ì£¼ë©´ ì™„ë£Œ.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ hive --service hiveserver2 &amp;</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding <span class="keyword">in</span> [jar:file:/app/hive/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding <span class="keyword">in</span> [jar:file:/app/hadoop/2.9.2/share/hadoop/common/lib/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html<span class="comment">#multiple_bindings for an explanation.</span></span><br><span class="line">SLF4J: Actual binding is of <span class="built_in">type</span> [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">Loading class `com.mysql.jdbc.Driver<span class="string">&#x27;. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver&#x27;</span>. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.</span><br><span class="line">$ hive --service metastore &amp;</span><br><span class="line">SLF4J: Class path contains multiple SLF4J bindings.</span><br><span class="line">SLF4J: Found binding <span class="keyword">in</span> [jar:file:/app/hive/lib/log4j-slf4j-impl-2.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: Found binding <span class="keyword">in</span> [jar:file:/app/hadoop/2.9.2/share/hadoop/common/lib/slf4j-log4j12-1.7.25.jar!/org/slf4j/impl/StaticLoggerBinder.class]</span><br><span class="line">SLF4J: See http://www.slf4j.org/codes.html<span class="comment">#multiple_bindings for an explanation.</span></span><br><span class="line">SLF4J: Actual binding is of <span class="built_in">type</span> [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">Loading class `com.mysql.jdbc.Driver<span class="string">&#x27;. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver&#x27;</span>. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.</span><br></pre></td></tr></table></figure><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-install_hive/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] Mappers and Reducers</title>
      <link>https://jx2lee.github.io/python-map_reduce/</link>
      <guid>https://jx2lee.github.io/python-map_reduce/</guid>
      <pubDate>Wed, 30 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;hackerrankì—ì„œ ì œê³µí•˜ëŠ” Database ì¹´í…Œê³ ë¦¬ì˜ MapReduce ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>hackerrankì—ì„œ ì œê³µí•˜ëŠ” Database ì¹´í…Œê³ ë¦¬ì˜ MapReduce ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p><strong>Mappers and Reducers</strong></p><p><a href="http://www.slideshare.net/rantav/introduction-to-map-reduce">Hereâ€™s</a> a quick but comprehensive introduction to the idea of splitting tasks into a MapReduce model. The four important functions involved are:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Map (the mapper function)  </span><br><span class="line">EmitIntermediate(the intermediate key,value pairs emitted by the mapper functions)  </span><br><span class="line">Reduce (the reducer function)  </span><br><span class="line">Emit (the final output, after summarization from the Reduce functions)</span><br></pre></td></tr></table></figure><p>We provide you with a single system, single thread version of a basic MapReduce implementation.</p><p><strong>Task</strong></p><p>Joins are</p><p>The input is a number of lines with pairs of name of friends, in the form:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Friend1] [Friend2]</span><br></pre></td></tr></table></figure><p>The required output is to print the number of friends of each person, in the format shown. The code for the MapReduce class, parts related to IO etc. has already been provided. However, the mapper and reducer functions are incomplete. Your task is to fill up the mapper and reducer functions appropriately, such that the program works, and outputs the list of number of friends of each person , in lexicographical order.</p><p>Also, this program outputs certain information to the error stream. This information has been logged to help beginners gain a better understanding of the the intermediate steps in a map-reduce process.</p><p><strong>Languages Supported</strong></p><p>Currently, we provide the base code in Python.</p><p><strong>Input Format</strong></p><p>A list of single space separated pairs of friend names. We have already written the input handling code to read in this data.</p><p><strong>Output Format</strong></p><p>Again, the output handling part has already been provided in the template code. The Key contains [Person name] and the value contains the number of friends, sorted in lexicographical order. The entities in this list, will naturally be confined to only those people provided in the input data.</p><p><strong>Sample Input</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Joe Sue</span><br><span class="line">Sue Phi</span><br><span class="line">Phi Joe</span><br><span class="line">Phi Alice</span><br></pre></td></tr></table></figure><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;key&quot;:&quot;Alice&quot;,&quot;value&quot;:&quot;1&quot;&#125;</span><br><span class="line">&#123;&quot;key&quot;:&quot;Joe&quot;,&quot;value&quot;:&quot;2&quot;&#125;</span><br><span class="line">&#123;&quot;key&quot;:&quot;Phi&quot;,&quot;value&quot;:&quot;3&quot;&#125;</span><br><span class="line">&#123;&quot;key&quot;:&quot;Sue&quot;,&quot;value&quot;:&quot;2&quot;&#125;</span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>We have computed the number of friends for each person via the Mapper and Reducer functions.</p><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><p>full code ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MapReduce</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.intermediate = OrderedDict()</span><br><span class="line">        self.result = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">emitIntermediate</span>(<span class="params">self, key, value</span>):</span></span><br><span class="line">        self.intermediate.setdefault(key, [])</span><br><span class="line">        self.intermediate[key].append(value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">emit</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        self.result.append(value)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">execute</span>(<span class="params">self, data, mapper, reducer</span>):</span></span><br><span class="line">        <span class="keyword">for</span> record <span class="keyword">in</span> data:</span><br><span class="line">            mapper(record)</span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> self.intermediate:</span><br><span class="line">            reducer(key, self.intermediate[key])</span><br><span class="line"></span><br><span class="line">        self.result.sort()</span><br><span class="line">        print(self.result)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.result:</span><br><span class="line">            print(<span class="string">&quot;&#123;\&quot;key\&quot;:\&quot;&quot;</span> + item[<span class="number">0</span>] + <span class="string">&quot;\&quot;,\&quot;value\&quot;:\&quot;&quot;</span> + <span class="built_in">str</span>(item[<span class="number">1</span>]) + <span class="string">&quot;\&quot;&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mapReducer = MapReduce()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapper</span>(<span class="params">record</span>):</span></span><br><span class="line">    <span class="comment"># Start writing the Map code here</span></span><br><span class="line">    words = record.split()</span><br><span class="line">    mapReducer.emitIntermediate(words[<span class="number">0</span>], words[<span class="number">1</span>])</span><br><span class="line">    mapReducer.emitIntermediate(words[<span class="number">1</span>], words[<span class="number">0</span>])</span><br><span class="line">    print(mapReducer.intermediate)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reducer</span>(<span class="params">key, list_of_values</span>):</span></span><br><span class="line">    <span class="comment"># Start writing the Reduce code here</span></span><br><span class="line">    mapReducer.emit((key, <span class="built_in">len</span>(list_of_values)))</span><br><span class="line">    print(mapReducer.result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># inputData = [&#x27;Joe Sue&#x27;, &#x27;Sue Phi&#x27;, &#x27;Phi Joe&#x27;, &#x27;Phi Alice&#x27;]</span></span><br><span class="line">    inputData = []</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">        inputData.append(line)</span><br><span class="line">    mapReducer.execute(inputData, mapper, reducer)</span><br></pre></td></tr></table></figure><p>ìš°ì„ , <code>mapReduce</code> classë¥¼ ì‚´í´ë³¸ë‹¤.</p><h2 id="Class-mapReduce"><a href="#Class-mapReduce" class="headerlink" title="Class : mapReduce"></a>Class : mapReduce</h2><p>clss <code>mapReduce</code>ëŠ” <code>init</code> í•¨ìˆ˜ë¥¼ í¬í•¨ ì´ ì„¸ ê°œì˜ í•¨ìˆ˜ë¥¼ ê°–ëŠ”ë‹¤.</p><h3 id="Func-init"><a href="#Func-init" class="headerlink" title="Func : init"></a>Func : init</h3><p><strong>init</strong>`í•¨ìˆ˜ë¡œ ì¸í•´ <strong>intermediate, result</strong> ë³€ìˆ˜ë¥¼ ê°–ëŠ”ë‹¤. ì´ëŠ” ê°ê° <u>key-valueë¡œ ì´ë£¨ì–´ì§„ dictionary <em>(ë¬¸ì œì—ì„œ ì›í•˜ëŠ” ë‹¨ì–´ : ë‹¨ì–´ ì¶œí˜„ íšŸìˆ˜ë¥¼ ì˜ë¯¸)</em></u>ì™€ <u>ë¬¸ì œ ì •ë‹µì— ë§ëŠ” í˜•ì‹ì˜ Return</u> ê°’ì´ë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">    self.intermediate = OrderedDict()</span><br><span class="line">    self.result = []</span><br></pre></td></tr></table></figure><h3 id="Func-emitIntermediate"><a href="#Func-emitIntermediate" class="headerlink" title="Func : emitIntermediate"></a>Func : emitIntermediate</h3><p>key-value ë¥¼ ì…ë ¥ë°›ì•„ dictionaryì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">emitIntermediate</span>(<span class="params">self, key, value</span>):</span></span><br><span class="line">    self.intermediate.setdefault(key, [])</span><br><span class="line">    self.intermediate[key].append(value)</span><br></pre></td></tr></table></figure><h3 id="Func-emit"><a href="#Func-emit" class="headerlink" title="Func : emit"></a>Func : emit</h3><p>ê° ë‹¨ì–´ì˜ ì¶œí˜„ íšŸìˆ˜ë¥¼ ì§‘ê³„í•œ í›„ ê²°ê³¼ê°’ì— ë‹´ëŠ” í•¨ìˆ˜ì´ë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">emit</span>(<span class="params">self, value</span>):</span></span><br><span class="line">    self.result.append(value)</span><br></pre></td></tr></table></figure><h3 id="Func-execute"><a href="#Func-execute" class="headerlink" title="Func : execute"></a>Func : execute</h3><p>ì…ë ¥ë°›ì€ ë°ì´í„°ë¥¼ ì½ì–´ë“¤ì—¬ ë‚˜ì¤‘ì— ìš°ë¦¬ê°€ ì‘ì„±í•´ì•¼í•  <code>mapper / reducer</code>í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ìµœì¢… ê²°ê³¼ê°’ì„ ì•Œë§ëŠ” í˜•íƒœë¡œ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">execute</span>(<span class="params">self, data, mapper, reducer</span>):</span></span><br><span class="line">    <span class="keyword">for</span> record <span class="keyword">in</span> data:</span><br><span class="line">        mapper(record)</span><br><span class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> self.intermediate:</span><br><span class="line">        reducer(key, self.intermediate[key])</span><br><span class="line"></span><br><span class="line">    self.result.sort()</span><br><span class="line">    print(self.result)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> self.result:</span><br><span class="line">        print(<span class="string">&quot;&#123;\&quot;key\&quot;:\&quot;&quot;</span> + item[<span class="number">0</span>] + <span class="string">&quot;\&quot;,\&quot;value\&quot;:\&quot;&quot;</span> + <span class="built_in">str</span>(item[<span class="number">1</span>]) + <span class="string">&quot;\&quot;&#125;&quot;</span>)</span><br></pre></td></tr></table></figure><blockquote><p><em>ì‹¤í–‰í•¨ìˆ˜(excutable fucntion)ë¼ ìƒê°í•˜ì</em></p></blockquote><h2 id="Func-mapper"><a href="#Func-mapper" class="headerlink" title="Func : mapper"></a>Func : mapper</h2><p>ì´ì œ <code>mapper</code> ë¥¼ ì‚´í´ë³¸ë‹¤. ì…ë ¥ë°›ì€ í•œ ë¬¸ì¥ì€ <code>split</code> í•¨ìˆ˜ë¥¼ í†µí•´ ë‘ ë‹¨ì–´ë¡œ ë‚˜ëˆ„ì–´ì£¼ê³ , ì²« ë²ˆì§¸ ë‹¨ì–´ë§Œ keyë¡œ ì¸ì‹í•˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— <code>mapReducer</code> í´ë˜ìŠ¤ì—ì„œ ë§Œë“  emitIntermediate í•¨ìˆ˜ë¥¼ <strong>ë‘ ë²ˆ</strong> ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapper</span>(<span class="params">record</span>):</span></span><br><span class="line">    <span class="comment"># Start writing the Map code here</span></span><br><span class="line">    words = record.split()</span><br><span class="line">    mapReducer.emitIntermediate(words[<span class="number">0</span>], words[<span class="number">1</span>])</span><br><span class="line">    mapReducer.emitIntermediate(words[<span class="number">1</span>], words[<span class="number">0</span>])</span><br><span class="line">    print(mapReducer.intermediate)</span><br></pre></td></tr></table></figure><p>ê³¼ì—° ì´ mapper í•¨ìˆ˜ê°€ ì–´ë–»ê²Œ ì‘ë™ë˜ëŠ”ì§€ ë¬¸ì œì—ì„œ ì œê³µí•œ test caseë¥¼ ë°”íƒ•ìœ¼ë¡œ print í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì¶œë ¥ëœë‹¤. ì¦‰, ê°™ì€ keyê°’ì„ ê°€ì§€ë©´ valueë¡œ append í•´ë‚˜ê°„ë‹¤. <em>(valueê°’ìœ¼ë¡œ ê³„ì†í•´ì„œ ë‹¨ì–´ë¥¼ ì¶”ê°€í•˜ëŠ”ë° ì´ëŠ” ë‚˜ì¤‘ì— <code>reducer</code> í•¨ìˆ˜ì—ì„œ ì§‘ê³„ë¥¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤)</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OrderedDict([(&#39;Joe&#39;, [&#39;Sue&#39;]), (&#39;Sue&#39;, [&#39;Joe&#39;])])</span><br><span class="line">OrderedDict([(&#39;Joe&#39;, [&#39;Sue&#39;]), (&#39;Sue&#39;, [&#39;Joe&#39;, &#39;Phi&#39;]), (&#39;Phi&#39;, [&#39;Sue&#39;])])</span><br><span class="line">OrderedDict([(&#39;Joe&#39;, [&#39;Sue&#39;, &#39;Phi&#39;]), (&#39;Sue&#39;, [&#39;Joe&#39;, &#39;Phi&#39;]), (&#39;Phi&#39;, [&#39;Sue&#39;, &#39;Joe&#39;])])</span><br><span class="line">OrderedDict([(&#39;Joe&#39;, [&#39;Sue&#39;, &#39;Phi&#39;]), (&#39;Sue&#39;, [&#39;Joe&#39;, &#39;Phi&#39;]), (&#39;Phi&#39;, [&#39;Sue&#39;, &#39;Joe&#39;, &#39;Alice&#39;]), (&#39;Alice&#39;, [&#39;Phi&#39;])])</span><br></pre></td></tr></table></figure><h2 id="Func-reducer"><a href="#Func-reducer" class="headerlink" title="Func : reducer"></a>Func : reducer</h2><p>key-valueë¡œ ì´ë£¨ì–´ì§„ dictionaryë¥¼ ì§‘ê³„í•´ì£¼ëŠ” reducer í•¨ìˆ˜ì´ë‹¤. <code>mapReducer</code> í´ë˜ìŠ¤ì˜ <code>emit</code>í•¨ìˆ˜ë¥¼ í†µí•´ <em>result</em> ë³€ìˆ˜ì— ê²°ê³¼ê°’ì„ ì €ì¥í•œë‹¤. <strong>ì´ë•Œ, ìœ„ <code>mapper</code>í•¨ìˆ˜ë¥¼ í†µí•´ ê° keyì— ëŒ€í•œ valueë“¤</strong>ì˜ ê¸¸ì´ë¥¼ <u>keyì™€ í•¨ê»˜ append í•œë‹¤.</u></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reducer</span>(<span class="params">key, list_of_values</span>):</span></span><br><span class="line">    <span class="comment"># Start writing the Reduce code here</span></span><br><span class="line">    mapReducer.emit((key, <span class="built_in">len</span>(list_of_values)))</span><br><span class="line">    print(mapReducer.result)</span><br></pre></td></tr></table></figure><h2 id="Main"><a href="#Main" class="headerlink" title="Main"></a>Main</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># inputData = [&#x27;Joe Sue&#x27;, &#x27;Sue Phi&#x27;, &#x27;Phi Joe&#x27;, &#x27;Phi Alice&#x27;]</span></span><br><span class="line">    inputData = []</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">        inputData.append(line)</span><br><span class="line">    mapReducer.execute(inputData, mapper, reducer)</span><br></pre></td></tr></table></figure><blockquote><p><em>ì´ë ‡ê²Œ class ë° functionì„ ì§ì ‘ ì§œë³´ë©´ì„œ ì„¤ê³„í•˜ëŠ” ë‹¨ê³„ì˜ ì¤‘ìš”ì„±ì„ ê¹¨ë‹¬ì•˜ë‹¤. Pythonì„ ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì½”ë”©ì„ í•´ë³´ëŠ” ì—°ìŠµì„ í•´ì•¼ê² ë‹¤</em></p></blockquote><h1 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h1><ol><li><a href="https://github.com/cielavenir/procon/blob/master/hackerrank/map-reduce-advanced-count-number-of-friends.py"> https://github.com/cielavenir/procon/blob/master/hackerrank/map-reduce-advanced-count-number-of-friends.py </a></li><li><a href="https://jayzzz.tistory.com/44">í•˜ë‘¡ ë§µë¦¬ë“€ìŠ¤(MapReduce) ì•Œì•„ë³´ì,  https://jayzzz.tistory.com/44</a></li></ol><hr><p>2019.10.31 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/python-map_reduce/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] 15 Days of Learning</title>
      <link>https://jx2lee.github.io/hackerrank-15_days_of_learning/</link>
      <guid>https://jx2lee.github.io/hackerrank-15_days_of_learning/</guid>
      <pubDate>Tue, 29 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;15 Days of Learning&lt;/code&gt; ë¥¼ SELECT sub queryì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>15 Days of Learning</code> ë¥¼ SELECT sub queryì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>Julia conducted a days of learning SQL contest. The start date of the contest was <em>March 01, 2016</em> and the end date was <em>March 15, 2016</em>.</p><p>Write a query to print total number of unique hackers who made at least submission each day (starting on the first day of the contest), and find the <em>hacker_id</em> and <em>name</em> of the hacker who made maximum number of submissions each day. If more than one such hacker has a maximum number of submissions, print the lowest <em>hacker_id</em>. The query should print this information for each day of the contest, sorted by the date.</p><hr><p><strong>Input Format</strong></p><p>The following tables hold contest data:</p><ul><li><em>Hackers:</em> The <em>hacker_id</em> is the id of the hacker, and <em>name</em> is the name of the hacker.<img src="https://s3.amazonaws.com/hr-challenge-images/19597/1458511164-12adec3b8b-ScreenShot2016-03-21at3.26.47AM.png" alt="img"></li><li><em>Submissions:</em> The <em>submission_date</em> is the date of the submission, <em>submission_id</em> is the id of the submission, <em>hacker_id</em> is the id of the hacker who made the submission, and <em>score</em> is the score of the submission. <img src="https://s3.amazonaws.com/hr-challenge-images/19597/1458511251-0b534030b9-ScreenShot2016-03-21at3.26.56AM.png" alt="img"></li></ul><p><strong>Sample Input</strong></p><p>For the following sample input, assume that the end date of the contest was <em>March 06, 2016</em>.</p><p><em>Hackers</em> Table: <img src="https://s3.amazonaws.com/hr-challenge-images/19597/1458511957-814a2c7bf2-ScreenShot2016-03-21at3.27.06AM.png" alt="img"> <em>Submissions</em> Table: <img src="https://s3.amazonaws.com/hr-challenge-images/19597/1458512015-ff6a708164-ScreenShot2016-03-21at3.27.21AM.png" alt="img"></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2016-03-01 4 20703 Angela</span><br><span class="line">2016-03-02 2 79722 Michael</span><br><span class="line">2016-03-03 2 20703 Angela</span><br><span class="line">2016-03-04 2 20703 Angela</span><br><span class="line">2016-03-05 1 36396 Frank</span><br><span class="line">2016-03-06 1 20703 Angela</span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>On <em>March 01, 2016</em> hackers , , , and made submissions. There are unique hackers who made at least one submission each day. As each hacker made one submission, is considered to be the hacker who made maximum number of submissions on this day. The name of the hacker is <em>Angela</em>.</p><p>On <em>March 02, 2016</em> hackers , , and made submissions. Now and were the only ones to submit every day, so there are unique hackers who made at least one submission each day. made submissions, and name of the hacker is <em>Michael</em>.</p><p>On <em>March 03, 2016</em> hackers , , and made submissions. Now and were the only ones, so there are unique hackers who made at least one submission each day. As each hacker made one submission so is considered to be the hacker who made maximum number of submissions on this day. The name of the hacker is <em>Angela</em>.</p><p>On <em>March 04, 2016</em> hackers , , , and made submissions. Now and only submitted each day, so there are unique hackers who made at least one submission each day. As each hacker made one submission so is considered to be the hacker who made maximum number of submissions on this day. The name of the hacker is <em>Angela</em>.</p><p>On <em>March 05, 2016</em> hackers , , and made submissions. Now only submitted each day, so there is only unique hacker who made at least one submission each day. made submissions and name of the hacker is <em>Frank</em>.</p><p>On <em>March 06, 2016</em> only made submission, so there is only unique hacker who made at least one submission each day. made submission and name of the hacker is <em>Angela</em>.</p><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p><code>Join</code>ì„ ì´ìš©í•´ ë¬¸ì œë¥¼ í’€ë ¤ë‹¤ ì‹¤íŒ¨í•˜ì˜€ë‹¤. ì´ì— ì œê³µë˜ëŠ” Tableì´ 2ê°œì¸ ì ì„ í™œìš©í•˜ì—¬ SELECT ì ˆ ë‚´ Sub queryë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ì ‘ê·¼í•˜ì˜€ë‹¤.</p><p>ìš°ì„ , ìœ ì¼í•œ ì œì¶œ ë‚ ì§œ Tableë¡œ ë¶€í„° <em>ì œì¶œ ë‚ ì§œê°€ ê°™ê³  ì œì¶œ ë§ˆê°ì¼ê¹Œì§€ ë‚ ì§œ ì°¨ì´ê°€ ê°™ì€ ìœ ì¼í•œ hacker_id</em> ë¥¼ ì¡°íšŒí•˜ëŠ” SELECT ë¬¸ì„ ì‘ì„±í•œë‹¤. ì´ë•Œ, ìµœì¢… ê²°ê³¼ë¬¼ì€ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ groupí™” ì‹œí‚¨ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    submission_date,</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> hacker_id)</span><br><span class="line">     <span class="keyword">from</span> submissions <span class="keyword">as</span> s2</span><br><span class="line">     <span class="keyword">where</span> s2.submission_date = s1.submission_date <span class="keyword">and</span></span><br><span class="line">     (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> s3.submission_date)</span><br><span class="line">      <span class="keyword">from</span> submissions <span class="keyword">as</span> s3</span><br><span class="line">      <span class="keyword">where</span> s3.hacker_id = s2.hacker_id <span class="keyword">and</span> s3.submission_date &lt; s1.submission_date) = <span class="keyword">datediff</span>(s1.submission_date, <span class="string">&#x27;2016-03-01&#x27;</span>)),</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">distinct</span> submission_date <span class="keyword">from</span> submissions) <span class="keyword">as</span> s1</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> submission_date;</span><br></pre></td></tr></table></figure><p>ì´í›„, <em>ì œì¶œì„ ê°€ì¥ ë§ì´ í•œ hackerì˜ idë¥¼ ì¡°íšŒí•œ id table</em> ê³¼ <em>id tableì„ ì´ìš©í•´ hacker ì´ë¦„ì„ ì¡°íšŒ</em> í•˜ëŠ” SELECT Sub queryë¥¼ ì¶”ê°€í•œë‹¤. ì´ë•Œ, id tableì˜ ê²½ìš° ê°€ì¥ ë§ì´ ì œì¶œí•œ hackerë§Œ ë½‘ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì¤‘ë³µì„ í”¼í•˜ê³ ì <code>LIMIT 1</code>ì„ ì¶”ê°€í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    submission_date,</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> hacker_id)</span><br><span class="line">     <span class="keyword">from</span> submissions <span class="keyword">as</span> s2</span><br><span class="line">     <span class="keyword">where</span> s2.submission_date = s1.submission_date <span class="keyword">and</span></span><br><span class="line">     (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> s3.submission_date)</span><br><span class="line">      <span class="keyword">from</span> submissions <span class="keyword">as</span> s3</span><br><span class="line">      <span class="keyword">where</span> s3.hacker_id = s2.hacker_id <span class="keyword">and</span> s3.submission_date &lt; s1.submission_date) = <span class="keyword">datediff</span>(s1.submission_date, <span class="string">&#x27;2016-03-01&#x27;</span>)),</span><br><span class="line">    <span class="comment">--append</span></span><br><span class="line">    (<span class="keyword">select</span> hacker_id</span><br><span class="line">     <span class="keyword">from</span> submissions <span class="keyword">as</span> s2</span><br><span class="line">     <span class="keyword">where</span> s2.submission_date = s1.submission_date</span><br><span class="line">     <span class="keyword">group</span> <span class="keyword">by</span> hacker_id</span><br><span class="line">     <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">count</span>(submission_id) <span class="keyword">desc</span>, hacker_id <span class="keyword">limit</span> <span class="number">1</span>) <span class="keyword">as</span> <span class="keyword">id</span>,</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> hackers <span class="keyword">where</span> hacker_id = <span class="keyword">id</span>)</span><br><span class="line">    <span class="comment">--/append</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">distinct</span> submission_date <span class="keyword">from</span> submissions) <span class="keyword">as</span> s1</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> submission_date;</span><br></pre></td></tr></table></figure><blockquote><p><em>ë¬¸ì œ ì ‘ê·¼í•  ë•Œ Joinë§Œ ë°”ë¼ë³´ì§€ ì•Šê³  SELECT / FROM / WHERE ì ˆì—ì„œ Sub queryë¥¼ ì‘ì„±í•˜ëŠ” ì•ˆëª©ì„ í‚¤ì›Œë³´ì. (ë¬¼ë¡  hackerrankì˜ ë¬¸ì œëŠ” ëë‚¬ë‹¤..)</em></p></blockquote><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    submission_date,</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> hacker_id)</span><br><span class="line">     <span class="keyword">from</span> submissions <span class="keyword">as</span> s2</span><br><span class="line">     <span class="keyword">where</span> s2.submission_date = s1.submission_date <span class="keyword">and</span></span><br><span class="line">     (<span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> s3.submission_date)</span><br><span class="line">      <span class="keyword">from</span> submissions <span class="keyword">as</span> s3</span><br><span class="line">      <span class="keyword">where</span> s3.hacker_id = s2.hacker_id <span class="keyword">and</span> s3.submission_date &lt; s1.submission_date) = <span class="keyword">datediff</span>(s1.submission_date, <span class="string">&#x27;2016-03-01&#x27;</span>)),</span><br><span class="line">    (<span class="keyword">select</span> hacker_id</span><br><span class="line">     <span class="keyword">from</span> submissions <span class="keyword">as</span> s2</span><br><span class="line">     <span class="keyword">where</span> s2.submission_date = s1.submission_date</span><br><span class="line">     <span class="keyword">group</span> <span class="keyword">by</span> hacker_id</span><br><span class="line">     <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">count</span>(submission_id) <span class="keyword">desc</span>, hacker_id <span class="keyword">limit</span> <span class="number">1</span>) <span class="keyword">as</span> <span class="keyword">id</span>,</span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">name</span> <span class="keyword">from</span> hackers <span class="keyword">where</span> hacker_id = <span class="keyword">id</span>)</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">distinct</span> submission_date <span class="keyword">from</span> submissions) <span class="keyword">as</span> s1</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> submission_date;</span><br></pre></td></tr></table></figure><hr><p>2019.10.30 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-15_days_of_learning/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Sqoop import ì‹œ JDBC-90401:Connection refused by the server Error ë°œìƒ</title>
      <link>https://jx2lee.github.io/hadoop-sqoop_jdbc_error/</link>
      <guid>https://jx2lee.github.io/hadoop-sqoop_jdbc_error/</guid>
      <pubDate>Tue, 29 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;h1 id=&quot;ìƒí™©&quot;&gt;&lt;a href=&quot;#ìƒí™©&quot; class=&quot;headerlink&quot; title=&quot;ìƒí™©&quot;&gt;&lt;/a&gt;ìƒí™©&lt;/h1&gt;&lt;p&gt;Sqoopì„ ì´ìš©í•´ Tibero Tableì„ hdfs í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” import ê³¼ì •ì—ì„œ ERRORê°€ ë°œìƒí•˜ì˜€ë‹¤. ìƒí™©ì„ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´, ì •ë³´ì‹œìŠ¤í…œ ê°œë°œê¸° DB&lt;em&gt;(Tibero)&lt;/em&gt; Tabelì„ íŒ€ ì„œë²„ì— êµ¬ì¶•í•œ Hadoop ì—&lt;em&gt;(51, 52 : DataNode, 53 : NameNodeë¡œ ì´í•˜ ìˆ«ìë¡œ í‘œí˜„)&lt;/em&gt; ì €ì¥í•˜ê³ ì í–ˆë‹¤.
      
      </description>
      
      
      <content:encoded><![CDATA[<h1 id="ìƒí™©"><a href="#ìƒí™©" class="headerlink" title="ìƒí™©"></a>ìƒí™©</h1><p>Sqoopì„ ì´ìš©í•´ Tibero Tableì„ hdfs í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” import ê³¼ì •ì—ì„œ ERRORê°€ ë°œìƒí•˜ì˜€ë‹¤. ìƒí™©ì„ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´, ì •ë³´ì‹œìŠ¤í…œ ê°œë°œê¸° DB<em>(Tibero)</em> Tabelì„ íŒ€ ì„œë²„ì— êµ¬ì¶•í•œ Hadoop ì—<em>(51, 52 : DataNode, 53 : NameNodeë¡œ ì´í•˜ ìˆ«ìë¡œ í‘œí˜„)</em> ì €ì¥í•˜ê³ ì í–ˆë‹¤.<a id="more"></a>ì •ë³´ì‹œìŠ¤í…œì—ì„œ í—ˆìš©í•œ IPëŠ” ì´ 4ê°œì˜€ê³  ê·¸ ì¤‘ í•˜ë‚˜ì¸ 69<em>(í¸í•˜ê²Œ ìˆ«ìë¡œ.. ëŒ€ì²´í•˜ê² ë‹¤)</em>ì— <code>Sqoop</code>ì„ ì„¤ì¹˜í•˜ì—¬ Hadoopì— ì €ì¥í•˜ë ¤ëŠ” ê³„íšì´ì—ˆë‹¤. ê°„ëµíˆ ê° ì„œë²„ì™€ í˜„í™©ì„ ë‚˜íƒ€ë‚´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li>Hadoop<ul><li>51, 52 : DataNode</li><li>53 : NameNode</li><li><strong>ì •ë³´ì‹œìŠ¤í…œ ê°œë°œê¸° DBì— ì ‘ê·¼ì´ í—ˆìš©ë˜ì§€ ì•ŠìŒ</strong></li></ul></li><li>Sqoop<ul><li>69</li><li><strong>ì •ë³´ì‹œìŠ¤í…œ ê°œë°œê¸° DBì— ì ‘ê·¼ì´ í—ˆìš©ë˜ì§€ ì•ŠìŒ</strong></li></ul></li></ul><p><code>Sqoop import</code> ëª…ë ¹ì–´ <em>(sqoop import â€“connect jdbc:tibero:thin:@192.168.xx.xx:8629:tibero â€“driver com.tmax.tibero.jdbc.TbDriver â€“username xxxx â€“password xxxx â€“table PROJECT_INFO â€“delete-target-dir -m 1)</em> ë¥¼ ë‚ ë¦¬ë©´ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">sqoop@bips:/app/sqoop/sqoop$ sqoop import --connect jdbc:tibero:thin:@192.168.10.84:8629:tibero --driver com.tmax.tibero.jdbc.TbDriver --username tody -P --table PROJECT_INFO --delete-target-dir -m 1</span><br><span class="line">Warning: /app/sqoop/sqoop/../hbase does not exist! HBase imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HBASE_HOME</span> to the root of your HBase installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../hcatalog does not exist! HCatalog <span class="built_in">jobs</span> will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HCAT_HOME</span> to the root of your HCatalog installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../accumulo does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ACCUMULO_HOME</span> to the root of your Accumulo installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../zookeeper does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ZOOKEEPER_HOME</span> to the root of your Zookeeper installation.</span><br><span class="line">19/10/30 09:32:49 INFO sqoop.Sqoop: Running Sqoop version: 1.4.7</span><br><span class="line">Enter password: </span><br><span class="line">19/10/30 09:33:01 WARN sqoop.ConnFactory: Parameter --driver is <span class="built_in">set</span> to an explicit driver however appropriate connection manager is not being <span class="built_in">set</span> (via --connection-manager). Sqoop is going to fall back to org.apache.sqoop.manager.GenericJdbcManager. Please specify explicitly <span class="built_in">which</span> connection manager should be used next time.</span><br><span class="line">19/10/30 09:33:01 INFO manager.SqlManager: Using default fetchSize of 1000</span><br><span class="line">19/10/30 09:33:01 INFO tool.CodeGenTool: Beginning code generation</span><br><span class="line">19/10/30 09:33:01 ERROR manager.SqlManager: Error executing statement: java.sql.SQLException: JDBC-90401:Connection refused by the server. - Connection refused (Connection refused)</span><br><span class="line">java.sql.SQLException: JDBC-90401:Connection refused by the server. - Connection refused (Connection refused)</span><br><span class="line">at com.tmax.tibero.jdbc.err.TbError.makeSQLException(Unknown Source)</span><br><span class="line">at com.tmax.tibero.jdbc.err.TbError.newSQLException(Unknown Source)</span><br><span class="line">at com.tmax.tibero.jdbc.comm.TbStream.&lt;init&gt;(Unknown Source)</span><br><span class="line">at com.tmax.tibero.jdbc.comm.TbCommType4.createStream(Unknown Source)</span><br><span class="line">at com.tmax.tibero.jdbc.driver.TbConnection.openConnection(Unknown Source)</span><br><span class="line">at com.tmax.tibero.jdbc.TbDriver.connectInternal(Unknown Source)</span><br><span class="line">at com.tmax.tibero.jdbc.TbDriver.connect(Unknown Source)</span><br><span class="line">at java.sql.DriverManager.getConnection(DriverManager.java:664)</span><br><span class="line">at java.sql.DriverManager.getConnection(DriverManager.java:247)</span><br><span class="line">at org.apache.sqoop.manager.SqlManager.makeConnection(SqlManager.java:904)</span><br><span class="line">at org.apache.sqoop.manager.GenericJdbcManager.getConnection(GenericJdbcManager.java:59)</span><br><span class="line">at org.apache.sqoop.manager.SqlManager.execute(SqlManager.java:763)</span><br><span class="line">at org.apache.sqoop.manager.SqlManager.execute(SqlManager.java:786)</span><br><span class="line">at org.apache.sqoop.manager.SqlManager.getColumnInfoForRawQuery(SqlManager.java:289)</span><br><span class="line">at org.apache.sqoop.manager.SqlManager.getColumnTypesForRawQuery(SqlManager.java:260)</span><br><span class="line">at org.apache.sqoop.manager.SqlManager.getColumnTypes(SqlManager.java:246)</span><br><span class="line">at org.apache.sqoop.manager.ConnManager.getColumnTypes(ConnManager.java:327)</span><br><span class="line">at org.apache.sqoop.orm.ClassWriter.getColumnTypes(ClassWriter.java:1872)</span><br><span class="line">at org.apache.sqoop.orm.ClassWriter.generate(ClassWriter.java:1671)</span><br><span class="line">at org.apache.sqoop.tool.CodeGenTool.generateORM(CodeGenTool.java:106)</span><br><span class="line">at org.apache.sqoop.tool.ImportTool.importTable(ImportTool.java:501)</span><br><span class="line">at org.apache.sqoop.tool.ImportTool.run(ImportTool.java:628)</span><br><span class="line">at org.apache.sqoop.Sqoop.run(Sqoop.java:147)</span><br><span class="line">at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76)</span><br><span class="line">at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:183)</span><br><span class="line">at org.apache.sqoop.Sqoop.runTool(Sqoop.java:234)</span><br><span class="line">at org.apache.sqoop.Sqoop.runTool(Sqoop.java:243)</span><br><span class="line">at org.apache.sqoop.Sqoop.main(Sqoop.java:252)</span><br><span class="line">19/10/30 09:33:01 ERROR tool.ImportTool: Import failed: java.io.IOException: No columns to generate <span class="keyword">for</span> ClassWriter</span><br><span class="line">at org.apache.sqoop.orm.ClassWriter.generate(ClassWriter.java:1677)</span><br><span class="line">at org.apache.sqoop.tool.CodeGenTool.generateORM(CodeGenTool.java:106)</span><br><span class="line">at org.apache.sqoop.tool.ImportTool.importTable(ImportTool.java:501)</span><br><span class="line">at org.apache.sqoop.tool.ImportTool.run(ImportTool.java:628)</span><br><span class="line">at org.apache.sqoop.Sqoop.run(Sqoop.java:147)</span><br><span class="line">at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76)</span><br><span class="line">at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:183)</span><br><span class="line">at org.apache.sqoop.Sqoop.runTool(Sqoop.java:234)</span><br><span class="line">at org.apache.sqoop.Sqoop.runTool(Sqoop.java:243)</span><br><span class="line">at org.apache.sqoop.Sqoop.main(Sqoop.java:252)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><p><strong>ê²°ë¡ ë¶€í„° ë§í•˜ë©´ í•´ê²°í•˜ì§€ ëª»í•˜ëŠ” ë¬¸ì œ</strong>ì´ë‹¤. Hadoopì´ JDBCë¥¼ í†µí•´ ì •ë³´ì‹œìŠ¤í…œ ê°œë°œê¸° Tiberoì— ì ‘ê·¼í•´ì•¼ í•˜ëŠ”ë° <code>Sqoop</code>ì´ ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ëŠ”ë‹¤.</p><p><img src="https://t1.daumcdn.net/cfile/tistory/255AAE415527751E16" alt=""></p><p><a href="https://t1.daumcdn.net/cfile/tistory/255AAE415527751E16">ì°¸ê³  : https://t1.daumcdn.net/cfile/tistory/255AAE415527751E16</a></p><p>ì‚¬ì§„ì€ <code>Sqoop 1</code>ì˜ Architectureì´ì§€ë§Œ, ê²°êµ­ì— Sqoopì´ Hadoopì˜ Map Taskì—ê²Œ íƒœìŠ¤í¬ë¥¼ ë„˜ê¸°ë©´ Hadoopì´ Databaseì— ì ‘ê·¼í•˜ëŠ” í˜•íƒœì´ë‹¤. ì¦‰, <strong>ì •ë³´ì‹œìŠ¤í…œ DB ì ‘ê·¼ì´ í—ˆìš©ë˜ì§€ ì•ŠëŠ” Hadoop í™˜ê²½</strong>ì—ì„œëŠ” Connectionì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ë•Œë¬¸ì— ìš°ë¦¬íŒ€ì´ ì›ë˜ ì‹œë„í•˜ë ¤ë˜ í–ˆë˜ HDFS í˜•íƒœë¡œ íŒŒì¼ì„ ë–¨êµ¬ê³  ì´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê³¼ì •ì„ <em>ì•„ì˜ˆ ë‹¤ë¥¸ ì‹ìœ¼ë¡œ ì ‘ê·¼í•˜ê±°ë‚˜</em>, <em>ìš°íšŒ ë°©ì•ˆ</em> ì„ ìƒê°í•´ì•¼ í•œë‹¤. </p><h2 id="ê²°ë¡ "><a href="#ê²°ë¡ " class="headerlink" title="ê²°ë¡ "></a>ê²°ë¡ </h2><p>Connection ERROR í•´ê²° ë°©ì•ˆì€ <strong>Hadoopì´ Databaseì— ì ‘ê·¼ ê°€ëŠ¥</strong>í•˜ê²Œ í™˜ê²½ì„ êµ¬ì„±í•´ì£¼ë©´ ëœë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬íŒ€ì˜ í”„ë¡œì íŠ¸ëŠ” ì´ë ‡ê²Œ í™˜ê²½ì„ ì¬êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì‰½ì§€ ì•Šë‹¤. ì´ì—ëŒ€í•´ ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ì•ˆì´ ìˆëŠ”ë° êµ¬ì²´ì ì´ì§€ ì•Šë‹¤. <del>(ì–´ë– í•œ ë°©ë²•ì´ ë” íš¨ìœ¨ì ì¸ì§€ ë” ê³ ë¯¼í•´ë´ì•¼ê² ë‹¤)</del></p><ul><li>If using Hadoop,<ul><li>Hadoopì„ ì •ë³´ì‹œìŠ¤í…œ DBì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì— ì„¤ì¹˜</li><li>ì •ë³´ì‹œìŠ¤í…œ ìª½ì— ì ‘ê·¼ ê°€ëŠ¥í•œ IP ì¶”ê°€ ìš”ì²­</li></ul></li><li>else,<ul><li>ìì‚¬ ì œí’ˆ ì‚¬ìš©..</li></ul></li></ul><blockquote><p> <em>ì—­ëŸ‰ ê°•í™”ë¥¼ ìœ„í•´ì„œëŠ” Hadoop systemì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ëŠ” ê°œì¸ì ì¸ ë°”ëŒì´ ìˆë‹¤.</em></p></blockquote><hr><p>2019.10.30 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-sqoop_jdbc_error/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Sqoop import/export with Tibero</title>
      <link>https://jx2lee.github.io/hadoop-sqoop_with_tibero/</link>
      <guid>https://jx2lee.github.io/hadoop-sqoop_with_tibero/</guid>
      <pubDate>Tue, 29 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;Sqoop&lt;/code&gt;ì„ ì´ìš©í•´ Tibero tableì„ HDFSë¡œ ì €ì¥í•˜ê³  ì´ë¥¼ ë‹¤ì‹œ tableë¡œ ë³€í™˜í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>Sqoop</code>ì„ ì´ìš©í•´ Tibero tableì„ HDFSë¡œ ì €ì¥í•˜ê³  ì´ë¥¼ ë‹¤ì‹œ tableë¡œ ë³€í™˜í•˜ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•œë‹¤.</p><a id="more"></a><h1 id="Create-Test-table"><a href="#Create-Test-table" class="headerlink" title="Create Test table"></a>Create Test table</h1><p>ìš°ì„ , <code>Import</code>í•˜ë ¤ëŠ” tableì„ ìƒì„±í•œë‹¤. ì¤‘ìš”í•œ ê²ƒì€ <strong>exportí•˜ê¸° ìœ„í•œ tableë„ ìƒì„±</strong>í•´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.</p><ul><li>Import table : RECIPES</li><li>Export table : RECIPES_EXP</li></ul><h2 id="Import-table"><a href="#Import-table" class="headerlink" title="Import table"></a>Import table</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">USERS</span>(</span><br><span class="line">USERNO <span class="built_in">NUMBER</span>,</span><br><span class="line">EMAIL <span class="built_in">VARCHAR2</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">PWD <span class="built_in">VARCHAR2</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line"><span class="keyword">NAME</span> <span class="built_in">VARCHAR2</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">PNO <span class="built_in">VARCHAR2</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">ADDRESS <span class="built_in">VARCHAR2</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> recipes (recipe_id, recipe_name) <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">&#x27;Tacos&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> recipes (recipe_id, recipe_name) <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="string">&#x27;Tomato Soup&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> recipes (recipe_id, recipe_name) <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="string">&#x27;Grilled Cheese&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- checking table</span></span><br><span class="line">SQL&gt; SELECT * FROM RECIPES;</span><br><span class="line"> RECIPE_ID RECIPE_NAME                   </span><br><span class="line"><span class="comment">---------- ------------------------------</span></span><br><span class="line">         3 Grilled Cheese</span><br><span class="line">         1 Tacos</span><br><span class="line">         2 Tomato Soup</span><br><span class="line">3 rows selected.</span><br></pre></td></tr></table></figure><h2 id="Export-table"><a href="#Export-table" class="headerlink" title="Export table"></a>Export table</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> recipes_exp (</span><br><span class="line">  recipe_id <span class="built_in">INT</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  recipe_name <span class="built_in">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (recipe_id),</span><br><span class="line">  <span class="keyword">UNIQUE</span> (recipe_name)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="Sqoop-Import"><a href="#Sqoop-Import" class="headerlink" title="Sqoop Import"></a>Sqoop Import</h1><p>tableì´ ì¤€ë¹„ë˜ì—ˆë‹¤ë©´ <code>Sqoop</code>ì„ ì´ìš©í•´ HDFS í˜•íƒœë¡œ Hadoopì— ì €ì¥í•´ë³¸ë‹¤. ëª…ë ¹ì–´ì™€ ìˆ˜í–‰ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</p><h2 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sqoop import --connect jdbc:tibero:thin:@192.168.xxx.xx:xxxx:tibero \</span><br><span class="line">--driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">--username tibero --password [password] \</span><br><span class="line">--table RECIPES \</span><br><span class="line">--target-dir /t1/input</span><br></pre></td></tr></table></figure><blockquote><p><em>Tibero ì ‘ì†ì„ ìœ„í•œ stringì€ ìœ„ì™€ ê°™ì´ ì‘ì„±í•˜ê³ , MySQL/PostgreSQLì˜ ê²½ìš° driverë¥¼ ì§€ì •í•˜ì§€ ì•Šì•„ë„ ë˜ì§€ë§Œ Oracle/TiberoëŠ” driverë¥¼ ì„¤ì •í•´ì•¼ í•œë‹¤. (MySQL/PostgreSQL : direct connect ì§€ì›ì´ë¼ê³  documentì— ëª…ì‹œ)</em></p></blockquote><h2 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">sqoop@bips:~$ sqoop import --connect jdbc:tibero:thin:@192.168.xxx.xx:xxxx:tibero \</span><br><span class="line">&gt; --driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">&gt; --username tibero --password tmax \</span><br><span class="line">&gt; --table RECIPES \</span><br><span class="line">&gt; --target-dir /t1/input</span><br><span class="line">Warning: /app/sqoop/sqoop/../hbase does not exist! HBase imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HBASE_HOME</span> to the root of your HBase installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../hcatalog does not exist! HCatalog <span class="built_in">jobs</span> will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HCAT_HOME</span> to the root of your HCatalog installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../accumulo does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ACCUMULO_HOME</span> to the root of your Accumulo installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../zookeeper does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ZOOKEEPER_HOME</span> to the root of your Zookeeper installation.</span><br><span class="line">19/10/30 10:09:24 INFO sqoop.Sqoop: Running Sqoop version: 1.4.7</span><br><span class="line">19/10/30 10:09:24 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.</span><br><span class="line">19/10/30 10:09:24 WARN sqoop.ConnFactory: Parameter --driver is <span class="built_in">set</span> to an explicit driver however appropriate connection manager is not being <span class="built_in">set</span> (via --connection-manager). Sqoop is going to fall back to org.apache.sqoop.manager.GenericJdbcManager. Please specify explicitly <span class="built_in">which</span> connection manager should be used next time.</span><br><span class="line">19/10/30 10:09:24 INFO manager.SqlManager: Using default fetchSize of 1000</span><br><span class="line">19/10/30 10:09:24 INFO tool.CodeGenTool: Beginning code generation</span><br><span class="line">19/10/30 10:09:25 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM RECIPES AS t WHERE 1=0</span><br><span class="line">19/10/30 10:09:25 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM RECIPES AS t WHERE 1=0</span><br><span class="line">19/10/30 10:09:25 INFO orm.CompilationManager: HADOOP_MAPRED_HOME is /app/hadoop</span><br><span class="line">Note: /tmp/sqoop-sqoop/compile/905c294a54718643bcf983498f8878ba/RECIPES.java uses or overrides a deprecated API.</span><br><span class="line">Note: Recompile with -Xlint:deprecation <span class="keyword">for</span> details.</span><br><span class="line">19/10/30 10:09:26 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-sqoop/compile/905c294a54718643bcf983498f8878ba/RECIPES.jar</span><br><span class="line">19/10/30 10:09:26 INFO mapreduce.ImportJobBase: Beginning import of RECIPES</span><br><span class="line">19/10/30 10:09:26 INFO Configuration.deprecation: mapred.jar is deprecated. Instead, use mapreduce.job.jar</span><br><span class="line">19/10/30 10:09:26 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM RECIPES AS t WHERE 1=0</span><br><span class="line">19/10/30 10:09:27 INFO Configuration.deprecation: mapred.map.tasks is deprecated. Instead, use mapreduce.job.maps</span><br><span class="line">19/10/30 10:09:27 INFO client.RMProxy: Connecting to ResourceManager at node5.dat/192.168.158.53:8050</span><br><span class="line">19/10/30 10:09:31 INFO db.DBInputFormat: Using <span class="built_in">read</span> commited transaction isolation</span><br><span class="line">19/10/30 10:09:31 INFO db.DataDrivenDBInputFormat: BoundingValsQuery: SELECT MIN(RECIPE_ID), MAX(RECIPE_ID) FROM RECIPES</span><br><span class="line">19/10/30 10:09:31 INFO mapreduce.JobSubmitter: number of splits:4</span><br><span class="line">19/10/30 10:09:31 INFO Configuration.deprecation: yarn.resourcemanager.system-metrics-publisher.enabled is deprecated. Instead, use yarn.system-metrics-publisher.enabled</span><br><span class="line">19/10/30 10:09:31 INFO mapreduce.JobSubmitter: Submitting tokens <span class="keyword">for</span> job: job_1567153359966_0069</span><br><span class="line">19/10/30 10:09:31 INFO impl.YarnClientImpl: Submitted application application_1567153359966_0069</span><br><span class="line">19/10/30 10:09:31 INFO mapreduce.Job: The url to track the job: http://node5.dat:8088/proxy/application_1567153359966_0069/</span><br><span class="line">19/10/30 10:09:31 INFO mapreduce.Job: Running job: job_1567153359966_0069</span><br><span class="line">19/10/30 10:09:35 INFO mapreduce.Job: Job job_1567153359966_0069 running <span class="keyword">in</span> uber mode : <span class="literal">false</span></span><br><span class="line">19/10/30 10:09:35 INFO mapreduce.Job:  map 0% reduce 0%</span><br><span class="line">19/10/30 10:09:39 INFO mapreduce.Job:  map 50% reduce 0%</span><br><span class="line">19/10/30 10:09:40 INFO mapreduce.Job:  map 100% reduce 0%</span><br><span class="line">19/10/30 10:09:41 INFO mapreduce.Job: Job job_1567153359966_0069 completed successfully</span><br><span class="line">19/10/30 10:09:41 INFO mapreduce.Job: Counters: 30</span><br><span class="line">File System Counters</span><br><span class="line">FILE: Number of bytes <span class="built_in">read</span>=0</span><br><span class="line">FILE: Number of bytes written=830592</span><br><span class="line">FILE: Number of <span class="built_in">read</span> operations=0</span><br><span class="line">FILE: Number of large <span class="built_in">read</span> operations=0</span><br><span class="line">FILE: Number of write operations=0</span><br><span class="line">HDFS: Number of bytes <span class="built_in">read</span>=447</span><br><span class="line">HDFS: Number of bytes written=39</span><br><span class="line">HDFS: Number of <span class="built_in">read</span> operations=16</span><br><span class="line">HDFS: Number of large <span class="built_in">read</span> operations=0</span><br><span class="line">HDFS: Number of write operations=8</span><br><span class="line">Job Counters </span><br><span class="line">Launched map tasks=4</span><br><span class="line">Other <span class="built_in">local</span> map tasks=4</span><br><span class="line">Total time spent by all maps <span class="keyword">in</span> occupied slots (ms)=8334</span><br><span class="line">Total time spent by all reduces <span class="keyword">in</span> occupied slots (ms)=0</span><br><span class="line">Total time spent by all map tasks (ms)=8334</span><br><span class="line">Total vcore-milliseconds taken by all map tasks=8334</span><br><span class="line">Total megabyte-milliseconds taken by all map tasks=8534016</span><br><span class="line">Map-Reduce Framework</span><br><span class="line">Map input records=3</span><br><span class="line">Map output records=3</span><br><span class="line">Input split bytes=447</span><br><span class="line">Spilled Records=0</span><br><span class="line">Failed Shuffles=0</span><br><span class="line">Merged Map outputs=0</span><br><span class="line">GC time elapsed (ms)=162</span><br><span class="line">CPU time spent (ms)=3530</span><br><span class="line">Physical memory (bytes) snapshot=827170816</span><br><span class="line">Virtual memory (bytes) snapshot=8600104960</span><br><span class="line">Total committed heap usage (bytes)=585629696</span><br><span class="line">File Input Format Counters </span><br><span class="line">Bytes Read=0</span><br><span class="line">File Output Format Counters </span><br><span class="line">Bytes Written=39</span><br><span class="line">19/10/30 10:09:41 INFO mapreduce.ImportJobBase: Transferred 39 bytes <span class="keyword">in</span> 14.9856 seconds (2.6025 bytes/sec)</span><br><span class="line">19/10/30 10:09:41 INFO mapreduce.ImportJobBase: Retrieved 3 records.</span><br></pre></td></tr></table></figure><h2 id="Checking"><a href="#Checking" class="headerlink" title="Checking"></a>Checking</h2><p>ì œëŒ€ë¡œ hadoopì— ì €ì¥ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤. <code>hdfs</code>ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ íŒŒì¼ì´ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.</p><p><code>hdfs dfs -cat /t1/input/*</code> or <code>hdfs dfs -ls /t1/input</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sqoop@bips:~$ hdfs dfs -cat /t1/input/*</span><br><span class="line">1,Tacos</span><br><span class="line">2,Tomato Soup</span><br><span class="line">3,Grilled Cheese</span><br><span class="line">sqoop@bips:~$ hdfs dfs -ls /t1/input</span><br><span class="line">Found 5 items</span><br><span class="line">-rw-r--r--   2 sqoop supergroup          0 2019-10-30 10:09 /t1/input/_SUCCESS</span><br><span class="line">-rw-r--r--   2 sqoop supergroup          8 2019-10-30 10:09 /t1/input/part-m-00000</span><br><span class="line">-rw-r--r--   2 sqoop supergroup          0 2019-10-30 10:09 /t1/input/part-m-00001</span><br><span class="line">-rw-r--r--   2 sqoop supergroup         14 2019-10-30 10:09 /t1/input/part-m-00002</span><br><span class="line">-rw-r--r--   2 sqoop supergroup         17 2019-10-30 10:09 /t1/input/part-m-00003</span><br></pre></td></tr></table></figure><h1 id="Sqoop-Export"><a href="#Sqoop-Export" class="headerlink" title="Sqoop Export"></a>Sqoop Export</h1><p>ì´ë²ˆì—” HDFSë¥¼ Tibero tableë¡œ ë‹¤ì‹œ ë³€í™˜í•˜ëŠ” ì‘ì—…ì„ ì§„í–‰í•œë‹¤. ëª…ë ¹ì–´ì™€ ìˆ˜í–‰ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p><h2 id="CMD-1"><a href="#CMD-1" class="headerlink" title="CMD"></a>CMD</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sqoop <span class="built_in">export</span> --connect jdbc:tibero:thin:@192.168.xxx.xx:xxx:tibero \</span><br><span class="line">--driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">--username tibero --password ?? \</span><br><span class="line">--table RECIPES_EXP \</span><br><span class="line">--export-dir /t1/input</span><br></pre></td></tr></table></figure><blockquote><p><em>ìœ„ì—ì„œë„ ì–¸ê¸‰í–ˆë“¯ì´ export tableì´ Tiberoì— ì´ë¯¸ ì¡´ì¬í•´ì•¼ í•œë‹¤.</em></p></blockquote><h2 id="Result-1"><a href="#Result-1" class="headerlink" title="Result"></a>Result</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">sqoop@bips:~$ sqoop <span class="built_in">export</span> --connect jdbc:tibero:thin:@192.168.158.53:8729:tibero \</span><br><span class="line">&gt; --driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">&gt; --username tibero --password tmax \</span><br><span class="line">&gt; --table RECIPES_EXP \</span><br><span class="line">&gt; --export-dir /t1/input</span><br><span class="line">Warning: /app/sqoop/sqoop/../hbase does not exist! HBase imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HBASE_HOME</span> to the root of your HBase installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../hcatalog does not exist! HCatalog <span class="built_in">jobs</span> will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HCAT_HOME</span> to the root of your HCatalog installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../accumulo does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ACCUMULO_HOME</span> to the root of your Accumulo installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../zookeeper does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ZOOKEEPER_HOME</span> to the root of your Zookeeper installation.</span><br><span class="line">19/10/30 10:40:23 INFO sqoop.Sqoop: Running Sqoop version: 1.4.7</span><br><span class="line">19/10/30 10:40:23 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.</span><br><span class="line">19/10/30 10:40:23 WARN sqoop.ConnFactory: Parameter --driver is <span class="built_in">set</span> to an explicit driver however appropriate connection manager is not being <span class="built_in">set</span> (via --connection-manager). Sqoop is going to fall back to org.apache.sqoop.manager.GenericJdbcManager. Please specify explicitly <span class="built_in">which</span> connection manager should be used next time.</span><br><span class="line">19/10/30 10:40:23 INFO manager.SqlManager: Using default fetchSize of 1000</span><br><span class="line">19/10/30 10:40:23 INFO tool.CodeGenTool: Beginning code generation</span><br><span class="line">19/10/30 10:40:24 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM RECIPES_EXP AS t WHERE 1=0</span><br><span class="line">19/10/30 10:40:24 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM RECIPES_EXP AS t WHERE 1=0</span><br><span class="line">19/10/30 10:40:24 INFO orm.CompilationManager: HADOOP_MAPRED_HOME is /app/hadoop</span><br><span class="line">Note: /tmp/sqoop-sqoop/compile/bc292d345cc3a16972516454f904b6df/RECIPES_EXP.java uses or overrides a deprecated API.</span><br><span class="line">Note: Recompile with -Xlint:deprecation <span class="keyword">for</span> details.</span><br><span class="line">19/10/30 10:40:25 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-sqoop/compile/bc292d345cc3a16972516454f904b6df/RECIPES_EXP.jar</span><br><span class="line">19/10/30 10:40:25 INFO mapreduce.ExportJobBase: Beginning <span class="built_in">export</span> of RECIPES_EXP</span><br><span class="line">19/10/30 10:40:25 INFO Configuration.deprecation: mapred.jar is deprecated. Instead, use mapreduce.job.jar</span><br><span class="line">19/10/30 10:40:25 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM RECIPES_EXP AS t WHERE 1=0</span><br><span class="line">19/10/30 10:40:25 INFO Configuration.deprecation: mapred.reduce.tasks.speculative.execution is deprecated. Instead, use mapreduce.reduce.speculative</span><br><span class="line">19/10/30 10:40:25 INFO Configuration.deprecation: mapred.map.tasks.speculative.execution is deprecated. Instead, use mapreduce.map.speculative</span><br><span class="line">19/10/30 10:40:25 INFO Configuration.deprecation: mapred.map.tasks is deprecated. Instead, use mapreduce.job.maps</span><br><span class="line">19/10/30 10:40:25 INFO client.RMProxy: Connecting to ResourceManager at node5.dat/192.168.158.53:8050</span><br><span class="line">19/10/30 10:40:29 INFO input.FileInputFormat: Total input files to process : 4</span><br><span class="line">19/10/30 10:40:29 INFO input.FileInputFormat: Total input files to process : 4</span><br><span class="line">19/10/30 10:40:29 INFO mapreduce.JobSubmitter: number of splits:4</span><br><span class="line">19/10/30 10:40:29 INFO Configuration.deprecation: mapred.map.tasks.speculative.execution is deprecated. Instead, use mapreduce.map.speculative</span><br><span class="line">19/10/30 10:40:29 INFO Configuration.deprecation: yarn.resourcemanager.system-metrics-publisher.enabled is deprecated. Instead, use yarn.system-metrics-publisher.enabled</span><br><span class="line">19/10/30 10:40:29 INFO mapreduce.JobSubmitter: Submitting tokens <span class="keyword">for</span> job: job_1567153359966_0071</span><br><span class="line">19/10/30 10:40:30 INFO impl.YarnClientImpl: Submitted application application_1567153359966_0071</span><br><span class="line">19/10/30 10:40:30 INFO mapreduce.Job: The url to track the job: http://node5.dat:8088/proxy/application_1567153359966_0071/</span><br><span class="line">19/10/30 10:40:30 INFO mapreduce.Job: Running job: job_1567153359966_0071</span><br><span class="line">19/10/30 10:40:35 INFO mapreduce.Job: Job job_1567153359966_0071 running <span class="keyword">in</span> uber mode : <span class="literal">false</span></span><br><span class="line">19/10/30 10:40:35 INFO mapreduce.Job:  map 0% reduce 0%</span><br><span class="line">19/10/30 10:40:40 INFO mapreduce.Job:  map 75% reduce 0%</span><br><span class="line">19/10/30 10:40:41 INFO mapreduce.Job:  map 100% reduce 0%</span><br><span class="line">19/10/30 10:40:41 INFO mapreduce.Job: Job job_1567153359966_0071 completed successfully</span><br><span class="line">19/10/30 10:40:41 INFO mapreduce.Job: Counters: 31</span><br><span class="line">File System Counters</span><br><span class="line">FILE: Number of bytes <span class="built_in">read</span>=0</span><br><span class="line">FILE: Number of bytes written=829388</span><br><span class="line">FILE: Number of <span class="built_in">read</span> operations=0</span><br><span class="line">FILE: Number of large <span class="built_in">read</span> operations=0</span><br><span class="line">FILE: Number of write operations=0</span><br><span class="line">HDFS: Number of bytes <span class="built_in">read</span>=656</span><br><span class="line">HDFS: Number of bytes written=0</span><br><span class="line">HDFS: Number of <span class="built_in">read</span> operations=22</span><br><span class="line">HDFS: Number of large <span class="built_in">read</span> operations=0</span><br><span class="line">HDFS: Number of write operations=0</span><br><span class="line">Job Counters </span><br><span class="line">Launched map tasks=4</span><br><span class="line">Other <span class="built_in">local</span> map tasks=1</span><br><span class="line">Data-local map tasks=3</span><br><span class="line">Total time spent by all maps <span class="keyword">in</span> occupied slots (ms)=14227</span><br><span class="line">Total time spent by all reduces <span class="keyword">in</span> occupied slots (ms)=0</span><br><span class="line">Total time spent by all map tasks (ms)=14227</span><br><span class="line">Total vcore-milliseconds taken by all map tasks=14227</span><br><span class="line">Total megabyte-milliseconds taken by all map tasks=14568448</span><br><span class="line">Map-Reduce Framework</span><br><span class="line">Map input records=3</span><br><span class="line">Map output records=3</span><br><span class="line">Input split bytes=586</span><br><span class="line">Spilled Records=0</span><br><span class="line">Failed Shuffles=0</span><br><span class="line">Merged Map outputs=0</span><br><span class="line">GC time elapsed (ms)=425</span><br><span class="line">CPU time spent (ms)=4140</span><br><span class="line">Physical memory (bytes) snapshot=811102208</span><br><span class="line">Virtual memory (bytes) snapshot=8589045760</span><br><span class="line">Total committed heap usage (bytes)=606601216</span><br><span class="line">File Input Format Counters </span><br><span class="line">Bytes Read=0</span><br><span class="line">File Output Format Counters </span><br><span class="line">Bytes Written=0</span><br><span class="line">19/10/30 10:40:41 INFO mapreduce.ExportJobBase: Transferred 656 bytes <span class="keyword">in</span> 15.7366 seconds (41.6862 bytes/sec)</span><br><span class="line">19/10/30 10:40:41 INFO mapreduce.ExportJobBase: Exported 3 records.</span><br><span class="line">â€‹```</span><br></pre></td></tr></table></figure><h2 id="Checking-1"><a href="#Checking-1" class="headerlink" title="Checking"></a>Checking</h2><p>ì œëŒ€ë¡œ í…Œì´ë¸”ë¡œ ë°ì´í„°ê°€ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸í•´ë³¸ë‹¤. <code>Sqoop</code>ì—ì„œ <code>--query</code> argumentë¥¼ ì£¼ì–´ <code>RECIPES_EXP</code>ë¥¼ ì¡°íšŒí•´ë³´ì</p><p><code>sqoop eval --connect jdbc:tibero:thin:@192.168.xxx.xx:xxxx:tibero --driver com.tmax.tibero.jdbc.TbDriver --username tibero --password ?? --query &#39;SELECT * FROM RECIPES_EXP&#39;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">sqoop@bips:~$ sqoop <span class="built_in">eval</span> --connect jdbc:tibero:thin:@192.168.158.53:8729:tibero \</span><br><span class="line">&gt; --driver com.tmax.tibero.jdbc.TbDriver \</span><br><span class="line">&gt; --username tibero --password tmax --query <span class="string">&#x27;SELECT * FROM RECIPES_EXP&#x27;</span></span><br><span class="line">Warning: /app/sqoop/sqoop/../hbase does not exist! HBase imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HBASE_HOME</span> to the root of your HBase installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../hcatalog does not exist! HCatalog <span class="built_in">jobs</span> will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$HCAT_HOME</span> to the root of your HCatalog installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../accumulo does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ACCUMULO_HOME</span> to the root of your Accumulo installation.</span><br><span class="line">Warning: /app/sqoop/sqoop/../zookeeper does not exist! Accumulo imports will fail.</span><br><span class="line">Please <span class="built_in">set</span> <span class="variable">$ZOOKEEPER_HOME</span> to the root of your Zookeeper installation.</span><br><span class="line">19/10/30 10:41:54 INFO sqoop.Sqoop: Running Sqoop version: 1.4.7</span><br><span class="line">19/10/30 10:41:54 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.</span><br><span class="line">19/10/30 10:41:54 WARN sqoop.ConnFactory: Parameter --driver is <span class="built_in">set</span> to an explicit driver however appropriate connection manager is not being <span class="built_in">set</span> (via --connection-manager). Sqoop is going to fall back to org.apache.sqoop.manager.GenericJdbcManager. Please specify explicitly <span class="built_in">which</span> connection manager should be used next time.</span><br><span class="line">19/10/30 10:41:54 INFO manager.SqlManager: Using default fetchSize of 1000</span><br><span class="line">-----------------------------------------------</span><br><span class="line">| RECIPE_ID            | RECIPE_NAME          | </span><br><span class="line">-----------------------------------------------</span><br><span class="line">| 3                    | Grilled Cheese       | </span><br><span class="line">| 1                    | Tacos                | </span><br><span class="line">| 2                    | Tomato Soup          | </span><br><span class="line">-----------------------------------------------</span><br></pre></td></tr></table></figure><p><strong>export ê°€ ì •ìƒ ì‘ë™ëìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤</strong></p><h1 id="ì°¸ê³ "><a href="#ì°¸ê³ " class="headerlink" title="ì°¸ê³ "></a>ì°¸ê³ </h1><ol><li><a href="https://dlwjdcks5343.tistory.com/116">í”Œë°ì¥êµ°ë‹˜ ë¸”ë¡œê·¸ :  https://dlwjdcks5343.tistory.com/116 </a></li><li><a href="https://blog.voidmainvoid.net/175">AndersonChoi ë‹˜ ë¸”ë¡œê·¸ :  https://blog.voidmainvoid.net/175 </a></li><li><a href="https://sqoop.apache.org/docs/1.4.2/SqoopUserGuide.html#_free_form_query_imports">Sqoop Documents :  https://sqoop.apache.org/docs/1.4.2/SqoopUserGuide.html#_free_form_query_imports</a></li></ol><hr><p>2019.10.30 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-sqoop_with_tibero/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Interviews</title>
      <link>https://jx2lee.github.io/hackerrank-interviews/</link>
      <guid>https://jx2lee.github.io/hackerrank-interviews/</guid>
      <pubDate>Sun, 27 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Interviews&lt;/code&gt; ë¬¸ì œë¥¼ multiple join ë° group byë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Interviews</code> ë¬¸ì œë¥¼ multiple join ë° group byë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>Samantha interviews many candidates from different colleges using coding challenges and contests. Write a query to print the <em>contest_id</em>, <em>hacker_id</em>, <em>name</em>, and the sums of <em>total_submissions</em>, <em>total_accepted_submissions</em>, <em>total_views</em>, and <em>total_unique_views</em> for each contest sorted by <em>contest_id</em>. Exclude the contest from the result if all four sums are .</p><p><strong>Note:</strong> A specific contest can be used to screen candidates at more than one college, but each college only holds  screening contest.</p><hr><p><strong>Input Format</strong></p><p>The following tables hold interview data:</p><ul><li><em>Contests:</em> The <em>contest_id</em> is the id of the contest, <em>hacker_id</em> is the id of the hacker who created the contest, and <em>name</em> is the name of the hacker. <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458517426-e017c3460e-ScreenShot2016-03-21at4.57.47AM.png" alt="img"></li><li><em>Colleges:</em> The <em>college_id</em> is the id of the college, and <em>contest_id</em> is the id of the contest that Samantha used to screen the candidates. <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458517503-fd4aa63111-ScreenShot2016-03-21at4.57.56AM.png" alt="img"></li><li><em>Challenges:</em> The <em>challenge_id</em> is the id of the challenge that belongs to one of the contests whose contest_id Samantha forgot, and <em>college_id</em> is the id of the college where the challenge was given to candidates. <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458517661-a642f750ce-ScreenShot2016-03-21at4.58.04AM.png" alt="img"></li><li><em>View_Stats:</em> The <em>challenge_id</em> is the id of the challenge, <em>total_views</em> is the number of times the challenge was viewed by candidates, and <em>total_unique_views</em> is the number of times the challenge was viewed by unique candidates. <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458517983-b4302286a8-ScreenShot2016-03-21at4.58.15AM.png" alt="img"></li><li><em>Submission_Stats:</em> The <em>challenge_id</em> is the id of the challenge, <em>total_submissions</em> is the number of submissions for the challenge, and <em>total_accepted_submission</em> is the number of submissions that achieved full scores. <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458518090-80983c916a-ScreenShot2016-03-21at4.58.27AM.png" alt="img"></li></ul><hr><p><strong>Sample Input</strong></p><p><em>Contests</em> Table: <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458519044-d788f8a6ee-ScreenShot2016-03-21at4.58.39AM.png" alt="img"> <em>Colleges</em> Table: <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458519098-912836d6ac-ScreenShot2016-03-21at4.59.22AM.png" alt="img"> <em>Challenges*Table: <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458519120-c531743caf-ScreenShot2016-03-21at4.59.32AM.png" alt="img"> *View_Stats</em> Table: <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458519152-107a67866b-ScreenShot2016-03-21at4.59.43AM.png" alt="img"><em>Submission_Stats</em> Table: <img src="https://s3.amazonaws.com/hr-challenge-images/19596/1458519173-091aba871a-ScreenShot2016-03-21at4.59.55AM.png" alt="img"></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">66406 17973 Rose 111 39 156 56</span><br><span class="line">66556 79153 Angela 0 0 11 10</span><br><span class="line">94828 80275 Frank 150 38 41 15</span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>The contest  is used in the college . In this college , challenges  and  are asked, so from the <em>view</em> and <em>submission</em> stats:</p><ul><li>Sum of total submissions </li><li>Sum of total accepted submissions </li><li>Sum of total views </li><li>Sum of total unique views </li></ul><p>Similarly, we can find the sums for contests  and .</p><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p>Join ìœ í˜• ì¤‘ <code>Left Join</code>ì„ í™œìš©í•˜ì—¬ í•´ê²°í•˜ì˜€ë‹¤. ë‹¤ìˆ˜ì˜ tableì„ íŠ¹ì • í‚¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ <code>Join</code>í•˜ëŠ” ê²ƒì´ ë‹¤ì†Œ í—·ê°ˆë¦´ ìˆ˜ ìˆì§€ë§Œ ì°¨ê·¼ì°¨ê·¼ <code>Join</code>í•˜ë©´ ë¬¸ì œë¥¼ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p><p>ìš°ì„ , <code>contests</code> tableì„ ê¸°ì¤€ìœ¼ë¡œ <code>colleges</code>, <code>challenges</code> tableê³¼ <code>Left Join</code>ì„ ìˆ˜í–‰í•œë‹¤. ê° keyëŠ” <em>contest_id ì™€ college_id</em> ì´ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.contest_id, a.hacker_id, a.name,</span><br><span class="line"><span class="keyword">from</span> contests <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> colleges <span class="keyword">as</span> b <span class="keyword">on</span> a.contest_id = b.contest_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> challenges <span class="keyword">as</span> c <span class="keyword">on</span> b.college_id = c.college_id;</span><br></pre></td></tr></table></figure><p>ë‹¤ìŒ <em>total_views<em>ì™€ *total_unique_views</em>ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ <code>view_stats</code> tableì„ *challenge_id</em> ê¸°ì¤€ìœ¼ë¡œ group by í•œë‹¤. ì´í›„ ê²°ê³¼ í…Œì´ë¸”ê³¼ <code>Left Join</code>ì„ ìˆ˜í–‰í•œë‹¤. ë‹¨, keyëŠ” <em>challenge_id</em>ì´ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.contest_id, a.hacker_id, a.name,</span><br><span class="line">    <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views,</span><br><span class="line">    <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line"><span class="keyword">from</span> contests <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> colleges <span class="keyword">as</span> b <span class="keyword">on</span> a.contest_id = b.contest_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> challenges <span class="keyword">as</span> c <span class="keyword">on</span> b.college_id = c.college_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ( <span class="keyword">select</span> challenge_id, <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views, <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line">            <span class="keyword">from</span> view_stats</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span> challenge_id ) <span class="keyword">as</span> d <span class="keyword">on</span> c.challenge_id = d.challenge_id;</span><br></pre></td></tr></table></figure><p><code>view_stats</code> table Joinê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ <code>submission_stats</code> tableì„ ì •ì œí•œ í›„ <code>Left Join</code>ì„ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.contest_id, a.hacker_id, a.name,</span><br><span class="line">    <span class="keyword">sum</span>(total_submissions) <span class="keyword">as</span> total_submissions,</span><br><span class="line">    <span class="keyword">sum</span>(total_accepted_submissions) <span class="keyword">as</span> total_accepted_submissions,</span><br><span class="line">    <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views,</span><br><span class="line">    <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line"><span class="keyword">from</span> contests <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> colleges <span class="keyword">as</span> b <span class="keyword">on</span> a.contest_id = b.contest_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> challenges <span class="keyword">as</span> c <span class="keyword">on</span> b.college_id = c.college_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ( <span class="keyword">select</span> challenge_id, <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views, <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line">            <span class="keyword">from</span> view_stats</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span> challenge_id ) <span class="keyword">as</span> d <span class="keyword">on</span> c.challenge_id = d.challenge_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ( <span class="keyword">select</span> challenge_id, <span class="keyword">sum</span>(total_submissions) <span class="keyword">as</span> total_submissions, <span class="keyword">sum</span>(total_accepted_submissions) <span class="keyword">as</span> total_accepted_submissions</span><br><span class="line">            <span class="keyword">from</span> submission_stats</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span> challenge_id ) <span class="keyword">as</span> e <span class="keyword">on</span> c.challenge_id = e.challenge_id;</span><br></pre></td></tr></table></figure><p>ë§ˆì§€ë§‰ìœ¼ë¡œ <em>contest_id, hacker_id, name</em>ì„ ê¸°ì¤€ìœ¼ë¡œ group byë¥¼ ìˆ˜í–‰í•˜ê³ , ë¬¸ì œì˜ ì¡°ê±´ì¸ ë„¤ ê°€ì§€ summationì´ 0ë³´ë‹¤ í° ê²½ìš°ë§Œ ì¡°íšŒí•˜ëŠ”  <code>having</code>ì„ ì¶”ê°€í•˜ì—¬ ì™„ì„±í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.contest_id, a.hacker_id, a.name,</span><br><span class="line">    <span class="keyword">sum</span>(total_submissions) <span class="keyword">as</span> total_submissions,</span><br><span class="line">    <span class="keyword">sum</span>(total_accepted_submissions) <span class="keyword">as</span> total_accepted_submissions,</span><br><span class="line">    <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views,</span><br><span class="line">    <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line"><span class="keyword">from</span> contests <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> colleges <span class="keyword">as</span> b <span class="keyword">on</span> a.contest_id = b.contest_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> challenges <span class="keyword">as</span> c <span class="keyword">on</span> b.college_id = c.college_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ( <span class="keyword">select</span> challenge_id, <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views, <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line">            <span class="keyword">from</span> view_stats</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span> challenge_id ) <span class="keyword">as</span> d <span class="keyword">on</span> c.challenge_id = d.challenge_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ( <span class="keyword">select</span> challenge_id, <span class="keyword">sum</span>(total_submissions) <span class="keyword">as</span> total_submissions, <span class="keyword">sum</span>(total_accepted_submissions) <span class="keyword">as</span> total_accepted_submissions</span><br><span class="line">            <span class="keyword">from</span> submission_stats</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span> challenge_id ) <span class="keyword">as</span> e <span class="keyword">on</span> c.challenge_id = e.challenge_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.contest_id, a.hacker_id, a.name</span><br><span class="line"><span class="keyword">having</span> (total_submissions + total_accepted_submissions + total_views + total_unique_views) &gt; <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><p><a href="https://github.com/BlakeBrown/HackerRank-Solutions/blob/master/SQL/5_Advanced%20Join/4_Interviews/Interviews.mysql">ì°¸ê³ </a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.contest_id, a.hacker_id, a.name,</span><br><span class="line">    <span class="keyword">sum</span>(total_submissions) <span class="keyword">as</span> total_submissions,</span><br><span class="line">    <span class="keyword">sum</span>(total_accepted_submissions) <span class="keyword">as</span> total_accepted_submissions,</span><br><span class="line">    <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views,</span><br><span class="line">    <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line"><span class="keyword">from</span> contests <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> colleges <span class="keyword">as</span> b <span class="keyword">on</span> a.contest_id = b.contest_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> challenges <span class="keyword">as</span> c <span class="keyword">on</span> b.college_id = c.college_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ( <span class="keyword">select</span> challenge_id, <span class="keyword">sum</span>(total_views) <span class="keyword">as</span> total_views, <span class="keyword">sum</span>(total_unique_views) <span class="keyword">as</span> total_unique_views</span><br><span class="line">            <span class="keyword">from</span> view_stats</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span> challenge_id ) <span class="keyword">as</span> d <span class="keyword">on</span> c.challenge_id = d.challenge_id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ( <span class="keyword">select</span> challenge_id, <span class="keyword">sum</span>(total_submissions) <span class="keyword">as</span> total_submissions, <span class="keyword">sum</span>(total_accepted_submissions) <span class="keyword">as</span> total_accepted_submissions</span><br><span class="line">            <span class="keyword">from</span> submission_stats</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span> challenge_id ) <span class="keyword">as</span> e <span class="keyword">on</span> c.challenge_id = e.challenge_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.contest_id, a.hacker_id, a.name</span><br><span class="line"><span class="keyword">having</span> (total_submissions + total_accepted_submissions + total_views + total_unique_views) &gt; <span class="number">0</span>;</span><br></pre></td></tr></table></figure><hr><p>2019.10.28 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-interviews/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Install Hadoop using Docker</title>
      <link>https://jx2lee.github.io/hadoop-install_hadoop_using_docker/</link>
      <guid>https://jx2lee.github.io/hadoop-install_hadoop_using_docker/</guid>
      <pubDate>Thu, 24 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;strong&gt;Hadoop&lt;/strong&gt; í™˜ê²½ì„ êµ¬ì„±í•´ë³´ì!&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><strong>Hadoop</strong> í™˜ê²½ì„ êµ¬ì„±í•´ë³´ì!</p><a id="more"></a><p>ë“œë””ì–´ ì—”ì§€ë‹ˆì–´ë¡œì¨ì˜ ëŠ¥ë ¥ì„ ë°°ì–‘í•  ìˆ˜ ìˆëŠ” <code>í™˜ê²½ êµ¬ì„±</code>ì´ë‹¤. ìš°ì„ , íšŒì‚¬ì—ì„œ ì§€ê¸‰ë°›ì€ ì„œë²„ë¡œ ì´ë¯¸ í•˜ë‘¡ í™˜ê²½ì´ êµ¬ì¶•ë˜ì–´ ìˆì§€ë§Œ, ê°œì¸ í• ë‹¹ë°›ì€ ì„œë²„ì—ì„œ <code>Docker</code>ë¥¼ ì´ìš©í•´ ì‹¤ìŠµ í™˜ê²½ì„ êµ¬ì¶•í•˜ê³ ì í•œë‹¤.</p><blockquote><p><em>Docker Hub ì—ì„œ ìŠ¤íƒ€ê°€ ê°€ì¥ ë§ì€ ì´ë¯¸ì§€ë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤. Dockerë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì€ <code>í˜¹ì—¬ë‚˜ ë‚˜ì¤‘ì—ë„ ì¨ë¨¹ì„ ê²½ìš°</code>ë¥¼ ëŒ€ë¹„í•œ ê²ƒì´ë‹¤.</em></p></blockquote><h1 id="PLAN"><a href="#PLAN" class="headerlink" title="PLAN"></a>PLAN</h1><p>3ê°œì˜ DataNodeì™€ 1ê°œì˜ NameNodeë¡œ êµ¬ì„±ëœ í•˜ë‘¡ í™˜ê²½ì„ êµ¬ì¶•í•œë‹¤. ì—¬ëŸ¬ ê°œ ì„œë²„ë¥¼ ì—°ê²°í•˜ëŠ” êµ¬ì¡° ëŒ€ì‹ , ì‰½ê²Œ í™˜ê²½ì„ ë°”ê¾¸ê³  ì…ë§›ëŒ€ë¡œ ìˆ˜ì •ì´ ê°€ëŠ¥í•œ <strong>docker</strong>ë¥¼ ì´ìš©í•´ êµ¬ì„±í•œë‹¤. dockerë¥¼ ê³µë¶€í•´ë³´ìëŠ” ì˜ë¯¸ë„ ìˆê³  ìƒˆë¡­ê²Œ í™˜ê²½ì„ ì¬êµ¬ì„±í•  ë•Œ ìœ ìš©í•  ê²ƒ ê°™ë‹¤.</p><h1 id="ENVIRONMENT"><a href="#ENVIRONMENT" class="headerlink" title="ENVIRONMENT"></a>ENVIRONMENT</h1><p>hadoop í´ë”ë¥¼ ìƒì„±í•˜ì—¬ ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ëŠ”ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ tree .</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ base</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ core-site.xml</span><br><span class="line">â”‚Â Â  â””â”€â”€ Dockerfile</span><br><span class="line">â”œâ”€â”€ data-node</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ Dockerfile</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ hdfs-site.xml</span><br><span class="line">â”‚Â Â  â””â”€â”€ install.sh</span><br><span class="line">â”œâ”€â”€ docker-compose.yml</span><br><span class="line">â””â”€â”€ name-node</span><br><span class="line">    â”œâ”€â”€ Dockerfile</span><br><span class="line">    â”œâ”€â”€ hdfs-site.xml</span><br><span class="line">    â””â”€â”€ install.sh</span><br><span class="line"></span><br><span class="line">3 directories, 9 files</span><br></pre></td></tr></table></figure><p>hadoopì˜ ê¸°ë³¸ í™˜ê²½ì„ êµ¬ì„±í•˜ëŠ” <code>base</code>ì™€ ì´ë¥¼ í™œìš©í•´ <code>name / data -node</code> í´ë”ë¥¼ êµ¬ì„±í•˜ì˜€ê³ , Dockerfileì„ ì‘ì„±í•˜ì—¬ ì§ì ‘ imageë¥¼ buildí•˜ê³  <code>docker-compose</code>ë¥¼ í™œìš©í•´ ë°°í¬í•œë‹¤. </p><h2 id="BASE"><a href="#BASE" class="headerlink" title="BASE"></a>BASE</h2><p>ê° componentì˜ ë°‘ë°”ë‹¹ì´ ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. ì´ëŠ” <code>base</code> í´ë”ì—ì„œ ìˆ˜í–‰í•˜ë©°, ê³ ë ¤ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>Hadoop ì„¤ì¹˜ë¥¼ ìœ„í•œ binary</li><li>Java</li></ul><p>ì´ë¯¸ì§€ ë¹Œë“œë¥¼ ìœ„í•´ <code>Dockerfile</code>, <code>core-site.xml</code>ì„ ì‘ì„±í•´ë³´ë„ë¡ í•œë‹¤.</p><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p><code>Dockerfile</code>ì€ ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ì‘ì„±í•˜ì˜€ë‹¤.</p><blockquote><p><em>Dockerfile ì‘ì„±ì„ ë§ì´ í•´ë²„ë¦‡ í•´ì•¼ê² ë‹¤. ì°¸ê³ í•œ ë¸”ë¡œê·¸ì—ì„œ ì‚¬ìš©í•œ ë‚´ìš©ì„ ë³µì‚¬ ë¶™ì—¬ë„£ì§€ ì•Šê³  ì§ì ‘ ì‘ì„±í•˜ë‹ˆ ì–´ëŠì •ë„ íë¦„ì€ íŒŒì•…í•˜ì˜€ë‹¤</em></p></blockquote><ul><li><p>í™˜ê²½ë³€ìˆ˜ ì„¤ì •</p><ul><li><code>HADOOP_VERSION</code> : hadoop versionì„ ì˜ë¯¸</li><li><code>HADOOP_URL</code> : hadoop ì„¤ì¹˜ binary ë‹¤ìš´ì„ ìœ„í•œ url</li></ul></li><li><p>í™˜ê²½ë³€ìˆ˜ë¥¼ ì´ìš©í•´ download ë° ì••ì¶•í•´ì œ</p></li><li><p>ë§í¬íŒŒì¼ ìƒì„±</p></li><li><p>í˜¸ìŠ¤íŠ¸(in base directory) íŒŒì¼ì„ containerì— ì¶”ê°€</p></li><li><p>hadoop ì‹¤í–‰ì„ ìœ„í•œ í™˜ê²½ë³€ìˆ˜ ì„¤ì •</p><ul><li><code>HADOOP_PREFIX</code> : hadoop root directory</li><li><code>HADOOP_CONF_DIR</code> : hadoop config directory</li><li><code>JAVA_HOME</code> : Java directory</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ENV for installation</span></span><br><span class="line">ENV HADOOP_VERSION=2.9.2</span><br><span class="line">ENV HADOOP_URL=http://mirror.apache-kr.org/hadoop/common/hadoop-<span class="variable">$HADOOP_VERSION</span>/hadoop-<span class="variable">$HADOOP_VERSION</span>.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment">## Download Hadoop on /app/hadoop</span></span><br><span class="line">RUN curl -fSL <span class="string">&quot;<span class="variable">$HADOOP_URL</span>&quot;</span> -o /tmp/hadoop.tar.gz \</span><br><span class="line">&amp;&amp; tar -xvf /tmp/hadoop.tar.gz -C /opt/ \</span><br><span class="line">&amp;&amp; rm /tmp/hadoop.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># make directory &amp; symbolic link</span></span><br><span class="line">RUN ln -s /opt/hadoop-<span class="variable">$HADOOP_VERSION</span> /opt/hadoop \</span><br><span class="line">&amp;&amp; mkdir /opt/hadoop/dfs \</span><br><span class="line">&amp;&amp; ln -s /opt/hadoop-<span class="variable">$HADOOP_VERSION</span>/etc/hadoop /etc/hadoop \</span><br><span class="line">&amp;&amp; rm -rf /opt/hadoop/share/doc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># copy local-site.xml file to container</span></span><br><span class="line">ADD core-site.xml /etc/hadoop/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ENV for run</span></span><br><span class="line">ENV HADOOP_PREFIX /opt/hadoop</span><br><span class="line">ENV HADOOP_CONF_DIR /etc/hadoop</span><br><span class="line">ENV PATH <span class="variable">$HADOOP_PREFIX</span>/bin/:<span class="variable">$PATH</span></span><br><span class="line">ENV JAVA_HOME /usr/lib/jvm/zulu-8-amd64</span><br></pre></td></tr></table></figure><h3 id="core-site-xml"><a href="#core-site-xml" class="headerlink" title="core-site.xml"></a>core-site.xml</h3><p><code>core-site.xml</code>ì€ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">connfiguration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://namenode:9000/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>NameNode URI</span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">connfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><code>fs.defaultFS</code> : NameNodeì˜ ìœ„ì¹˜ë¥¼ ì°¾ëŠ” ì„¤ì •ìœ¼ë¡œ ì½ê¸°/ì“°ê¸° ìš”ì²­ì„ í•  ë•Œ ì‚¬ìš©ë˜ëŠ” í•­ëª©</p></li><li><p>URI hostname ì€ namenodeë¼ ì„¤ì •í•˜ì˜€ëŠ”ë°, NameNode containerì˜ host nameì„ ì§€ì •í•œ ê²ƒ</p></li></ul><blockquote><p><em><code>connfiguration</code> tag ëª…ì„ ì œëŒ€ë¡œ í™•ì¸í•˜ë„ë¡ í•˜ì. (ë‚´ ê²½ìš° connfiguration -&gt; configurationìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ í›„ ì‹¤í–‰í•˜ì˜€ë”ë‹ˆ containerê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ì§€ ì•Šì•˜ë‹¤)</em></p></blockquote><h3 id="Build-hadoop-base-2-9-2"><a href="#Build-hadoop-base-2-9-2" class="headerlink" title="Build hadoop-base:2.9.2"></a>Build hadoop-base:2.9.2</h3><p>ì´ì œ Docker imageë¡œ ë¹Œë“œí•  ì°¨ë¡€ì´ë‹¤. <code>base</code> í´ë”ë¡œ ì ‘ê·¼ í›„ ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ buildë¥¼ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ <span class="built_in">cd</span> base/</span><br><span class="line">[kuber@node2 base]$ docker build -t hadoop-base:2.9.2 .</span><br></pre></td></tr></table></figure><h2 id="NAMENODE"><a href="#NAMENODE" class="headerlink" title="NAMENODE"></a>NAMENODE</h2><p>base imageë¥¼ ìƒì„±í•˜ì˜€ë‹¤ë©´, ì´ë¥¼ ì´ìš©í•´ NameNode Containerë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ í™˜ê²½ì„ êµ¬ì„±í•œë‹¤. ê³ ë ¤ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>NameNode ìš© <code>hdfs-site.xml</code></li><li>FsImage, EditLog ì €ì¥ì„ ìœ„í•œ ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ ê²½ë¡œ</li><li>NameNodeì˜ ì²« êµ¬ë™ í™•ì¸ <em>(ì²« êµ¬ë™ì´ ì•„ë‹ˆë¼ë©´ í¬ë§· í›„ êµ¬ë™ í•„ìš”)</em></li></ul><p>NameNode ì´ë¯¸ì§€ ë¹Œë“œë¥¼ ìœ„í•´ <code>Dockerfile</code>, <code>hdfs-site.xml</code>, <code>install.sh</code>ë¥¼ ì‘ì„±í•´ë³´ë„ë¡ í•œë‹¤.</p><h3 id="Dockerfile-1"><a href="#Dockerfile-1" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p><code>Dockerfile</code>ì€ ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ì‘ì„±í•˜ì˜€ë‹¤.</p><ul><li>ì´ì „ì— ë§Œë“  hadoop-base:2.9.2 imageë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤</li><li>Web UI ì‘ë‹µ ì—¬ë¶€ í™•ì¸ì„ ìœ„í•œ HEALTHCHECK</li><li>í˜¸ìŠ¤íŠ¸(in name-node directory) íŒŒì¼ì„ containerì— ì¶”ê°€</li><li>FSIMage, EditLog íŒŒì¼ ê²½ë¡œ ì—°ê²°</li><li>í¬íŠ¸ ë…¸ì¶œ</li><li>ëª…ë ¹ì–´ ë“±ë¡</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">FROM hadoop-base:2.9.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># CON NameNode Web UI</span></span><br><span class="line">HEALTHCHECK --interval=30s --timeout=30s --retries=3 CMD curl -f http://localhost:50070/ || <span class="built_in">exit</span> 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># COPY hdfs-site.xml</span></span><br><span class="line">ADD hdfs-site.xml /etc/hadoop/</span><br><span class="line"></span><br><span class="line"><span class="comment"># FSImage/EditLog path -&gt; volume</span></span><br><span class="line">RUN mkdir /opt/hadoop/dfs/name</span><br><span class="line">VOLUME /opt/hadoop/dfs/name</span><br><span class="line"></span><br><span class="line"><span class="comment"># COPY shell scrip</span></span><br><span class="line">ADD install.sh /install.sh</span><br><span class="line">RUN chmod a+x /install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># EXPOSE Port</span></span><br><span class="line">EXPOSE 50070 9000</span><br><span class="line"></span><br><span class="line"><span class="comment"># ADD command line for run</span></span><br><span class="line">CMD [<span class="string">&quot;/install.sh&quot;</span>, <span class="string">&quot;opt/hadoop/dfs/name&quot;</span>]</span><br></pre></td></tr></table></figure><h3 id="hdfs-site-xml"><a href="#hdfs-site-xml" class="headerlink" title="hdfs-site.xml"></a>hdfs-site.xml</h3><p><code>hdfs-site.xml</code>ì€ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///opt/hadoop/dfs/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.blocksize<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>10485760<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.client.use.datanode.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.rpc-bind-host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.servicerpc-bind-host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-bind-host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.https-bind-host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><code>dfs.namenode.name.dir</code> : FSImage / EditLog íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ê²½ë¡œ</p></li><li><p><code>dfs.blocksize</code> : HDFS íŒŒì¼ ë¸”ë¡ì˜ í¬ê¸°ë¡œ ë³¸ í™˜ê²½ì—ì„œëŠ” 10MBë¡œ ì„¤ì •í•˜ì˜€ë‹¤<em>(default : 128MB)</em></p><p>(ê¸°íƒ€ í•­ëª©ë“¤ì€ ( <a href="https://blog.geunho.dev/posts/hadoop-docker-test-env-hdfs/">https://blog.geunho.dev/posts/hadoop-docker-test-env-hdfs/</a> ) í™•ì¸)</p></li></ul><h3 id="install-sh"><a href="#install-sh" class="headerlink" title="install.sh"></a>install.sh</h3><p> <code>install.sh</code>ì€ NameNodeì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ í¬ë§· ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì´ë‹¤. ë§Œì•½ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ í¬ë§·ë˜ì–´ ìˆë‹¤ë©´ NameNodeë¥¼ êµ¬ë™í•˜ê³ , í¬ë§·ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ í¬ë§·ì„ ì§„í–‰í•œ í›„ êµ¬ë™í•œë‹¤.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> SET namespace directory</span></span><br><span class="line">NAME_DIR=$1</span><br><span class="line">echo $NAME_DIR</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> CHECK <span class="keyword">if</span> dir is empty</span></span><br><span class="line">if [ &quot;$(ls -A $NAME_DIR)&quot; ]; then</span><br><span class="line">echo &quot;NameNode is already formatted !!&quot;</span><br><span class="line">else</span><br><span class="line">echo &quot;Format NameNode..&quot;</span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP_PREFIX/bin/hdfs --config <span class="variable">$HADOOP_CONF_DIR</span> namenode -format</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> RUN</span></span><br><span class="line"><span class="meta">$</span><span class="bash">HADOOP_PREFIX/bin/hdfs --config <span class="variable">$HADOOP_CONF_DIR</span> namenode</span></span><br></pre></td></tr></table></figure><h3 id="Build-hadoop-namenode-2-9-2"><a href="#Build-hadoop-namenode-2-9-2" class="headerlink" title="Build hadoop-namenode:2.9.2"></a>Build hadoop-namenode:2.9.2</h3><p>ì´ì œ Docker imageë¡œ ë¹Œë“œí•  ì°¨ë¡€ì´ë‹¤. <code>name-node</code> í´ë”ë¡œ ì ‘ê·¼ í›„ ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ buildë¥¼ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ <span class="built_in">cd</span> name-node/</span><br><span class="line">[kuber@node2 name-node]$ docker build -t hadoop-namenode:2.9.2 .</span><br></pre></td></tr></table></figure><h2 id="DATANODE"><a href="#DATANODE" class="headerlink" title="DATANODE"></a>DATANODE</h2><p>NameNode ì´ë¯¸ì§€ ìƒì„±ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, base imageë¥¼ ì´ìš©í•´ DataNode imageë¥¼ ìƒì„±í•´ë³¸ë‹¤. ê³ ë ¤ì‚¬í•­ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li>DataNode ìš© <code>hdfs-site.xml</code></li><li>íŒŒì¼ ë¸”ë¡ ì €ì¥ì„ ìœ„í•œ ê²½ë¡œ</li></ul><p>DataNode ì´ë¯¸ì§€ ë¹Œë“œë¥¼ ìœ„í•´ <code>Dockerfile</code>, <code>hdfs-site.xml</code>, <code>install.sh</code>ë¥¼ ì‘ì„±í•´ë³´ë„ë¡ í•œë‹¤.</p><h3 id="Dockerfile-2"><a href="#Dockerfile-2" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p><code>Dockerfile</code>ì€ ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ ì‘ì„±í•˜ì˜€ë‹¤.</p><ul><li>ì´ì „ì— ë§Œë“  hadoop-base:2.9.2 imageë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤</li><li>Web UI ì‘ë‹µ ì—¬ë¶€ í™•ì¸ì„ ìœ„í•œ HEALTHCHECK</li><li>host(in name-node directory) íŒŒì¼ì„ containerì— ì¶”ê°€</li><li>FSIMage, EditLog íŒŒì¼ ê²½ë¡œ ì—°ê²°</li><li>port ë…¸ì¶œ</li><li>cmd ë“±ë¡</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FROM hadoop-base:2.9.2</span><br><span class="line"></span><br><span class="line"><span class="comment"># CONN NameNode Web UI</span></span><br><span class="line">HEALTHCHECK --interval=30s --timeout=30s --retries=3 CMD curl -f http://localhost:50075/ || <span class="built_in">exit</span> 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">RUN mkdir /opt/hadoop/dfs/data</span><br><span class="line">VOLUME /opt/hadoop/dfs/data</span><br><span class="line"></span><br><span class="line"><span class="comment"># COPY shell scrip</span></span><br><span class="line">ADD install.sh /install.sh</span><br><span class="line">RUN chmod a+x /install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># EXPOSE Port</span></span><br><span class="line">EXPOSE 50075 50010</span><br><span class="line"></span><br><span class="line"><span class="comment"># ADD command line for run</span></span><br><span class="line">CMD [<span class="string">&quot;/install.sh&quot;</span>]</span><br></pre></td></tr></table></figure><h3 id="hdfs-site-xml-1"><a href="#hdfs-site-xml-1" class="headerlink" title="hdfs-site.xml"></a>hdfs-site.xml</h3><p><code>hdfs-site.xml</code> ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•œë‹¤. container ì— datanodeì˜ dir pathì™€ blocksizeë¥¼ ì§€ì •í•œë‹¤.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///opt/hadoop/dfs/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.blocksize<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>10485760<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.use.datanode.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="install-sh-1"><a href="#install-sh-1" class="headerlink" title="install.sh"></a>install.sh</h3><p>DataNodeì˜ <code>install.sh</code> ì€ ë³„ê±° ì—†ë‹¤. DataNodeë¥¼ êµ¬ë™í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•˜ì—¬ ì‘ì„±í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$HADOOP_PREFIX</span>/bin/hdfs --config <span class="variable">$HADOOP_CONF_DIR</span> datanode</span><br></pre></td></tr></table></figure><h3 id="Build-hadoop-datanode-2-9-2"><a href="#Build-hadoop-datanode-2-9-2" class="headerlink" title="Build hadoop-datanode:2.9.2"></a>Build hadoop-datanode:2.9.2</h3><p>ì´ì œ Docker imageë¡œ ë¹Œë“œí•  ì°¨ë¡€ì´ë‹¤. <code>data-node</code> í´ë”ë¡œ ì ‘ê·¼ í›„ ì•„ë˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ buildë¥¼ ìˆ˜í–‰í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ <span class="built_in">cd</span> data-node/</span><br><span class="line">[kuber@node2 data-node]$ docker build -t hadoop-datanode:2.9.2 .</span><br><span class="line">Sending build context to Docker daemon 4.096 kB</span><br><span class="line">Step 1/8 : FROM hadoop-base:2.9.2</span><br><span class="line"> ---&gt; 765c9acb59fd</span><br><span class="line">Step 2/8 : HEALTHCHECK --interval=30s --timeout=30s --retries=3 CMD curl -f http://localhost:50075/ || <span class="built_in">exit</span> 1</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> e2b20d7d5fd1</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">Successfully built 3f1372bf4fdb</span><br></pre></td></tr></table></figure><p><strong>container êµ¬ë™ì„ ìœ„í•œ ì¤€ë¹„ê°€ ê±°ì˜ ëë‚˜ê°„ë‹¤</strong></p><h1 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a>RUN</h1><p>ë¹Œë“œëœ ì´ë¯¸ì§€ë¥¼ í•˜ë‚˜í•˜ë‚˜ ì‹¤í–‰<em>(ex. docker run ~)</em>í•´ë„ ë˜ì§€ë§Œ, <code>docker compose</code>ë¼ëŠ” íˆ´ì„ ì´ìš©í•´ í•œêº¼ë²ˆì— ë°°í¬í•´ë³´ë„ë¡ í•œë‹¤. yml í˜•ì‹ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ NadeNodeì™€ DataNodeë¥¼ í•œ ë²ˆì— ë°°í¬í•  ê²ƒì´ë‹¤.</p><h2 id="Install-docker-compose"><a href="#Install-docker-compose" class="headerlink" title="Install docker-compose"></a>Install <code>docker-compose</code></h2><p>docker ì„¤ì¹˜ ì‹œ ìë™ìœ¼ë¡œ ì„¤ì¹˜ëœ ì¤„ ì•Œì•˜ëŠ”ë°, ì„¤ì¹˜ê°€ ì•ˆë˜ìˆì—ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ <code>docker-compose</code>ë¥¼ ì„¤ì¹˜í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.24.1/docker-compose-<span class="subst">$(uname -s)</span>-<span class="subst">$(uname -m)</span>&quot;</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100   617    0   617    0     0   1382      0 --:--:-- --:--:-- --:--:--  1380</span><br><span class="line">100 15.4M  100 15.4M    0     0  2327k      0  0:00:06  0:00:06 --:--:-- 3535k</span><br><span class="line">[kuber@node2 hadoop]$ sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">[kuber@node2 hadoop]$ sudo ln -s /usr/<span class="built_in">local</span>/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><h2 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h2><p><code>docker-compose.yml</code>ì€ docker ì‹¤í–‰ ì˜µì…˜ë“¤ì„ ë¯¸ë¦¬ ì ì–´ë‘” íŒŒì¼ì´ë‹¤. <em>services`</em> ë¶€ë¶„ì€ ìš°ë¦¬ê°€ êµ¬ë™í•  NameNode ë° DataNodeì— ê´€ë ¨ëœ ì˜µì…˜ë“¤ì„ ì‘ì„±í•˜ê³ , ê³„íšì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ DataNode 3ê°œ êµ¬ë™ì„ ìœ„í•´ 01/02/03ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì‘ì„±í•œë‹¤.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.4&quot;</span><br><span class="line"></span><br><span class="line">x-datanode_base: &amp;datanode_base</span><br><span class="line">  image: hadoop-datanode:2.9.2</span><br><span class="line">  networks:</span><br><span class="line">    - bridge</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  namenode:</span><br><span class="line">    image: hadoop-namenode:2.9.2</span><br><span class="line">    container_name: namenode</span><br><span class="line">    hostname: namenode</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;50070:50070&quot;</span><br><span class="line">      - &quot;9000:9000&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - namenode:/opt/hadoop/dfs/name</span><br><span class="line">      - /tmp:/tmp</span><br><span class="line">    networks:</span><br><span class="line">      - bridge</span><br><span class="line"></span><br><span class="line">  datanode01:</span><br><span class="line">    &lt;&lt;: *datanode_base</span><br><span class="line">    container_name: datanode01</span><br><span class="line">    hostname: datanode01</span><br><span class="line">    volumes:</span><br><span class="line">      - datanode01:/opt/hadoop/dfs/data</span><br><span class="line">  datanode02:</span><br><span class="line">    &lt;&lt;: *datanode_base</span><br><span class="line">    container_name: datanode02</span><br><span class="line">    hostname: datanode02</span><br><span class="line">    volumes:</span><br><span class="line">      - datanode02:/opt/hadoop/dfs/data</span><br><span class="line">  datanode03:</span><br><span class="line">    &lt;&lt;: *datanode_base</span><br><span class="line">    container_name: datanode03</span><br><span class="line">    hostname: datanode03</span><br><span class="line">    volumes:</span><br><span class="line">      - datanode03:/opt/hadoop/dfs/data</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  namenode:</span><br><span class="line">  datanode01:</span><br><span class="line">  datanode02:</span><br><span class="line">  datanode03:</span><br><span class="line"></span><br><span class="line">networks:</span><br><span class="line">  bridge:</span><br></pre></td></tr></table></figure><blockquote><p><em>versionì˜ ê²½ìš°, ìì‹ ì˜ ì„œë²„ì— ì„¤ì¹˜ëœ docker engine releaseì— ë”°ë¼ formatì´ ì •í•´ì ¸ìˆìœ¼ë¯€ë¡œ ì´ <a href="https://docs.docker.com/compose/compose-file/compose-versioning/">ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ </em></p></blockquote><h2 id="Run-Container-using-docker-compose"><a href="#Run-Container-using-docker-compose" class="headerlink" title="Run Container using docker-compose"></a>Run Container using docker-compose</h2><p>docker-composeë¥¼ ì´ìš©í•´ ë°°í¬í•´ ë³´ë„ë¡ í•˜ì. ë³¼ë¥¨ì„ ìƒì„±í•˜ê³  NameNode / DataNodeê°€ êµ¬ë™ë˜ì—ˆë‹¤ëŠ” ë©”ì„¸ì§€ê°€ ë³´ì¼ ê²ƒì´ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ docker-compose up -d</span><br><span class="line">Creating volume <span class="string">&quot;hadoop_datanode01&quot;</span> with default driver</span><br><span class="line">Creating volume <span class="string">&quot;hadoop_datanode02&quot;</span> with default driver</span><br><span class="line">Creating volume <span class="string">&quot;hadoop_datanode03&quot;</span> with default driver</span><br><span class="line">namenode is up-to-date</span><br><span class="line">Creating datanode01 ... <span class="keyword">done</span></span><br><span class="line">Creating datanode02 ... <span class="keyword">done</span></span><br><span class="line">Creating datanode03 ... <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h1 id="Installation-Check"><a href="#Installation-Check" class="headerlink" title="Installation Check"></a>Installation Check</h1><p>ë…¸ë“œë“¤ì´ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ëŠ” ë‹¨ê³„ì´ë‹¤. êµ¬ë™ì„ í–ˆìœ¼ë©´ ì œëŒ€ë¡œ ë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ”ê²Œ ì¤‘ìš”í•˜ê² ì£ ? ì•„ë˜ ìˆœì„œì™€ ê°™ì´ ì„¤ì¹˜ í™•ì¸ì„ ì§„í–‰í•œë‹¤.</p><h2 id="NameNode-ì»¨í…Œì´ë„ˆì˜-hadoop-client-ì‹¤í–‰-í™•ì¸"><a href="#NameNode-ì»¨í…Œì´ë„ˆì˜-hadoop-client-ì‹¤í–‰-í™•ì¸" class="headerlink" title="NameNode ì»¨í…Œì´ë„ˆì˜ hadoop client ì‹¤í–‰ í™•ì¸"></a>NameNode ì»¨í…Œì´ë„ˆì˜ hadoop client ì‹¤í–‰ í™•ì¸</h2><p>NameNodeì˜ ì»¨í…Œì´ë„ˆì— ì ‘ì†í•´ ì»¤ë§¨ë“œë¼ì¸ì„ í™•ì¸í•˜ëŠ” ëª…ë ¹ì–´<em>(docker exec)</em>ë¥¼ í†µí•´ í™•ì¸í•´ë³¸ë‹¤. ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì´ Usageê°€ ì¶œë ¥ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ docker <span class="built_in">exec</span> namenode /opt/hadoop/bin/hadoop</span><br><span class="line">Usage: hadoop [--config confdir] [COMMAND | CLASSNAME]</span><br><span class="line">  CLASSNAME            run the class named CLASSNAME</span><br><span class="line"> or</span><br><span class="line">  <span class="built_in">where</span> COMMAND is one of:</span><br><span class="line">  fs                   run a generic filesystem user client</span><br><span class="line">  version              <span class="built_in">print</span> the version</span><br><span class="line">  jar &lt;jar&gt;            run a jar file</span><br><span class="line">                       note: please use <span class="string">&quot;yarn jar&quot;</span> to launch</span><br><span class="line">                             YARN applications, not this <span class="built_in">command</span>.</span><br><span class="line">  checknative [-a|-h]  check native hadoop and compression libraries availability</span><br><span class="line">  distcp &lt;srcurl&gt; &lt;desturl&gt; copy file or directories recursively</span><br><span class="line">  archive -archiveName NAME -p &lt;parent path&gt; &lt;src&gt;* &lt;dest&gt; create a hadoop archive</span><br><span class="line">  classpath            prints the class path needed to get the</span><br><span class="line">                       Hadoop jar and the required libraries</span><br><span class="line">  credential           interact with credential providers</span><br><span class="line">  daemonlog            get/<span class="built_in">set</span> the <span class="built_in">log</span> level <span class="keyword">for</span> each daemon</span><br><span class="line">  trace                view and modify Hadoop tracing settings</span><br><span class="line"></span><br><span class="line">Most commands <span class="built_in">print</span> <span class="built_in">help</span> when invoked w/o parameters.</span><br></pre></td></tr></table></figure><p>ì´ì²˜ëŸ¼ ë§¤ ë²ˆ docker exec ëª…ë ¹ì–´ë¥¼ ì‘ì„±í•˜ëŠ” ê±´ ì •ë§ ê·€ì°®ì„ ê²ƒì´ë‹¤. aliasë¥¼ ë“±ë¡í•´ ê°„í¸í•˜ê²Œ ëª…ë ¹ì–´ë¥¼ ë‚ ë ¤ë³´ì.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ vi ~/.bash_profile </span><br><span class="line"><span class="comment"># bash_profile</span></span><br><span class="line"><span class="built_in">alias</span> hadoop=<span class="string">&quot;docker exec namenode /opt/hadoop/bin/hadoop&quot;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[kuber@node2 hadoop]$ <span class="built_in">source</span> ~/.bash_profile </span><br><span class="line">[kuber@node2 hadoop]$ hadoop</span><br><span class="line">Usage: hadoop [--config confdir] [COMMAND | CLASSNAME]</span><br><span class="line">  CLASSNAME            run the class named CLASSNAME</span><br><span class="line"> or</span><br><span class="line">  <span class="built_in">where</span> COMMAND is one of:</span><br><span class="line">  fs                   run a generic filesystem user client</span><br><span class="line">  version              <span class="built_in">print</span> the version</span><br><span class="line">  jar &lt;jar&gt;            run a jar file</span><br><span class="line">                       note: please use <span class="string">&quot;yarn jar&quot;</span> to launch</span><br><span class="line">                             YARN applications, not this <span class="built_in">command</span>.</span><br><span class="line">  checknative [-a|-h]  check native hadoop and compression libraries availability</span><br><span class="line">  distcp &lt;srcurl&gt; &lt;desturl&gt; copy file or directories recursively</span><br><span class="line">  archive -archiveName NAME -p &lt;parent path&gt; &lt;src&gt;* &lt;dest&gt; create a hadoop archive</span><br><span class="line">  classpath            prints the class path needed to get the</span><br><span class="line">                       Hadoop jar and the required libraries</span><br><span class="line">  credential           interact with credential providers</span><br><span class="line">  daemonlog            get/<span class="built_in">set</span> the <span class="built_in">log</span> level <span class="keyword">for</span> each daemon</span><br><span class="line">  trace                view and modify Hadoop tracing settings</span><br><span class="line"></span><br><span class="line">Most commands <span class="built_in">print</span> <span class="built_in">help</span> when invoked w/o parameters.</span><br></pre></td></tr></table></figure><h2 id="í´ë”-ìƒì„±-ì¡°íšŒ-ì‚­ì œ-í™•ì¸"><a href="#í´ë”-ìƒì„±-ì¡°íšŒ-ì‚­ì œ-í™•ì¸" class="headerlink" title="í´ë” ìƒì„±/ì¡°íšŒ/ì‚­ì œ í™•ì¸"></a>í´ë” ìƒì„±/ì¡°íšŒ/ì‚­ì œ í™•ì¸</h2><p>hadoop ëª…ë ¹ì–´ë¥¼ í†µí•´ í´ë”ë¥¼ ìƒì„±í•˜ê³  ì¡°íšŒí•˜ë©° ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚­ì œí•˜ëŠ” ì‘ì—…ì„ í•´ë³¸ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 hadoop]$ hadoop fs -mkdir -p /tmp/<span class="built_in">test</span>/app</span><br><span class="line">[kuber@node2 hadoop]$ hadoop fs -ls -R /tmp</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2019-10-25 05:15 /tmp/<span class="built_in">test</span></span><br><span class="line">drwxr-xr-x   - root supergroup          0 2019-10-25 05:15 /tmp/<span class="built_in">test</span>/app</span><br><span class="line">[kuber@node2 hadoop]$ hadoop fs -rm -r /tmp/<span class="built_in">test</span>/app</span><br><span class="line">Deleted /tmp/<span class="built_in">test</span>/app</span><br><span class="line">[kuber@node2 hadoop]$ hadoop fs -ls -R /tmp</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2019-10-25 05:16 /tmp/<span class="built_in">test</span></span><br></pre></td></tr></table></figure><h2 id="Web-UI"><a href="#Web-UI" class="headerlink" title="Web UI"></a>Web UI</h2><p>NameNodeì™€ DataNode ìƒíƒœë¥¼ Webì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. container ì‹¤í–‰ì„ ìœ„í•´ ì‘ì„±í•œ <code>docker-compose.yml</code> ì•ˆì— NameNodeì˜ port<em>(50070)</em>ë¥¼ ì´ìš©í•´ ì ‘ì†ì„ í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ í™”ë©´ì´ ë³´ì¼ ê²ƒì´ë‹¤.</p><ul><li><p><code>NameNode</code> overview</p><p><img src="/image/namenode-web.png" alt=""></p></li><li><p><code>DataNode</code> overview</p><p><img src="/image/datanode-web.png" alt=""></p></li></ul><h1 id="Ref"><a href="#Ref" class="headerlink" title="Ref."></a>Ref.</h1><ol><li><a href="https://blog.geunho.dev/posts/hadoop-docker-test-env-hdfs/">ê¹€ê·¼í˜¸ë‹˜ ë¸”ë¡œê·¸ : Dockerë¡œ Hadoop í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•í•˜ê¸° - HDFS</a></li><li><a href="https://docs.docker.com/compose/install/">Docker documenst</a></li></ol><hr><p>made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-install_hadoop_using_docker/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Database] OLAP</title>
      <link>https://jx2lee.github.io/hackerrank-olap/</link>
      <guid>https://jx2lee.github.io/hackerrank-olap/</guid>
      <pubDate>Tue, 22 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;hackerrankì—ì„œ ì œê³µí•˜ëŠ” Database ì¹´í…Œê³ ë¦¬ì˜ OLAP ë¬¸ì œë¥¼ í’€ì–´ë³´ê³  ê°œë…ì„ ì •ë¦¬í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>hackerrankì—ì„œ ì œê³µí•˜ëŠ” Database ì¹´í…Œê³ ë¦¬ì˜ OLAP ë¬¸ì œë¥¼ í’€ì–´ë³´ê³  ê°œë…ì„ ì •ë¦¬í•œë‹¤.</p><a id="more"></a><h1 id="OLAP-The-Total-view"><a href="#OLAP-The-Total-view" class="headerlink" title="OLAP - The Total view"></a>OLAP - The Total view</h1><h2 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h2><p>Which of these provides a total view of the organization?</p><p>1) OLAP<br>2) OLTP<br><strong>3) Data Warehousing</strong><br>4) Database</p><h2 id="í’€ì´"><a href="#í’€ì´" class="headerlink" title="í’€ì´"></a>í’€ì´</h2><p>ì™œ í‹€ë ¸ëŠ”ì§€ë¥¼ ëª¨ë¥´ê² ëŠ” ë¬¸ì œì´ë‹¤. <code>1ë²ˆ, 2ë²ˆ, 4ë²ˆ</code>ì´ ê²°êµ­ <code>3ë²ˆ : Data Warehousing</code>ì— í¬í•¨ëœ ë‚´ìš©ì´ë‹¤. ê°ê°ì˜ ê°œë…ì„ ê°„ë‹¨íˆ ì •ë¦¬í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤. <em>(4ë²ˆì˜ ê²½ìš° <code>PASS</code>)</em></p><blockquote><p><strong>OLAP</strong><br>ë°ì´í„° ì§‘ê³„ë¥¼ íš¨ìœ¨í™”í•˜ëŠ” ì ‘ê·¼ ë°©ë²• ì¤‘ í•˜ë‚˜ë¡œ, <code>ë‹¤ì°¨ì› ëª¨ë¸</code>êµ¬ì¡°ë¥¼ <code>MDX (Multidimensional expressions)</code> ë“±ì˜ ì¿¼ë¦¬ ì–¸ì–´ë¡œ ì§‘ê³„í•œë‹¤. ë‹¤ì°¨ì› ëª¨ë¸ êµ¬ì¡°ë¥¼ <em>OLAP íë¸Œ</em>ë¼ í•˜ë©° ì´ëŸ¬í•œ íë¸Œë¥¼ ì´ìš©í•´ í¬ë¡œìŠ¤ ì§‘ê³„í•˜ëŠ” êµ¬ì¡°ê°€ <strong>OLAP</strong>ì´ë‹¤.</p><p><strong>OLTP (Online Transaction Processing)</strong><br>ì •ì˜ëŠ” <code>ì‹¤ì‹œê°„ìœ¼ë¡œ ì„œë²„(DB)ê°€ ìë£Œë¥¼ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •</code> ì¸ë°, ì‚¬ì‹¤ OLAP vs OLTPë¥¼ ë¹„êµí•˜ëŠ” ê²ƒì„ ì£¼ë¡œ ë³´ì•˜ëŠ”ë° ì •í™•í•œ ì˜ë¯¸ë¥¼ ëª¨ë¥´ê² ë‹¤. OLAPì€ í•˜ë‚˜ì˜ ê¸°ìˆ ë¡œ ë³´ëŠ”ê²ƒì¸ì§€, OLTPëŠ” <code>ê¸°ìˆ ì´ ì•„ë‹Œ ì‹¤ì‹œê°„ì„± ì²˜ë¦¬ ê³¼ì •</code>ìœ¼ë¡œ ë´ì•¼í•˜ëŠ”ì§€ëŠ” ì¢€ ë” ì‚´í´ë³¸ ì´í›„ì— ìì„¸íˆ ì •ë¦¬í•´ì•¼ê² ë‹¤.</p><p> <strong>Data Warehousing</strong><br> Data Warehouseë¥¼ ì„¤ê³„í•˜ê³  ì‚¬ìš©í•˜ëŠ” ê³¼ì •ì„ ëœ»í•˜ëŠ” ë‹¨ì–´ì´ë‹¤. <code>Data Warehouse</code> íŠ¹ì§•ì„ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>Web Server ë˜ëŠ” RDBì™€ ë‹¬ë¦¬ <code>ëŒ€ëŸ‰ ë°ì´í„° ì¥ê¸° ë³´ì¡´</code> ìµœì í™”</li><li>ì •ë¦¬ëœ ë°ì´í„° ì „ì†¡ ê¸°ëŠ¥ì€ ë›°ì–´ë‚˜ì§€ë§Œ, ì†ŒëŸ‰ ë°ì´í„°ì˜ ê²½ìš° ì í•©í•˜ì§€ ì•ŠìŒ</li><li>ì—…ë¬´ ì²˜ë¦¬ì— ìˆì–´ í•¨ë¶€ë¡œ ì‚¬ìš©í•´ ì‹œìŠ¤í…œ ê³¼ë¶€í•˜ ì´ˆë˜ëŠ” ìœ„í—˜í•¨, ì´ëŸ¬í•œ ë¬¸ì œë¡œ í•„ìš”í•œ ë°ì´í„°ë§Œì„ ì¶”ì¶œí•˜ì—¬ <code>ë°ì´í„° ë§ˆíŠ¸ (Data Mart)</code>ë¥¼ êµ¬ì„±í•¨</li></ul></blockquote><p>[ì°¸ê³ ] : ë¹…ë°ì´í„°ë¥¼ ì§€íƒ±í•˜ëŠ” ê¸°ìˆ , Wikipedia</p><h1 id="OLAP-OLAP-Operation-Types"><a href="#OLAP-OLAP-Operation-Types" class="headerlink" title="OLAP - OLAP Operation Types"></a>OLAP - OLAP Operation Types</h1><h2 id="ë¬¸ì œ-1"><a href="#ë¬¸ì œ-1" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h2><p>Consider a fact table DataPoints(D1,D2,D3,x), and the following three queries:</p><p>Q1: Select D1,D2,D3,Sum(x) From DataPoints Group By D1,D2,D3<br>Q2: Select D1,D2,D3,Sum(x) From DataPoints Group By D1,D2,D3 WITH CUBE<br>Q3: Select D1,D2,D3,Sum(x) From DataPoints Group By D1,D2,D3 WITH ROLLUP</p><p>Suppose attributes D1, D2, and D3 have n1, n2, and n3 different values respectively, and assume that each possible combination of values appears at least once in the table DataPoints. The number of tuples in the result of each of the three queries above can be specified as an arithmetic formula involving n1, n2, and n3. Pick the one tuple (a,b,c,d,e,f) in the list below such that when n1=a, n2=b, and n3=c, then the result sizes of queries Q1, Q2, and Q3 are d, e, and f respectively.</p><p>1) (2, 2, 2, 6, 18, 8)<br>2) (2, 2, 2, 8, 64, 15)<br>3) (5, 10, 10, 500, 1000, 550)<br><strong>4) (4, 7, 3, 84, 160, 117)</strong></p><h2 id="í’€ì´-1"><a href="#í’€ì´-1" class="headerlink" title="í’€ì´"></a>í’€ì´</h2><p>ë¬¸ì œë¥¼ ì˜ëª» ì´í•´í•´ í‘¸ëŠ”ë° ì˜¤ë˜ ê±¸ë ¸ë‹¤. ì£¼ì–´ì§„ ë³´ê¸° 4ê°œ tupleì˜ ì•ì— 3ê°œëŠ” ê°ê° D1, D2, D3ì¹¼ëŸ¼ì˜ value ë“¤ì´ì—ˆë‹¤. ë”°ë¼ì„œ, ê° ì§€ë¬¸ì˜ 3ê°œ ìˆ«ì <em>(ex. 1ë²ˆ ë³´ê¸°ëŠ” 2,2,2 -&gt; D1, D2, D3)</em> ë¡œ operation <code>CUBE</code> ë° <code>ROLL UP</code> ì„ ìˆ˜í–‰í•œ í›„ ì¡°íšŒë˜ëŠ” í–‰ì˜ ê°¯ìˆ˜ë¥¼ ë§ì¶”ëŠ” ë¬¸ì œì´ë‹¤. <strong>Q1</strong>ì€ ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆì—ˆê³  <code>CUBE</code> ë° <code>ROLLUP</code> ì—°ì‚°ì„ êµ¬ê¸€ì„ í†µí•´ ì‚´í´ë³´ì•˜ë‹¤.</p><p>ìš°ì„  <code>CUBE</code> operationì€  ëª¨ë“  ì°¨ì›ì—ì„œ ëª¨ë“  ì†ì„± ì¡°í•©ì„ ì‚¬ìš©í•œë‹¤. ì´ëŠ” ê³§, <code>NULL</code> êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— group byë¡œ ì¡°íšŒìˆ˜ì™€ëŠ” ë‹¤ë¥´ê²Œ ì•„ë˜ì™€ ê°™ì´ ê³„ì‚°ëœë‹¤.</p><p><code>(n1 + 1) * (n2 + 1) * (n3 + 1)</code></p><p>ë§ˆì§€ë§‰ìœ¼ë¡œ <code>ROLLUP</code> operationì€ <code>NULL</code>ì´ ìˆëŠ” ì†ì„±ì„ í¬í•¨í•˜ì—¬ ì†ì„± tupleì„ ìƒì„±í•œë‹¤. ì´ì— ê¸°ì¡´ <code>CUBE</code> ì—°ì‚°ì„ í†µí•´ ë‚˜ì˜¨ ìˆ˜ì™€ <code>ROLLUP</code>ì—°ì‚°ì„ í†µí•´ ê³„ì‚°ë˜ëŠ” tuple ìˆ˜ë¥¼ ë”í•´ì¤€ë‹¤. ì‹ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p><p><code>[ê¸°ì¡´ CUBEë¡œ ê³„ì‚°ëœ ìˆ˜] + n1 * (n2 + 1) + 1</code></p><blockquote><p>ROLLUP ì´ë¼ í•¨ì€ Drill Down (operation ì¤‘ í•˜ë‚˜)ê³¼ ë‹¬ë¦¬ ì‘ì€ ë²”ìœ„ì—ì„œ í° ë²”ìœ„ì˜ ë‹¨ê³„ì  ì ‘ê·¼ ë¶„ì„ ë°©ë²•ì„ ë§í•œë‹¤ <em>(ex. ë²ˆì§€ -&gt; ë™ -&gt; êµ¬ -&gt; ì‹œë„ -&gt; ê´‘ì—­)</em>. ìœ„ì— ê¸°ì¡´ CUBE ì—°ì‚°ì„ í†µí•œ ê°’ê³¼ ê·¸ ë’¤ì— ìƒˆë¡œìš´ ì¶”ê°€ëœ ìˆ˜ë¥¼ ë”í•˜ëŠ” ë‚´ìš©ì´ í™•ì‹¤íˆ ì´í•´ê°€ ê°€ì§€ ì•Šì•„ ë‚˜ì¤‘ì— ì •ë¦¬í•´ì•¼í•  ê²ƒ ê°™ë‹¤.</p></blockquote><hr><p>2019.10.23 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-olap/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Hadoop] Hadoop Overview</title>
      <link>https://jx2lee.github.io/hadoop-introduction_to_hadoop/</link>
      <guid>https://jx2lee.github.io/hadoop-introduction_to_hadoop/</guid>
      <pubDate>Mon, 21 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;strong&gt;Hadoop&lt;/strong&gt; ê´€ë ¨ ì±…ì„ ì½ìœ¼ë©° ê°œë…ì„ ê°„ë‹¨íˆ ì •ë¦¬í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><strong>Hadoop</strong> ê´€ë ¨ ì±…ì„ ì½ìœ¼ë©° ê°œë…ì„ ê°„ë‹¨íˆ ì •ë¦¬í•œë‹¤.</p><a id="more"></a><p>ë§¨ë‚  í•˜ë‘¡ ê³µë¶€í•´ì•¼ì§€.. ê³µë¶€í•´ì•¼ì§€ í•˜ë‹¤ê°€ <a href="http://www.yes24.com/Product/goods/66277191"><em>ë¹…ë°ì´í„°ë¥¼ ì§€íƒ±í•˜ëŠ” ê¸°ìˆ </em></a> ì±…ì„ ì½ìœ¼ë©° ì •ë¦¬í•˜ê³ ì í•œë‹¤. ë¬´ì‘ì • ì‹¤ìŠµë¶€í„° í•˜ê¸° ë³´ë‹¤ëŠ”, ê¸°ë³¸ì ì¸ ê°œë…ì„ ìµíˆê³  <strong>Hadoop</strong> í™˜ê²½ì„ êµ¬ì„±í•  ê²ƒì´ë‹¤.</p><blockquote><p><em>ìš°ì„  ë‚´ìš© ì „ì²´ì ìœ¼ë¡œ ë„ì„œë¥¼ ì°¸ê³ í•´ ì‘ì„±í•˜ê³  ì¶”ê°€ì ì¸ ë¶€ë¶„ì€ êµ¬ê¸€ ì„œì¹˜ë¥¼ í†µí•´ ì±„ì›Œë„£ì„ ì˜ˆì •ì´ë‹¤.  ìµœëŒ€í•œ ì±…ì„ ê¸°ë°˜ìœ¼ë¡œ ê°œë…ì„ ì •ë¦¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.</em></p></blockquote><p><strong>Contents</strong>:  </p><ul><li><a href="#introductions">Hadoop ì´ë€</a></li><li><a href="#components">Hadoop ê¸°ë³¸ êµ¬ì„± ìš”ì†Œ</a><ul><li><a href="#hdfsyarn">ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œ (HDFS) ê³¼ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ì (YARN)</a></li><li><a href="#mrhive">ë¶„ì‚° ë°ì´í„° ì²˜ë¦¬ (MapReduce) ë° ì¿¼ë¦¬ ì—”ì§„ (Hive)</a></li><li><a href="#hive">Hive on Tez</a></li><li><a href="#queryengine">ëŒ€í™”í˜• ì¿¼ë¦¬ ì—”ì§„ (Impala &amp; Presto)</a></li></ul></li></ul><h1 id="Hadoop-ì´ë€"><a href="#Hadoop-ì´ë€" class="headerlink" title=" Hadoop ì´ë€"></a><a name="introductions"></a> Hadoop ì´ë€</h1><p>ê°œë…ì„ ë°°ìš°ëŠ”ë° ìˆì–´ì„œ ì—­ì‚¬ëŠ” í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤ê³  ìƒê°í•œë‹¤. ì±…ì—ì„œëŠ” ì—­ì‚¬ê°€ ê¸°ìˆ ë˜ì–´ìˆì§€ë§Œ ë‚˜ëŠ” ì •ì˜<u><em>(ìˆ˜í•™ê³¼ ì•„ë‹ˆë„ê¹Œë´)</em></u> ë¶€í„° ì§šì–´ë³´ê³ ì í•œë‹¤. <code>Hadoop</code>ì€ ë‹¨ì¼ ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì•„ë‹Œ, <strong>ë¶„ì‚° ì‹œìŠ¤í…œ</strong> ì„ êµ¬ì„±í•˜ëŠ” ë‹¤ìˆ˜ì˜ ì†Œí”„íŠ¸ì›¨ì–´ë¡œ ì´ë£¨ì–´ì§„ <strong>ì§‘í•©ì²´</strong> ì´ë‹¤. <code>Wiki</code>ë°±ê³¼ì— ì˜í•˜ë©´, <code>ëŒ€ëŸ‰ì˜ ìë£Œë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í° ì»´í“¨í„° í´ëŸ¬ìŠ¤í„°ì—ì„œ ë™ì‘í•˜ëŠ” ë¶„ì‚° ì‘ìš© í”„ë¡œê·¸ë¨ì„ ì§€ì›í•˜ëŠ” í”„ë ˆì„ì›Œí¬</code>ë¼ê³  ì†Œê°œí•œë‹¤. ì¼ë§¥ ìƒí†µí•œë‹¤.</p><blockquote><p><em>ì¢€ ë” ìì„¸íˆ ì–´ë– í•œ ì–¸ì–´ë¡œ ì‘ì„±ë˜ì—ˆëŠ”ì§€ë¥¼ í‘œí˜„í•˜ì˜€ì§€, ì˜ë¯¸ëŠ” ê°™ë‹¤</em></p></blockquote><p>2013ë…„ <code>Hadoop2</code>ë¶€í„°  <code>YARN</code>ì´ë¼ëŠ” <code>ë¦¬ì†ŒíŠ¸ê´€ë¦¬ì</code> ìƒì—ì„œ ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ëŠ” êµ¬ì„±ìœ¼ë¡œ ì„¤ê³„ë˜ì–´, <strong>ëŒ€ê·œëª¨ ë¶„ì‚°ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í”Œë«í¼</strong> ì—­í• ì„ ë§¡ê³  ìˆë‹¤.</p><p><img src="/image/hadoop-ecosystem.png" alt="ê·¸ë¦¼ - ë¹…ë°ì´í„° ê´€ë ¨ Apache í”„ë¡œì íŠ¸"></p><p>[ê·¸ë¦¼] - ë¹…ë°ì´í„° ê´€ë ¨ Apache í”„ë¡œì íŠ¸ (ì°¸ê³  : ë¹…ë°ì´í„°ë¥¼ ì§€íƒ±í•˜ëŠ” ê¸°ìˆ )</p><h1 id="Hadoop-ê¸°ë³¸-êµ¬ì„±-ìš”ì†Œ"><a href="#Hadoop-ê¸°ë³¸-êµ¬ì„±-ìš”ì†Œ" class="headerlink" title=" Hadoop ê¸°ë³¸ êµ¬ì„± ìš”ì†Œ"></a><a name="components"></a> Hadoop ê¸°ë³¸ êµ¬ì„± ìš”ì†Œ</h1><p>ê¸°ë³¸ êµ¬ì„± ìš”ì†Œë¡œëŠ” <strong>ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œ</strong> <em>(distributed file system)<em>ì¸ <code>HDFS(Hadoop Distributed File System)</code>, *</em>ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ì** *(resource manager)</em> ì¸ <code>YARN(Yet Another Resource Negotiator)</code>, <strong>ë¶„ì‚° ë°ì´í„° ì²˜ë¦¬</strong> <em>(distributed data processing)</em> ê¸°ë°˜ <code>MapReduce</code> 3ê°€ì§€ë‹¤. ì´ì™¸ êµ¬ì„±ìš”ì†Œ<em>(í”„ë¡œì íŠ¸ë¼ê³  í‘œí˜„í•˜ê¸°ë„ í•¨)</em>ëŠ” Hadoopê³¼ ë…ë¦½ì ìœ¼ë¡œ ê°œë°œë˜ì–´ ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ë™ì‘í•œë‹¤.</p><p>ì¦‰, ìœ„ì—ì„œ ì†Œê°œí•œ í”„ë¡œì íŠ¸ì—ì„œ ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œëŠ” <code>HDFS</code>ë¥¼ ì‚¬ìš©í•˜ê³  resource managerë¡œëŠ” <code>Mesos</code>ë¥¼, ë¶„ì‚° ë°ì´í„° ì²˜ë¦¬ì—ëŠ” <code>Spark</code>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìì‹ ì—ê²Œ ë§ê³  ìƒí™©ì— ë§ëŠ” í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ Hadoopì„ ì¤‘ì‹¬ìœ¼ë¡œ í•˜ëŠ” ë°ì´í„° ì²˜ë¦¬ì˜ íŠ¹ì§•ì´ë‹¤.</p><h2 id="ë¶„ì‚°-íŒŒì¼-ì‹œìŠ¤í…œ-HDFS-ê³¼-ë¦¬ì†ŒìŠ¤-ê´€ë¦¬ì-YARN"><a href="#ë¶„ì‚°-íŒŒì¼-ì‹œìŠ¤í…œ-HDFS-ê³¼-ë¦¬ì†ŒìŠ¤-ê´€ë¦¬ì-YARN" class="headerlink" title=" ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œ (HDFS) ê³¼ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ì (YARN)"></a><a name="hdfsyarn"></a> ë¶„ì‚° íŒŒì¼ ì‹œìŠ¤í…œ (HDFS) ê³¼ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ì (YARN)</h2><p>Hadoopì—ì„œ ì²˜ë¦¬ë˜ëŠ” ë°ì´í„°ëŠ” ëŒ€ë¶€ë¶„ <code>HDFS</code>ì— ì €ì¥ëœë‹¤. ë³´í†µ íŒŒì¼ ì„œë²„ì™€ ë¹„ìŠ·í•œ ê°œë…ì´ì§€ë§Œ, <code>ë‹¤ìˆ˜ ì»´í“¨í„°ì— íŒŒì¼ì„ ë³µì‚¬í•˜ì—¬ ì¤‘ë³µì„±ì„ ë†’ì¸ë‹¤</code>ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.</p><blockquote><p>HDFSëŠ” <strong>ë¸”ë¡ êµ¬ì¡°ì˜ file system</strong>ì´ë‹¤. íŒŒì¼ì„ íŠ¹ì • í¬ê¸° ë¸”ë¡ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë¶„ì‚°ëœ ì„œë²„ì— ì €ì¥í•œë‹¤. í¬ê¸°ëŠ” 64MB ì—ì„œ Hadoop2 ë¶€í„°ëŠ” 128Më¡œ ì¦ê°€í•˜ì˜€ë‹¤(<a href="https://yookeun.github.io/java/2015/05/24/hadoop-hdfs/">ì°¸ê³ </a>)</p></blockquote><p>í•œí¸, CPUë‚˜ ë©”ëª¨ë¦¬ ë“±ì˜ ê³„ì‚° ë¦¬ì†ŒìŠ¤ëŠ” resource managerì¸ <code>YARN</code>ì— ì˜í•´ ê´€ë¦¬ëœë‹¤. <code>YARN</code>ì€ CPU ì½”ì–´ì™€ ë©”ëª¨ë¦¬ë¥¼ <strong>ì»¨í…Œì´ë„ˆ (Container)</strong> ë‹¨ìœ„ë¡œ ê´€ë¦¬í•œë‹¤ <em>(ì—¬ê¸°ì„œ ContainerëŠ” Docker Containerì™€ëŠ” ë‹¤ë¥´ë‹¤. ì–´ë–¤ í˜¸ìŠ¤íŠ¸ì—ì„œ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰ì‹œí‚¬ ê²ƒì¸ì§€ ê²°ì •í•˜ëŠ” ì•± ìˆ˜ì¤€ì˜ ê¸°ìˆ )</em>. Hadoopì—ì„œ  ë¶„ì‚° ì•±ì„ ì‹¤í–‰í•˜ë©´ <code>YARN</code>ì´ í´ëŸ¬ìŠ¤í„° ì „ì²´ì˜ ë¶€í•˜ë¥¼ ë³´ê³  ë¹„ì–´ ìˆëŠ” í˜¸ìŠ¤íŠ¸ë¶€í„° ì»¨í…Œì´ë„ˆë¥¼ í• ë‹¹í•œë‹¤.</p><blockquote><p>ì¦‰, ë¦¬ì†ŒìŠ¤ ê´€ë¦¬ìì¸ <code>YARN</code>ì€ ì–´ëŠ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì–¼ë§ˆë§Œí¼ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ í• ë‹¹í•  ì§€ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ ëª¨ë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì´ <strong>ì°¨ì§ˆì—†ì´ ì‹¤í–‰ë˜ë„ë¡ ì œì–´</strong> í•œë‹¤</p></blockquote><h2 id="ë¶„ì‚°-ë°ì´í„°-ì²˜ë¦¬-MapReduce-ë°-ì¿¼ë¦¬-ì—”ì§„-Hive"><a href="#ë¶„ì‚°-ë°ì´í„°-ì²˜ë¦¬-MapReduce-ë°-ì¿¼ë¦¬-ì—”ì§„-Hive" class="headerlink" title=" ë¶„ì‚° ë°ì´í„° ì²˜ë¦¬ (MapReduce) ë° ì¿¼ë¦¬ ì—”ì§„ (Hive)"></a><a name="mrhive"></a> ë¶„ì‚° ë°ì´í„° ì²˜ë¦¬ (MapReduce) ë° ì¿¼ë¦¬ ì—”ì§„ (Hive)</h2><ul><li><code>MapReduce</code><br>YARN ìƒì—ì„œ ë™ì‘í•˜ëŠ” ë¶„ì‚° ì• í”Œë¦¬ì¼€ì´ì…˜ ì¤‘ í•˜ë‚˜ë¡œ ë°ì´í„° ì²˜ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ì‚¬ìš©í•œë‹¤. ì„ì˜ì˜ java í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— <em>ë¹„êµ¬ì¡°í™” ë°ì´í„° (Unstructured Data)</em> ê°€ê³µì— ì í•©í•˜ë‹¤. ì´ˆê¸° ëª©ì ì€ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ <em>Batch*ì²˜ë¦¬í•˜ê¸° ìœ„í•¨ì´ì—ˆë‹¤. í•œ ë²ˆ ì‹¤í–‰í•˜ë©´ ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ìˆì§€ë§Œ, ì‘ì€ í”„ë¡œê·¸ë¨ì„ *(ì‘ì€ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ”)</em> ì„ ì‹¤í–‰í•˜ë©´ ê³¼í•œ ì˜¤ë²„í—¤ë“œë¡œ ëª‡ ì´ˆ ì•ˆì— ëë‚˜ë²„ë¦¬ëŠ” ì¿¼ë¦¬ì—ëŠ” ì–´ìš¸ë¦¬ì§€ ì•Šë‹¤.</li></ul><p><img src="https://d2h0cx97tjks2p.cloudfront.net/blogs/wp-content/uploads/sites/2/2017/04/apache-hadoop-outputformat-introduction-1024x536-1-1.jpg" alt="MapReduce Process"><br>[ê·¸ë¦¼] - MapReduce Process</p><ul><li><code>ì¿¼ë¦¬ ì—”ì§„ (Hive)</code><br>HiveëŠ” SQL ë“± ì¿¼ë¦¬ ì–¸ì–´ì— ì˜í•œ ë°ì´í„° ì§‘ê³„ê°€ ëª©ì ìœ¼ë¡œ ì„¤ê³„ëœ ì¿¼ë¦¬ ì—”ì§„ ì¤‘ í•˜ë‚˜ì´ë‹¤. ì´ëŠ” SQL ì¿¼ë¦¬ë¥¼ ìë™ìœ¼ë¡œ MapReduce í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë³€í™˜ì‹œí‚¨ë‹¤. ì‹¤í–‰ íŠ¹ì„± ìƒ MapReduceì— ì˜ì¡´í•˜ê³  ìˆë‹¤. </li></ul><blockquote><p>ì¿¼ë¦¬ ì—”ì§„ Hiveë„ ê²°êµ­ MapReduceì— ì˜ì¡´í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” <strong>ë°°ì¹˜ ì²˜ë¦¬ì—ëŠ” ì í•©</strong>í•˜ë‚˜, <strong>ì• ë“œ í›… ë¶„ì„ì„ ìœ„í•œ ì¿¼ë¦¬<em>(ê°„ë‹¨í•˜ê³  ë°”ë¡œë°”ë¡œ ë³¼ ìˆ˜ ìˆëŠ”)</em>ë¥¼ ì—¬ëŸ¬ ë²ˆ ìˆ˜í–‰í•˜ëŠ” ë° ì ì ˆí•˜ì§€ ì•Šë‹¤</strong></p></blockquote><center><img src="https://miro.medium.com/max/560/1*ncMKJ3Mdg-QKJQ21zavJeQ.png"></center><p>[ê·¸ë¦¼] - Hive Architecture (<a href="https://medium.com/@yigiterbas/apache-hive-and-applications-1-31735b8823c7">https://medium.com/@yigiterbas/apache-hive-and-applications-1-31735b8823c7</a>)</p><h2 id="Hive-on-Tez"><a href="#Hive-on-Tez" class="headerlink" title=" Hive on Tez"></a><a name="hive"></a> Hive on Tez</h2><p>Hive ê°€ì†í™”ë¥¼ ìœ„í•´ ê°œë°œëœ ê²ƒìœ¼ë¡œ MapReduceì—ì„œ ë³´ì¸ ëª‡ ê°€ì§€ ë‹¨ì ì„ í•´ê²°í•˜ê³  ê³ ì†í™”ë¥¼ ì‹¤í˜„í•˜ê³  ìˆë‹¤.</p><blockquote><p>ì˜ˆë¥¼ ë“¤ì–´, MapReduceì˜ ê²½ìš° í•˜ë‚˜ì˜ stageê°€ ëë‚  ë•Œ ê¹Œì§€ ë‹¤ìŒì˜ ì²˜ë¦¬ë¥¼ ì§„í–‰í•  ìˆ˜ ì—†ì—ˆë‹¤. ì´ì— <code>Tez</code>ëŠ” stage ì¢…ë£Œë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì²˜ë¦¬ê°€ ëë‚œ ë°ì´í„°ë¥¼ ì°¨ë¡€ëŒ€ë¡œ í›„ì† ì²˜ë¦¬ë¡œ ë„˜ê²¨ ì „ì²´ ì¿¼ë¦¬ ì‹œê°„ì˜ ë‹¨ì¶•ì„ ì‹¤í˜„í–ˆë‹¤.</p></blockquote><p>í˜„ì¬ì˜ HiveëŠ” MapReduce ë¿ ì•„ë‹ˆë¼ Tezë¥¼ ì‚¬ìš©í•´ë„ ë™ì‘í•˜ë¯€ë¡œ Hiveë¥¼ <code>Hive on Tez</code> ì™€ <code>Hive on MR</code>ë¡œ êµ¬ë¶„í•œë‹¤. <em>(MRì€ MapReduce ì¤„ì„ë§)</em></p><p><img src="https://t1.daumcdn.net/cfile/tistory/2616EF345874E63A0C" alt="Hive on MR &amp; Hive on Tez Process"><br>[ê·¸ë¦¼] - Hive on MR &amp; Hive on Tez Process</p><h2 id="ëŒ€í™”í˜•-ì¿¼ë¦¬-ì—”ì§„-Impala-amp-Presto"><a href="#ëŒ€í™”í˜•-ì¿¼ë¦¬-ì—”ì§„-Impala-amp-Presto" class="headerlink" title=" ëŒ€í™”í˜• ì¿¼ë¦¬ ì—”ì§„ (Impala &amp; Presto)"></a><a name="queryengine"></a> ëŒ€í™”í˜• ì¿¼ë¦¬ ì—”ì§„ (Impala &amp; Presto)</h2><p>Hive ê³ ì†í™”ê°€ ì•„ë‹Œ ëŒ€í™”í˜• ì¿¼ë¦¬ ì‹¤í–‰ë§Œì„ ìœ„í•œ ì—”ì§„ë„ ìˆë‹¤. ê·¸ ì¤‘ <code>Impala</code>ì™€ <code>Presto</code>ê°€ ëŒ€í‘œì ì´ë‹¤. <code>Imapala</code>ì™€ <code>Presto</code>ë¥¼ ê°„ë‹¨íˆ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><p><strong>Impala</strong></p><p>ImpalaëŠ” í¬ê²Œ <code>impalad</code>ì™€ <code>impala state store</code> í”„ë¡œì„¸ìŠ¤ë¡œ êµ¬ì„±í•œë‹¤.</p><ul><li><code>impalad</code>ëŠ” ë¶„ì‚° ì§ˆì˜ ì—”ì§„ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¡œ, Hadoop í´ëŸ¬ìŠ¤í„° ë‚´ ë°ì´í„°ë…¸ë“œ ìœ„ì—ì„œ ì§ˆì˜ì— ëŒ€í•œ plan ì„¤ê³„ì™€ ì§ˆì˜ ì²˜ë¦¬ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.</li><li><code>impala state store</code> ëŠ” ê° ë°ì´í„° ë…¸ë“œì—ì„œ ìˆ˜í–‰ë˜ëŠ” <code>impalad</code>ì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤. <code>impalad</code> í”„ë¡œì„¸ìŠ¤ê°€ í´ëŸ¬ìŠ¤í„° ë‚´ì— ì¶”ê°€ ë˜ëŠ” ì œê±°ë  ë•Œ <code>impala state store</code> í”„ë¡œì„¸ìŠ¤ë¥¼ í†µí•´ ë©”íƒ€ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ëœë‹¤.</li></ul><blockquote><p><code>impalad</code> : ë¶„ì‚° ì§ˆì˜ ì—”ì§„, <code>impala state store</code> : Impaladì˜ ë©”íƒ€ë°ì´í„° ê´€ë¦¬</p></blockquote></li></ul><p><img src="https://d2.naver.com/content/images/2015/06/helloworld-246342-1.png" alt=""></p><p>[ê·¸ë¦¼] - impala high-level architecture (<a href="http://blog.cloudera.com/blog/2012/10/cloudera-impala-real-time-queries-in-apache-hadoop-for-real/">ì›ë³¸ì¶œì²˜</a>)</p><ul><li><p><strong>Presto</strong></p><p>PrestoëŠ” í¬ê²Œ <code>Coordinator</code>ì™€ <code>Worker</code>ë¡œ êµ¬ì„±ëœë‹¤.</p><ul><li><code>Coordinator</code>ëŠ” SQL query ë¶„ì„, query ê³„íšê³¼ Presto Worker ë…¸ë“œ (worker)ë¥¼ ê´€ë¦¬í•œë‹¤. REST APIë¥¼ ì‚¬ìš©í•˜ì—¬ Worker ë° Clientì™€ í†µì‹ í•œë‹¤.</li><li><code>Worker</code>ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•˜ê³  ë°ì´í„°ë¥¼ ì²˜ë¦¬í•œë‹¤. Workerê°€ ìˆ˜í–‰í•œ ê²°ê³¼ë¥¼ Coordinatorë¥¼ ê±°ì³ Clientì—ê²Œ ì „ë‹¬í•˜ë©° Coordinatorì™€ ë§ˆì°¬ê°€ì§€ë¡œ REST APIë¥¼ ì‚¬ìš©í•´ í†µì‹ í•œë‹¤.</li></ul></li></ul><p><img src="http://labs.gree.jp/blog/wp-content/uploads/2014/12/presto_arch-600x372.png" alt=""></p><p>[ê·¸ë¦¼] - Presto architecture (<a href="http://labs.gree.jp/blog/2014/12/12838/">ì¶œì²˜</a>)</p><p>ì´ëŸ¬í•œ ëŒ€í™”í˜• ì¿¼ë¦¬ ì—”ì§„ì€ Hive ì™€ëŠ” ë‹¬ë¦¬ ìˆœê°„ ìµœëŒ€ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ ëª¨ë“  ì˜¤ë²„í—¤ë“œë¥¼ ì œê±°í•˜ì—¬, ë¦¬ì†ŒìŠ¤ë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤ <em>(ì´ëŠ” Hiveì˜ ë‹¨ì ìœ¼ë¡œ ì–¸ê¸‰í•œ ë¶€ë¶„ì„ í•´ê²°í•œë‹¤)</em> . ê·¸ ê²°ê³¼, ëŒ€í™”í˜• ì¿¼ë¦¬ ì—”ì§„ì€ MPP DBì™€ ë¹„êµí•´ë„ ì†ìƒ‰ì—†ëŠ” ì‘ë‹µ ì‹œê°„ì„ ì–»ì„ ìˆ˜ ìˆë‹¤. </p><blockquote><p>Hadoopì—ì„œëŠ” ì¿¼ë¦¬ ì—”ì§„ì„ ëª©ì ì— ë”°ë¼ êµ¬ë¶„í•œë‹¤. ëŒ€ëŸ‰ì˜ ë¹„êµ¬ì¡°í™” ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” ë¬´ê±°ìš´ ë°°ì¹˜ ì²˜ë¦¬ì—ëŠ” ë†’ì€ ì²˜ë¦¬ëŸ‰ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” <code>Hive</code>ë¥¼, êµ¬ì¡°í™” ë° ì™„ì„±ëœ ë°ì´í„°ë¥¼ ëŒ€í™”ì‹ìœ¼ë¡œ ì§‘ê³„ë¥¼ ì›í•  ë• ì§€ì—°ì´ ì ì€ <code>Impala</code>ì™€ <code>Presto</code>ê°€ ì í•©í•˜ë‹¤.</p></blockquote><hr><p>2019.10.22 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hadoop-introduction_to_hadoop/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë“±êµ£ê¸¸</title>
      <link>https://jx2lee.github.io/programmers-tortoise/</link>
      <guid>https://jx2lee.github.io/programmers-tortoise/</guid>
      <pubDate>Thu, 17 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë“±êµí•˜ëŠ”ë° ê°€ëŠ¥í•œ ë£¨íŠ¸ì˜ ìµœì†Ÿê°’ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë“±êµí•˜ëŠ”ë° ê°€ëŠ¥í•œ ë£¨íŠ¸ì˜ ìµœì†Ÿê°’ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h1><h2 id="ë¬¸ì œ-ì„¤ëª…-1"><a href="#ë¬¸ì œ-ì„¤ëª…-1" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h2><p>ê³„ì†ë˜ëŠ” í­ìš°ë¡œ ì¼ë¶€ ì§€ì—­ì´ ë¬¼ì— ì ê²¼ìŠµë‹ˆë‹¤. ë¬¼ì— ì ê¸°ì§€ ì•Šì€ ì§€ì—­ì„ í†µí•´ í•™êµë¥¼ ê°€ë ¤ê³  í•©ë‹ˆë‹¤. ì§‘ì—ì„œ í•™êµê¹Œì§€ ê°€ëŠ” ê¸¸ì€ m x n í¬ê¸°ì˜ ê²©ìëª¨ì–‘ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ì•„ë˜ ê·¸ë¦¼ì€ m = 4, n = 3 ì¸ ê²½ìš°ì…ë‹ˆë‹¤.</p><p><img src="https://grepp-programmers.s3.amazonaws.com/files/ybm/056f54e618/f167a3bc-e140-4fa8-a8f8-326a99e0f567.png" alt="image0.png"></p><p>ê°€ì¥ ì™¼ìª½ ìœ„, ì¦‰ ì§‘ì´ ìˆëŠ” ê³³ì˜ ì¢Œí‘œëŠ” (1, 1)ë¡œ ë‚˜íƒ€ë‚´ê³  ê°€ì¥ ì˜¤ë¥¸ìª½ ì•„ë˜, ì¦‰ í•™êµê°€ ìˆëŠ” ê³³ì˜ ì¢Œí‘œëŠ” (m, n)ìœ¼ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</p><p>ê²©ìì˜ í¬ê¸° m, nê³¼ ë¬¼ì´ ì ê¸´ ì§€ì—­ì˜ ì¢Œí‘œë¥¼ ë‹´ì€ 2ì°¨ì› ë°°ì—´ puddlesì´ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§‘ë‹ˆë‹¤. ì§‘ì—ì„œ í•™êµê¹Œì§€ ê°ˆ ìˆ˜ ìˆëŠ” ìµœë‹¨ê²½ë¡œì˜ ê°œìˆ˜ë¥¼ 1,000,000,007ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</p><h2 id="ì œí•œì‚¬í•­"><a href="#ì œí•œì‚¬í•­" class="headerlink" title="ì œí•œì‚¬í•­"></a>ì œí•œì‚¬í•­</h2><ul><li>ê²©ìì˜ í¬ê¸° m, nì€ 1 ì´ìƒ 100 ì´í•˜ì¸ ìì—°ìˆ˜ì…ë‹ˆë‹¤.<ul><li>mê³¼ nì´ ëª¨ë‘ 1ì¸ ê²½ìš°ëŠ” ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</li></ul></li><li>ë¬¼ì— ì ê¸´ ì§€ì—­ì€ 0ê°œ ì´ìƒ 10ê°œ ì´í•˜ì…ë‹ˆë‹¤.</li><li>ì§‘ê³¼ í•™êµê°€ ë¬¼ì— ì ê¸´ ê²½ìš°ëŠ” ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</li></ul><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><table><thead><tr><th>m</th><th>n</th><th>puddles</th><th>return</th></tr></thead><tbody><tr><td>4</td><td>3</td><td>[[2, 2]]</td><td>4</td></tr></tbody></table><h2 id="ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…"><a href="#ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…"></a>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</h2><p><img src="https://grepp-programmers.s3.amazonaws.com/files/ybm/32c67958d5/729216f3-f305-4ad1-b3b0-04c2ba0b379a.png" alt="image1.png"></p><h1 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h1><p>Dynamic Programming ë¬¸ì œ. ì˜¤ëœë§Œì— íŒŒì´ì¬ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œë¥¼ í’€ì—ˆë‹¤. ì‰¬ìš´ ë ˆë²¨ì´ë¼ ìƒê°í•´ ë„ì „í•˜ì˜€ì§€ë§Œ ì—­ì‹œë‚˜ êµ¬ê¸€ê²€ìƒ‰í–‰.. ìš°ì„  ì½”ë“œì— ì‚¬ìš©í•œ ë³€ìˆ˜ë“¤ì„ ì‚´í´ë³´ì</p><blockquote><p> <code>grid</code> : ê²©ì <em>(index errorë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ +1 ë§Œí¼ ë” ìƒì„±)</em></p></blockquote><p>ì—¬ê¸°ì„œ ì¡°ì‹¬í•´ì•¼ í•  ê²ƒì€, ë¬¸ì œì—ì„œ ì œê³µí•˜ëŠ” m,nì´ í–‰ê³¼ ì—´ì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆëŠ”ë° ê·¸ ë°˜ëŒ€ì´ë‹¤. ì´ ì ì„ ëª…ì‹¬í•˜ê³  ë¬¸ì œë¥¼ í’€ì–´ì•¼ index errorë¥¼ ë°©ì§€í•˜ê³  ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p><p>ë¬¼ì´ ê³ ì—¬ìˆëŠ” ì¢Œí‘œì—ëŠ” <code>-1</code>ë¡œ ëŒ€ì²´í•œë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> puddles:</span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> puddles:</span><br><span class="line">grid[y][x] = -<span class="number">1</span></span><br></pre></td></tr></table></figure><p>ì´ì œ (a,b) = (a-1, b) + (a, b-1) ì‹ì„ êµ¬í˜„í•˜ëŠ”ë° ìœ„ì— ì–¸ê¸‰í•œ ê²ƒ ì²˜ëŸ¼ í–‰ê³¼ ì—´ì„ ì¡°ì‹¬í•´ì„œ <code>for</code>ë¬¸ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. í–‰ì„ ê¸°ì¤€ìœ¼ë¡œ ì—´ì„ ì±„ì›Œë‚˜ê°€ëŠ” êµ¬ì¡°ë¡œ (1,1) ì¸ ë¶€ë¶„ì€ <code>continue</code>ë¡œ ìˆ˜ì •í•˜ì§€ ì•Šê²Œ ì„¤ì •í•œë‹¤. ë˜í•œ, ë¬¼ì´ ìˆëŠ” ê²½ìš°ëŠ” 0ìœ¼ë¡œ ë°”ê¿” íšŸìˆ˜ê°€ ì»¤ì§€ê¸° ì•Šê²Œ ë°©ì§€í•˜ê³  ë§ˆì§€ë§‰ìœ¼ë¡œ ìœ„ ì‹ì„ ì‘ì„±í•˜ë©´ grid ë³€ìˆ˜ëŠ” ì›í•˜ëŠ” ëŒ€ë¡œ ì±„ì›Œì§ˆ ê²ƒì´ë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m+<span class="number">1</span>):</span><br><span class="line"><span class="keyword">if</span> i == j == <span class="number">1</span>:</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> grid[j][i] == -<span class="number">1</span>:</span><br><span class="line">            grid[j][i] = <span class="number">0</span></span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">grid[j][i] = (grid[j][i-<span class="number">1</span>] + grid[j-<span class="number">1</span>][i])%<span class="number">1000000007</span></span><br></pre></td></tr></table></figure><p>í–‰ê³¼ ì—´ ìˆœì„œê°€ ë°”ê¿” ìˆê¸° ë•Œë¬¸ì— ë§ˆì§€ë§‰ return ê°’ë„ [m][n]ì´ ì•„ë‹Œ [n][m]ìœ¼ë¡œ <code>return</code> í•´ì•¼í•œë‹¤.</p><p><code>return grid[n][m]</code></p><p>full codeëŠ” í•˜ê¸°ì™€ ê°™ë‹¤</p><h1 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">m, n, puddles</span>):</span></span><br><span class="line">    grid = [[<span class="number">0</span>] * (m+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line">    grid[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> puddles:</span><br><span class="line">        <span class="keyword">for</span> x, y <span class="keyword">in</span> puddles:</span><br><span class="line">            grid[y][x] = -<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n+<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> i == j == <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> grid[j][i] == -<span class="number">1</span>:</span><br><span class="line">                grid[j][i] = <span class="number">0</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            grid[j][i] = (grid[j][i-<span class="number">1</span>] + grid[j-<span class="number">1</span>][i])%<span class="number">1000000007</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> grid[n][m]</span><br></pre></td></tr></table></figure><hr><p>2019.10.18 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-tortoise/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Print Prime Number</title>
      <link>https://jx2lee.github.io/hackerrank-print_prime_number/</link>
      <guid>https://jx2lee.github.io/hackerrank-print_prime_number/</guid>
      <pubDate>Mon, 14 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Print Prime Number&lt;/code&gt; ë¬¸ì œë¥¼ ì‚¬ìš©ì ë³€ìˆ˜ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Print Prime Number</code> ë¬¸ì œë¥¼ ì‚¬ìš©ì ë³€ìˆ˜ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>Write a query to print all  <em>prime numbers</em>  less than or equal to  1000. Print your result on a single line, and use the ampersand () character as your separator (instead of a space).</p><p>For example, the output for all prime numbers  &lt;= 10 would be:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2&amp;3&amp;5&amp;7</span><br></pre></td></tr></table></figure><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p>1000 ì´í•˜ì˜ ì†Œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë¡œ, sql queryë¡œëŠ” ì²˜ìŒ í’€ì–´ë³¸ë‹¤. ì•„ë˜ì™€ ê°™ì€ ìˆœì„œë¡œ í’€ì–´ë³¼ ìˆ˜ ìˆë‹¤. (ì°¸ê³ í•œ ìë£ŒëŠ” urlì„ ìƒì–´ë²„ë ¸ë‹¤. ì£„ì†¡í•©ë‹ˆë‹¤)</p><p><strong>ì²« ë²ˆì§¸</strong>, <code>prime number</code>ë¥¼ êµ¬í•˜ê¸° ìœ„í•œ <code>num</code> ë³€ìˆ˜ë¥¼ 2 ì´ìƒ 1000ì´í•˜ ê¹Œì§€ ì¡°íšŒí•˜ëŠ” ë¶€ë¶„ì´ë‹¤. <code>information_schema</code>ì˜ í…Œì´ë¸”ì„ ì´ìš©í•´ <code>num := num + 1</code> ì„ ì¡°íšŒí•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    @num1 :=@num1 + <span class="number">1</span> <span class="keyword">as</span> num1</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    information_schema.tables t1,</span><br><span class="line">    information_schema.tables t2,</span><br><span class="line">    (<span class="keyword">select</span> @num1 := <span class="number">1</span>) tmp</span><br><span class="line">;</span><br></pre></td></tr></table></figure><p><strong>ë‘ ë²ˆì§¸</strong>, ì†Œìˆ˜ê°€ ì•„ë‹Œ ìˆ˜ë¥¼ ê±¸ëŸ¬ë‚´ê¸° ìœ„í•´ <code>exists</code> ë¬¸ì„ ì‘ì„±í•œë‹¤. <code>div</code> ë³€ìˆ˜ë¥¼ <code>num</code> ë³€ìˆ˜ì™€ ê°™ì´ ì¡°íšŒí•˜ëŠ” ë¬¸ì„ ì´ìš©í•´ ì†Œìˆ˜<em>(ì•½ìˆ˜ëŠ” ë‚˜ì™€ ê·¸ ìˆ˜ ë°–ì— ì—†ëŠ” íŠ¹ì§• : floor(num / div) != num / div )</em>ë¥¼ êµ¬í•œë‹¤. ì´ë•Œ, <code>where</code>ì ˆì— ì†í•´ì•¼ í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">where</span><br><span class="line">    num1 &lt;= 1000</span><br><span class="line">and not exists (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        *</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        (</span><br><span class="line">            <span class="keyword">select</span></span><br><span class="line">                @num2 :=@num2 + <span class="number">1</span> <span class="keyword">as</span> num2</span><br><span class="line">            <span class="keyword">from</span></span><br><span class="line">                information_schema.tables <span class="keyword">as</span> t1,</span><br><span class="line">                information_schema.tables <span class="keyword">as</span> t2,</span><br><span class="line">                (<span class="keyword">select</span> @num2 := <span class="number">1</span>) tmp2</span><br><span class="line">            <span class="keyword">limit</span> <span class="number">1000</span></span><br><span class="line">        ) t2</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">        <span class="keyword">floor</span>(num1 / num2) = (num1 / num2)</span><br><span class="line">    <span class="keyword">and</span> num2 * num2 &lt;= num1</span><br><span class="line">    <span class="keyword">and</span> num2 &gt; <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>ì´ì œ ì ì ˆíˆ ë‘ sql ë¬¸ì„ í•©ì³ì£¼ë©´ ëœë‹¤. í…Œì´ë¸”ëª…ì´ ì¤‘ë³µë˜ì§€ ì•Šê²Œ, ì´ë¯¸ ì‚¬ìš©í•œ ì‚¬ìš©ì ë³€ìˆ˜ ë˜í•œ ì¤‘ë³µë˜ì§€ ì•Šê²Œ ë‘ queryë¥¼ ì„ì–´ì£¼ë©´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p><blockquote><p>íŠ¹íˆ, ì‚¬ìš©ì ë³€ìˆ˜ num1, num2 ë¥¼ ê°™ì€ ê²ƒìœ¼ë¡œ ì‹¤í–‰í•˜ë‹ˆ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì•ìœ¼ë¡œ ì£¼ì˜í•  ê²ƒ! ì‚¬ìš©ì ë³€ìˆ˜ëŠ” <strong>ëª¨ë‘ ë‹¤ë¥´ê²Œ</strong></p></blockquote><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="keyword">group_concat</span>(num1 separator <span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            @num1 :=@num1 + <span class="number">1</span> <span class="keyword">as</span> num1</span><br><span class="line">        <span class="keyword">from</span></span><br><span class="line">            information_schema.tables <span class="keyword">as</span> t1,</span><br><span class="line">            information_schema.tables <span class="keyword">as</span> t2,</span><br><span class="line">            (<span class="keyword">select</span> @num1 := <span class="number">1</span>) tmp1</span><br><span class="line">    ) t1</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    num1 &lt;= <span class="number">1000</span></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        *</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        (</span><br><span class="line">            <span class="keyword">select</span></span><br><span class="line">                @num2 :=@num2 + <span class="number">1</span> <span class="keyword">as</span> num2</span><br><span class="line">            <span class="keyword">from</span></span><br><span class="line">                information_schema.tables <span class="keyword">as</span> t1,</span><br><span class="line">                information_schema.tables <span class="keyword">as</span> t2,</span><br><span class="line">                (<span class="keyword">select</span> @num2 := <span class="number">1</span>) tmp2</span><br><span class="line">            <span class="keyword">limit</span> <span class="number">1000</span></span><br><span class="line">        ) t2</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">        <span class="keyword">floor</span>(num1 / num2) = (num1 / num2)</span><br><span class="line">    <span class="keyword">and</span> num2 * num2 &lt;= num1</span><br><span class="line">    <span class="keyword">and</span> num2 &gt; <span class="number">1</span>);</span><br></pre></td></tr></table></figure><hr><p>2019.10.15 made by <em>jaejun.lee</em></p><!--stackedit_data:eyJoaXN0b3J5IjpbLTEyOTA5NzU5MTgsMTI0NjM5MjY2MCwtNDA2MDA4Nzc5LDQxOTEwMjYxLDEwNTE0NzkxNzYsLTE1NDYzMzA1NDcsLTM5NjczNjYzMSwtOTg3ODQ3ODA4LC0xMjE0MzMzNTUyLC0xNDI4Nzk5NDAsMTYyNTQ1NTc4LDM2ODE5MDkwOCwtODg3NjM2NTgwLDIwODcxODE4NDEsNzQ1MjIyMDhdfQ==-->]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-print_prime_number/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Symmetric Pairs &amp; Draw The Triangle 1</title>
      <link>https://jx2lee.github.io/hackerrank-symmetric_pairs_draw_triangle_1/</link>
      <guid>https://jx2lee.github.io/hackerrank-symmetric_pairs_draw_triangle_1/</guid>
      <pubDate>Sun, 13 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Symmetric Pairs &amp;amp; Draw The Triangle 1&lt;/code&gt; ë¬¸ì œë¥¼ ì •ë¦¬í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Symmetric Pairs &amp; Draw The Triangle 1</code> ë¬¸ì œë¥¼ ì •ë¦¬í•œë‹¤.</p><a id="more"></a><h1 id="Symmetric-Pairs"><a href="#Symmetric-Pairs" class="headerlink" title="Symmetric Pairs"></a>Symmetric Pairs</h1><h2 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h2><p>You are given a table,  <em>Functions</em>, containing two columns:  <em>X</em> and  <em>Y</em>.</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12892/1443818798-51909e977d-1.png" alt=""></p><p>Two pairs  <em>(X1, Y1)</em>  and  <em>(X2, Y2)</em>  are said to be  <em>symmetric</em>  <em>pairs</em>  if <em>X1  = Y2</em>  and  <em>X2  = Y1</em>.</p><p>Write a query to output all such  <em>symmetric</em>  <em>pairs</em>  in ascending order by the value of  <em>X</em>.</p><p><strong>Sample Input</strong></p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12892/1443818693-b384c24e35-2.png" alt=""></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">20 20</span><br><span class="line">20 21</span><br><span class="line">22 23</span><br></pre></td></tr></table></figure><h2 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h2><p>ë¬¸ì œëŠ” <code>1) x = y</code>ì¸ ì§ë“¤ê³¼ <code>2) x != y</code> ì¸ ì§ë“¤ì˜ <em>union</em>ìœ¼ë¡œ ì ‘ê·¼í•˜ì˜€ë‹¤.<br>ìš°ì„ , <code>1) x = y</code>ì¸ ê²½ìš°ëŠ” ì•„ë˜ ì¿¼ë¦¬ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> x, y</span><br><span class="line"><span class="keyword">from</span> functions <span class="keyword">as</span> f1</span><br><span class="line"><span class="keyword">where</span> x = y <span class="keyword">and</span></span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> functions <span class="keyword">where</span> x = f1.x <span class="keyword">and</span> y = f1.x) &gt; <span class="number">1</span></span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">*count(*)  &gt; 1*ì¸ ì´ìœ ëŠ” ë‚˜ì˜¨ ê°¯ìˆ˜ê°€ 2ê°œ ì´ìƒì¸ ì§ë“¤ë§Œ ë½‘ì•„ì¤˜ì•¼ í•˜ë¯€ë¡œ `</span><span class="keyword">where</span><span class="string">`ì ˆì— ì¡°ê±´ì„ ì¶”ê°€í•œ ê²ƒì´ë‹¤. ì´í›„ `</span><span class="number">2</span>) x != y<span class="string">` ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="keyword">sql</span></span><br><span class="line"><span class="keyword">select</span> f1.x, f1.y</span><br><span class="line"><span class="keyword">from</span> functions <span class="keyword">as</span> f1, functions <span class="keyword">as</span> f2</span><br><span class="line"><span class="keyword">where</span> f1.x = f2.y <span class="keyword">and</span> f1.y = f2.x <span class="keyword">and</span> f1.x &lt; f1.y</span><br></pre></td></tr></table></figure><p>ì£¼ëª©í•´ì•¼í•˜ëŠ” ë¶€ë¶„ì€ <code>f1.x &lt; f1.y</code>ì¸ ë¶€ë¶„ìœ¼ë¡œ, ë½‘ì•„ë‚´ëŠ” ì§ë“¤ì˜ <code>x</code>ê°’ì´ <code>y</code>ë³´ë‹¤ ì‘ì€ ì§ë“¤ë§Œ ì°¾ì•„ì£¼ê²Œ ë˜ë©´ <code>1) x = y</code>ì¸ ë¶€ë¶„ì€ ì œì™¸í•  ìˆ˜ ìˆë‹¤. ì´ì™€ ê°™ì€ ë‘ ì¿¼ë¦¬ë¥¼ <code>union</code>ìœ¼ë¡œ ë¬¶ì–´ì£¼ê³  ë§ˆì§€ë§‰ <code>order by</code>ë¥¼ í†µí•´ ì •ë ¬ë§Œ í•˜ë©´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤.</p><h2 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> x, y</span><br><span class="line"><span class="keyword">from</span> functions <span class="keyword">as</span> f1</span><br><span class="line"><span class="keyword">where</span> x = y <span class="keyword">and</span></span><br><span class="line">    (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> functions <span class="keyword">where</span> x = f1.x <span class="keyword">and</span> y = f1.x) &gt; <span class="number">1</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> f1.x, f1.y</span><br><span class="line"><span class="keyword">from</span> functions <span class="keyword">as</span> f1, functions <span class="keyword">as</span> f2</span><br><span class="line"><span class="keyword">where</span> f1.x = f2.y <span class="keyword">and</span> f1.y = f2.x <span class="keyword">and</span> f1.x &lt; f1.y</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> x;</span><br></pre></td></tr></table></figure><h1 id="Draw-The-Triangle-1"><a href="#Draw-The-Triangle-1" class="headerlink" title="Draw The Triangle 1"></a>Draw The Triangle 1</h1><h2 id="ë¬¸ì œ-1"><a href="#ë¬¸ì œ-1" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h2><p><em>P(R)</em>  represents a pattern drawn by Julia in  <em>R</em>  rows. The following pattern represents  <em>P(5)</em>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* * * * * </span><br><span class="line">* * * * </span><br><span class="line">* * * </span><br><span class="line">* * </span><br><span class="line">*</span><br></pre></td></tr></table></figure><p>Write a query to print the pattern  <em>P(20)</em>.</p><h2 id="ì ‘ê·¼-1"><a href="#ì ‘ê·¼-1" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h2><p><em>ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜</em>ë¥¼ ì´ìš©í•´ ì ‘ê·¼í•˜ì˜€ë‹¤.<br><code>i</code>ë¼ëŠ” ë³€ìˆ˜ë¥¼ 21ë¡œ ì„ ì–¸í•˜ê³ , <code>repeat</code>í•¨ìˆ˜ë¥¼ ì´ìš©í•´ <code>i &gt; 0</code>ì¼ ë•Œê¹Œì§€ ë°˜ë³µí•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì˜€ë‹¤. 4ë¬¸ì¥ìœ¼ë¡œ ì‰½ê²Œ í’€ë¦¬ëŠ” ë¬¸ì œì¸ë°, <em>ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜</em>ì— ëŒ€í•´ ë‹¤ì‹œ í•œ ë²ˆ ìƒê°í•´ë³´ìëŠ” ì˜ë¯¸ë¡œ ì •ë¦¬í•˜ì˜€ê³  ë‹¤ìŒì—ëŠ” ê¼­ í‹€ë¦¬ì§€ ë§ì.</p><h2 id="í•´ê²°-1"><a href="#í•´ê²°-1" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @i = <span class="number">21</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">repeat</span>(<span class="string">&#x27;* &#x27;</span>, @i := @i - <span class="number">1</span>)</span><br><span class="line"><span class="keyword">from</span> information_schema.tables</span><br><span class="line"><span class="keyword">where</span> @i &gt; <span class="number">0</span>;</span><br></pre></td></tr></table></figure><hr><p>2019.10.14 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-symmetric_pairs_draw_triangle_1/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Contest Leaderboard</title>
      <link>https://jx2lee.github.io/hackerrank-contest_leaderboard/</link>
      <guid>https://jx2lee.github.io/hackerrank-contest_leaderboard/</guid>
      <pubDate>Wed, 09 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Contest Leaderboard&lt;/code&gt; ë¬¸ì œë¥¼ &lt;code&gt;Group by&lt;/code&gt;ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Contest Leaderboard</code> ë¬¸ì œë¥¼ <code>Group by</code>ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>You did such a great job helping Julia with her last coding contest challenge that she wants you to work on this one, too!</p><p>The total score of a hacker is the sum of their maximum scores for all of the challenges. Write a query to print the  <em>hacker_id</em>,  <em>name</em>, and total score of the hackers ordered by the descending score. If more than one hacker achieved the same total score, then sort the result by ascending  <em>hacker_id</em>. Exclude all hackers with a total score of  from your result.</p><p><strong>Input Format</strong></p><p>The following tables contain contest data:</p><ul><li><p><em>Hackers:</em>  The  <em>hacker_id</em>  is the id of the hacker, and  <em>name</em>  is the name of the hacker.  <img src="https://s3.amazonaws.com/hr-challenge-images/19503/1458522826-a9ddd28469-ScreenShot2016-03-21at6.40.27AM.png" alt=""></p></li><li><p><em>Submissions:</em>  The  <em>submission_id</em>  is the id of the submission,  <em>hacker_id</em>  is the id of the hacker who made the submission,  <em>challenge_id</em>  is the id of the challenge for which the submission belongs to, and  <em>score</em>  is the score of the submission.  <img src="https://s3.amazonaws.com/hr-challenge-images/19503/1458523022-771511df90-ScreenShot2016-03-21at6.40.37AM.png" alt=""></p></li></ul><p><strong>Sample Input</strong></p><p><em>Hackers</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19503/1458523374-7ecc39010f-ScreenShot2016-03-21at6.51.56AM.png" alt=""></p><p><em>Submissions</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19503/1458523388-0896218137-ScreenShot2016-03-21at6.51.45AM.png" alt=""></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">4071 Rose 191</span><br><span class="line">74842 Lisa 174</span><br><span class="line">84072 Bonnie 100</span><br><span class="line">4806 Angela 89</span><br><span class="line">26071 Frank 85</span><br><span class="line">80305 Kimberly 67</span><br><span class="line">49438 Patrick 43</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>Hacker  <em>4071</em>  submitted solutions for challenges  <em>19797</em>  and  <em>49593</em>, so the total score  .</p><p>Hacker  <em>74842</em>  submitted solutions for challenges  <em>19797</em>  and  <em>63132</em>, so the total score</p><p>Hacker  <em>84072</em>  submitted solutions for challenges  <em>49593</em>  and  <em>63132</em>, so the total score  .</p><p>The total scores for hackers  <em>4806</em>,  <em>26071</em>,  <em>80305</em>, and  <em>49438</em>  can be similarly calculated.</p><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p>ìš°ì„ ì€, <code>challenge_id / hacker_id ë³„ scoreì˜ ìµœëŒ“ê°’</code>ì„ êµ¬í•˜ê³  ì´ë¥¼ <code>hackers</code> í…Œì´ë¸”ê³¼ ì¡°ì¸í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> h.hacker_id, h.name, <span class="keyword">sum</span>(m.score) <span class="keyword">as</span> total_score</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> hacker_id, challenge_id, <span class="keyword">max</span>(score) <span class="keyword">as</span> score</span><br><span class="line">    <span class="keyword">from</span> submissions</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> challenge_id, hacker_id) <span class="keyword">as</span> m</span><br><span class="line"><span class="keyword">join</span> hackers <span class="keyword">as</span> h <span class="keyword">on</span> h.hacker_id = m.hacker_id</span><br></pre></td></tr></table></figure><p>ì´í›„ <code>max score</code>ë“¤ì˜ <code>total_score</code>ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ <code>hacker_id / name ì„ keyë¡œ í•˜ì—¬ group by</code> í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> h.hacker_id, h.name, <span class="keyword">sum</span>(m.score) <span class="keyword">as</span> total_score</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> hacker_id, challenge_id, <span class="keyword">max</span>(score) <span class="keyword">as</span> score</span><br><span class="line">    <span class="keyword">from</span> submissions</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> challenge_id, hacker_id) <span class="keyword">as</span> m</span><br><span class="line"><span class="keyword">join</span> hackers <span class="keyword">as</span> h <span class="keyword">on</span> h.hacker_id = m.hacker_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> h.hacker_id, h.name</span><br></pre></td></tr></table></figure><p>ë§ˆì§€ë§‰ìœ¼ë¡œ ë¬¸ì œì— ë”°ë¼ ì •ë ¬ë§Œ í•˜ë©´ ëœë‹¤.</p><blockquote><p><em>(total_score &gt; 0ì¸ ì¡°ê±´ë„ ì¶”ê°€)</em></p></blockquote><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> h.hacker_id, h.name, <span class="keyword">sum</span>(m.score) <span class="keyword">as</span> total_score</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> hacker_id, challenge_id, <span class="keyword">max</span>(score) <span class="keyword">as</span> score</span><br><span class="line">    <span class="keyword">from</span> submissions</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> challenge_id, hacker_id) <span class="keyword">as</span> m</span><br><span class="line"><span class="keyword">join</span> hackers <span class="keyword">as</span> h <span class="keyword">on</span> h.hacker_id = m.hacker_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> h.hacker_id, h.name</span><br><span class="line"><span class="keyword">having</span> total_score &gt; <span class="number">0</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> total_score <span class="keyword">desc</span>, h.hacker_id;</span><br></pre></td></tr></table></figure><hr><p>2019.10.10 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-contest_leaderboard/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] SQL Project Planning</title>
      <link>https://jx2lee.github.io/hackerrank-project_planning/</link>
      <guid>https://jx2lee.github.io/hackerrank-project_planning/</guid>
      <pubDate>Wed, 09 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;SQL Project Planning&lt;/code&gt; ë¬¸ì œë¥¼ ì •ë¦¬í•œë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>SQL Project Planning</code> ë¬¸ì œë¥¼ ì •ë¦¬í•œë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>You are given a table,  <em>Projects</em>, containing three columns:  <em>Task_ID</em>,  <em>Start_Date</em>  and  <em>End_Date</em>. It is guaranteed that the difference between the  <em>End_Date</em>  and the  <em>Start_Date</em>  is equal to  <em>1</em>  day for each row in the table.</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12894/1443819551-639948acc0-1.png" alt=""></p><p>If the  <em>End_Date</em>  of the tasks are consecutive, then they are part of the same project. Samantha is interested in finding the total number of different projects completed.</p><p>Write a query to output the start and end dates of projects listed by the number of days it took to complete the project in ascending order. If there is more than one project that have the same number of completion days, then order by the start date of the project.</p><p><strong>Sample Input</strong></p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12894/1443819440-1c40e943a1-2.png" alt=""></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2015-10-28 2015-10-29</span><br><span class="line">2015-10-30 2015-10-31</span><br><span class="line">2015-10-13 2015-10-15</span><br><span class="line">2015-10-01 2015-10-04</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>The example describes following  <em>four</em>  projects:</p><ul><li><em>Project 1</em>: Tasks  <em>1</em>,  <em>2</em>  and  <em>3</em>  are completed on consecutive days, so these are part of the project. Thus start date of project is  <em>2015-10-01</em>  and end date is  <em>2015-10-04</em>, so it took  <em>3 days</em>  to complete the project.</li><li><em>Project 2</em>: Tasks  <em>4</em> and <em>5</em> are completed on consecutive days, so these are part of the project. Thus, the start date of project is <em>2015-10-13</em> and end date is <em>2015-10-15</em>, so it took <em>2 days</em> to complete the project.</li><li><em>Project 3</em>: Only task  <em>6</em> is part of the project. Thus, the start date of project is <em>2015-10-28</em> and end date is <em>2015-10-29</em>, so it took <em>1 day</em> to complete the project.</li><li><em>Project 4</em>: Only task <em>7</em> is part of the project. Thus, the start date of project is <em>2015-10-30</em> and end date is <em>2015-10-31</em>, so it took <em>1 day</em> to complete the project.</li></ul><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p>í”„ë¡œì íŠ¸ì˜ ì‹œì‘ê³¼ ë ë‚ ì§œë¥¼ ì¶œë ¥í•˜ëŠ” ë¬¸ì œ. í…Œì´ë¸”ì—ëŠ” ê°ê°ì˜ <code>task</code>ë“¤ì´ <code>start_date, end_date</code>ë¡œ êµ¬ì„±ë˜ì—ˆê³  ê°™ì€ í”„ë¡œì íŠ¸ëŠ” ê° <code>task</code>ê°€ ì´ì–´ì§ˆ ìˆ˜ ìˆë‹¤. ì²˜ìŒ ì ‘ê·¼í–ˆì„ ë•Œ <code>join</code>ì„ ì´ìš©í•´ <code>p1, p2</code> í…Œì´ë¸”ë¡œë¶€í„° <code>p1.end_date=p2.start_date</code>ë¥¼ ì´ìš©í•˜ì˜€ì§€ë§Œ ì‹¤íŒ¨í•˜ì—¬ <a href="https://nifannn.github.io/2017/10/24/SQL-Notes-Hackerrank-Projects/">ë¸”ë¡œê·¸</a>ë¥¼ ì°¸ê³ í•˜ì˜€ë‹¤.</p><p>ìš°ì„  <code>start_date</code>ê°€ <code>end_date</code>ì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ë‚ ì§œë¥¼ í™•ì¸í•œë‹¤. ì´ëŠ” í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì¼ ê²ƒì´ë‹¤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> start_date</span><br><span class="line"><span class="keyword">from</span> projects</span><br><span class="line"><span class="keyword">where</span> start_date <span class="keyword">not</span> <span class="keyword">in</span></span><br><span class="line">(<span class="keyword">select</span> end_date <span class="keyword">from</span> projects);</span><br></pre></td></tr></table></figure><p>ë§ˆì°¬ê°€ì§€ë¡œ <code>end_date</code>ê°€ <code>start_date</code>ì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ë‚ ì§œë¥¼ í™•ì¸í•œë‹¤. ì´ëŠ” í”„ë¡œì íŠ¸ì´ ëì¼ ê²ƒì´ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> end_date</span><br><span class="line"><span class="keyword">from</span> projects</span><br><span class="line"><span class="keyword">where</span> end_date <span class="keyword">not</span> <span class="keyword">in</span></span><br><span class="line">(<span class="keyword">select</span> start_date <span class="keyword">from</span> projects);</span><br></pre></td></tr></table></figure><p>ê·¸ëŸ° ë‹¤ìŒ ê° í”„ë¡œì íŠ¸ì— ëŒ€í•´ (ì‹œì‘ ë‚ ì§œ, ì¢…ë£Œ ë‚ ì§œ) ìŒì„ ì°¾ì•„ì•¼í•œë‹¤. ê·¸ ì „ì— í”„ë¡œì íŠ¸ì˜ ì‹œì‘ ë‚ ì§œì™€ ì¢…ë£Œ ë‚ ì§œë¥¼ <code>êµì°¨</code>ì‹œì¼œ <code>ëª¨ë“  ì ì¬ì  ìŒ</code>ì„ ìƒì„±í•œë‹¤. ë˜í•œ, ë™ì¼í•œ í”„ë¡œì íŠ¸ì˜ ê²½ìš° ì¢…ë£Œ ë‚ ì§œëŠ” í”„ë¡œì íŠ¸ ì‹œì‘ ë‚ ì§œë³´ë‹¤ í° í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì¢…ë£Œ ë‚ ì§œ ì¤‘ ê°€ì¥ ì‘ì•„ì•¼í•œë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> start_date, <span class="keyword">min</span>(end_date)</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> start_date <span class="keyword">from</span> projects <span class="keyword">where</span> start_date <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> end_date <span class="keyword">from</span> projects)) <span class="keyword">as</span> t1,</span><br><span class="line">    (<span class="keyword">select</span> end_date <span class="keyword">from</span> projects <span class="keyword">where</span> end_date <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> start_date <span class="keyword">from</span> projects)) <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">where</span> start_date &lt; end_date</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> start_date</span><br></pre></td></tr></table></figure><p>ë§ˆì§€ë§‰ ë¬¸ì œ ì¡°ê±´ ì¤‘ í”„ë¡œì íŠ¸ ìˆ˜í–‰ ê¸°ê°„ì´ ì§§ì€ ìˆœì„œë¡œ, ìˆ˜í–‰ ê¸°ê°„ì´ ê°™ë‹¤ë©´ ì‹œì‘ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆë‹¤. <em>(datediff í•¨ìˆ˜ ì´ìš© - ë‘ ë‚ ì§œ ë°ì´í„° ì°¨ì´ê°’ ìƒì„±)</em></p><ul><li>ADD <code>order by datediff(min(end_date), start_date), start_date</code></li></ul><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> start_date, <span class="keyword">min</span>(end_date)</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> start_date <span class="keyword">from</span> projects <span class="keyword">where</span> start_date <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> end_date <span class="keyword">from</span> projects)) <span class="keyword">as</span> t1,</span><br><span class="line">    (<span class="keyword">select</span> end_date <span class="keyword">from</span> projects <span class="keyword">where</span> end_date <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> start_date <span class="keyword">from</span> projects)) <span class="keyword">as</span> t2</span><br><span class="line"><span class="keyword">where</span> start_date &lt; end_date</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> start_date</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">datediff</span>(<span class="keyword">min</span>(end_date), start_date), start_date;</span><br></pre></td></tr></table></figure><hr><p>2019.10.10 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-project_planning/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Challenges</title>
      <link>https://jx2lee.github.io/hackerrank-challenges/</link>
      <guid>https://jx2lee.github.io/hackerrank-challenges/</guid>
      <pubDate>Sun, 06 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Challenges&lt;/code&gt; ë¬¸ì œë¥¼ &lt;code&gt;Join&lt;/code&gt;ì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Challenges</code> ë¬¸ì œë¥¼ <code>Join</code>ì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>Julia asked her students to create some coding challenges. Write a query to print the  <em>hacker_id</em>,  <em>name</em>, and the total number of challenges created by each student. Sort your results by the total number of challenges in descending order. If more than one student created the same number of challenges, then sort the result by  <em>hacker_id</em>. If more than one student created the same number of challenges and the count is less than the maximum number of challenges created, then exclude those students from the result.</p><p><strong>Input Format</strong></p><p>The following tables contain challenge data:</p><ul><li><p><em>Hackers:</em>  The  <em>hacker_id</em>  is the id of the hacker, and  <em>name</em>  is the name of the hacker.  <img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521004-cb4c077dd3-ScreenShot2016-03-21at6.06.54AM.png" alt=""></p></li><li><p><em>Challenges:</em>  The  <em>challenge_id</em>  is the id of the challenge, and  <em>hacker_id</em>  is the id of the student who created the challenge.  <img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521079-549341d9ec-ScreenShot2016-03-21at6.07.03AM.png" alt=""></p></li></ul><hr><p><strong>Sample Input 0</strong></p><p><em>Hackers</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521384-34c6866dae-ScreenShot2016-03-21at6.07.15AM.png" alt="">  <em>Challenges</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521410-befa8e1cd9-ScreenShot2016-03-21at6.07.25AM.png" alt=""></p><p><strong>Sample Output 0</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">21283 Angela 6</span><br><span class="line">88255 Patrick 5</span><br><span class="line">96196 Lisa 1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Sample Input 1</strong></p><p><em>Hackers</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521469-87036deea3-ScreenShot2016-03-21at6.07.48AM.png" alt="">  <em>Challenges</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521490-358215cf0b-ScreenShot2016-03-21at6.07.58AM.png" alt=""></p><p><strong>Sample Output 1</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">12299 Rose 6</span><br><span class="line">34856 Angela 6</span><br><span class="line">79345 Frank 4</span><br><span class="line">80491 Patrick 3</span><br><span class="line">81041 Lisa 1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>For  <em>Sample Case 0</em>, we can get the following details:<br><img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521677-fd04c384c0-ScreenShot2016-03-21at6.07.38AM.png" alt=""><br>Students  and  both created  challenges, but the maximum number of challenges created is  so these students are excluded from the result.</p><p>For  <em>Sample Case 1</em>, we can get the following details:<br><img src="https://s3.amazonaws.com/hr-challenge-images/19506/1458521836-24039e7523-ScreenShot2016-03-21at6.08.08AM.png" alt=""><br>Students  and  both created  challenges. Because  is the maximum number of challenges created, these students are included in the result.</p><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p><code>group by</code> ì¡°ê±´ ì¤‘ <code>1) ìµœëŒ“ê°’ì´ í•˜ë‚˜ì—¬ì•¼í•˜ê³ </code>, <code>2) ìµœëŒ“ê°’ ì•„ë˜ë¡œ ì¤‘ë³µë˜ëŠ” íšŸìˆ˜ë¥¼ ê°€ì§€ë©´ ì•ˆëœë‹¤</code> ë¥¼ ë§Œì¡±í•˜ëŠ” ê²ƒì´ ì–´ë ¤ì› ë‹¤. <code>count</code> ê°’ì„ <code>OR</code>ì„ ì´ìš©í•´ ë§Œì¡±í•˜ëŠ” ë²”ìœ„ë¡œ <code>having</code>ì ˆì„ ì‘ì„±í•˜ì—¬ í•´ê²°í•  ìˆ˜ ìˆì—ˆë‹¤. ìˆœì„œëŠ” ì•„ë˜ì™€ ê°™ì´ í’€ì—ˆë‹¤.</p><ul><li><code>hackers</code> í…Œì´ë¸”ê³¼ <code>challenges</code> í…Œì´ë¸”ì„ <code>join</code> ë° <code>group by</code> <em>(group by keyëŠ” id / name)</em></li><li><code>having</code> ì ˆ <code>cnt</code> ì¡°ê±´ì„ <code>OR</code>ë¡œ ì‘ì„± <em>(1. max value, 2. not duplicated)</em> </li><li>ë¬¸ì œ ì¡°ê±´ì— ë§ëŠ” <code>order by</code> ì¶”ê°€</li></ul><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    c.hacker_id, h.name, <span class="keyword">count</span>(c.challenge_id) <span class="keyword">as</span> cnt</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    challenges <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">join</span> hackers <span class="keyword">as</span> h <span class="keyword">on</span> c.hacker_id = h.hacker_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    c.hacker_id, h.name</span><br><span class="line"><span class="keyword">having</span></span><br><span class="line">    cnt =  (<span class="keyword">select</span></span><br><span class="line">                <span class="keyword">count</span>(c1.challenge_id)</span><br><span class="line">            <span class="keyword">from</span></span><br><span class="line">                challenges <span class="keyword">as</span> c1</span><br><span class="line">            <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">                c1.hacker_id</span><br><span class="line">            <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">                <span class="keyword">count</span>(c1.challenge_id) <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">1</span>) <span class="keyword">or</span></span><br><span class="line">    cnt <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span></span><br><span class="line">                    <span class="keyword">count</span>(c2.challenge_id)</span><br><span class="line">                <span class="keyword">from</span></span><br><span class="line">                    challenges <span class="keyword">as</span> c2</span><br><span class="line">                <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">                    c2.hacker_id</span><br><span class="line">                <span class="keyword">having</span></span><br><span class="line">                    c2.hacker_id &lt;&gt; c.hacker_id)</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">    cnt <span class="keyword">desc</span>, c.hacker_id;</span><br></pre></td></tr></table></figure><hr><p>2019.10.07 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-challenges/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Ollivander&#39;s Inventory</title>
      <link>https://jx2lee.github.io/hackerrank-ollivanders_inventory/</link>
      <guid>https://jx2lee.github.io/hackerrank-ollivanders_inventory/</guid>
      <pubDate>Sun, 06 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Ollivander&amp;#39;s Inventory&lt;/code&gt; ë¬¸ì œë¥¼ &lt;code&gt;Group by&lt;/code&gt;ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Ollivander&#39;s Inventory</code> ë¬¸ì œë¥¼ <code>Group by</code>ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>Harry Potter and his friends are at Ollivanderâ€™s with Ron, finally replacing Charlieâ€™s old broken wand.</p><p>Hermione decides the best way to choose is by determining the minimum number of gold galleons needed to buy each  <em>non-evil</em>  wand of high power and age. Write a query to print the  <em>id</em>,  <em>age</em>,  <em>coins_needed</em>, and  <em>power</em>  of the wands that Ronâ€™s interested in, sorted in order of descending  <em>power</em>. If more than one wand has same power, sort the result in order of descending  <em>age</em>.</p><p><strong>Input Format</strong></p><p>The following tables contain data on the wands in Ollivanderâ€™s inventory:</p><ul><li><p><em>Wands:</em>  The  <em>id</em>  is the id of the wand,  <em>code</em>  is the code of the wand,  <em>coins_needed</em>  is the total number of gold galleons needed to buy the wand, and  <em>power</em>  denotes the quality of the wand (the higher the power, the better the wand is).  <img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458538092-b2a8163a74-ScreenShot2016-03-08at12.13.39AM.png" alt=""></p></li><li><p><em>Wands_Property:</em>  The  <em>code</em>  is the code of the wand,  <em>age</em>  is the age of the wand, and  <em>is_evil</em>  denotes whether the wand is good for the dark arts. If the value of  <em>is_evil</em>  is  <em>0</em>, it means that the wand is not evil. The mapping between  <em>code</em>  and  <em>age</em>  is one-one, meaning that if there are two pairs,  and  , then  and  .<img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458538221-18c4092b7d-ScreenShot2016-03-08at12.13.53AM.png" alt=""></p></li></ul><hr><p><strong>Sample Input</strong></p><p><em>Wands</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458538559-51bf29644e-ScreenShot2016-03-21at10.34.41AM.png" alt="">  <em>Wands_Property</em>  Table:  <img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458538583-fd514566f9-ScreenShot2016-03-21at10.34.28AM.png" alt=""></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">9 45 1647 10</span><br><span class="line">12 17 9897 10</span><br><span class="line">1 20 3688 8</span><br><span class="line">15 40 6018 7</span><br><span class="line">19 20 7651 6</span><br><span class="line">11 40 7587 5</span><br><span class="line">10 20 504 5</span><br><span class="line">18 40 3312 3</span><br><span class="line">20 17 5689 3</span><br><span class="line">5 45 6020 2</span><br><span class="line">14 40 5408 1</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>The data for wands of  <em>age 45</em>  (code 1):  <img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458539700-2f319702ab-ScreenShot2016-03-21at11.23.06AM.png" alt=""></p><ul><li>The minimum number of galleons needed for</li><li>The minimum number of galleons needed for</li></ul><p>The data for wands of  <em>age 40</em>  (code 2):  <img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458539909-ab79f7ff95-ScreenShot2016-03-21at11.23.14AM.png" alt=""></p><ul><li>The minimum number of galleons needed for</li><li>The minimum number of galleons needed for</li><li>The minimum number of galleons needed for</li><li>The minimum number of galleons needed for</li></ul><p>The data for wands of  <em>age 20</em>  (code 4):  <img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458540035-d950b9c900-ScreenShot2016-03-21at11.23.25AM.png" alt=""></p><ul><li>The minimum number of galleons needed for</li><li>The minimum number of galleons needed for</li><li>The minimum number of galleons needed for</li></ul><p>The data for wands of  <em>age 17</em>  (code 5):  <img src="https://s3.amazonaws.com/hr-challenge-images/19502/1458540132-79fd7b916b-ScreenShot2016-03-21at11.23.34AM.png" alt=""></p><ul><li>The minimum number of galleons needed for</li><li>The minimum number of galleons needed for</li></ul><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p><code>determining the minimum number of gold galleons needed</code> ë¶€ë¶„ì„ ë†“ì³¤ë‹¤. <code>Wands</code> í…Œì´ë¸”ì—ì„œ <code>code/power</code> ë³„ coins_neededì˜ <code>ìµœì†Ÿê°’</code>ì„ ì°¾ì€ í…Œì´ë¸”ê³¼ <code>Wands / Wands_property</code> í…Œì´ë¸”ì„ ì¡°ì¸í•˜ì—¬ <code>order by</code>ë§Œ ì¶”ê°€í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ì™„ì„±í•˜ë©´ ëœë‹¤.</p><ul><li>code, power, min(coins_needed) ë¥¼ code/power ë³„ <code>group by</code></li><li>wands/wands_property í…Œì´ë¸”ê³¼ join <em>(wands í…Œì´ë¸” ì¡°ì¸ ì‹œ code/coins_needed ì¼ì¹˜)</em></li><li><code>order by</code> ë¡œ power/age descending</li></ul><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> w.id, p.age, w.coins_needed, w.power</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> code, <span class="keyword">power</span>, <span class="keyword">min</span>(coins_needed) <span class="keyword">as</span> coins_needed</span><br><span class="line">    <span class="keyword">from</span> wands</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> code, <span class="keyword">power</span>) <span class="keyword">as</span> m</span><br><span class="line"><span class="keyword">join</span> wands <span class="keyword">as</span> w <span class="keyword">on</span> w.code = m.code <span class="keyword">and</span> w.coins_needed = m.coins_needed</span><br><span class="line"><span class="keyword">join</span> wands_property <span class="keyword">as</span> p <span class="keyword">on</span> p.code = m.code</span><br><span class="line"><span class="keyword">where</span> p.is_evil = <span class="number">0</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> m.power <span class="keyword">desc</span>, p.age <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><hr><p>2019.10.07 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-ollivanders_inventory/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë‹¨ì–´ ë³€í™˜</title>
      <link>https://jx2lee.github.io/programmers-disk_controller/</link>
      <guid>https://jx2lee.github.io/programmers-disk_controller/</guid>
      <pubDate>Sun, 06 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;íŠ¹ì • ê¸°ì¤€ì„ ê°€ì§€ê³  ë‹¨ì–´ë¥¼ ë³€í™˜í•  ë•Œ ìµœì†Œ íšŸìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>íŠ¹ì • ê¸°ì¤€ì„ ê°€ì§€ê³  ë‹¨ì–´ë¥¼ ë³€í™˜í•  ë•Œ ìµœì†Œ íšŸìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h1><p>í•˜ë“œë””ìŠ¤í¬ëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë””ìŠ¤í¬ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ìš”ì²­ì´ ë“¤ì–´ì˜¨ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.<br>ì˜ˆë¥¼ë“¤ì–´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 0ms ì‹œì ì— 3msê°€ ì†Œìš”ë˜ëŠ” Aì‘ì—… ìš”ì²­</span><br><span class="line">- 1ms ì‹œì ì— 9msê°€ ì†Œìš”ë˜ëŠ” Bì‘ì—… ìš”ì²­</span><br><span class="line">- 2ms ì‹œì ì— 6msê°€ ì†Œìš”ë˜ëŠ” Cì‘ì—… ìš”ì²­</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ì™€ ê°™ì€ ìš”ì²­ì´ ë“¤ì–´ì™”ìŠµë‹ˆë‹¤. ì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.<br><img src="https://grepp-programmers.s3.amazonaws.com/files/production/b68eb5cec6/38dc6a53-2d21-4c72-90ac-f059729c51d5.png" alt="Screen Shot 2018-09-13 at 6.34.58 PM.png"></p><p>í•œ ë²ˆì— í•˜ë‚˜ì˜ ìš”ì²­ë§Œì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°ê°ì˜ ì‘ì—…ì„ ìš”ì²­ë°›ì€ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬ ë©ë‹ˆë‹¤.<br><img src="https://grepp-programmers.s3.amazonaws.com/files/production/5e677b4646/90b91fde-cac4-42c1-98b8-8f8431c52dcf.png" alt="Screen Shot 2018-09-13 at 6.38.52 PM.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- A: 3ms ì‹œì ì— ì‘ì—… ì™„ë£Œ (ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 3ms)</span><br><span class="line">- B: 1msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 3ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 12ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 11ms)</span><br><span class="line">- C: 2msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 12ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 18ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 16ms)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ì´ ë•Œ ê° ì‘ì—…ì˜ ìš”ì²­ë¶€í„° ì¢…ë£Œê¹Œì§€ ê±¸ë¦° ì‹œê°„ì˜ í‰ê· ì€ 10ms(= (3 + 11 + 16) / 3)ê°€ ë©ë‹ˆë‹¤.</p><p>í•˜ì§€ë§Œ A â†’ C â†’ B ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ë©´<br><img src="https://grepp-programmers.s3.amazonaws.com/files/production/9eb7c5a6f1/a6cff04d-86bb-4b5b-98bf-6359158940ac.png" alt="Screen Shot 2018-09-13 at 6.41.42 PM.png"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- A: 3ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 3ms)</span><br><span class="line">- C: 2msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 3ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 9ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 7ms)</span><br><span class="line">- B: 1msë¶€í„° ëŒ€ê¸°í•˜ë‹¤ê°€, 9ms ì‹œì ì— ì‘ì—…ì„ ì‹œì‘í•´ì„œ 18ms ì‹œì ì— ì‘ì—… ì™„ë£Œ(ìš”ì²­ì—ì„œ ì¢…ë£Œê¹Œì§€ : 17ms)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ì´ë ‡ê²Œ A â†’ C â†’ Bì˜ ìˆœì„œë¡œ ì²˜ë¦¬í•˜ë©´ ê° ì‘ì—…ì˜ ìš”ì²­ë¶€í„° ì¢…ë£Œê¹Œì§€ ê±¸ë¦° ì‹œê°„ì˜ í‰ê· ì€ 9ms(= (3 + 7 + 17) / 3)ê°€ ë©ë‹ˆë‹¤.</p><p>ê° ì‘ì—…ì— ëŒ€í•´ [ì‘ì—…ì´ ìš”ì²­ë˜ëŠ” ì‹œì , ì‘ì—…ì˜ ì†Œìš”ì‹œê°„]ì„ ë‹´ì€ 2ì°¨ì› ë°°ì—´ jobsê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ì‘ì—…ì˜ ìš”ì²­ë¶€í„° ì¢…ë£Œê¹Œì§€ ê±¸ë¦° ì‹œê°„ì˜ í‰ê· ì„ ê°€ì¥ ì¤„ì´ëŠ” ë°©ë²•ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©´ í‰ê· ì´ ì–¼ë§ˆê°€ ë˜ëŠ”ì§€ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. (ë‹¨, ì†Œìˆ˜ì  ì´í•˜ì˜ ìˆ˜ëŠ” ë²„ë¦½ë‹ˆë‹¤)</p><h2 id="ì œí•œ-ì‚¬í•­"><a href="#ì œí•œ-ì‚¬í•­" class="headerlink" title="ì œí•œ ì‚¬í•­"></a>ì œí•œ ì‚¬í•­</h2><ul><li>jobsì˜ ê¸¸ì´ëŠ” 1 ì´ìƒ 500 ì´í•˜ì…ë‹ˆë‹¤.</li><li>jobsì˜ ê° í–‰ì€ í•˜ë‚˜ì˜ ì‘ì—…ì— ëŒ€í•œ [ì‘ì—…ì´ ìš”ì²­ë˜ëŠ” ì‹œì , ì‘ì—…ì˜ ì†Œìš”ì‹œê°„] ì…ë‹ˆë‹¤.</li><li>ê° ì‘ì—…ì— ëŒ€í•´ ì‘ì—…ì´ ìš”ì²­ë˜ëŠ” ì‹œê°„ì€ 0 ì´ìƒ 1,000 ì´í•˜ì…ë‹ˆë‹¤.</li><li>ê° ì‘ì—…ì— ëŒ€í•´ ì‘ì—…ì˜ ì†Œìš”ì‹œê°„ì€ 1 ì´ìƒ 1,000 ì´í•˜ì…ë‹ˆë‹¤.</li><li>í•˜ë“œë””ìŠ¤í¬ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³  ìˆì§€ ì•Šì„ ë•Œì—ëŠ” ë¨¼ì € ìš”ì²­ì´ ë“¤ì–´ì˜¨ ì‘ì—…ë¶€í„° ì²˜ë¦¬í•©ë‹ˆë‹¤.</li></ul><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><p>jobs</p><p>return</p><p>[[0, 3], [1, 9], [2, 6]]</p><p>9</p><h2 id="ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…"><a href="#ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…"></a>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</h2><p>ë¬¸ì œì— ì£¼ì–´ì§„ ì˜ˆì™€ ê°™ìŠµë‹ˆë‹¤.</p><ul><li>0ms ì‹œì ì— 3ms ê±¸ë¦¬ëŠ” ì‘ì—… ìš”ì²­ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.</li><li>1ms ì‹œì ì— 9ms ê±¸ë¦¬ëŠ” ì‘ì—… ìš”ì²­ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.</li><li>2ms ì‹œì ì— 6ms ê±¸ë¦¬ëŠ” ì‘ì—… ìš”ì²­ì´ ë“¤ì–´ì˜µë‹ˆë‹¤.</li></ul><h1 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h1><p><code>heap</code> ì„ ì´ìš©í•´ì•¼ í•˜ëŠ” ë¬¸ì œ. ì‚¬ì‹¤ ì´ì— ëŒ€í•œ ê°œë…ì´ ë¶€ì¡±í•˜ì—¬ ê³µë¶€í•˜ë ¤ í–ˆì§€ë§Œ ë°©ëŒ€í•˜ê¸¸ë˜ ìš°ì„  íŒ¨ì“°í•˜ê³  ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì˜€ë‹¤. ì‹œê°„ì´ ëœë‹¤ë©´ <code>heap</code> ì— ëŒ€í•´ ê¸€ì„ ì •ë¦¬í•˜ê³  ìš°ì„  ì•„ë˜ì™€ ê°™ì€ ë³€ìˆ˜ë¥¼ í†µí•´ í•´ê²°í•˜ì˜€ë‹¤.</p><ul><li>ë³€ìˆ˜<ul><li><code>in_</code>, <code>out_</code> : ì‘ì—…ì„ ì‹œì‘/ì¢…ë£Œí•œ ì‹œê°„</li><li><code>ans&#39;</code> : ì´ ì‘ì—… ì‹œê°„</li><li><code>n</code> : ì´ ì‘ì—…ì˜ ê°¯ìˆ˜</li><li><code>cnt</code> : <code>heap</code> êµ¬ì¡°ì—ì„œ ìë£Œê°€ ë¹ ì ¸ë‚˜ê°„ íšŸìˆ˜ë¡œ whileë¬¸ì— ì‚¬ìš©</li><li><code>wt</code> : <code>heap</code>êµ¬ì¡°ë¡œ ì‘ì—…ì˜ ì¢…ë£Œ ì‹œê°„ì„ ë‹´ëŠ”ë‹¤.</li></ul></li></ul><h1 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h1><p><a href="https://codedrive.tistory.com/129">ì°¸ê³  ë¸”ë¡œê·¸</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">jobs</span>):</span></span><br><span class="line">    in_, out_, ans, cnt = -<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    wt = []</span><br><span class="line">    n = <span class="built_in">len</span>(jobs)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> cnt &lt; n:</span><br><span class="line">        <span class="keyword">for</span> job <span class="keyword">in</span> jobs:</span><br><span class="line">            <span class="keyword">if</span> in_ &lt; job[<span class="number">0</span>] &lt;= out_ :</span><br><span class="line">                ans += (out_ - job[<span class="number">0</span>])</span><br><span class="line">                heapq.heappush(wt, job[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(wt) &gt; <span class="number">0</span>:</span><br><span class="line">            ans += <span class="built_in">len</span>(wt) * wt[<span class="number">0</span>] <span class="comment">#len(wt)ë¥¼ ê³±í•˜ëŠ” ì´ìœ ëŠ” ëŒ€ê¸°ì—´ì— ë“¤ì–´ê°„ ì‘ì—…ë„ ì‘ì—… ì¤‘ì¸ ì‹œê°„ì„ ë”í•´ì•¼í•˜ë¯€ë¡œ wt ê¸¸ì´ë¥¼ ê³±í•´ì¤€ë‹¤.</span></span><br><span class="line">            in_ = out_</span><br><span class="line">            out_ += heapq.heappop(wt)</span><br><span class="line">            cnt += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            out_ += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans // n</span><br></pre></td></tr></table></figure><hr><p>2019.10.07 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-disk_controller/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] The Report</title>
      <link>https://jx2lee.github.io/hackerrank-the_report/</link>
      <guid>https://jx2lee.github.io/hackerrank-the_report/</guid>
      <pubDate>Thu, 03 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;The Report&lt;/code&gt; ë¬¸ì œë¥¼ &lt;code&gt;Join&lt;/code&gt;ì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>The Report</code> ë¬¸ì œë¥¼ <code>Join</code>ì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>You are given two tables: <em>Students</em> and <em>Grades</em>. <em>Students</em> contains three columns <em>ID</em>, <em>Name</em> and <em>Marks</em>.</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12891/1443818166-a5c852caa0-1.png" alt="img"></p><p><em>Grades</em> contains the following data:</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12891/1443818137-69b76d805c-2.png" alt="img"></p><p><em>Ketty</em> gives <em>Eve</em> a task to generate a report containing three columns: <em>Name</em>, <em>Grade</em> and <em>Mark</em>. <em>Ketty</em> doesnâ€™t want the NAMES of those students who received a grade lower than <em>8</em>. The report must be in descending order by grade â€“ i.e. higher grades are entered first. If there is more than one student with the same grade (8-10) assigned to them, order those particular students by their name alphabetically. Finally, if the grade is lower than 8, use â€œNULLâ€ as their name and list them by their grades in descending order. If there is more than one student with the same grade (1-7) assigned to them, order those particular students by their marks in ascending order.</p><p>Write a query to help Eve.</p><p><strong>Sample Input</strong></p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12891/1443818093-b79f376ec1-3.png" alt="img"></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Maria 10 99</span><br><span class="line">Jane 9 81</span><br><span class="line">Julia 9 88 </span><br><span class="line">Scarlet 8 78</span><br><span class="line">NULL 7 63</span><br><span class="line">NULL 7 68</span><br></pre></td></tr></table></figure><p><strong>Note</strong></p><p>Print â€œNULLâ€  as the name if the grade is less than 8.</p><p><strong>Explanation</strong></p><p>Consider the following table with the grades assigned to the students:</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12891/1443818026-0b3af8db30-4.png" alt="img"></p><p>So, the following students got <em>8</em>, <em>9</em> or <em>10</em> grades:</p><ul><li><em>Maria (grade 10)</em></li><li><em>Jane (grade 9)</em></li><li><em>Julia (grade 9)</em></li><li><em>Scarlet (grade 8)</em></li></ul><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p><code>order by</code> ì— nameì´ <code>NULL</code>ì¸ í•™ìƒë“¤ ì¤‘ ê°™ì€ Gradeì´ë©´ ì ìˆ˜ë¥¼ <code>ì˜¤ë¦„ì°¨ìˆœ</code> ì •ë ¬í•  ë•Œ í—·ê°ˆë ¸ë‹¤. <code>name</code> ì •ë ¬ í›„ <code>marks</code>ë¡œ ì •ë ¬í•˜ë©´ ëë‚˜ëŠ” ë¬¸ì œ. ê·¸ë¦¬ê³  ì²˜ìŒì—” <code>Union</code>ìœ¼ë¡œ ë¬¸ì œë¥¼ ì ‘ê·¼í–ˆëŠ”ë° <code>case</code>ë¬¸ìœ¼ë¡œ ì‰½ê²Œ í’€ ìˆ˜ ìˆì—ˆë‹¤.</p><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="keyword">case</span></span><br><span class="line">        <span class="keyword">when</span> g.grade &lt; <span class="number">8</span> <span class="keyword">then</span> <span class="literal">null</span></span><br><span class="line">        <span class="keyword">else</span> s.name</span><br><span class="line">    <span class="keyword">end</span>, g.grade, s.marks</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    students <span class="keyword">as</span> s</span><br><span class="line"><span class="keyword">join</span> grades <span class="keyword">as</span> g <span class="keyword">on</span> s.marks <span class="keyword">between</span> g.min_mark <span class="keyword">and</span> g.max_mark</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">    g.grade <span class="keyword">desc</span>, s.name, s.marks;</span><br></pre></td></tr></table></figure><hr><p>2019.10.04 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-the_report/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Weather Observation Station 20</title>
      <link>https://jx2lee.github.io/hackerrank-weather_observation_station_20/</link>
      <guid>https://jx2lee.github.io/hackerrank-weather_observation_station_20/</guid>
      <pubDate>Tue, 01 Oct 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Weather Observation Station 20&lt;/code&gt; ë¬¸ì œë¥¼ &lt;code&gt;ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜&lt;/code&gt;ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Weather Observation Station 20</code> ë¬¸ì œë¥¼ <code>ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜</code>ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>A <em>median</em> is defined as a number separating the higher half of a data set from the lower half. Query the <em>median</em> of the <em>Northern Latitudes</em> (<em>LAT_N</em>) from <strong>STATION</strong> and round your answer to  decimal places.</p><p><strong>Input Format</strong></p><p>The <strong>STATION</strong> table is described as follows:</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/9336/1449345840-5f0a551030-Station.jpg" alt="Station.jpg"></p><p>where <em>LAT_N</em> is the northern latitude and <em>LONG_W</em> is the western longitude.</p><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p><code>ì‚¬ìš©ì ì •ì˜ ë³€ìˆ˜</code>ë¥¼ ì´ìš©í•´ <code>median</code>ì„ êµ¬í•˜ëŠ” ë¬¸ì œì´ë‹¤.</p><p><code>row index</code>ê°€ 1ë¶€í„° ì‹œì‘í•˜ë©° <code>LAT_N</code>ì„ ê¸°ì¤€ìœ¼ë¡œ <code>sorting</code>ëœ í…Œì´ë¸”ì—ì„œ, <code>index</code>ê°€ <code>@ct/2.0, @ct/2.0+1</code> ë²”ìœ„ì¼ ê²½ìš° ì¡°íšŒí•˜ëŠ” queryë¥¼ ì‘ì„±í•˜ì˜€ë‹¤. ì—¬ê¸°ì„  <code>@ct</code>ëŠ” median ê³„ì‚°ì„ ìœ„í•´ í…Œì´ë¸” ì „ì²´ í–‰ì„ ëœ»í•œë‹¤.</p><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @row_id = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">set</span> @ct = (<span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> station);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="keyword">round</span>(<span class="keyword">avg</span>(LAT_N), <span class="number">4</span>)</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">(<span class="keyword">select</span> * <span class="keyword">from</span> station <span class="keyword">order</span> <span class="keyword">by</span> LAT_N) <span class="keyword">as</span> <span class="keyword">sample</span></span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">(<span class="keyword">select</span> @row_id := @row_id + <span class="number">1</span>) <span class="keyword">between</span> @ct/<span class="number">2.0</span> <span class="keyword">and</span> @ct/<span class="number">2.0</span> + <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>2019.10.02 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-weather_observation_station_20/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ì˜ˆì‚°</title>
      <link>https://jx2lee.github.io/programmers-budgets/</link>
      <guid>https://jx2lee.github.io/programmers-budgets/</guid>
      <pubDate>Mon, 30 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì •í•´ì§„ ì´ì•¡ ì´í•˜ì—ì„œ ê°€ëŠ¥í•œ í•œ ìµœëŒ€ ì˜ˆì‚°ì„ ë°°ì •í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ì •í•´ì§„ ì´ì•¡ ì´í•˜ì—ì„œ ê°€ëŠ¥í•œ í•œ ìµœëŒ€ ì˜ˆì‚°ì„ ë°°ì •í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.</p><a id="more"></a><h2 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h2><h3 id="ë¬¸ì œ-ì„¤ëª…-1"><a href="#ë¬¸ì œ-ì„¤ëª…-1" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h3><p>êµ­ê°€ì˜ ì—­í•  ì¤‘ í•˜ë‚˜ëŠ” ì—¬ëŸ¬ ì§€ë°©ì˜ ì˜ˆì‚°ìš”ì²­ì„ ì‹¬ì‚¬í•˜ì—¬ êµ­ê°€ì˜ ì˜ˆì‚°ì„ ë¶„ë°°í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. êµ­ê°€ì˜ˆì‚°ì˜ ì´ì•¡ì€ ë¯¸ë¦¬ ì •í•´ì ¸ ìˆì–´ì„œ ëª¨ë“  ì˜ˆì‚°ìš”ì²­ì„ ë°°ì •í•´ ì£¼ê¸°ëŠ” ì–´ë ¤ìš¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì •í•´ì§„ ì´ì•¡ ì´í•˜ì—ì„œ <strong>ê°€ëŠ¥í•œ í•œ ìµœëŒ€ì˜</strong> ì´ ì˜ˆì‚°ì„ ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ë°°ì •í•©ë‹ˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. ëª¨ë“  ìš”ì²­ì´ ë°°ì •ë  ìˆ˜ ìˆëŠ” ê²½ìš°ì—ëŠ” ìš”ì²­í•œ ê¸ˆì•¡ì„ ê·¸ëŒ€ë¡œ ë°°ì •í•©ë‹ˆë‹¤.</span><br><span class="line">2. ëª¨ë“  ìš”ì²­ì´ ë°°ì •ë  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ” íŠ¹ì •í•œ ì •ìˆ˜ ìƒí•œì•¡ì„ ê³„ì‚°í•˜ì—¬ ê·¸ ì´ìƒì¸ ì˜ˆì‚°ìš”ì²­ì—ëŠ” ëª¨ë‘ ìƒí•œì•¡ì„ ë°°ì •í•©ë‹ˆë‹¤. </span><br><span class="line">   ìƒí•œì•¡ ì´í•˜ì˜ ì˜ˆì‚°ìš”ì²­ì— ëŒ€í•´ì„œëŠ” ìš”ì²­í•œ ê¸ˆì•¡ì„ ê·¸ëŒ€ë¡œ ë°°ì •í•©ë‹ˆë‹¤. </span><br></pre></td></tr></table></figure><p>ì˜ˆë¥¼ ë“¤ì–´, ì „ì²´ êµ­ê°€ì˜ˆì‚°ì´ 485ì´ê³  4ê°œ ì§€ë°©ì˜ ì˜ˆì‚°ìš”ì²­ì´ ê°ê° 120, 110, 140, 150ì¼ ë•Œ, ìƒí•œì•¡ì„ 127ë¡œ ì¡ìœ¼ë©´ ìœ„ì˜ ìš”ì²­ë“¤ì— ëŒ€í•´ì„œ ê°ê° 120, 110, 127, 127ì„ ë°°ì •í•˜ê³  ê·¸ í•©ì´ 484ë¡œ ê°€ëŠ¥í•œ ìµœëŒ€ê°€ ë©ë‹ˆë‹¤.<br>ê° ì§€ë°©ì—ì„œ ìš”ì²­í•˜ëŠ” ì˜ˆì‚°ì´ ë‹´ê¸´ ë°°ì—´ budgetsê³¼ ì´ ì˜ˆì‚° Mì´ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ìœ„ì˜ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” ìƒí•œì•¡ì„ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</p><h3 id="ì œí•œ-ì‚¬í•­"><a href="#ì œí•œ-ì‚¬í•­" class="headerlink" title="ì œí•œ ì‚¬í•­"></a>ì œí•œ ì‚¬í•­</h3><ul><li>ì§€ë°©ì˜ ìˆ˜ëŠ” 3 ì´ìƒ 100,000 ì´í•˜ì¸ ìì—°ìˆ˜ì…ë‹ˆë‹¤.</li><li>ê° ì§€ë°©ì—ì„œ ìš”ì²­í•˜ëŠ” ì˜ˆì‚°ì€ 1 ì´ìƒ 100,000 ì´í•˜ì¸ ìì—°ìˆ˜ì…ë‹ˆë‹¤.</li><li>ì´ ì˜ˆì‚°ì€ <code>ì§€ë°©ì˜ ìˆ˜</code> ì´ìƒ 1,000,000,000 ì´í•˜ì¸ ìì—°ìˆ˜ì…ë‹ˆë‹¤.</li></ul><h3 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h3><table><thead><tr><th>budgets</th><th>M</th><th>return</th></tr></thead><tbody><tr><td>[120, 110, 140, 150]</td><td>485</td><td>127</td></tr></tbody></table><p><a href="https://www.digitalculture.or.kr/koi/selectOlymPiadDissentList.do">ì¶œì²˜</a></p><hr><p>â€» ê³µì§€ - 2019ë…„ 3ì›” 15ì¼, í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ê°€ ê°•í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p>ì´ë²ˆ ì—…ë°ì´íŠ¸ë¡œ ì¸í•´ ì§€ë°©ì˜ ìˆ˜ê°€ ìµœëŒ€ 10,000ê°œì—ì„œ 100,000ê°œë¡œ ëŠ˜ì–´ë‚¬ìœ¼ë©°, ì´ì— ë”°ë¼ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.</p><p>ì´ë¡œ ì¸í•´ ì´ì „ì— í†µê³¼í•˜ë˜ ì½”ë“œê°€ ë” ì´ìƒ í†µê³¼í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><h2 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h2><p><code>ì´ë¶„ íƒìƒ‰</code>ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.. <code>left</code>ì™€ <code>rigth</code>ì˜ ì¤‘ê°„ê°’ <code>mid</code>ë¥¼ êµ¬í•´ ë§¤ ë²ˆ ì´ì•¡ <code>M</code>ì„ ìµœëŒ€í•œ ë§ì¶˜ë‹¤. ë§Œì•½ <code>M</code>ë³´ë‹¤ ì‘ìœ¼ë©´ <code>left +1</code>, <code>M</code>ë³´ë‹¤ í¬ë©´ <code>right -1</code>ë¡œ ì´ë¶„ íƒìƒ‰í•œë‹¤.</p><ul><li>ë³€ìˆ˜ ì„¤ëª…<ul><li><code>res</code> : <code>left mid right</code>ì— ë”°ë¥¸ ì´ ì˜ˆì‚°ì•¡</li><li><code>left, mid, right</code> : ìµœì†Œ, ìµœëŒ€ì— ë”°ë¥¸ ì¤‘ê°„ê°’<em>(ì´ë¶„ íƒìƒ‰ì„ ìœ„í•´)</em></li></ul></li></ul><h2 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h2><h3 id="í‹€ë¦°-ì½”ë“œ"><a href="#í‹€ë¦°-ì½”ë“œ" class="headerlink" title="í‹€ë¦° ì½”ë“œ"></a>í‹€ë¦° ì½”ë“œ</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">budgets, M</span>):</span></span><br><span class="line">    sorted_budgets = <span class="built_in">sorted</span>(budgets)</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> M &gt; <span class="number">0</span>:</span><br><span class="line">        tmp = sorted_budgets[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> tmp &lt; M // <span class="built_in">len</span>(sorted_budgets):</span><br><span class="line">            res = tmp</span><br><span class="line">            M -= tmp</span><br><span class="line">            sorted_budgets.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res = M // <span class="built_in">len</span>(sorted_budgets)</span><br><span class="line">            M -= res</span><br><span class="line">            sorted_budgets.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(sorted_budgets) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h3 id="ë§ì€-ì½”ë“œ"><a href="#ë§ì€-ì½”ë“œ" class="headerlink" title="ë§ì€ ì½”ë“œ"></a>ë§ì€ ì½”ë“œ</h3><p><a href="https://codedrive.tistory.com/47">ì°¸ê³  blog</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">budgets, M</span>):</span></span><br><span class="line">    left, right, tmp = <span class="number">0</span>, <span class="built_in">max</span>(budgets), <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> right &gt;= left:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        res = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> budget <span class="keyword">in</span> budgets:</span><br><span class="line">            <span class="keyword">if</span> mid &gt; budget:</span><br><span class="line">                res += budget</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                res += mid</span><br><span class="line">        <span class="keyword">if</span> res &gt; M:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            answer = mid</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><hr><p>2019.10.01 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-budgets/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë‹¨ì–´ ë³€í™˜</title>
      <link>https://jx2lee.github.io/programmers-convert_word/</link>
      <guid>https://jx2lee.github.io/programmers-convert_word/</guid>
      <pubDate>Mon, 30 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;íŠ¹ì • ê¸°ì¤€ì„ ê°€ì§€ê³  ë‹¨ì–´ë¥¼ ë³€í™˜í•  ë•Œ ìµœì†Œ íšŸìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>íŠ¹ì • ê¸°ì¤€ì„ ê°€ì§€ê³  ë‹¨ì–´ë¥¼ ë³€í™˜í•  ë•Œ ìµœì†Œ íšŸìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤.</p><a id="more"></a><h2 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h2><p>ë‘ ê°œì˜ ë‹¨ì–´ begin, targetê³¼ ë‹¨ì–´ì˜ ì§‘í•© wordsê°€ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ê·œì¹™ì„ ì´ìš©í•˜ì—¬ beginì—ì„œ targetìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê°€ì¥ ì§§ì€ ë³€í™˜ ê³¼ì •ì„ ì°¾ìœ¼ë ¤ê³  í•©ë‹ˆë‹¤.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. í•œ ë²ˆì— í•œ ê°œì˜ ì•ŒíŒŒë²³ë§Œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span><br><span class="line">2. wordsì— ìˆëŠ” ë‹¨ì–´ë¡œë§Œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span><br></pre></td></tr></table></figure><p>ì˜ˆë¥¼ ë“¤ì–´ beginì´ hit, targetê°€ cog, wordsê°€ [hot,dot,dog,lot,log,cog]ë¼ë©´ hit -&gt; hot -&gt; dot -&gt; dog -&gt; cogì™€ ê°™ì´ 4ë‹¨ê³„ë¥¼ ê±°ì³ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><p>ë‘ ê°œì˜ ë‹¨ì–´ begin, targetê³¼ ë‹¨ì–´ì˜ ì§‘í•© wordsê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ìµœì†Œ ëª‡ ë‹¨ê³„ì˜ ê³¼ì •ì„ ê±°ì³ beginì„ targetìœ¼ë¡œ ë³€í™˜í•  ìˆ˜ ìˆëŠ”ì§€ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</p><h3 id="ì œí•œì‚¬í•­"><a href="#ì œí•œì‚¬í•­" class="headerlink" title="ì œí•œì‚¬í•­"></a>ì œí•œì‚¬í•­</h3><ul><li>ê° ë‹¨ì–´ëŠ” ì•ŒíŒŒë²³ ì†Œë¬¸ìë¡œë§Œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</li><li>ê° ë‹¨ì–´ì˜ ê¸¸ì´ëŠ” 3 ì´ìƒ 10 ì´í•˜ì´ë©° ëª¨ë“  ë‹¨ì–´ì˜ ê¸¸ì´ëŠ” ê°™ìŠµë‹ˆë‹¤.</li><li>wordsì—ëŠ” 3ê°œ ì´ìƒ 50ê°œ ì´í•˜ì˜ ë‹¨ì–´ê°€ ìˆìœ¼ë©° ì¤‘ë³µë˜ëŠ” ë‹¨ì–´ëŠ” ì—†ìŠµë‹ˆë‹¤.</li><li>beginê³¼ targetì€ ê°™ì§€ ì•ŠìŠµë‹ˆë‹¤.</li><li>ë³€í™˜í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ì—ëŠ” 0ë¥¼ return í•©ë‹ˆë‹¤.</li></ul><h3 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h3><table><thead><tr><th>begin</th><th>target</th><th>words</th><th>return</th></tr></thead><tbody><tr><td>hit</td><td>cog</td><td>[hot, dot, dog, lot, log, cog]</td><td>4</td></tr><tr><td>hit</td><td>cog</td><td>[hot, dot, dog, lot, log]</td><td>0</td></tr></tbody></table><h3 id="ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…"><a href="#ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…"></a>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</h3><p>ì˜ˆì œ #1<br>ë¬¸ì œì— ë‚˜ì˜¨ ì˜ˆì™€ ê°™ìŠµë‹ˆë‹¤.</p><p>ì˜ˆì œ #2<br>targetì¸ cogëŠ” words ì•ˆì— ì—†ê¸° ë•Œë¬¸ì— ë³€í™˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p><h2 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h2><p><code>DFS/BFS</code> ë¬¸ì œë¡œ ì‹¤íŒ¨í•˜ì—¬ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì˜€ë‹¤. <code>words</code>ê°€ ë¹ˆ ë¦¬ìŠ¤íƒ€ê°€ ë  ë•Œê¹Œì§€ íƒìƒ‰ì„ í†µí•´ <code>ë¬¸ì í•œ ê°œë§Œ ë³€í˜•ëœ ë‹¨ì–´</code>ë¥¼ <code>cnt</code>ë³€ìˆ˜ë¥¼ ì´ìš©í•´ ì°¾ê³ , <code>tmp</code>ë¥¼ ê³„ì†í•´ì„œ ì—…ë°ì´íŠ¸ í•´ë‚˜ê°„ë‹¤. ì´í›„ <code>tmp</code>ì•ˆì— <code>target word</code>ê°€ í¬í•¨ë˜ë©´ <code>while íšŸìˆ˜</code>ë¥¼ <code>return</code>í•˜ê³ , ì•„ë‹ˆë©´ <code>answer = tmp</code>ë¡œ ê³„ì†í•´ì„œ ì°¾ì•„ë‚˜ê°€ëŠ” ë°©ë²•ìœ¼ë¡œ í’€ ìˆ˜ ìˆë‹¤.</p><ul><li>ë³€ìˆ˜<ul><li><code>answer</code> : íƒìƒ‰ì„ ì‹œì‘í•˜ëŠ” ë‹¨ì–´ë¥¼ ì €ì¥í•˜ëŠ” ë³€ìˆ˜</li><li><code>res</code> : ë¬¸ì œì˜ ê²°ê´ê°’</li><li><code>tmp</code> : ë³€í™˜ë  ë‹¨ì–´ë“¤ì˜ í›„ë³´</li><li><code>cnt</code> : í•œ ë¬¸ìë§Œ ë‹¤ë¥¸ ë‹¨ì–´ë¥¼ ë½‘ê¸°ìœ„í•œ ë³€ìˆ˜ <em>(cnt == 1)</em></li></ul></li></ul><h2 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">begin, target, words</span>):</span></span><br><span class="line">    answer = [begin]</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> target <span class="keyword">in</span> words:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> words:</span><br><span class="line">        <span class="keyword">for</span> ans <span class="keyword">in</span> answer:</span><br><span class="line">            tmp = []</span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">                cnt = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ans)):</span><br><span class="line">                    <span class="keyword">if</span> ans[i] != word[i]:</span><br><span class="line">                        cnt += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> cnt == <span class="number">2</span>:</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">if</span> cnt == <span class="number">1</span>:</span><br><span class="line">                    tmp.append(word)</span><br><span class="line">                    words.remove(word)</span><br><span class="line">        res += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> target <span class="keyword">in</span> tmp:</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            answer = tmp</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><hr><p>2019.10.01 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-convert_word/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Occupations</title>
      <link>https://jx2lee.github.io/hackerrank-occupations/</link>
      <guid>https://jx2lee.github.io/hackerrank-occupations/</guid>
      <pubDate>Thu, 26 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Occupations&lt;/code&gt; ë¬¸ì œë¥¼ &lt;code&gt;pivot&lt;/code&gt;ì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Occupations</code> ë¬¸ì œë¥¼ <code>pivot</code>ì„ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p><a href="https://en.wikipedia.org/wiki/Pivot_table">Pivot</a> the <em>Occupation</em> column in <strong>OCCUPATIONS</strong> so that each <em>Name</em> is sorted alphabetically and displayed underneath its corresponding <em>Occupation</em>. The output column headers should be <em>Doctor</em>, <em>Professor</em>, <em>Singer</em>, and <em>Actor</em>, respectively.</p><p><strong>Note:</strong> Print <strong>NULL</strong> when there are no more names corresponding to an occupation.</p><p><strong>Input Format</strong></p><p>The <strong>OCCUPATIONS</strong> table is described as follows:</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12889/1443816414-2a465532e7-1.png" alt="img"></p><p><em>Occupation</em> will only contain one of the following values: <strong>Doctor</strong>, <strong>Professor</strong>, <strong>Singer</strong> or <strong>Actor</strong>.</p><p><strong>Sample Input</strong></p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12890/1443817648-1b2b8add45-2.png" alt="img"></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Jenny    Ashley     Meera  Jane</span><br><span class="line">Samantha Christeen  Priya  Julia</span><br><span class="line">NULL     Ketty      NULL   Maria</span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>The first column is an alphabetically ordered list of Doctor names.<br>The second column is an alphabetically ordered list of Professor names.<br>The third column is an alphabetically ordered list of Singer names.<br>The fourth column is an alphabetically ordered list of Actor names.<br>The empty cell data for columns with less than the maximum number of names per occupation (in this case, the Professor and Actor columns) are filled with <strong>NULL</strong> values.</p><h3 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h3><ul><li>ë³€ìˆ˜ ì„¤ì •ê³¼<em>(set @~)</em> caseë¬¸ì„ ì´ìš©<ul><li>set @[ë³€ìˆ˜ëª…] = [ê°’]</li><li>case ì ˆì€ ìœ„ ë¬¸ì œ ì°¸ê³ </li></ul></li><li>from ì ˆì— <code>min</code>ëŒ€ì‹  <code>max</code>ë¥¼ í•´ë„ ê²°ê³¼ëŠ” ë™ì¼</li></ul><h3 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @drow=<span class="number">0</span>, @prow=<span class="number">0</span>, @srow=<span class="number">0</span>, @arow=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">min</span>(doctor), <span class="keyword">min</span>(professor), <span class="keyword">min</span>(singer), <span class="keyword">min</span>(actor)</span><br><span class="line"><span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">case</span> occupation</span><br><span class="line">        <span class="keyword">when</span> <span class="string">&#x27;Doctor&#x27;</span>       <span class="keyword">then</span> @drow := @drow + <span class="number">1</span></span><br><span class="line">        <span class="keyword">when</span> <span class="string">&#x27;Professor&#x27;</span>    <span class="keyword">then</span> @prow := @prow + <span class="number">1</span></span><br><span class="line">        <span class="keyword">when</span> <span class="string">&#x27;Singer&#x27;</span>       <span class="keyword">then</span> @srow := @srow + <span class="number">1</span></span><br><span class="line">        <span class="keyword">when</span> <span class="string">&#x27;Actor&#x27;</span>        <span class="keyword">then</span> @arow := @arow + <span class="number">1</span></span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">as</span> <span class="keyword">row</span>,</span><br><span class="line">        <span class="keyword">if</span>(occupation=<span class="string">&#x27;Doctor&#x27;</span>, <span class="keyword">name</span>, <span class="literal">null</span>) <span class="keyword">as</span> doctor,</span><br><span class="line">        <span class="keyword">if</span>(occupation=<span class="string">&#x27;Professor&#x27;</span>, <span class="keyword">name</span>, <span class="literal">null</span>) <span class="keyword">as</span> professor,</span><br><span class="line">        <span class="keyword">if</span>(occupation=<span class="string">&#x27;Singer&#x27;</span>, <span class="keyword">name</span>, <span class="literal">null</span>) <span class="keyword">as</span> singer,</span><br><span class="line">        <span class="keyword">if</span>(occupation=<span class="string">&#x27;Actor&#x27;</span>, <span class="keyword">name</span>, <span class="literal">null</span>) <span class="keyword">as</span> actor</span><br><span class="line">    <span class="keyword">from</span> occupations</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">name</span></span><br><span class="line">) <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">row</span>;</span><br></pre></td></tr></table></figure><hr><p>2019.09.27 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-occupations/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[SQL] Type of Triangle</title>
      <link>https://jx2lee.github.io/hackerrank-type_of_triangle/</link>
      <guid>https://jx2lee.github.io/hackerrank-type_of_triangle/</guid>
      <pubDate>Thu, 26 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;hackerrank&lt;/code&gt;ì—ì„œ ì œê³µí•˜ëŠ” &lt;code&gt;Type of Triangle&lt;/code&gt; ë¬¸ì œë¥¼ &lt;code&gt;case&lt;/code&gt;ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p><code>hackerrank</code>ì—ì„œ ì œê³µí•˜ëŠ” <code>Type of Triangle</code> ë¬¸ì œë¥¼ <code>case</code>ë¥¼ í™œìš©í•´ í•´ê²°í•˜ì˜€ë‹¤.</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>Write a query identifying the <em>type</em> of each record in the <strong>TRIANGLES</strong> table using its three side lengths. Output one of the following statements for each record in the table:</p><ul><li><strong>Equilateral</strong>: Itâ€™s a triangle with  sides of equal length.</li><li><strong>Isosceles</strong>: Itâ€™s a triangle with  sides of equal length.</li><li><strong>Scalene</strong>: Itâ€™s a triangle with  sides of differing lengths.</li><li><strong>Not A Triangle</strong>: The given values of <em>A</em>, <em>B</em>, and <em>C</em> donâ€™t form a triangle.</li></ul><p><strong>Input Format</strong></p><p>The <strong>TRIANGLES</strong> table is described as follows:</p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12887/1443815629-ac2a843fb7-1.png" alt="img"></p><p>Each row in the table denotes the lengths of each of a triangleâ€™s three sides.</p><p><strong>Sample Input</strong></p><p><img src="https://s3.amazonaws.com/hr-challenge-images/12887/1443815827-cbfc1ca12b-2.png" alt="img"></p><p><strong>Sample Output</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Isosceles</span><br><span class="line">Equilateral</span><br><span class="line">Scalene</span><br><span class="line">Not A Triangle</span><br></pre></td></tr></table></figure><p><strong>Explanation</strong></p><p>Values in the tuple  form an Isosceles triangle, because .<br>Values in the tuple  form an Equilateral triangle, because . Values in the tuple  form a Scalene triangle, because .<br>Values in the tuple  cannot form a triangle because the combined value of sides  and  is not larger than that of side </p><h1 id="ì ‘ê·¼"><a href="#ì ‘ê·¼" class="headerlink" title="ì ‘ê·¼"></a>ì ‘ê·¼</h1><p><code>IF</code>ë¬¸ì„ ì‚¬ìš©í•˜ë ¤ë‹¤ <code>select</code>ì— <code>case::when-then</code>ì„ ì´ìš©í•˜ì˜€ë‹¤. ê·¸ë¦¬ê³  <code>Not a triangle</code> ì¡°ê±´ì„ ë¨¼ì € ì£¼ì§€ì•Šê³  ë‚˜ì¤‘ì— ì¤€ë‹¤ë©´<em>(Isosceles ì´í›„ì— ì¡°ê±´ì„ ì‚½ì…)</em> ê²°ê³¼ê°’ì´ ë‹¬ë¼ì§€ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤. <code>case</code>ë¬¸ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">case [column(ì„ íƒ)]</span><br><span class="line">when ~ then ~</span><br><span class="line">when ~ then ~</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h1 id="í•´ê²°"><a href="#í•´ê²°" class="headerlink" title="í•´ê²°"></a>í•´ê²°</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="keyword">case</span></span><br><span class="line">    <span class="keyword">when</span> a=b <span class="keyword">and</span> b=c <span class="keyword">then</span> <span class="string">&quot;Equilateral&quot;</span></span><br><span class="line">    <span class="keyword">when</span> a+b&lt;=c <span class="keyword">then</span> <span class="string">&quot;Not A Triangle&quot;</span></span><br><span class="line">    <span class="keyword">when</span> a+c&lt;=b <span class="keyword">then</span> <span class="string">&quot;Not A Triangle&quot;</span></span><br><span class="line">    <span class="keyword">when</span> b+c&lt;=a <span class="keyword">then</span> <span class="string">&quot;Not A Triangle&quot;</span></span><br><span class="line">    <span class="keyword">when</span> a=b <span class="keyword">and</span> a&lt;&gt;c <span class="keyword">then</span> <span class="string">&quot;Isosceles&quot;</span></span><br><span class="line">    <span class="keyword">when</span> a=c <span class="keyword">and</span> c&lt;&gt;b <span class="keyword">then</span> <span class="string">&quot;Isosceles&quot;</span></span><br><span class="line">    <span class="keyword">when</span> b=c <span class="keyword">and</span> c&lt;&gt;a <span class="keyword">then</span> <span class="string">&quot;Isosceles&quot;</span></span><br><span class="line">    <span class="keyword">when</span> a&lt;&gt;b <span class="keyword">and</span> b&lt;&gt;c <span class="keyword">then</span> <span class="string">&quot;Scalene&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">from</span> triangles;</span><br></pre></td></tr></table></figure><hr><p>2019.09.27 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/hackerrank-type_of_triangle/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë‹¨ì†ì¹´ë©”ë¼</title>
      <link>https://jx2lee.github.io/programmers-camera/</link>
      <guid>https://jx2lee.github.io/programmers-camera/</guid>
      <pubDate>Thu, 26 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë‹¨ì†ì¹´ë©”ë¼ë¥¼ ì¼ì • ì¡°ê±´ì— ë§ê²Œ ìµœì†Œë¡œ ì„¤ì¹˜í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë‹¨ì†ì¹´ë©”ë¼ë¥¼ ì¼ì • ì¡°ê±´ì— ë§ê²Œ ìµœì†Œë¡œ ì„¤ì¹˜í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><h2 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h2><p>ê³ ì†ë„ë¡œë¥¼ ì´ë™í•˜ëŠ” ëª¨ë“  ì°¨ëŸ‰ì´ ê³ ì†ë„ë¡œë¥¼ ì´ìš©í•˜ë©´ì„œ ë‹¨ì†ìš© ì¹´ë©”ë¼ë¥¼ í•œ ë²ˆì€ ë§Œë‚˜ë„ë¡ ì¹´ë©”ë¼ë¥¼ ì„¤ì¹˜í•˜ë ¤ê³  í•©ë‹ˆë‹¤.</p><p>ê³ ì†ë„ë¡œë¥¼ ì´ë™í•˜ëŠ” ì°¨ëŸ‰ì˜ ê²½ë¡œ routesê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ëª¨ë“  ì°¨ëŸ‰ì´ í•œ ë²ˆì€ ë‹¨ì†ìš© ì¹´ë©”ë¼ë¥¼ ë§Œë‚˜ë„ë¡ í•˜ë ¤ë©´ ìµœì†Œ ëª‡ ëŒ€ì˜ ì¹´ë©”ë¼ë¥¼ ì„¤ì¹˜í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•˜ì„¸ìš”.</p><p><strong>ì œí•œì‚¬í•­</strong></p><ul><li>ì°¨ëŸ‰ì˜ ëŒ€ìˆ˜ëŠ” 1ëŒ€ ì´ìƒ 10,000ëŒ€ ì´í•˜ì…ë‹ˆë‹¤.</li><li>routesì—ëŠ” ì°¨ëŸ‰ì˜ ì´ë™ ê²½ë¡œê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©° routes[i][0]ì—ëŠ” ië²ˆì§¸ ì°¨ëŸ‰ì´ ê³ ì†ë„ë¡œì— ì§„ì…í•œ ì§€ì , routes[i][1]ì—ëŠ” ië²ˆì§¸ ì°¨ëŸ‰ì´ ê³ ì†ë„ë¡œì—ì„œ ë‚˜ê°„ ì§€ì ì´ ì í˜€ ìˆìŠµë‹ˆë‹¤.</li><li>ì°¨ëŸ‰ì˜ ì§„ì…/ì§„ì¶œ ì§€ì ì— ì¹´ë©”ë¼ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ë„ ì¹´ë©”ë¼ë¥¼ ë§Œë‚œê²ƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.</li><li>ì°¨ëŸ‰ì˜ ì§„ì… ì§€ì , ì§„ì¶œ ì§€ì ì€ -30,000 ì´ìƒ 30,000 ì´í•˜ì…ë‹ˆë‹¤.</li></ul><p><strong>ì…ì¶œë ¥ ì˜ˆ</strong></p><table><thead><tr><th>routes</th><th>return</th></tr></thead><tbody><tr><td>[[-20,15], [-14,-5], [-18,-13], [-5,-3]]</td><td>2</td></tr></tbody></table><p><strong>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</strong></p><p>-5 ì§€ì ì— ì¹´ë©”ë¼ë¥¼ ì„¤ì¹˜í•˜ë©´ ë‘ ë²ˆì§¸, ë„¤ ë²ˆì§¸ ì°¨ëŸ‰ì´ ì¹´ë©”ë¼ë¥¼ ë§Œë‚©ë‹ˆë‹¤.</p><p>-15 ì§€ì ì— ì¹´ë©”ë¼ë¥¼ ì„¤ì¹˜í•˜ë©´ ì²« ë²ˆì§¸, ì„¸ ë²ˆì§¸ ì°¨ëŸ‰ì´ ì¹´ë©”ë¼ë¥¼ ë§Œë‚©ë‹ˆë‹¤.</p><h1 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h1><p> Greedy ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œ. ì…ë ¥ë°›ì€ <code>list</code>ë¥¼ <code>sorting (ë„ì°© ì§€ì ì„ ê¸°ì¤€ìœ¼ë¡œ)</code>í•˜ê³  <code>tmp</code>ë³€ìˆ˜ì™€ ì¶œë°œì§€ì ì„ ë¹„êµí•´ ì‘ë‹¤ë©´ í•´ë‹¹ ë²”ìœ„ì— í¬í•¨ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ <code>answer</code>ì„ ì¶”ê°€í•˜ë©° <code>tmp</code>ë¥¼ ê°±ì‹ í•´ì£¼ë©´ ëœë‹¤.</p><h1 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h1><p>ì•„ë˜ ì½”ë“œë¡œ í•´ê²°í•˜ì˜€ë‹¤. <em>(<a href="[https://ga0n.tistory.com/entry/%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%A8%B8%EC%8A%A4-%EB%8B%A8%EC%86%8D%EC%B9%B4%EB%A9%94%EB%9D%BC](https://ga0n.tistory.com/entry/í”„ë¡œê·¸ë˜ë¨¸ìŠ¤-ë‹¨ì†ì¹´ë©”ë¼)">ì°¸ê³ </a>)</em></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">routes</span>):</span></span><br><span class="line">    routes = <span class="built_in">sorted</span>(routes, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line">    answer = <span class="number">0</span></span><br><span class="line">    tmp = -<span class="number">100000000000</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> route <span class="keyword">in</span> routes:</span><br><span class="line">        <span class="keyword">if</span> tmp &lt; route[<span class="number">0</span>]:</span><br><span class="line">            answer += <span class="number">1</span></span><br><span class="line">            tmp = route[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><hr><p>2019.09.27 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-camera/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ê°€ì¥ ë¨¼ ë…¸ë“œ</title>
      <link>https://jx2lee.github.io/programmers-node/</link>
      <guid>https://jx2lee.github.io/programmers-node/</guid>
      <pubDate>Thu, 26 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë…¸ë“œë¥¼ ì—°ê²°í•˜ëŠ” ê·¸ë˜í”„ë¥¼ ì‘ì„±í•˜ê³  ë…¸ë“œ 1ì—ì„œ ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ë…¸ë“œ ê°¯ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë…¸ë“œë¥¼ ì—°ê²°í•˜ëŠ” ê·¸ë˜í”„ë¥¼ ì‘ì„±í•˜ê³  ë…¸ë“œ 1ì—ì„œ ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ë…¸ë“œ ê°¯ìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><h2 id="ë¬¸ì œ-ì„¤ëª…"><a href="#ë¬¸ì œ-ì„¤ëª…" class="headerlink" title="ë¬¸ì œ ì„¤ëª…"></a>ë¬¸ì œ ì„¤ëª…</h2><p>nê°œì˜ ë…¸ë“œê°€ ìˆëŠ” ê·¸ë˜í”„ê°€ ìˆìŠµë‹ˆë‹¤. ê° ë…¸ë“œëŠ” 1ë¶€í„° nê¹Œì§€ ë²ˆí˜¸ê°€ ì í˜€ìˆìŠµë‹ˆë‹¤. 1ë²ˆ ë…¸ë“œì—ì„œ ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ë…¸ë“œì˜ ê°¯ìˆ˜ë¥¼ êµ¬í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ë…¸ë“œë€ ìµœë‹¨ê²½ë¡œë¡œ ì´ë™í–ˆì„ ë•Œ ê°„ì„ ì˜ ê°œìˆ˜ê°€ ê°€ì¥ ë§ì€ ë…¸ë“œë“¤ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p><p>ë…¸ë“œì˜ ê°œìˆ˜ n, ê°„ì„ ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê¸´ 2ì°¨ì› ë°°ì—´ vertexê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, 1ë²ˆ ë…¸ë“œë¡œë¶€í„° ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ë…¸ë“œê°€ ëª‡ ê°œì¸ì§€ë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</p><h2 id="ì œí•œì‚¬í•­"><a href="#ì œí•œì‚¬í•­" class="headerlink" title="ì œí•œì‚¬í•­"></a>ì œí•œì‚¬í•­</h2><ul><li>ë…¸ë“œì˜ ê°œìˆ˜ nì€ 2 ì´ìƒ 20,000 ì´í•˜ì…ë‹ˆë‹¤.</li><li>ê°„ì„ ì€ ì–‘ë°©í–¥ì´ë©° ì´ 1ê°œ ì´ìƒ 50,000ê°œ ì´í•˜ì˜ ê°„ì„ ì´ ìˆìŠµë‹ˆë‹¤.</li><li>vertex ë°°ì—´ ê° í–‰ [a, b]ëŠ” aë²ˆ ë…¸ë“œì™€ bë²ˆ ë…¸ë“œ ì‚¬ì´ì— ê°„ì„ ì´ ìˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.</li></ul><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><table><thead><tr><th>n</th><th>vertex</th><th>return</th></tr></thead><tbody><tr><td>6</td><td>[[3, 6], [4, 3], [3, 2], [1, 3], [1, 2], [2, 4], [5, 2]]</td><td>3</td></tr></tbody></table><h2 id="ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…"><a href="#ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…"></a>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</h2><p>ì˜ˆì œì˜ ê·¸ë˜í”„ë¥¼ í‘œí˜„í•˜ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ê³ , 1ë²ˆ ë…¸ë“œì—ì„œ ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ë…¸ë“œëŠ” 4,5,6ë²ˆ ë…¸ë“œì…ë‹ˆë‹¤.</p><p><img src="https://grepp-programmers.s3.amazonaws.com/files/ybm/fadbae38bb/dec85ab5-0273-47b3-ba73-fc0b5f6be28a.png" alt="image.png"></p><h1 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h1><p>ê·¸ë˜í”„ ê´€ë ¨ ë¬¸ì œë¥¼ ì²˜ìŒ í’€ì–´ë³´ì•˜ë‹¤. ì–´ë–»ê²Œ ì ‘ê·¼í•´ì•¼ ë ì§€ë¥¼ ëª°ë¼ <a href="https://codedrive.tistory.com/189">êµ¬ê¸€ì—ì„œ ì°¾ì€ ì´ ë¸”ë¡œê·¸</a>ë¥¼ ìš°ì„  ì°¸ê³ í–ˆë‹¤. í•´ê²° ë°©ë²•ì˜ ê°„ë‹¨í•œ ìŠ¤ì¼€ì¹˜ëŠ” <code>1) ê° ë…¸ë“œë³„ ì¸ì ‘í•œ ë…¸ë“œ index êµ¬í•˜ê¸°</code>, <code>2) queueë¥¼ ì´ìš©í•´ ë°©ë¬¸ì—¬ë¶€(is_visit)ì´ Falseì¸ ê²½ìš° Trueë¡œ ë°”ê¿”ì£¼ë©° distance, queueë¥¼ ì—…ë°ì´íŠ¸</code>, <code>3) distance ë³€ìˆ˜ë¥¼ sortingí•˜ê³  maxê°’ì„ countí•˜ì—¬ return</code> ì´ë‹¤. ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li>ë³€ìˆ˜ ì„¤ì •<ul><li><code>graph</code> : ì¸ì ‘í•œ ë…¸ë“œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë³€ìˆ˜</li><li><code>distance</code> : ë…¸ë“œ 1ì—ì„œ ê° ë…¸ë“œ<code>index</code> ê¹Œì§€ì˜ ê±°ë¦¬</li><li><code>is_visit</code> : ë°©ë¬¸ ì—¬ë¶€ <em>(ëª¨ë‘ Falseë¡œ ì´ˆê¸°í™”, ë…¸ë“œ 1ì€ Trueë¡œ ë°”ê¾¸ê³  ì‹œì‘)</em></li><li><code>queue</code> : í ë³€ìˆ˜</li></ul></li><li>graph ë³€ìˆ˜ ì±„ìš°ê¸° <em>(ì—°ê²°ëœ ë…¸ë“œ append)</em></li><li>queueê°€ ë¹ˆ ë¦¬ìŠ¤íŠ¸ê°€ ë  ë•Œê¹Œì§€<ul><li><code>i</code> : queueì˜ ë§¨ ì²« ë²ˆì§¸ <code>index</code> ì¶”ì¶œ</li><li><code>j</code>ê°€ <code>graph[i]</code>ì•ˆ ì›ì†Œì¼ ë•Œ <em>(for)</em><ul><li>if <code>is_visit[j]</code> : False,<ul><li><code>is_visit[j]</code> = False</li><li><code>queue</code>ì— <code>j (ë…¸ë“œ index)</code> append</li><li><code>distance</code> update (+1)</li></ul></li></ul></li></ul></li><li><code>distance</code> ì •ë ¬ í›„ ì²« ë²ˆì§¸ ê°’<em>(max)</em> ì¹´ìš´íŠ¸ ê°’ return</li></ul><h1 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">n, edge</span>):</span></span><br><span class="line">    graph =[  [] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>) ]</span><br><span class="line">    distances = [ <span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n) ]</span><br><span class="line">    is_visit = [<span class="literal">False</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">    queue = [<span class="number">0</span>]</span><br><span class="line">    is_visit[<span class="number">0</span>] = <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ì—°ê²°ëœ node append</span></span><br><span class="line">    <span class="keyword">for</span> (a, b) <span class="keyword">in</span> edge:</span><br><span class="line">        graph[a-<span class="number">1</span>].append(b-<span class="number">1</span>)</span><br><span class="line">        graph[b-<span class="number">1</span>].append(a-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># queueë¥¼ ì´ìš©í•œ distance ê³„ì‚°</span></span><br><span class="line">    <span class="keyword">while</span> queue:</span><br><span class="line">        i = queue.pop(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> graph[i]:</span><br><span class="line">            <span class="keyword">if</span> is_visit[j] == <span class="literal">False</span>:</span><br><span class="line">                is_visit[j] = <span class="literal">True</span></span><br><span class="line">                queue.append(j)</span><br><span class="line">                distances[j] = distances[i] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># max distanceë¥¼ ê³„ì‚°í•œ í›„ count ê²°ê³¼ return</span></span><br><span class="line">    distances.sort(reverse=<span class="literal">True</span>)</span><br><span class="line">    answer = distances.count(distances[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><hr><p>2019.09.27 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-node/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ì„¬ ì—°ê²°í•˜ê¸°</title>
      <link>https://jx2lee.github.io/programmers-island/</link>
      <guid>https://jx2lee.github.io/programmers-island/</guid>
      <pubDate>Wed, 25 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ëª¨ë“  ì„¬ì„ ì—°ê²°í•  ë•Œ ìµœì†Œ ë¹„ìš©ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ëª¨ë“  ì„¬ì„ ì—°ê²°í•  ë•Œ ìµœì†Œ ë¹„ìš©ì„ êµ¬í•˜ëŠ” ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤</p><a id="more"></a><h2 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h2><p>nê°œì˜ ì„¬ ì‚¬ì´ì— ë‹¤ë¦¬ë¥¼ ê±´ì„¤í•˜ëŠ” ë¹„ìš©(costs)ì´ ì£¼ì–´ì§ˆ ë•Œ, ìµœì†Œì˜ ë¹„ìš©ìœ¼ë¡œ ëª¨ë“  ì„¬ì´ ì„œë¡œ í†µí–‰ ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“¤ ë•Œ í•„ìš”í•œ ìµœì†Œ ë¹„ìš©ì„ return í•˜ë„ë¡ solutionì„ ì™„ì„±í•˜ì„¸ìš”.</p><p>ë‹¤ë¦¬ë¥¼ ì—¬ëŸ¬ ë²ˆ ê±´ë„ˆë”ë¼ë„, ë„ë‹¬í•  ìˆ˜ë§Œ ìˆìœ¼ë©´ í†µí–‰ ê°€ëŠ¥í•˜ë‹¤ê³  ë´…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ A ì„¬ê³¼ B ì„¬ ì‚¬ì´ì— ë‹¤ë¦¬ê°€ ìˆê³ , B ì„¬ê³¼ C ì„¬ ì‚¬ì´ì— ë‹¤ë¦¬ê°€ ìˆìœ¼ë©´ A ì„¬ê³¼ C ì„¬ì€ ì„œë¡œ í†µí–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p><!-- more --><p><strong>ì œí•œì‚¬í•­</strong></p><ul><li>ì„¬ì˜ ê°œìˆ˜ nì€ 1 ì´ìƒ 100 ì´í•˜ì…ë‹ˆë‹¤.</li><li>costsì˜ ê¸¸ì´ëŠ” <code>((n-1) * n) / 2</code>ì´í•˜ì…ë‹ˆë‹¤.</li><li>ì„ì˜ì˜ iì— ëŒ€í•´, costs[i][0] ì™€ costs[i] [1]ì—ëŠ” ë‹¤ë¦¬ê°€ ì—°ê²°ë˜ëŠ” ë‘ ì„¬ì˜ ë²ˆí˜¸ê°€ ë“¤ì–´ìˆê³ , costs[i] [2]ì—ëŠ” ì´ ë‘ ì„¬ì„ ì—°ê²°í•˜ëŠ” ë‹¤ë¦¬ë¥¼ ê±´ì„¤í•  ë•Œ ë“œëŠ” ë¹„ìš©ì…ë‹ˆë‹¤.</li><li>ê°™ì€ ì—°ê²°ì€ ë‘ ë²ˆ ì£¼ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ ìˆœì„œê°€ ë°”ë€Œë”ë¼ë„ ê°™ì€ ì—°ê²°ë¡œ ë´…ë‹ˆë‹¤. ì¦‰ 0ê³¼ 1 ì‚¬ì´ë¥¼ ì—°ê²°í•˜ëŠ” ë¹„ìš©ì´ ì£¼ì–´ì¡Œì„ ë•Œ, 1ê³¼ 0ì˜ ë¹„ìš©ì´ ì£¼ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</li><li>ëª¨ë“  ì„¬ ì‚¬ì´ì˜ ë‹¤ë¦¬ ê±´ì„¤ ë¹„ìš©ì´ ì£¼ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ ê²½ìš°, ë‘ ì„¬ ì‚¬ì´ì˜ ê±´ì„¤ì´ ë¶ˆê°€ëŠ¥í•œ ê²ƒìœ¼ë¡œ ë´…ë‹ˆë‹¤.</li><li>ì—°ê²°í•  ìˆ˜ ì—†ëŠ” ì„¬ì€ ì£¼ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.</li></ul><p><strong>ì…ì¶œë ¥ ì˜ˆ</strong></p><table><thead><tr><th>n</th><th>costs</th><th>return</th></tr></thead><tbody><tr><td>4</td><td>[[0,1,1],[0,2,2],[1,2,5],[1,3,1],[2,3,8]]</td><td>4</td></tr></tbody></table><p><strong>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</strong></p><p>costsë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìœ¼ë©°, ì´ë•Œ ì´ˆë¡ìƒ‰ ê²½ë¡œë¡œ ì—°ê²°í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì ì€ ë¹„ìš©ìœ¼ë¡œ ëª¨ë‘ë¥¼ í†µí–‰í•  ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ” ë°©ë²•ì…ë‹ˆë‹¤.</p><p><img src="https://grepp-programmers.s3.amazonaws.com/files/production/13e2952057/f2746a8c-527c-4451-9a73-42129911fe17.png" alt="image.png"></p><h3 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h3><p>ì–´ë ¤ì›Œ ì—¬ëŸ¬ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì˜€ë‹¤. <code>conn</code>, <code>answer</code>ë³€ìˆ˜ë¥¼ ë°˜ë³µë¬¸ì„ ì´ìš©í•´ í’€ì—ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ë¡œì§ìœ¼ë¡œ êµ¬ì„±í•˜ì˜€ë‹¤.</p><ul><li><code>costs</code> ë¦¬ìŠ¤íŠ¸ ì •ë ¬ í›„ ë³€ìˆ˜ ì„¤ì •</li><li><code>conn</code> : ì—°ê²°ëœ ì„¬, <code>answer</code> : ë¹„ìš©</li><li><code>conn</code>ì˜ ê¸¸ì´ê°€ nì´ ë˜ì§€ ì•Šì„ ë•Œê¹Œì§€<ul><li><code>tmp</code> : ìµœì†Œ ë¹„êµë¥¼ ìœ„í•œ ë³€ìˆ˜, <code>idx</code> : <code>costs</code>ì˜ ì¸ë±ìŠ¤ <em>(í›‘ì–´ë³¸ costë¥¼ popí•˜ê¸° ìœ„í•œ ë³€ìˆ˜)</em></li><li><code>costs</code>ë¥¼ ëŒë©° <em>(for)</em><ul><li><code>costs[i][0] or costs[i][1]</code>ì´ <code>conn</code> ì— í¬í•¨ë˜ëŠ”ì§€ í™•ì¸</li><li>ë¹„ìš© ì €ì¥ì„ ìœ„í•´ <code>tmp</code>ë¥¼ ì´ìš©í•´ <code>costs[i][2]</code>ê°’ì„ ì €ì¥í•˜ê³  <code>idx</code> ì €ì¥</li></ul></li><li><code>costs</code>ë¥¼ í•œë²ˆ ë‹¤ í›‘ê³  <code>answer</code>ì— <code>tmp</code>ë§Œí¼ ë”í•œë‹¤.</li><li><code>conn</code>ì— ê°™ì€ ê·¸ë£¹ì˜ ì„¬ë“¤ì„ ì €ì¥í•œë‹¤ <em>(append)</em>, ì¤‘ë³µ ì €ì¥ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ <code>set</code>ìœ¼ë¡œ ì €ì¥í•œ ìˆ˜ <code>list()</code></li><li><code>idx</code>ë³€ìˆ˜ë¥¼ ì´ìš©í•´ <code>costs</code> pop</li></ul></li></ul><p>í’€ë‹¤ë³´ë©´ ë‚œì´ë„ê°€ ì‘¥ì‘¥ ì˜¬ë¼ê°€ëŠ” ëŠë‚Œì´ë‹¤. ë” ë…¸ë ¥í•´ë³´ì. </p><h3 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h3><p>ì•„ë˜ ì½”ë“œë¡œ í•´ê²°í•˜ì˜€ë‹¤. <a href="https://codedrive.tistory.com/164">ì°¸ê³ </a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">n, costs</span>):</span></span><br><span class="line">    costs.sort()</span><br><span class="line">    conn=[costs[<span class="number">0</span>][<span class="number">0</span>]]</span><br><span class="line">    answer = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">len</span>(conn)!=n:</span><br><span class="line">        tmp=<span class="number">1000000000000000</span></span><br><span class="line">        idx=<span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(costs)):</span><br><span class="line">            <span class="keyword">if</span> costs[i][<span class="number">0</span>] <span class="keyword">in</span> conn <span class="keyword">or</span> costs[i][<span class="number">1</span>] <span class="keyword">in</span> conn:</span><br><span class="line">                <span class="keyword">if</span> costs[i][<span class="number">0</span>] <span class="keyword">in</span> conn <span class="keyword">and</span> costs[i][<span class="number">1</span>] <span class="keyword">in</span> conn:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">if</span> tmp &gt; costs[i][<span class="number">2</span>]:</span><br><span class="line">                    tmp=costs[i][<span class="number">2</span>]</span><br><span class="line">                    idx=i</span><br><span class="line">        answer+=tmp</span><br><span class="line">        conn.append(costs[idx][<span class="number">0</span>])</span><br><span class="line">        conn.append(costs[idx][<span class="number">1</span>])</span><br><span class="line">        conn=<span class="built_in">list</span>(<span class="built_in">set</span>(conn))</span><br><span class="line">        costs.pop(idx)</span><br><span class="line">    <span class="keyword">return</span> answer</span><br></pre></td></tr></table></figure><hr><p>2019.09.26 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-island/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë„¤íŠ¸ì›Œí¬</title>
      <link>https://jx2lee.github.io/programmers-network/</link>
      <guid>https://jx2lee.github.io/programmers-network/</guid>
      <pubDate>Tue, 24 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;25ì¼ë¶€ë¡œ ë°±ì¤€ ëŒ€ì‹  &lt;code&gt;í”„ë¡œê·¸ë˜ë¨¸ìŠ¤&lt;/code&gt; ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤. ë§¤ì¼ í•œ ë¬¸ì œì”©, í’€ë‹¤ê°€ ëª»í’€ì–´ì„œ ì°¸ê³ í•´ í‘¼ ë¬¸ì œëŠ” ëª¨ë‘ ë¸”ë¡œê·¸ë¡œ ë‚¨ê¸°ì&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>25ì¼ë¶€ë¡œ ë°±ì¤€ ëŒ€ì‹  <code>í”„ë¡œê·¸ë˜ë¨¸ìŠ¤</code> ë¬¸ì œë¥¼ í’€ì–´ë³¸ë‹¤. ë§¤ì¼ í•œ ë¬¸ì œì”©, í’€ë‹¤ê°€ ëª»í’€ì–´ì„œ ì°¸ê³ í•´ í‘¼ ë¬¸ì œëŠ” ëª¨ë‘ ë¸”ë¡œê·¸ë¡œ ë‚¨ê¸°ì</p><a id="more"></a><h1 id="ë¬¸ì œ"><a href="#ë¬¸ì œ" class="headerlink" title="ë¬¸ì œ"></a>ë¬¸ì œ</h1><p>ë„¤íŠ¸ì›Œí¬ë€ ì»´í“¨í„° ìƒí˜¸ ê°„ì— ì •ë³´ë¥¼ êµí™˜í•  ìˆ˜ ìˆë„ë¡ ì—°ê²°ëœ í˜•íƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì»´í“¨í„° Aì™€ ì»´í“¨í„° Bê°€ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ìˆê³ , ì»´í“¨í„° Bì™€ ì»´í“¨í„° Cê°€ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆì„ ë•Œ ì»´í“¨í„° Aì™€ ì»´í“¨í„° Cë„ ê°„ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ì •ë³´ë¥¼ êµí™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì»´í“¨í„° A, B, CëŠ” ëª¨ë‘ ê°™ì€ ë„¤íŠ¸ì›Œí¬ ìƒì— ìˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p><!-- more --><p>ì»´í“¨í„°ì˜ ê°œìˆ˜ n, ì—°ê²°ì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê¸´ 2ì°¨ì› ë°°ì—´ computersê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ë„¤íŠ¸ì›Œí¬ì˜ ê°œìˆ˜ë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì‹œì˜¤.</p><h2 id="ì œí•œì‚¬í•­"><a href="#ì œí•œì‚¬í•­" class="headerlink" title="ì œí•œì‚¬í•­"></a>ì œí•œì‚¬í•­</h2><ul><li>ì»´í“¨í„°ì˜ ê°œìˆ˜ nì€ 1 ì´ìƒ 200 ì´í•˜ì¸ ìì—°ìˆ˜ì…ë‹ˆë‹¤.</li><li>ê° ì»´í“¨í„°ëŠ” 0ë¶€í„° <code>n-1</code>ì¸ ì •ìˆ˜ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.</li><li>ië²ˆ ì»´í“¨í„°ì™€ jë²ˆ ì»´í“¨í„°ê°€ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©´ computers[i][j]ë¥¼ 1ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.</li><li>computer[i][j]ëŠ” í•­ìƒ 1ì…ë‹ˆë‹¤.</li></ul><h2 id="ì…ì¶œë ¥-ì˜ˆ"><a href="#ì…ì¶œë ¥-ì˜ˆ" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ"></a>ì…ì¶œë ¥ ì˜ˆ</h2><table><thead><tr><th>n</th><th>computers</th><th>return</th></tr></thead><tbody><tr><td>3</td><td>[[1, 1, 0], [1, 1, 0], [0, 0, 1]]</td><td>2</td></tr><tr><td>3</td><td>[[1, 1, 0], [1, 1, 1], [0, 1, 1]]</td><td>1</td></tr></tbody></table><h2 id="ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…"><a href="#ì…ì¶œë ¥-ì˜ˆ-ì„¤ëª…" class="headerlink" title="ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…"></a>ì…ì¶œë ¥ ì˜ˆ ì„¤ëª…</h2><p>ì˜ˆì œ #1<br>ì•„ë˜ì™€ ê°™ì´ 2ê°œì˜ ë„¤íŠ¸ì›Œí¬ê°€ ìˆìŠµë‹ˆë‹¤.<br><img src="https://grepp-programmers.s3.amazonaws.com/files/ybm/5b61d6ca97/cc1e7816-b6d7-4649-98e0-e95ea2007fd7.png" alt="image0.png"></p><p>ì˜ˆì œ #2<br>ì•„ë˜ì™€ ê°™ì´ 1ê°œì˜ ë„¤íŠ¸ì›Œí¬ê°€ ìˆìŠµë‹ˆë‹¤.<br><img src="https://grepp-programmers.s3.amazonaws.com/files/ybm/7554746da2/edb61632-59f4-4799-9154-de9ca98c9e55.png" alt="image1.png"></p><h1 id="ë¬¸ì œ-ì ‘ê·¼"><a href="#ë¬¸ì œ-ì ‘ê·¼" class="headerlink" title="ë¬¸ì œ ì ‘ê·¼"></a>ë¬¸ì œ ì ‘ê·¼</h1><p>ì²˜ìŒì—ëŠ” stack ì„ ì´ìš©í•˜ì§€ ì•Šê³  ë¬¸ì œë¥¼ í’€ì–´ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ ì•„ë‹ˆë‚˜ ë‹¤ë¥¼ê¹Œ.. <code>ì‹œê°„ì´ˆê³¼</code>ê°€ ë‚¬ë‹¤. ê²°êµ­ êµ¬ê¸€ë§ì„ í†µí•´ í•œ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ë‹¤. ë¡œì§ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li>ì…ë ¥ë°›ì€ <code>n</code>ì„ í†µí•´ <code>êµ¬ì„±ì›ì´ ê°ìì¸ ê°ê°ì˜ ë„¤íŠ¸ì›Œí¬</code>ì„ <code>tuple</code>ë¡œ ìƒì„±í•œë‹¤.</li><li><code>i</code>ì™€ <code>j</code>ë¥¼ roofë¥¼ í†µí•´ <code>ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸(computers[i][j])</code> <ul><li>ì—°ê²°ë˜ì–´ ìˆë‹¤ë©´, ë‘ ì»´í“¨í„°ê°€ ì†í•œ <code>indexë¥¼ ì¶”ì¶œ</code>í•œë‹¤<em>(idx1, idx2)</em></li><li><code>idx1</code>ê°€ <code>idx2</code>ê°€ ë‹¤ë¥´ë‹¤ë©´, í•˜ë‚˜ë¡œ ë¬¶ì–´ì¤€ë‹¤(if ë’·ë¶€ë¶„)</li></ul></li></ul><p><code>hap</code> ë³€ìˆ˜ ìƒì„±ê³¼ <code>idx1 != idx2</code> ë¶€ë¶„ì´ ì´í•´ë˜ì§€ ì•Šì•„ ì •ë¦¬í•˜ëŠ”ë° ì‹œê°„ì´ ì˜¤ë˜ê±¸ë ¸ë‹¤. ì–´ì¨Œë“ , ì–‘ë°©í–¥ìœ¼ë¡œ ì—°ê²°ëœ ë„¤íŠ¸ì›Œí¬ëŠ” ëŒ€ê°ì„  ê¸°ì¤€ ìœ„ìª½ë§Œ ì‚´í´ë³´ë©´ ë˜ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨íˆ í•´ê²°í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.</p><blockquote><p> <em>(ê·¸ë¦¬ê³  stackì˜ ì¤‘ìš”ì„±..)</em></p></blockquote><h1 id="ë¬¸ì œ-í•´ê²°"><a href="#ë¬¸ì œ-í•´ê²°" class="headerlink" title="ë¬¸ì œ í•´ê²°"></a>ë¬¸ì œ í•´ê²°</h1><p>ì•„ë˜ ì½”ë“œë¡œ í•´ê²°í•˜ì˜€ë‹¤</p><p><a href="https://geonlee.tistory.com/54">ì°¸ê³ </a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solution</span>(<span class="params">n, computers</span>):</span></span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        res.append(&#123;i&#125;)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, n):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>, n):</span><br><span class="line">            <span class="keyword">if</span> computers[i][j] == <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">for</span> idx,st <span class="keyword">in</span> <span class="built_in">enumerate</span>(res):</span><br><span class="line">                    <span class="keyword">if</span> i <span class="keyword">in</span> res[idx]:</span><br><span class="line">                        idx1 = idx</span><br><span class="line">                    <span class="keyword">if</span> j <span class="keyword">in</span> res[idx]:</span><br><span class="line">                        idx2 = idx</span><br><span class="line">                <span class="keyword">if</span> idx1 != idx2:</span><br><span class="line">                    hap = res[idx1] | res[idx2]</span><br><span class="line">                    res.pop(<span class="built_in">min</span>(idx1,idx2))</span><br><span class="line">                    res.pop(<span class="built_in">max</span>(idx1,idx2))</span><br><span class="line">                    res.append(hap)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(res)</span><br></pre></td></tr></table></figure><hr><p>2019.09.25 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/programmers-network/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Install Docker</title>
      <link>https://jx2lee.github.io/cloud-install_docker/</link>
      <guid>https://jx2lee.github.io/cloud-install_docker/</guid>
      <pubDate>Sun, 22 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ë„ì»¤ ê°œë°œ í™˜ê²½ì„ ì…‹ì—…í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. docker clientëŠ” ìœˆë„ìš°/ë§¥ì—ì„œ ëŒë¦¬ê³  docker serverë¥¼ ì œì–´í•  ìˆ˜ ìˆì§€ë§Œ, docker containerëŠ” linux í™˜ê²½ì—ì„œ ë§Œë“¤ê³  ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ docker serverë¥¼ ë„ìš°ê¸° ìœ„í•´ì„œëŠ” ê°€ìƒ ë¨¸ì‹ ì´ë‚˜ ì›ê²© ì„œë²„ê°€ í•„ìš”í•˜ë‹¤.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ë„ì»¤ ê°œë°œ í™˜ê²½ì„ ì…‹ì—…í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¬ë‹¤. docker clientëŠ” ìœˆë„ìš°/ë§¥ì—ì„œ ëŒë¦¬ê³  docker serverë¥¼ ì œì–´í•  ìˆ˜ ìˆì§€ë§Œ, docker containerëŠ” linux í™˜ê²½ì—ì„œ ë§Œë“¤ê³  ì‹¤í–‰í•´ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ docker serverë¥¼ ë„ìš°ê¸° ìœ„í•´ì„œëŠ” ê°€ìƒ ë¨¸ì‹ ì´ë‚˜ ì›ê²© ì„œë²„ê°€ í•„ìš”í•˜ë‹¤.</p><a id="more"></a><h1 id="key-word"><a href="#key-word" class="headerlink" title="key word"></a>key word</h1><p>ì±…ì—ì„œ ë‹¤ë£¨ëŠ” ìš©ì–´ë“¤ì— ëŒ€í•´ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><p>docker client</p><p>ëŒ€ë¶€ë¶„ì˜ docker worflowë¥¼ ê´€ë¦¬, ì›ê²© docker serverì™€ í†µì‹ í•˜ëŠ” docker ëª…ë ¹ì–´</p></li><li><p>docker server</p><ul><li>docker ëª…ë ì–´ë¥¼ daemon ëª¨ë“œë¡œ ì‚¬ìš©, ì´ëŠ” ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì„ docker serverë¡œ ë§Œë“¤ê²Œ í•œë‹¤.</li><li>docker clientë¥¼ í†µí•´ containerë¥¼ ë°°í¬ / ì‹¤í–‰ / ì œê±°</li></ul></li><li><p>docker image</p><ul><li>í•˜ë‚˜ ì´ìƒì˜ íŒŒì¼ ì‹œìŠ¤í…œ ê³„ì¸µ</li><li>ë„ì»¤í™”(ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆë¡œ ìƒì„±ëœ)ëœ ì•± ì‹¤í–‰ì„ ìœ„í•œ ëª¨ë“  íŒŒì¼ë“¤ì˜ meta data í¬í•¨</li><li>í•˜ë‚˜ì˜ docker image -&gt; ì—¬ëŸ¬ hostì— ì¹´í”¼ ê°€ëŠ¥</li><li>Name, Tag : imageì˜ íŠ¹ì • realease í‘œì‹œ</li></ul></li><li><p>docker container</p><ul><li>docker imageì— ì˜í•´ ìƒì„±ë˜ëŠ” linux container</li><li>íŠ¹ì • containerëŠ” ë‹¨ í•˜ë‚˜, ë™ì¼ image ë‚´ container ë‹¤ì¤‘ ìƒì„± ê°€ëŠ¥</li></ul></li><li><p>atomic host(ì›ìì  í˜¸ìŠ¤íŠ¸)</p><ul><li>less, optimized ëœ CoreOSë‚˜ ì•„í† ë¯¹ í”„ë¡œì íŠ¸ ê°™ì€ OSì˜ ì´ë¯¸ì§€</li><li>container hosting &amp; OS ì—…ê·¸ë ˆì´ë“œ ì§€ì›</li></ul></li></ul><p><img src="https://t1.daumcdn.net/cfile/tistory/2636504256C431531A" alt="Docker Architecture"></p><center>[ì°¸ê³  - Docker Architecture]</center>ì•„ë˜ì™€ ê°™ì€ Docker í™˜ê²½ì„ êµ¬ì„±í•œë‹¤.<blockquote><ul><li>docker client : CentOS</li><li>docker server : docker clinetê°€ ì„¤ì¹˜ëœ CentOS</li></ul></blockquote><h1 id="Docker-Client"><a href="#Docker-Client" class="headerlink" title="Docker Client"></a>Docker Client</h1><p>ë¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œì—ì„œ Docker ì„¤ì¹˜ëŠ” Clientë§Œ ì„¤ì¹˜í•˜ë©´ Serverë„ í•¨ê»˜ ì„¤ì¹˜ëœë‹¤. <code>Yum</code> packageë¥¼ ì´ìš©í•´ Dockerë¥¼ ì„¤ì¹˜í•œë‹¤.</p><h2 id="old-version-ì‚­ì œ"><a href="#old-version-ì‚­ì œ" class="headerlink" title="old version ì‚­ì œ"></a>old version ì‚­ì œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[tibero@node5 ~]$ sudo yum remove docker \</span><br><span class="line">&gt;                   docker-client \</span><br><span class="line">&gt;                   docker-client-latest \</span><br><span class="line">&gt;                   docker-common \</span><br><span class="line">&gt;                   docker-latest \</span><br><span class="line">&gt;                   docker-latest-logrotate \</span><br><span class="line">&gt;                   docker-logrotate \</span><br><span class="line">&gt;                   docker-engine</span><br><span class="line">[sudo] password <span class="keyword">for</span> tibero: </span><br><span class="line">Loaded plugins: fastestmirror, langpacks</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker-client</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker-client-latest</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker-common</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker-latest</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker-latest-logrotate</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker-logrotate</span><br><span class="line">No Match <span class="keyword">for</span> argument: docker-engine</span><br><span class="line">No Packages marked <span class="keyword">for</span> removal</span><br></pre></td></tr></table></figure><h2 id="repositoryë¥¼-ì´ìš©í•œ-ì„¤ì¹˜"><a href="#repositoryë¥¼-ì´ìš©í•œ-ì„¤ì¹˜" class="headerlink" title="repositoryë¥¼ ì´ìš©í•œ ì„¤ì¹˜"></a>repositoryë¥¼ ì´ìš©í•œ ì„¤ì¹˜</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y yum-utils \</span><br><span class="line">  device-mapper-persistent-data \</span><br><span class="line">  lvm2</span><br><span class="line">$ sudo yum-config-manager \</span><br><span class="line">       --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><h1 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> docker <span class="comment"># ì„œë²„ ì¬ê¸°ë™ ì´í›„ ìë™ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì‹œì‘ì„ ìœ„í•¨</span></span><br><span class="line">$ sudo systemctl start docker</span><br></pre></td></tr></table></figure><blockquote><ul><li><em>Docker ëª…ë ¹ì–´ë¥¼ sudo ì—†ì´ ì‚¬ìš©ì„ ì›í•˜ë©´ docker ì‹¤í–‰ê¶Œí•œì„ ê°€ì§„ ê·¸ë£¹ì„ìƒì„±í•˜ì—¬ ê¶Œí•œì„ ë¶€ì—¬í•˜ë©´ ëœë‹¤</em></li><li><code>$ sudo groupadd docker</code></li><li><code>$ sudo gpasswd -a $USER docker</code></li></ul></blockquote><h1 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h1><p>ì„¤ì¹˜ê°€ ì˜ ë˜ì–´ìˆëŠ”ì§€ í™•ì¸ í•  ê²¸ centos ìµœì‹  ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ì´ì— ì ‘ê·¼í•´ë³´ë„ë¡ í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker run --rm -ti centos:latest /bin/bash</span><br><span class="line">Unable to find image <span class="string">&#x27;centos:latest&#x27;</span> locally</span><br><span class="line">Trying to pull repository docker.io/library/centos ... </span><br><span class="line">latest: Pulling from docker.io/library/centos</span><br><span class="line">d8d02d457314: Pull complete </span><br><span class="line">Digest: sha256:307835c385f656ec2e2fec602cf093224173c51119bbebd602c53c3653a3d6eb</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> docker.io/centos:latest</span><br><span class="line">[root@0f84b088b2e6 /]<span class="comment"># pwd</span></span><br><span class="line">/</span><br><span class="line">[root@0f84b088b2e6 /]<span class="comment"># whoami</span></span><br><span class="line">root</span><br></pre></td></tr></table></figure><hr><p>2019.09.23 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-install_docker/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Cloud] Docker Image</title>
      <link>https://jx2lee.github.io/cloud-docker_image/</link>
      <guid>https://jx2lee.github.io/cloud-docker_image/</guid>
      <pubDate>Sun, 22 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;Docker Imageì— ëŒ€í•´ ì•Œì•„ë³´ì&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Docker Imageì— ëŒ€í•´ ì•Œì•„ë³´ì</p><a id="more"></a><h1 id="Docker-Image"><a href="#Docker-Image" class="headerlink" title="Docker Image"></a>Docker Image</h1><ul><li><p>ëª¨ë“  <code>Docker Container</code>ëŠ” <code>Image</code>ì— ê¸°ë°˜í•˜ê³ </p><p><code>Image</code>ëŠ” <strong>Dockerë¡œ ë°°í¬í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ ëª¨ë“  ê²ƒì˜ ê¸°ë°˜ì„ ì œê³µ</strong></p></li></ul><p><code>Image íŠ¹ì§•</code></p><ul><li>Containerë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ docker Imageê°€ í•„ìš”í•œë°, ì´ëŠ” <code>ê³µê°œëœ ê²ƒì„ ë‹¤ìš´ë¡œë“œ</code> í•˜ê±°ë‚˜ <code>ì§ì ‘ ì´ë¯¸ì§€ë¥¼ ìƒì„±</code> </li><li>ëª¨ë“  docker ImageëŠ” í•˜ë‚˜ ì´ìƒì˜ íŒŒì¼ ì‹œìŠ¤í…œ ê³„ì¸µìœ¼ë¡œ ì´ë£¨ì–´ì§<ul><li>íŒŒì¼ ì‹œìŠ¤í…œ ê³„ì¸µì€ ì´ë¯¸ì§€ ìƒì„±ì„ ìœ„í•´ ì ìš©ë˜ëŠ” ê°œë³„ ë¹Œë“œ ë‹¨ê³„ë§ˆë‹¤ <code>1:1 ì§ì ‘ ë§¤í•‘</code></li></ul></li><li>ì´ë¯¸ì§€ ê´€ë¦¬ë¥¼ ìœ„í•´ dockerëŠ” <code>ìŠ¤í† ë¦¬ì§€ ë°±ì—”ë“œ(Stroage backend)</code>ì— í¬ê²Œ ì˜ì¡´<ul><li>ì´ë¯¸ì§€ë¥¼ êµ¬ì„±í•˜ëŠ” íŒŒì¼ ì‹œìŠ¤í…œ ê³„ì¸µì„ ë§Œë“¤ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë¦¬ëˆ…ìŠ¤ íŒŒì¼ ì‹œìŠ¤í…œê³¼ í†µì‹ í•˜ëŠ” ì—­í• </li><li>AUFS, BTRFS, ë””ë°”ì´ìŠ¤-ë§¤í¼, ì˜¤ë²„ë ˆì´ ë“±<ul><li>ë¹ ë¥¸ ì´ë¯¸ì§€ ê´€ë¦¬ë¥¼ ìœ„í•´ <code>CoW(Copy-on-Write)</code> ì‹œìŠ¤í…œ ì œê³µ</li></ul></li></ul></li></ul><h1 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h1><p><code>Dockerfile</code>ì€ ì´ë¯¸ì§€ ìƒì„±ì— í•„ìš”í•œ ëª¨ë“  ë‹¨ê³„ë¥¼ ê¸°ìˆ í•œ íŒŒì¼ë¡œ, ë³´í†µ Appì˜ ì†ŒìŠ¤ ì½”ë“œ ì €ì¥ì˜ root ë””ë ‰í† ë¦¬ì— í¬í•¨ëœë‹¤.  êµ¬ì¡° ì„¤ëª…ì„ ìœ„í•´ <em>Node.js ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì»¨í…Œì´ë„ˆ</em>ë¥¼ ë§Œë“œëŠ” ì˜ˆì œì˜ Dockerfileë¥¼ ì‚´í´ë³¸ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">FROM node:11.11.0</span><br><span class="line"></span><br><span class="line">LABEL <span class="string">&quot;maintainer&quot;</span>=<span class="string">&quot;anna@example.com&quot;</span></span><br><span class="line">LABEL <span class="string">&quot;rating&quot;</span>=<span class="string">&quot;Five Stars&quot;</span> <span class="string">&quot;class&quot;</span>=<span class="string">&quot;First Class&quot;</span></span><br><span class="line"></span><br><span class="line">USER root</span><br><span class="line"></span><br><span class="line">ENV AP /data/app</span><br><span class="line">ENV SCPATH /etc/supervisor/conf.d</span><br><span class="line"></span><br><span class="line">RUN apt-get -y update</span><br><span class="line"></span><br><span class="line"><span class="comment"># The daemons</span></span><br><span class="line">RUN apt-get -y install supervisor</span><br><span class="line">RUN mkdir -p /var/<span class="built_in">log</span>/supervisor</span><br><span class="line"></span><br><span class="line"><span class="comment"># Supervisor Configuration</span></span><br><span class="line">ADD ./supervisord/conf.d/* <span class="variable">$SCPATH</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment"># Application Code</span></span><br><span class="line">ADD *.js* <span class="variable">$AP</span>/</span><br><span class="line"></span><br><span class="line">WORKDIR <span class="variable">$AP</span></span><br><span class="line"></span><br><span class="line">RUN npm install</span><br><span class="line"></span><br><span class="line">CMD [<span class="string">&quot;supervisord&quot;</span>, <span class="string">&quot;-n&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>íŒŒì¼ ê° ë¼ì¸ì€ ë„ì»¤ì— ì˜í•´ ì €ì¥ë˜ëŠ” ìƒˆ ì´ë¯¸ì§€ ê³„ì¸µì„ ë§Œë“ ë‹¤. ì´ë ‡ê²Œ ì„¤ê³„í•œ ê²ƒì€ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œ í•  ë•Œ <code>ë³€ê²½ëœ ê³„ì¸µë§Œ</code>ì„ ìƒˆë¡œ ë¹Œë“œí•˜ê¸° ìœ„í•¨ì´ë‹¤. ê° ë¼ì¸ì„ ì°¨ë¡€ëŒ€ë¡œ í›‘ì–´ë³¸ë‹¤.</p><p><strong>FROM node:11.11.0</strong></p><p>ì´ ë¶€ë¶„ì€  <code>íŠ¹ì • ë…¸ë“œ ë²„ì ¼ (node.11.11.0)</code>ìœ¼ë¡œ ê³ ì •í•œ ìš°ë¶„íˆ¬ ë¦¬ëˆ…ìŠ¤ ì´ë¯¸ì§€ë¥¼ ì œê³µí•œë‹¤ëŠ” ëœ»ì´ë‹¤. ì´ì²˜ëŸ¼ ë„ì»¤ í—ˆë¸Œë¥¼ í†µí•´ ë…¸ë“œë¥¼ ìœ„í•œ ê³µì‹ ì´ë¯¸ì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆê³ , <code>ì¼ë°˜ì ì¸ ë¦¬ëˆ…ìŠ¤ ì´ë¯¸ì§€</code>ì—ì„œë„ ë¹Œë“œ ê°€ëŠ¥í•˜ë‹¤.</p><p><strong>LABEL â€œmaintainerâ€=â€<a href="mailto:anna@example.com">anna@example.com</a>â€œ (LABEL â€œratingâ€=â€Five Starsâ€ â€œclassâ€=â€First Classâ€)</strong></p><p><code>Image</code>ë‚˜ <code>Container</code>ì— <code>ë¼ë²¨ (Label)</code>ì„ ì ìš©í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. <code>key-value</code>í˜•íƒœë¡œ ë©”íƒ€ë°ì´í„°ì— ì¶”ê°€í•  ìˆ˜ ìˆê³ , ì´ë¯¸ì§€ ë¹Œë“œ í›„ <code>docker inspect</code> ëª…ë ¹ì–´ë¡œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker inspect <span class="built_in">test</span>/docker-node-hello</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Id&quot;</span>: <span class="string">&quot;sha256:fd425ed5d292360c4b20bb193c402e4fb939b73e07a7f7b6f600e31c9d3a63f8&quot;</span>,</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">            <span class="string">&quot;Image&quot;</span>: <span class="string">&quot;sha256:40ce3ed86b2ce0c74ba5d6de3ec99fca6982ef43355956502bf7adb62b973d05&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Volumes&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;WorkingDir&quot;</span>: <span class="string">&quot;/data/app&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Entrypoint&quot;</span>: null,</span><br><span class="line">            <span class="string">&quot;OnBuild&quot;</span>: [],</span><br><span class="line">            <span class="string">&quot;Labels&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;class&quot;</span>: <span class="string">&quot;First Class&quot;</span>,</span><br><span class="line">                <span class="string">&quot;maintainer&quot;</span>: <span class="string">&quot;anna@example.com&quot;</span>,</span><br><span class="line">                <span class="string">&quot;rating&quot;</span>: <span class="string">&quot;Five Stars&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>USER root</strong></p><p>ê¸°ë³¸ì ìœ¼ë¡œ<code>docker Container ë‚´ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ë¥¼ root</code>ë¡œ ì‹¤í–‰í•˜ì§€ë§Œ, ë•Œì— ë”°ë¼ USER ëª…ë ¹ì–´ë¡œ <code>íŠ¹ì • ì‚¬ìš©ì</code>ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.</p><div class="note ">            <p><em>(Containerê°€ í˜¸ìŠ¤íŠ¸ ì»¤ë„ ìœ„ì—ì„œ ë™ì‘í•˜ë¯€ë¡œ ì ì¬ì  ë³´ì•ˆ ìœ„í˜‘ì´ ìˆì„ ìˆ˜ ìˆë‹¤. root ë³´ë‹¨ íŠ¹ì • ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ ì‹¤í–‰í•´ì•¼ í•œë‹¤ê³  ê¶Œê³ í•œë‹¤.)</em></p>          </div><p>** ENV AP(SCPATH) /data/app( /etc/supervisor/conf.d) **</p><p>shell í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ë‹¨ê³„</p><p><strong>RUN ~</strong></p><p><code>íŒŒì¼/ë””ë ‰í„°ë¦¬ êµ¬ì¡°ë¥¼ ë§Œë“¤ê³ </code> <code>ìš”êµ¬ë˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì„¤ì¹˜</code>í•˜ê¸° ìœ„í•œ ë‹¨ê³„ë¡œ, ìœ„ ENV ë‹¨ê³„ì—ì„œ ì„¤ì •í•œ í™˜ê²½ë³€ìˆ˜ë¡œ ê°„ëµí•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.</p><p>RUN apt-get -y update</p><p>RUN apt-get -y install supervisor<br>RUN mkdir -p /var/log/supervisor</p><div class="note ">            <p><em>(yum/apt-get updateì˜ ê²½ìš° ë¹Œë“œ ì‹œê°„ì´ ì˜¤ë˜ê±¸ë¦´ ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ Dockerfileë‚´ ëª…ì‹œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì—…ë°ì´íŠ¸ê°€ ì ìš©ëœ ê¸°ë³¸ ë¦¬ëˆ…ìŠ¤ ì´ë¯¸ì§€ ìœ„ì— ë¹Œë“œí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ê¶Œì¥í•œë‹¤</em>)</p>          </div><p><strong>ADD ./supervisord/conf.d/* $SCPATH/ (ADD <em>.js</em> $AP/)</strong></p><p><code>ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œì˜ íŒŒì¼</code>ì„ <code>Imageë¡œ ì¹´í”¼</code>í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. <code>ì½”ë“œ</code>ë‚˜ í•„ìš”í•œ <code>ë³´ì¡° íŒŒì¼</code>ë“¤ì„ ì¹´í”¼í•˜ëŠ”ë° ì£¼ë¡œ ì“°ì¸ë‹¤.</p><p><strong>WORKDIR $AP</strong></p><p>ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ë³€ê²½í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. ì´ì²˜ëŸ¼ ë¹Œë“œ ì‹œ ë³€ê²½ë˜ëŠ” ì‚¬í•­ì˜ ê²½ìš°, <code>Dockerfile ì‘ì„± ì‹œ ìµœëŒ€í•œ ë’¤ìª½ìœ¼ë¡œ ì‘ì„±í•˜ê¸°ë¥¼ ê¶Œì¥í•œë‹¤.</code>ì™œëƒë©´ ì´ë¯¸ì§€ë¥¼ ìƒˆë¡œ ë¹Œë“œí•˜ë©´ ì²˜ìŒìœ¼ë¡œ ë°”ë€ ë¶€ë¶„ë¶€í„° ìƒˆë¡œ ë¹Œë“œë˜ê¸° ë•Œë¬¸ì´ë‹¤.</p><p><strong>CMD [â€œsupervisordâ€, â€œ-nâ€]</strong></p><p>Container ì•ˆì—ì„œ ì‹¤í–‰í•˜ê³ ì í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš°ëŠ” ëª…ë ¹ì–´ë¥¼ ì‘ì„±í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. ì»¤ë®¤ë‹ˆí‹° ë‚´ì—ì„œ ë§ì€ ë…¼ë€ì´ ìˆì—ˆì§€ë§Œ <code>ì»¨í…Œì´ë„ˆ ë‚´ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë§Œ ì‹¤í–‰</code>í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¢‹ë‹¤ê³  ë§í•œë‹¤. <code>ì»¨í…Œì´ë„ˆëŠ” ë‹¨ì¼ ê¸°ëŠ¥ë§Œì„ ì œê³µí•œë‹¤</code>ëŠ” ì² í•™(?)ì— ê¸°ì´ˆí•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 conf.d]$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">8affdbc03b3e        example/docker-node-hello:lastest   <span class="string">&quot;supervisord -n&quot;</span>    22 hours ago        Up 26 minutes       0.0.0.0:8080-&gt;8080/tcp   romantic_haibt</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Image-Build"><a href="#Image-Build" class="headerlink" title="Image Build"></a>Image Build</h1><p>ìœ„ Dockerfileì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•´ë³´ê³ ì í•œë‹¤. gitì„ ì´ìš©í•´ ì˜ˆì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì €ì¥ì†Œë¥¼ ë³µì œí•´ì˜¨ë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ git <span class="built_in">clone</span> https://github.com/spkane/docker-node-hello.git</span><br><span class="line">Cloning into <span class="string">&#x27;docker-node-hello&#x27;</span>...</span><br><span class="line">remote: Enumerating objects: 47, <span class="keyword">done</span>.</span><br><span class="line">remote: Total 47 (delta 0), reused 0 (delta 0), pack-reused 47</span><br><span class="line">Unpacking objects: 100% (47/47), <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">[kuber@node2 ~]$ <span class="built_in">cd</span> docker-node-hello/</span><br><span class="line">[kuber@node2 docker-node-hello]$ </span><br></pre></td></tr></table></figure><p>git ë””ë ‰í† ë¦¬ë¥¼ ì œì™¸í•œ íŒŒì¼ë“¤ì„ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ tree -a -I .git</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ Dockerfile</span><br><span class="line">â”œâ”€â”€ .dockerignore</span><br><span class="line">â”œâ”€â”€ .gitignore</span><br><span class="line">â”œâ”€â”€ index.js</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ supervisord</span><br><span class="line">â”‚Â Â  â””â”€â”€ conf.d</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ node.conf</span><br><span class="line">â”‚Â Â      â””â”€â”€ supervisord.conf</span><br><span class="line">â””â”€â”€ Vagrantfile</span><br></pre></td></tr></table></figure><p><em><code>.dockerignore</code>: docker Image ë¹Œë“œ ì‹œ ë„ì»¤ í˜¸ìŠ¤íŠ¸ì— ì—…ë¡œë“œí•˜ê³  ì‹¶ì§€ ì•Šì€ íŒŒì¼ì´ë‚˜ ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•˜ëŠ” íŒŒì¼</em>  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ cat .dockerignore </span><br><span class="line">.git</span><br></pre></td></tr></table></figure><ul><li><code>package.json</code> : Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ì˜ ë° ì˜ì¡´ì„± ë‚˜ì—´ íŒŒì¼</li><li><code>index.js</code> : ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ì¸ ì†ŒìŠ¤ ì½”ë“œ</li><li><code>supervisord</code> : ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ë° ëª¨ë‹ˆí„°ë§ì´ ê°€ëŠ¥í•œ supervisordì„ ìœ„í•œ ì„¤ì • íŒŒì¼ì´ í¬í•¨ëœ í´ë”</li></ul><p>ê·¸ëŸ¼ ì´ì œ Imageë¥¼ ë¹Œë“œí•´ë³´ë„ë¡ í•œë‹¤. ëª…ë ¹ì–´ì— ì“°ì´ëŠ” ìì„¸í•œ ì˜µì…˜ë“¤ì€ <a href="http://bit.ly/1THKRk0">ê³µì‹ë¬¸ì„œ</a>ë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker build -t example/docker-node-hello:lastest .</span><br><span class="line">Sending build context to Docker daemon 15.87 kB</span><br><span class="line">Step 1/14 : FROM node:11.11.0</span><br><span class="line">Trying to pull repository docker.io/library/node ... </span><br><span class="line">11.11.0: Pulling from docker.io/library/node</span><br><span class="line">22dbe790f715: Pull complete </span><br><span class="line">0250231711a0: Pull complete </span><br><span class="line">6fba9447437b: Pull complete </span><br><span class="line">c2b4d327b352: Pull complete </span><br><span class="line">270e1baa5299: Pull complete </span><br><span class="line">08ba2f9dd763: Pull complete </span><br><span class="line">edf54285ab13: Pull complete </span><br><span class="line">4d751c169397: Pull complete </span><br><span class="line">Digest: sha256:065610e9b9567dfecf10f45677f4d372a864a74a67a7b2089f5f513606e28ede</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> docker.io/node:11.11.0</span><br><span class="line"> ---&gt; 9ff38e3a6d9d</span><br><span class="line">Step 2/14 : LABEL <span class="string">&quot;maintainer&quot;</span> <span class="string">&quot;anna@example.com&quot;</span></span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> d0c3d1590e1f</span><br><span class="line"> ---&gt; b4855e6ce77c</span><br><span class="line">Removing intermediate container d0c3d1590e1f</span><br><span class="line">Step 3/14 : LABEL <span class="string">&quot;rating&quot;</span> <span class="string">&quot;Five Stars&quot;</span> <span class="string">&quot;class&quot;</span> <span class="string">&quot;First Class&quot;</span></span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 04a73c43a44a</span><br><span class="line"> ---&gt; 2ebbef69d1b3</span><br><span class="line">Removing intermediate container 04a73c43a44a</span><br><span class="line">Step 4/14 : USER root</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 5de276a155e2</span><br><span class="line"> ---&gt; 8ad740a32fdd</span><br><span class="line">Removing intermediate container 5de276a155e2</span><br><span class="line">Step 5/14 : ENV AP /data/app</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> aa77a9763782</span><br><span class="line"> ---&gt; 45925bd0fb66</span><br><span class="line">Removing intermediate container aa77a9763782</span><br><span class="line">Step 6/14 : ENV SCPATH /etc/supervisor/conf.d</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 931030d51457</span><br><span class="line"> ---&gt; a2975676fd6d</span><br><span class="line">Removing intermediate container 931030d51457</span><br><span class="line">Step 7/14 : RUN apt-get -y update</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> ecc80b77c428</span><br><span class="line"></span><br><span class="line">Ign:1 http://deb.debian.org/debian stretch InRelease</span><br><span class="line">Get:2 http://deb.debian.org/debian stretch-updates InRelease [91.0 kB]</span><br><span class="line">Get:3 http://deb.debian.org/debian stretch Release [118 kB]</span><br><span class="line">Get:4 http://security.debian.org/debian-security stretch/updates InRelease [94.3 kB]</span><br><span class="line">Get:5 http://deb.debian.org/debian stretch-updates/main amd64 Packages [27.4 kB]</span><br><span class="line">Get:6 http://security.debian.org/debian-security stretch/updates/main amd64 Packages [506 kB]</span><br><span class="line">Get:7 http://deb.debian.org/debian stretch Release.gpg [2365 B]</span><br><span class="line">Get:8 http://deb.debian.org/debian stretch/main amd64 Packages [7086 kB]</span><br><span class="line">Fetched 7925 kB <span class="keyword">in</span> 3s (2531 kB/s)</span><br><span class="line">Reading package lists...</span><br><span class="line"> ---&gt; 37d8e3e4a4b4</span><br><span class="line">Removing intermediate container ecc80b77c428</span><br><span class="line">Step 8/14 : RUN apt-get -y install supervisor</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 74da13fa61de</span><br><span class="line"></span><br><span class="line">Reading package lists...</span><br><span class="line">Building dependency tree...</span><br><span class="line">Reading state information...</span><br><span class="line">The following additional packages will be installed:</span><br><span class="line">  python-meld3 python-pkg-resources</span><br><span class="line">Suggested packages:</span><br><span class="line">  python-setuptools supervisor-doc</span><br><span class="line">The following NEW packages will be installed:</span><br><span class="line">  python-meld3 python-pkg-resources supervisor</span><br><span class="line">0 upgraded, 3 newly installed, 0 to remove and 57 not upgraded.</span><br><span class="line">Need to get 483 kB of archives.</span><br><span class="line">After this operation, 2157 kB of additional disk space will be used.</span><br><span class="line">Get:1 http://deb.debian.org/debian stretch/main amd64 python-pkg-resources all 33.1.1-1 [166 kB]</span><br><span class="line">Get:2 http://deb.debian.org/debian stretch/main amd64 python-meld3 all 1.0.2-2 [37.3 kB]</span><br><span class="line">Get:3 http://deb.debian.org/debian stretch/main amd64 supervisor all 3.3.1-1+deb9u1 [280 kB]</span><br><span class="line">debconf: delaying package configuration, since apt-utils is not installed</span><br><span class="line">Fetched 483 kB <span class="keyword">in</span> 0s (488 kB/s)</span><br><span class="line">Selecting previously unselected package python-pkg-resources.</span><br><span class="line">(Reading database ... 29978 files and directories currently installed.)</span><br><span class="line">Preparing to unpack .../python-pkg-resources_33.1.1-1_all.deb ...</span><br><span class="line">Unpacking python-pkg-resources (33.1.1-1) ...</span><br><span class="line">Selecting previously unselected package python-meld3.</span><br><span class="line">Preparing to unpack .../python-meld3_1.0.2-2_all.deb ...</span><br><span class="line">Unpacking python-meld3 (1.0.2-2) ...</span><br><span class="line">Selecting previously unselected package supervisor.</span><br><span class="line">Preparing to unpack .../supervisor_3.3.1-1+deb9u1_all.deb ...</span><br><span class="line">Unpacking supervisor (3.3.1-1+deb9u1) ...</span><br><span class="line">Setting up python-meld3 (1.0.2-2) ...</span><br><span class="line">Setting up python-pkg-resources (33.1.1-1) ...</span><br><span class="line">Setting up supervisor (3.3.1-1+deb9u1) ...</span><br><span class="line">invoke-rc.d: could not determine current runlevel</span><br><span class="line">invoke-rc.d: policy-rc.d denied execution of start.</span><br><span class="line"> ---&gt; d66e13271f30</span><br><span class="line">Removing intermediate container 74da13fa61de</span><br><span class="line">Step 9/14 : RUN mkdir -p /var/<span class="built_in">log</span>/supervisor</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> f85e1c0267de</span><br><span class="line"></span><br><span class="line"> ---&gt; 9979f514ad99</span><br><span class="line">Removing intermediate container f85e1c0267de</span><br><span class="line">Step 10/14 : ADD ./supervisord/conf.d/* <span class="variable">$SCPATH</span>/</span><br><span class="line"> ---&gt; 6db6cac86654</span><br><span class="line">Removing intermediate container d565d65027c7</span><br><span class="line">Step 11/14 : ADD *.js* <span class="variable">$AP</span>/</span><br><span class="line"> ---&gt; 3a8554a9e86d</span><br><span class="line">Removing intermediate container f60af33566be</span><br><span class="line">Step 12/14 : WORKDIR <span class="variable">$AP</span></span><br><span class="line"> ---&gt; 7437cca985ff</span><br><span class="line">Removing intermediate container 6b1e8ae1aec2</span><br><span class="line">Step 13/14 : RUN npm install</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> e1038f1c1b6a</span><br><span class="line"></span><br><span class="line">npm WARN deprecated connect@2.7.9: connect 2.x series is deprecated</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">added 18 packages from 15 contributors and audited 34 packages <span class="keyword">in</span> 3.641s</span><br><span class="line">found 16 vulnerabilities (5 low, 5 moderate, 6 high)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` <span class="keyword">for</span> details</span><br><span class="line"> ---&gt; 40ce3ed86b2c</span><br><span class="line">Removing intermediate container e1038f1c1b6a</span><br><span class="line">Step 14/14 : CMD supervisord -n</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> dd4b1488e1a7</span><br><span class="line"> ---&gt; fd425ed5d292</span><br><span class="line">Removing intermediate container dd4b1488e1a7</span><br><span class="line">Successfully built fd425ed5d292</span><br></pre></td></tr></table></figure><h1 id="Run-Image"><a href="#Run-Image" class="headerlink" title="Run Image"></a>Run Image</h1><p>Image ë¹Œë“œê°€ ì„±ê³µí•˜ë©´ ì•„ë˜ì™€ ê°™ì´ Imageë¥¼ ì‹¤í–‰í•´ë³¸ë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker run -d -p 8080:8080 example/docker-node-hello:lastest </span><br><span class="line">8affdbc03b3ec66745ef5cb9e90f5d1f71b46c93932b706317b744fbb7212371</span><br><span class="line"></span><br><span class="line"><span class="keyword">in</span> Web browser,</span><br><span class="line">Hello World. Wish you were here.</span><br></pre></td></tr></table></figure><p>ìœ„ ëª…ë ¹ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p><ul><li><code>example/docker-node-hello:lastest íƒœê·¸ë¥¼ ê°€ì§„ ì´ë¯¸ì§€</code>ë¡œë¶€í„°</li><li><code>ë°±ê·¸ë¼ìš´ë“œì— ì‹¤í–‰ ì»¨í…Œì´ë„ˆ</code>ë¡œ ë§Œë“¤ê³  (-d)</li><li><code>8080 port ë¥¼ docker í˜¸ìŠ¤íŠ¸ì˜ 8080 portì— ë§¤í•‘</code> (-p 8080:8080)</li></ul><p>ê·¸ëŸ¼ ì‹¤ì œ ì›¹ì´ ì˜ ë„ì›Œì¡ŒëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ docker serverì˜ ipë¥¼ í™•ì¸í•˜ê³  ì ‘ì†í•´ë³¸ë‹¤. (ë¡œì»¬=ì„œë²„ì´ë¯€ë¡œ í•´ë‹¹ ì•„ì´í”¼:8080 ìœ¼ë¡œ ì ‘ì†í•˜ë©´ ë³´ì¸ë‹¤)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World. Wish you were here.</span><br></pre></td></tr></table></figure><h2 id="í™˜ê²½-ë³€ìˆ˜"><a href="#í™˜ê²½-ë³€ìˆ˜" class="headerlink" title="í™˜ê²½ ë³€ìˆ˜"></a>í™˜ê²½ ë³€ìˆ˜</h2><p><code>index.js</code>ë¥¼ ì‚´í´ë³´ì. $WHO ëŠ” Helloì˜ ëŒ€ìƒì´ ë˜ëŠ” ì•±ì´ ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜ì„ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// Constants</span><br><span class="line">var DEFAULT_PORT = 8080;</span><br><span class="line">var DEFAULT_WHO = <span class="string">&quot;World&quot;</span>;</span><br><span class="line">var PORT = process.env.PORT || DEFAULT_PORT;</span><br><span class="line">var WHO = process.env.WHO || DEFAULT_WHO;</span><br><span class="line"></span><br><span class="line">// App</span><br><span class="line">var app = express();</span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span> (req, res) &#123;</span><br><span class="line">  res.send(<span class="string">&#x27;Hello &#x27;</span> + WHO + <span class="string">&#x27;. Wish you were here.\n&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ê·¸ëŸ¼ Containerë¥¼ ë„ìš¸ ë•Œ í™˜ê²½ë³€ìˆ˜ë¥¼ ë„˜ê²¨ Hello ëŒ€ìƒì„ ë³€ê²½í•´ë³´ë„ë¡ í•œë‹¤. ìš°ì„  ë„ì›Œì ¸ ìˆëŠ” Containerë¥¼ í™•ì¸í•œ í›„ ì¤‘ì§€í•œë‹¤. ì¤‘ì§€í•˜ëŠ” ë°©ë²•ì€ CONTAINER IDì™€ NAMESë¥¼ ì´ìš©í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                               COMMAND             CREATED              STATUS              PORTS                    NAMES</span><br><span class="line">8affdbc03b3e        example/docker-node-hello:lastest   <span class="string">&quot;supervisord -n&quot;</span>    About a minute ago   Up About a minute   0.0.0.0:8080-&gt;8080/tcp   romantic_haibt</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker stop 8affdbc03b3e(or docker stop romantic_haibt)</span><br><span class="line">8affdbc03b3e</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker run -d -p 8080:8080 example/docker-node-hello:lastest </span><br><span class="line">a412191bdcdb7b55e687b44dedc0707164fff784c0e1c64f1ce11a22afe64b2a</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker stop priceless_lovelace</span><br><span class="line">priceless_lovelace</span><br><span class="line">[kuber@node2 docker-node-hello]$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure><p>run ëª…ë ¹ì–´ì— -e ë¥¼ ì¶”ê°€í•˜ì—¬ ì¬ì‹œì‘í•œë‹¤. (WHO : Jaejun Lee)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 docker-node-hello]$ docker run -d -p 8080:8080 -e WHO=<span class="string">&quot;Jaejun Lee&quot;</span> example/docker-node-hello:lastest </span><br><span class="line">389f5be3ee7c2020ecacbd032a5ffa048339d0bdee66666e6dedc8e74e992e78</span><br></pre></td></tr></table></figure><p>webìœ¼ë¡œ ì ‘ì†í•˜ì—¬ í™•ì¸í•´ë³¸ë‹¤.</p><p><code>Hello World. Wish you were here.</code></p><h1 id="Image-ì €ì¥"><a href="#Image-ì €ì¥" class="headerlink" title="Image ì €ì¥"></a>Image ì €ì¥</h1><p>Imageë„ ë§Œë“¤ì—ˆê² ë‹¤, ë°°í¬ë¥¼ ì›í•˜ëŠ” docker í˜¸ìŠ¤íŠ¸ì—ì„œ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê³³ì—ë‹¤ê°€ ì €ì¥í•´ì•¼ í•œë‹¤. ì´ê³³ì„ Image ë¹Œë“œì™€ Image ì‹¤í–‰ ì‚¬ì´ì˜ <code>ëª…ë°±í•œ í•¸ë“œì˜¤í”„ í¬ì¸íŠ¸(hand-off point)</code>ë¼ê³  í•œë‹¤.</p><p>ë³´í†µ Imageë¥¼ Serverì—ì„œ ì§ì ‘ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. ëŒ€ê°œ Image ì €ì¥ì†Œì—ì„œ Imageë¥¼ ëŒì–´ì™€ í•˜ë‚˜ ì´ìƒì˜ Docker Serverì— ì‹¤í–‰í•  ìˆ˜ ìˆê²Œë” ë°°í¬í•œë‹¤. ì†ì‰½ê²Œ ì´ë¯¸ì§€ë¥¼ ëŒì–´ì˜¤ê¸° ìœ„í•´ Imageë¥¼ ì €ì¥í•˜ëŠ” ëª‡ ê°€ì§€ ë°©ë²•ì— ëŒ€í•´ ì‚´í´ë³´ì</p><p><strong>ê³µê°œ registry</strong></p><p><code>ê³µê°œ Imageë“¤ì„ ì €ì¥í•˜ê¸° ìœ„í•œ Image registry</code>ë¥¼ ì œê³µí•œë‹¤(<a href="https://hub.docker.com/">https://hub.docker.com/</a>). Linux ë°°í¬íŒ, WordPressë“± ë‹¤ì–‘í•œ Imageê°€ ì¡´ì¬í•œë‹¤.</p><p><strong>ë¹„ê³µê°œ registry</strong></p><p>Imageë¥¼ ì¸í„°ë„·ì„ í†µí•´ ê³µê°œí•˜ì§€ ì•Šê³  <code>ë‚´ë¶€ì ìœ¼ë¡œ Docker Imageë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•</code>ë„ ì¡´ì¬í•œë‹¤.</p><p><strong>registry ì¸ì¦</strong></p><p>Container Imageë¥¼ ì €ì¥í•˜ëŠ” registryì™€ì˜ í†µì‹ ì€ í•„ìˆ˜ì ì´ë‹¤. ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ ê¶Œí•œì„ ìš”êµ¬í•˜ëŠ”ë°, DockerëŠ” ìë™í™”ë¥¼ ìœ„í•´ Image ë‹¤ìš´ ìš”ì²­ì„ ë°›ëŠ” ê²½ìš° ì‚¬ìš©ìë¥¼ ëŒ€ì‹ í•´ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ì´ë¥¼ ì‚¬ìš©í•œë‹¤. default registryëŠ” ì•ì—ì„œ ì–¸ê¸‰í•œ ê³µê°œ Imageê°€ ì €ì¥ë˜ì–´ ìˆëŠ” registry ì´ë‹¤.</p><p><strong>Docker Hub ê³„ì • ìƒì„± í›„ ë¡œê·¸ì¸</strong></p><p><a href="https://hub.docker.com/">https://hub.docker.com/</a>ì— ì ‘ì†í•˜ì—¬ ê°€ì…í•œ í›„ ë¡œê·¸ì¸ì„ í•´ë³´ë„ë¡ í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker login</span><br><span class="line">Login with your Docker ID to push and pull images from Docker Hub. If you don<span class="string">&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line"><span class="string">Username: jaejunlee  </span></span><br><span class="line"><span class="string">Password: </span></span><br><span class="line"><span class="string">Login Succeeded</span></span><br></pre></td></tr></table></figure><p>ë¡œê·¸ì¸ì´ ì„±ê³µë˜ë©´, <code>~/.docker/confing.json</code>ë¼ëŠ” íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ë°, ë‚˜ì˜ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ìºì‹œí•˜ê¸° ìœ„í•¨ì´ë‹¤. </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ cat ~/.docker/config.json </span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;auths&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;https://index.docker.io/v1/&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;auth&quot;</span>: <span class="string">&quot;amFlanVubGVlOndvd25zbGQ5NDg5&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ì´ëŸ¬í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” íŒŒì¼ì€ <code>registryì— ì ‘ê·¼í•˜ê³ ì í•  ë•Œ DockerëŠ” ì´ë¥¼ ì°¸ê³ í•´ ì—°ê²°ì„ ì‹œë„</code>í•œë‹¤. ì‚¬ìš©ì„ ë‹¤ í•œ ì´í›„ì— ë§Œì•½ ë¡œê·¸ì•„ì›ƒì„ í•˜ê²Œëœë‹¤ë©´, <code>íŒŒì¼ì´ ë¹„ì–´ìˆìŒ</code>ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker <span class="built_in">logout</span></span><br><span class="line">Removing login credentials <span class="keyword">for</span> https://index.docker.io/v1/</span><br><span class="line">[kuber@node2 ~]$ cat ~/.docker/config.json </span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;auths&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="registryì—-Image-ì €ì¥"><a href="#registryì—-Image-ì €ì¥" class="headerlink" title="registryì— Image ì €ì¥"></a>registryì— Image ì €ì¥</h1><p>ì•ì„œ Image build ì‹œ ìš°ë¦¬ëŠ” <code>docker build -t example/docker-node-hello:lastest .</code>ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í–ˆë‹¤. ì´ëŠ” ê³µê°œ registry ì˜ example/docker-node-hello ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•œ ê²ƒì¸ë°, ë§Œì•½ ë¡œì»¬ì—ì„œ ìƒì„±í•œ ì´ë¯¸ì§€ì˜ ê²½ìš° ì•„ë¬´ ì´ë¦„ì´ë‚˜<em>(ë³´í†µ ì‚¬ìš©ì/ê·¸ë£¹ ì´ìš©)</em> ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.  </p><ul><li><code>tag</code>ëª…ë ¹ì–´ë¥¼ í†µí•´ ì´ë¯¸ì§€ì˜ íƒœê·¸ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</li><li>ì´ë¯¸ì§€ íƒœê·¸ëª…ì€ docker ì‚¬ìš©ì ì•„ì´ë””ë¡œ ì„¤ì •í•˜ì—¬ì•¼ ì¶”í›„ì— push/pullì´ ê°€ëŠ¥í•˜ë‹¤</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker tag <span class="built_in">test</span>/docker-node-hello:latest jaejunlee/docker-node-hello:latest</span><br><span class="line">[kuber@node2 ~]$ docker images</span><br><span class="line">REPOSITORY                  TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">example/docker-node-hello   lastest             fd425ed5d292        2 days ago          928 MB</span><br><span class="line">jaejunlee/docker-node-hello    latest              fd425ed5d292        2 days ago          928 MB</span><br><span class="line"><span class="built_in">test</span>/docker-node-hello      latest              fd425ed5d292        2 days ago          928 MB</span><br><span class="line">docker.io/centos            latest              67fa590cfc1c        5 weeks ago         202 MB</span><br><span class="line">docker.io/node              11.11.0             9ff38e3a6d9d        6 months ago        904 MB</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ì´ë²ˆì—” ê·¸ëŸ¼ tagë¥¼ ë°”ê¾¼ ì´ë¯¸ì§€ë¥¼ push <em>(ê³µê°œ registry)</em> í•´ë³´ë„ë¡ í•œë‹¤.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[kuber@node2 ~]$ docker push jaejunlee/docker-node-hello-test:latest</span><br><span class="line">The push refers to a repository [docker.io/jaejunlee/docker-node-hello-test]</span><br><span class="line">a233ae287464: Pushed </span><br><span class="line">8f9ee22c1347: Pushed </span><br><span class="line">ce283841f218: Pushed </span><br><span class="line">f8fc35d38ecc: Pushed </span><br><span class="line">cb7a837507c0: Pushed </span><br><span class="line">4ebe27287e94: Pushed </span><br><span class="line">abdde7643382: Pushed </span><br><span class="line">909542b1bce2: Pushed </span><br><span class="line">7de462056991: Pushed </span><br><span class="line">3443d6cf0f1f: Pushed </span><br><span class="line">f3a38968d075: Pushed </span><br><span class="line">a327787b3c73: Pushed </span><br><span class="line">5bb0785f2eee: Pushed </span><br><span class="line">latest: digest: sha256:98a38e1a53a9473ab1b083099d29d70d9a05d5f924533b378e70555b1f1714a3 size: 3055</span><br></pre></td></tr></table></figure><p><code>Docker Hub</code>ì— ì ‘ì†í•˜ì—¬ ì œëŒ€ë¡œ <code>push</code> ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ë„ë¡ í•œë‹¤.</p><p><em>(<a href="https://cloud.docker.com/u/jaejunlee/repository/docker/jaejunlee/docker-node-hello-test">https://cloud.docker.com/u/jaejunlee/repository/docker/jaejunlee/docker-node-hello-test</a>)</em></p><hr><p>2019.09.23 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/cloud-docker_image/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ë™ì  ì¸ìˆ˜ ì§€ì • ì‹œ Noneê³¼ docstring í™œìš©</title>
      <link>https://jx2lee.github.io/python-better_way_20/</link>
      <guid>https://jx2lee.github.io/python-better_way_20/</guid>
      <pubDate>Wed, 18 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì•„ë˜ ë™ì  ì¸ìˆ˜ë¥¼ í™œìš©í•˜ëŠ” í•¨ìˆ˜ (ì´ë²¤íŠ¸ ë°œìƒ ì‹œê°ì„ í¬í•¨í•˜ëŠ” log í•¨ìˆ˜) ë¥¼ ìƒê°í•´ë³´ì.&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ì•„ë˜ ë™ì  ì¸ìˆ˜ë¥¼ í™œìš©í•˜ëŠ” í•¨ìˆ˜ (ì´ë²¤íŠ¸ ë°œìƒ ì‹œê°ì„ í¬í•¨í•˜ëŠ” log í•¨ìˆ˜) ë¥¼ ìƒê°í•´ë³´ì.</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_log</span>(<span class="params">mes, date=datetime.now(<span class="params"></span>)</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;%s: %s&#x27;</span>%(date, mes))</span><br><span class="line"></span><br><span class="line">get_log(<span class="string">&#x27;Hi there!&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">0.1</span>)</span><br><span class="line">get_log(<span class="string">&#x27;Hi again!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="number">2019</span>-09-<span class="number">19</span> 08:<span class="number">28</span>:<span class="number">26.737742</span>: Hi there!</span><br><span class="line"><span class="number">2019</span>-09-<span class="number">19</span> 08:<span class="number">28</span>:<span class="number">26.737742</span>: Hi again!</span><br></pre></td></tr></table></figure><p>ì›í•˜ëŠ” í•¨ìˆ˜ ê²°ê³¼ëŠ” 0.1ì´ˆ ì´í›„ íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ì°í˜€ì•¼ í•˜ëŠ”ë° ê°™ì§€ ì•Šì€ê°€!! ì´ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•  ë•Œ <code>date</code>ë³€ìˆ˜ê°€ defaultë¡œ ê·¸ ì‹œê°„ì„ ê°€ì ¸ê°€ê¸° ë•Œë¬¸ì— ì›í•˜ëŠ” ê²°ê³¼ê°’ì„ ì–»ì§€ ëª»í•œë‹¤. ì¦‰, <code>ì¬í‰ê°€</code>í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í•˜ëŠ”ê°€?</p><p><strong>default ë¥¼ Noneìœ¼ë¡œ ì„¤ì •í•˜ê³  docstring(ë¬¸ì„œí™”) í•˜ì!</strong></p><p> í•¨ìˆ˜ ì •ì˜ ì‹œ ê¸°ë³¸ ê°’ì„ Noneìœ¼ë¡œ ì„¤ì •í•˜ê³  ì´ì— ì‘ìš© ì›ë¦¬ì™€ ë³€ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ë„ë¡ ë¬¸ì„œí™”í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_log</span>(<span class="params">mes, date=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Log a message with a timestamp.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        mes : message to print</span></span><br><span class="line"><span class="string">        date : datetime of whe the message occured.</span></span><br><span class="line"><span class="string">            Defaults to the present time.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">    date = datetime.now() <span class="keyword">if</span> date <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> date</span><br><span class="line">    print(<span class="string">&#x27;%s: %s&#x27;</span>%(date, mes))</span><br><span class="line"></span><br><span class="line">get_log(<span class="string">&#x27;Hi there!&#x27;</span>)</span><br><span class="line">time.sleep(<span class="number">0.1</span>)</span><br><span class="line">get_log(<span class="string">&#x27;Hi again!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="number">2019</span>-09-<span class="number">19</span> 08:<span class="number">35</span>:<span class="number">17.079609</span>: Hi there!</span><br><span class="line"><span class="number">2019</span>-09-<span class="number">19</span> 08:<span class="number">35</span>:<span class="number">17.180161</span>: Hi again!</span><br></pre></td></tr></table></figure><p>íƒ€ì„ìŠ¤íƒ¬í”„ê°€ ë°”ë€ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤! ì´ì²˜ëŸ¼ Noneì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ì¸ìˆ˜ê°€ <code>ìˆ˜ì • ê°€ëŠ¥(Mutable)</code>í•  ë•Œ ì¤‘ìš”í•˜ë‹¤ê³  í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ í•¨ìˆ˜ë¥¼ ì‚´í´ë³´ì</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decode</span>(<span class="params">data, default=&#123;&#125;</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> json.loads(data)</span><br><span class="line">    <span class="keyword">except</span> ValueError:</span><br><span class="line">        <span class="keyword">return</span> default</span><br><span class="line">    </span><br><span class="line">test1 = decode(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line">test1[<span class="string">&#x27;t&#x27;</span>]=<span class="number">10</span></span><br><span class="line">test2 = decode(<span class="string">&#x27;hii&#x27;</span>)</span><br><span class="line">test2[<span class="string">&#x27;t1&#x27;</span>]=<span class="number">100</span></span><br><span class="line">print(<span class="string">&#x27;test1: &#x27;</span>, test1)</span><br><span class="line">print(<span class="string">&#x27;test2: &#x27;</span>, test2)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">test1:  &#123;<span class="string">&#x27;t&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;t1&#x27;</span>: <span class="number">100</span>&#125;</span><br><span class="line">test2:  &#123;<span class="string">&#x27;t&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;t1&#x27;</span>: <span class="number">100</span>&#125;</span><br></pre></td></tr></table></figure><p>ì´ í•¨ìˆ˜ë„ ë§ˆì°¬ê°€ì§€ë¡œ <code>get_log</code> í•¨ìˆ˜ì™€ ê°™ì€ ë¬¸ì œê°€ ì¡´ì¬í•œë‹¤. ì›í–ˆë˜ ê²°ê³¼ëŠ” ê°ê° test1/test2 ì—ëŠ” tryë¶€ë¶„ì´ ì‹¤í–‰ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— print ë˜ëŠ” default ê°€ í•˜ë‚˜ì”© ì°í˜”ì–´ì•¼ í•œë‹¤. ì´ì²˜ëŸ¼ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ” ì›ì¸ì€ <code>í•¨ìˆ˜ ì¸ìë¡œ ì„¤ì •í•œ dictionaryê°€ decode í˜¸ì¶œì—ì„œ ê³µìœ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.</code>ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ê²ƒì€ <code>default ì¸ìˆ˜ë¥¼ Noneìœ¼ë¡œ ë°›ê³  ë¬¸ì„œí™”í•˜ë©´ ëœë‹¤.</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">updated_decode</span>(<span class="params">data, default=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Load JSON data from a string.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        data : JSON data to decode</span></span><br><span class="line"><span class="string">        default : Value to return if decoding fails.</span></span><br><span class="line"><span class="string">            Defaults to an empty dictionary.</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> default <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        default = &#123;&#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> json.loads(data)</span><br><span class="line">    <span class="keyword">except</span> ValueError:</span><br><span class="line">        <span class="keyword">return</span> default</span><br><span class="line"></span><br><span class="line">test1 = updated_decode(<span class="string">&#x27;hi&#x27;</span>)</span><br><span class="line">test1[<span class="string">&#x27;t&#x27;</span>]=<span class="number">10</span></span><br><span class="line">test2 = updated_decode(<span class="string">&#x27;hii&#x27;</span>)</span><br><span class="line">test2[<span class="string">&#x27;t1&#x27;</span>]=<span class="number">100</span></span><br><span class="line">print(<span class="string">&#x27;test1: &#x27;</span>, test1)</span><br><span class="line">print(<span class="string">&#x27;test2: &#x27;</span>, test2)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">test1:  &#123;<span class="string">&#x27;t&#x27;</span>: <span class="number">10</span>&#125;</span><br><span class="line">test2:  &#123;<span class="string">&#x27;t1&#x27;</span>: <span class="number">100</span>&#125;</span><br></pre></td></tr></table></figure><p><strong>Summary</strong></p><ul><li>í•¨ìˆ˜ì˜ ê¸°ë³¸ ì¸ìˆ˜ëŠ” ëª¨ë“ˆ ë¡œë“œ ì‹œì ì— í•¨ìˆ˜ ì •ì˜ ê³¼ì •ì—ì„œ ë”± í•œ ë²ˆë§Œ í‰ê°€ëœë‹¤.</li><li>í•¨ìˆ˜ì˜ ê¸°ë³¸ ì¸ìˆ˜ê°€ ë™ì ì¸ ê²½ìš°ì—ëŠ” <code>ê¸°ë³¸ê°’ìœ¼ë¡œ None</code>ì„ ì‚¬ìš©í•˜ì. ì´í›„ <code>docstringì— ì‹¤ì œ ê¸°ë³¸ ë™ì‘ì„ ë¬¸ì„œí™”</code>í•˜ì</li></ul><p>ì°¸ì¡° : (<a href="http://www.yes24.com/Product/goods/25138160">http://www.yes24.com/Product/goods/25138160</a>)</p><hr><p>2019.09.19 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/python-better_way_20/#disqus_thread</comments>
    </item>
    
    <item>
      <title>[Python] ê°€ë³€ ìœ„ì¹˜ ì¸ìˆ˜ í™œìš©</title>
      <link>https://jx2lee.github.io/python-better_way_18/</link>
      <guid>https://jx2lee.github.io/python-better_way_18/</guid>
      <pubDate>Tue, 17 Sep 2019 15:00:00 GMT</pubDate>
      <description>
      
        &lt;p&gt;ì„ íƒì  ìœ„ì¹˜ ì¸ìˆ˜, &lt;em&gt;\&lt;/em&gt;args* ë¶ˆë¦¬ëŠ” star argsëŠ” í•¨ìˆ˜ì˜ í˜¸ì¶œì„ ë” ëª…í™•í•˜ê³  ê°€ë…ì„±ì„ ë†’ì¸ë‹¤. ë‹¤ìŒ ì•„ë˜ í•¨ìˆ˜ë¥¼ ë³´ì&lt;/p&gt;
      
      </description>
      
      
      <content:encoded><![CDATA[<p>ì„ íƒì  ìœ„ì¹˜ ì¸ìˆ˜, <em>\</em>args* ë¶ˆë¦¬ëŠ” star argsëŠ” í•¨ìˆ˜ì˜ í˜¸ì¶œì„ ë” ëª…í™•í•˜ê³  ê°€ë…ì„±ì„ ë†’ì¸ë‹¤. ë‹¤ìŒ ì•„ë˜ í•¨ìˆ˜ë¥¼ ë³´ì</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_log</span>(<span class="params">mes, val</span>):</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> val:</span><br><span class="line">print(mes)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">val_str = <span class="string">&#x27;, &#x27;</span>.join(<span class="built_in">str</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> val)</span><br><span class="line">print(<span class="string">&#x27;%s %s&#x27;</span>%(mes, val_str))</span><br><span class="line"></span><br><span class="line">get_log(<span class="string">&#x27;My numbers are&#x27;</span>, [<span class="number">1.2</span>])</span><br><span class="line">get_log(<span class="string">&#x27;Hi there&#x27;</span>, [])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">My numbers are <span class="number">1.2</span></span><br><span class="line">Hi there</span><br></pre></td></tr></table></figure><p><code>í—ˆë‚˜, êµ³ì´ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ ê°’ì´ ì—†ì„ ë•Œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë„£ì–´ì£¼ëŠ” ê²ƒì€ ì°¸ìœ¼ë¡œ ë¶ˆí¸í•œ ì§“ì´ë‹¤.</code> ì´ëŸ¬í•œ ë¶ˆí¸í•¨ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ * ê¸°í˜¸ë¥¼ ë§ˆì§€ë§‰ íŒŒë¼ë¯¸í„°ì— ë¶™ì´ë©´ ì´ ë³€ìˆ˜ëŠ” <code>ì„ íƒì </code>ì´ë‹¤. ë‹¤ìŒ í•¨ìˆ˜ë¥¼ ë³´ì.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_log</span>(<span class="params">mes, *val</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> val:</span><br><span class="line">        print(mes)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        val_str = <span class="string">&#x27;, &#x27;</span>.join(<span class="built_in">str</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> val)</span><br><span class="line">        print(<span class="string">&#x27;%s %s&#x27;</span>%(mes, val_str))</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">My numbers are [<span class="number">1.2</span>]</span><br><span class="line">Hi there</span><br></pre></td></tr></table></figure><p>êµ³ì´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë„£ì–´ì£¼ì§€ ì•Šì•„ë„ í•¨ìˆ˜ê°€ <code>ì•Œì•„ì„œ</code> ì‘ë™í•œë‹¤. <code>í•˜ì§€ë§Œ</code> ê°€ë³€ ê°œìˆ˜ì˜ ìœ„ì¹˜ ë³€ìˆ˜ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë¬¸ì œë¥¼ ê°€ì§€ê³  ìˆë‹¤ê³  í•œë‹¤.</p><p><strong>return ê°’ì´ í•­ìƒ íŠœí”Œë¡œ ë°˜í™˜</strong></p><p><code>generator</code>ë¡œ ìƒì„±ëœ ëª¨ë“  ê°’ì„ ë‹´ìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ë¥¼ ë§ì´ ì°¨ì§€í•˜ëŠ” ë¬¸ì œì ì´ ìˆë‹¤. ì•„ë˜ ì½”ë“œë¥¼ ë³´ì.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_generator</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        <span class="keyword">yield</span> i</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_func</span>(<span class="params">*args</span>):</span></span><br><span class="line">    print(args)</span><br><span class="line">    </span><br><span class="line">it = _generator()</span><br><span class="line">get_func(*it)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">(<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br></pre></td></tr></table></figure><p>ìœ„ì™€ ê°™ì´ ì…ë ¥ ìˆ˜ê°€ ì ë‹¤ë©´ì€ ê°€ì¥ ì¢‹ì€ ë°©ë²•ì´ê¸°ë„ í•˜ë‹¤. í•˜ì§€ë§Œ ì…ë ¥ ìˆ˜ê°€ ë§ë‹¤ë©´ ìœ„ì™€ ê°™ì´ *args ë°©ë²•ì€ ë¹„íš¨ìœ¨ì ì¼ ê²ƒì´ë‹¤.</p><p><strong>ë‚˜ì¤‘ì— í•¨ìˆ˜ë¥¼ ê³ ì¹  ë•Œ ìƒˆ ìœ„ì¹˜ ì¸ìˆ˜ ì¶”ê°€ ë¶ˆê°€ëŠ¥</strong></p><p>ì½”ë“œëŠ” ë°”ë€” ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ star agrsë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì½”ë“œ ìˆ˜ì • ì‹œ ì•„ë˜ì™€ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_log</span>(<span class="params">seq, mes, *val</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> val:</span><br><span class="line">        print(<span class="string">&#x27;%s: %s&#x27;</span>%(seq, mes))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        val_str = <span class="string">&#x27;, &#x27;</span>.join(<span class="built_in">str</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> val)</span><br><span class="line">        print(<span class="string">&#x27;%s: %s: %s&#x27;</span>%(seq, mes, val_str))</span><br><span class="line"></span><br><span class="line">get_log(<span class="number">1</span>, <span class="string">&#x27;My numbers are&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">get_log(<span class="string">&#x27;Hi there&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="number">1</span>: My numbers are: <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">Hi there: <span class="number">1</span>: <span class="number">2</span></span><br></pre></td></tr></table></figure><p>ì²« ë²ˆì§¸ í˜¸ì¶œê³¼ ë‘ ë²ˆì§¸ return ê°’ì´ ë‹¤ë¥¸ ì´ìœ ëŠ”, <code>mes</code>ë¥¼ ì„œë¡œ ë‹¤ë¥´ê²Œ(â€˜My numbers areâ€™, 1) ë°›ì•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŸ¬í•œ ë¬¸ì œê°€ ìƒê¸¸ ê°€ëŠ¥ì„±ì„ ì—†ì• ê¸° ìœ„í•´ì„œëŠ” *agrs ë¥¼ ë°›ëŠ” í•¨ìˆ˜ë¥¼ í™•ì¥í•  ë•Œ í‚¤ì›Œë“œ ì „ìš©(keyword-only) ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤. <strong>ì´ëŠ” Better Way 21</strong>ì—ì„œ ë‹¤ë£¨ë„ë¡ í•œë‹¤.</p><p><strong>Summary</strong></p><ul><li>*args ë¥¼ ì´ìš©í•´ í•¨ìˆ˜ì—ì„œ ê°€ë³€ ê°œìˆ˜ì˜ ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</li><li>*ê³¼ <code>generator</code>ë¥¼ í•¨ê»˜ ì‚¬ìš©í•œë‹¤ë©´ ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•  ìˆ˜ ìˆë‹¤</li><li>*args ë¥¼ ì´ìš©í•´ ë§Œë“  í•¨ìˆ˜ë¥¼ í™•ì¥í•  ë•Œ <code>ë²„ê·¸</code>ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤</li></ul><p>ì°¸ì¡° : (<a href="http://www.yes24.com/Product/goods/25138160">http://www.yes24.com/Product/goods/25138160</a>)</p><hr><p>2019.09.18 made by <em>jaejun.lee</em></p>]]></content:encoded>
      
      <comments>https://jx2lee.github.io/python-better_way_18/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
